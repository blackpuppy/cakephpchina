
<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Views" lang="zh_CN" name="title" />
<meta content="view logic,csv file,response elements,code elements,default extension,json,flash object,remote application,twig,subclass,ajax,reply,soap,functionality,cakephp,audience,xml,mvc" lang="zh_CN" name="keywords" />

    <title>视图 &mdash; CakePHP Cookbook 2.x 文档</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="_static/app.js"></script>
    <script type="text/javascript" src="_static/modernizr.foundation.js"></script>
    <script type="text/javascript" src="_static/foundation.js"></script>
    <link rel="top" title="CakePHP Cookbook 2.x 文档" href="index.html" />
    <link rel="next" title="主题" href="views/themes.html" />
    <link rel="prev" title="组件" href="controllers/components.html" />
<link href="_static/favicon.ico" type="image/x-icon" rel="icon" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="alternate" hreflang="en" href="../en/views.html" /><link rel="alternate" hreflang="pt" href="../pt/views.html" /><link rel="alternate" hreflang="es" href="../es/views.html" /><link rel="alternate" hreflang="ja" href="../ja/views.html" /><link rel="alternate" hreflang="fr" href="../fr/views.html" />

<link rel="search" type="application/opensearchdescription+xml" title="CakePHP Book 2.x Search" href="_static/opensearchdescription-book-2-x.xml">
<script type="text/javascript">
window.lang = "zh_CN";
</script>

  </head>
  <body>

<div id="container">

<div id="cakephp-global-navigation">
	<ul>
		<li class="main"><a href="http://cakephp.org">CakePHP</a></li>
		<li class="primary"><a href="#" class="empty">Downloads</a>
			<ul class="second-level">
				<li><a href="https://github.com/cakephp/cakephp/tags">Releases</a></li>
				<li><a href="http://pear.cakephp.org">Pear channel</a></li>
			</ul>
		</li>
		<li class="primary"><a href="#" class="empty">Documentation</a>
			<ul class="second-level">
				<li><a href="http://api.cakephp.org">API</a></li>
				<li><a href="http://book.cakephp.org">Book</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://community.cakephp.org">Community</a>
			<ul class="second-level">
				<li><a href="http://webchat.freenode.net/?channels=cakephp&uio=MT1mYWxzZSY5PXRydWUmMTE9MjQ2b8">Help &amp; Support</a></li>
				<li><a href="https://github.com/cakephp/cakephp/issues">Issues</a></li>
				<li><a href="http://bakery.cakephp.org">The Bakery</a></li>
				<li><a href="http://stackoverflow.com/tags/cakephp">Stack Overflow</a></li>
				<li><a href="http://www.facebook.com/groups/cake.community">Facebook Group</a></li>
				<li><a href="http://goo.gl/mSC0s">Google+ Community</a></li>
				<li><a href="http://www.youtube.com/user/CakePHP">YouTube Channel</a></li>
				<li><a href="http://podcast.cakephp.org">CakePHP Podcast</a></li>
				<li><a href="http://twitter.com/CakePHP">Follow us on Twitter</a></li>
				<li><a href="http://groups.google.com/group/cake-php">Google Group</a></li>
				<li><a href="http://github.com/cakephp/cakephp/contributors">Contributors</a></li>
				<li><a href="http://plugins.cakephp.org">Plugins &amp; Packages</a></li>
				<li><a href="http://community.cakephp.org/get-involved">Get Involved</a></li>
				<li><a href="http://community.cakephp.org/guidelines">Guidelines</a></li>
				<li><a href="http://cakefest.org">CakeFest</a></li>
				<li><a href="http://cakephp.org/logos">Logo</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://cakephp.org/services">Services</a>
			<ul class="second-level">
				<li><a href="http://cakephp.org/services/certification">Certification</a></li>
				<li><a href="http://cakephp.org/services/consultation">Consultation</a></li>
				<li><a href="http://cakephp.org/services/support">Support</a></li>
				<li><a href="http://training.cakephp.org">Training</a></li>
			</ul>
		</li>
	</ul>
</div>

<div class="masthead">
	<div class="header-backing"></div>
	<div class="searchbar row">
		<div class="columns three phone-one">
			<a class="logo" href="contents.html">
			<img src="_static/cake-logo.png" alt="CakePHP" width="70" />
			</a>
		</div>
		
<div id="searchbox" class="columns nine phone-three">

	<form id="searchform" class="search" action="search.html" method="get">
		<input class="search-input" autocomplete="off" type="search" name="q" size="18" />
		<input class="search-submit search-big button red" type="submit" value="搜索" />
		<input type="hidden" name="check_keywords" value="yes" />
		<input type="hidden" name="area" value="default" />

		<a href="#" id="tablet-nav" class="show-on-phones pale button small">Nav</a>
	</form>

</div>
	</div>
</div>
<div class="breadcrumb-header">
	<div class="related row">
		<div class="columns three root-link">
			<a href="contents.html">Cookbook 2.x</a>
		</div>
		<div class="columns nine">
			<ul class="inline breadcrumb">
			</ul>
			<div class="versions dropdown">
				<a href="#">2.x Book</a>
				<ul>
					<li><a href="http://book.cakephp.org/3.0/en">3.0 Book</a></li>
					<li><a href="http://book.cakephp.org/1.3/zh_CN/">1.3 Book</a></li>
					<li><a href="http://book.cakephp.org/1.2/zh_CN/">1.2 Book</a></li>
					<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
				</ul>
			</div>

			<div class="languages dropdown">
				<a href="#">zh_CN</a>

				<ul>
				
					<li><a href="../en/views.html">en</a></li>
				
					<li><a href="../pt/views.html">pt</a></li>
				
					<li><a href="../es/views.html">es</a></li>
				
					<li><a href="../ja/views.html">ja</a></li>
				
					<li><a href="../fr/views.html">fr</a></li>
				
					<li></li>
				
				</ul>
			</div>
		</div>
	</div>
</div>

<div class="content row">
	<div class="document columns nine push-three">
		<div class="body"><a class="button pale improve" href="https://github.com/cakephp/docs/edit/master/zh/views.rst" target="_blank">Improve this Doc</a>
  <div class="section" id="id1">
<h1>视图<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>视图(<em>View</em>)是 MVC 中的 <strong>V</strong>。视图负责生成请求要求的特定输出。经常这是用 HTML、
XML 或者 JSON 的形式，但提供文件流和创建 PDF 供用户下载也是视图层的责任。</p>
<p>CakePHP 带有一些内置的视图类，可以处理大多数常见的渲染情况：</p>
<ul class="simple">
<li>要创建 XML 或者 JSON 网络服务(<em>webservices</em>)，你可以使用
<a class="reference internal" href="views/json-and-xml-views.html"><em>JSON 和 XML 视图</em></a>。</li>
<li>要提供受保护的文件，或者动态生成文件，你可以使用 <a class="reference internal" href="controllers/request-response.html#cake-response-file"><em>发送文件</em></a>。</li>
<li>要创建多主题的视图，你可以使用 <a class="reference internal" href="views/themes.html"><em>主题</em></a>。</li>
</ul>
<div class="section" id="id2">
<h2>视图模板<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>CakePHP 的视图层是你和用户交流的方式。多数情况下，视图会显示 (X)HTML 文档给浏览器，
但你也可能会需要提供 AMF 数据给 Flash 对象，通过 SOAP 答复远程应用程序，或者输出
CSV 文件给用户。</p>
<p>缺省情况下 CakePHP 的视图文件是普通的 PHP 文件，并缺省以 .ctp (CakePHP Template)
为扩展名。这些文件包括所有的表现层逻辑，把它从控制器获得的数据，表现为你所服务的
受众需要的格式。如果你喜欢使用象 Twig 或 Smarty 这样的模板语言，视图的子类可以衔
接起你的模板语言和 CakePHP。</p>
<p>视图文件保存在 <tt class="docutils literal"><span class="pre">/app/View/</span></tt> 目录下，在一个以使用这些视图文件的控制器命名的目录
中，并以对应的动作为文件名。例如，Products 控制器的 &#8220;view()&#8221; 动作的视图文件，通常
应该会位于 <tt class="docutils literal"><span class="pre">/app/View/Products/view.ctp</span></tt> 。</p>
<p>CakePHP 的视图层可以由一些不同的部分组成。每部分有不同的用途，在本章中都会进行介
绍:</p>
<ul class="simple">
<li><strong>视图(view)</strong> ：视图是网页中对于运行的动作唯一的部分。这构成了你的应用程序响应
的主要内容。</li>
<li><strong>元素(elements)</strong> ：更小的、可重用的视图单元。元素通常在视图内渲染。</li>
<li><strong>布局(layouts)</strong> ：在应用程序中包含表现层代码、包裹很多界面的视图文件。大部分
视图在一个布局中渲染。</li>
<li><strong>助件(helper)</strong> ：这些类封装了在视图层许多地方需要的视图逻辑。CakePHP 的助件可
以帮助你创建表单，构建 AJAX 功能，对模型数据进行分页，或者提供 RSS 数据，以及其
它功能。</li>
</ul>
<div class="section" id="extending-views">
<span id="id3"></span><h3>扩展视图<a class="headerlink" href="#extending-views" title="永久链接至标题">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
<p>视图的扩展允许你在一个视图内包含另一个视图。把它与 <a class="reference internal" href="#view-blocks"><em>视图代码块</em></a>
结合，提供了一个强大的方式来保持你的视图 <a class="reference internal" href="appendices/glossary.html#term-dry"><em class="xref std std-term">DRY</em></a>。例如，你的应用程序有一个
<em>侧边栏(sidebar)</em> ，根据渲染的特定视图而变化。通过扩展一个共用的视图文件，你可以
避免重复侧边栏的共用标记，而只定义不同的部分：</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// app/View/Common/view.ctp</span>
<span class="x">&lt;h1&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/h1&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;div class=&quot;actions&quot;&gt;</span>
<span class="x">    &lt;h3&gt;Related actions&lt;/h3&gt;</span>
<span class="x">    &lt;ul&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;sidebar&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/ul&gt;</span>
<span class="x">&lt;/div&gt;</span>
</pre></div>
</div>
<p>上面的视图文件可以用作父视图。它需要扩展它的视图来定义 <tt class="docutils literal"><span class="pre">sidebar</span></tt> 和 <tt class="docutils literal"><span class="pre">title</span></tt>
代码块。<tt class="docutils literal"><span class="pre">content</span></tt> 代码块是个 CakePHP 创建的特殊代码块。它会包括所有子视图中未捕
获的内容。假设我们的视图文件有一个 <tt class="docutils literal"><span class="pre">$posts</span></tt> 变量，含有与我们的文章有关的数据。
我们的视图可以像这样:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="c1">// app/View/Posts/view.ctp</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">extend</span><span class="p">(</span><span class="s1">&#39;/Common/view&#39;</span><span class="p">);</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="nv">$post</span><span class="p">);</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">(</span><span class="s1">&#39;sidebar&#39;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;li&gt;</span>
<span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="s1">&#39;edit&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;edit&#39;</span><span class="p">,</span>
    <span class="nv">$post</span><span class="p">[</span><span class="s1">&#39;Post&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
<span class="p">));</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/li&gt;</span>
<span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">// 其余的内容会作为父视图中的 &#39;content&#39; 代码块。</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">h</span><span class="p">(</span><span class="nv">$post</span><span class="p">[</span><span class="s1">&#39;Post&#39;</span><span class="p">][</span><span class="s1">&#39;body&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>上面 <em>文章(post)</em> 的 view 视图说明如何扩展视图，以及填充一组代码块。任何不在一个
定义过的代码块内的内容，会被捕获并放入一个特殊的叫做 <tt class="docutils literal"><span class="pre">content</span></tt> 的代码块。当一个
视图含有对 <tt class="docutils literal"><span class="pre">extend()</span></tt> 的调用时，程序会继续执行到当前的视图文件结束。一旦执行完
成，扩展的视图就会被渲染。在一个视图文件中多次调用 <tt class="docutils literal"><span class="pre">extend()</span></tt> 会改变接下去要处
理的父视图:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">extend</span><span class="p">(</span><span class="s1">&#39;/Common/view&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">extend</span><span class="p">(</span><span class="s1">&#39;/Common/index&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>以上代码会导致 <tt class="docutils literal"><span class="pre">/Common/index.ctp</span></tt> 作为当前视图的父视图来渲染。</p>
<p>如果必要的话，你可以嵌套扩展视图任意多层。如果有必要，每个视图都可以扩展另一个视
图。每个父视图都会获得前一个视图的内容作为 <tt class="docutils literal"><span class="pre">content</span></tt> 代码块。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">你应当避免使用 <tt class="docutils literal"><span class="pre">content</span></tt> 作为应用程序中代码块的名字。CakePHP 把它用于扩展视
图中未捕获的内容。</p>
</div>
</div>
</div>
<div class="section" id="view-blocks">
<span id="id4"></span><h2>使用视图代码块<a class="headerlink" href="#view-blocks" title="永久链接至标题">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
<p>视图代码块代替了 <tt class="docutils literal"><span class="pre">$scripts_for_layout</span></tt>，并提供了一种灵活的 API，允许你在视图/
布局中引用在其它地方定义的代码段或代码块。例如，代码块很适合于实现侧边栏这样的东
西，或者位于布局底部/顶部加载内容的区域。代码块可以用两种方式定义，或者作为捕获
代码块，或者直接赋值。<tt class="docutils literal"><span class="pre">start()</span></tt> 、 <tt class="docutils literal"><span class="pre">append()</span></tt> 和 <tt class="docutils literal"><span class="pre">end()</span></tt> 方法可以用于捕获代
码块:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// 创建侧边栏代码块。</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">(</span><span class="s1">&#39;sidebar&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;sidebar/recent_topics&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;sidebar/recent_comments&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span>


<span class="c1">// 之后添加内容到侧边栏的末尾。</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">append</span><span class="p">(</span><span class="s1">&#39;sidebar&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;sidebar/popular_topics&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span>
</pre></div>
</div>
<p>你也可以用 <tt class="docutils literal"><span class="pre">start()</span></tt> 来多次添加内容到代码块之内。<tt class="docutils literal"><span class="pre">assign()</span></tt> 方法可以用来在任
何时候清除或者覆盖代码块:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// 清除侧边栏代码块之前的内容。</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s1">&#39;sidebar&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>在 2.3 版本中，添加了一些新的用于代码块的方法。<tt class="docutils literal"><span class="pre">prepend()</span></tt> 方法用于在一个现有代
码块的开头插入内容:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// 在侧边栏的开头插入内容</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">prepend</span><span class="p">(</span><span class="s1">&#39;sidebar&#39;</span><span class="p">,</span> <span class="s1">&#39;this content goes on top of sidebar&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">startIfEmpty()</span></tt> 方法可用于 <strong>只有</strong> 当一个代码块是空的或为未定义时才开始一个代
码块。如果该代码块已经存在，则当前捕获内容就会被抛弃。当你要有条件地定义一个代码
块当它尚未定义过时的缺省内容时，就有用了：</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// 在一个视图文件中。</span>
<span class="x">// 创建一个导航栏代码块</span>
<span class="x">$this-&gt;startIfEmpty(&#39;navbar&#39;);</span>
<span class="x">echo $this-&gt;element(&#39;navbar&#39;);</span>
<span class="x">echo $this-&gt;element(&#39;notifications&#39;);</span>
<span class="x">$this-&gt;end();</span>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// 在一个父视图/布局中</span>
<span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">startIfEmpty</span><span class="p">(</span><span class="s1">&#39;navbar&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;p&gt;If the block is not defined by now - show this instead&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">// 在一个父视图/布局中更靠后的地方</span>
<span class="x">echo $this-&gt;fetch(&#39;navbar&#39;);</span>
</pre></div>
</div>
<p>在上面的例子中， <tt class="docutils literal"><span class="pre">navbar</span></tt> 代码块只会包含第一部分中添加的内容。由于代码块在子视
图中定义，含有 <tt class="docutils literal"><span class="pre">&lt;p&gt;</span></tt> 标签的缺省内容就会被舍弃。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">你应当避免使用 <tt class="docutils literal"><span class="pre">content</span></tt> 作为代码块的名称。这被 CakePHP 内部用于扩展视图以
及布局中的视图内容。</p>
</div>
<div class="section" id="id5">
<h3>显示代码块<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
<p>你可以用 <tt class="docutils literal"><span class="pre">fetch()</span></tt> 方法显示代码块。<tt class="docutils literal"><span class="pre">fetch()</span></tt> 方法会安全地输出一个代码块，而在
代码块不存在时返回 &#8216;&#8217;:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;sidebar&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>你也可以用 <tt class="docutils literal"><span class="pre">fetch()</span></tt> 在只有当代码块存在时显示包围在它周围的内容。在布局或扩展视
图中，当你要根据条件来显示标题或者其它内容，这就会有用了:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// 在 app/View/Layouts/default.ctp 中</span>
<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;menu&#39;</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;div class=&quot;menu&quot;&gt;</span>
<span class="x">    &lt;h3&gt;Menu options&lt;/h3&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;menu&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/div&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<p>在 2.3.0 版本中，你可以为代码块提供当它没有任何内容时的缺省值。这让你可以容易地添
加空状态时的占位内容。你可以用第二个参数提供缺省值:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">&lt;div class=&quot;shopping-cart&quot;&gt;</span>
<span class="x">    &lt;h3&gt;你的购物车&lt;/h3&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;cart&#39;</span><span class="p">,</span> <span class="s1">&#39;你的购物车为空&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/div&gt;</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">在 2.3 版更改: </span><tt class="docutils literal"><span class="pre">$default</span></tt> 参数在 2.3 版本中添加。</p>
</div>
</div>
<div class="section" id="css">
<h3>代码块用于脚本和 CSS 文件<a class="headerlink" href="#css" title="永久链接至标题">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
<p>代码块取代了作废的 <tt class="docutils literal"><span class="pre">$scripts_for_layout</span></tt> 布局变量。你应当使用代码块。
<a class="reference internal" href="core-libraries/helpers/html.html#HtmlHelper" title="HtmlHelper"><tt class="xref php php-class docutils literal"><span class="pre">HtmlHelper</span></tt></a> 与视图代码块紧密结合，它的
<a class="reference internal" href="core-libraries/helpers/html.html#HtmlHelper::script" title="HtmlHelper::script"><tt class="xref php php-meth docutils literal"><span class="pre">script()</span></tt></a> 、 <a class="reference internal" href="core-libraries/helpers/html.html#HtmlHelper::css" title="HtmlHelper::css"><tt class="xref php php-meth docutils literal"><span class="pre">css()</span></tt></a> 和
<a class="reference internal" href="core-libraries/helpers/html.html#HtmlHelper::meta" title="HtmlHelper::meta"><tt class="xref php php-meth docutils literal"><span class="pre">meta()</span></tt></a> 方法，当使用 <tt class="docutils literal"><span class="pre">inline</span> <span class="pre">=</span> <span class="pre">false</span></tt> 选项时，会更新各
自对应名称的代码块：</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="c1">// 在你的视图文件中</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">script</span><span class="p">(</span><span class="s1">&#39;carousel&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;inline&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">));</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">css</span><span class="p">(</span><span class="s1">&#39;carousel&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;inline&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">));</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="x">// 在你的布局文件中。</span>
<span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html lang=&quot;en&quot;&gt;</span>
<span class="x">    &lt;head&gt;</span>
<span class="x">    &lt;title&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/title&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;css&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/head&gt;</span>
<span class="x">    // 后面是布局的其余部分</span>
</pre></div>
</div>
<p><a class="reference internal" href="core-libraries/helpers/html.html#HtmlHelper" title="HtmlHelper"><tt class="xref php php-meth docutils literal"><span class="pre">HtmlHelper</span></tt></a> 也让你控制脚本(<em>script</em>)和 CSS 会出现在哪个代码块中:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// 在你的视图中</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">script</span><span class="p">(</span><span class="s1">&#39;carousel&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;block&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;scriptBottom&#39;</span><span class="p">));</span>

<span class="c1">// 在你的布局中</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;scriptBottom&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="view-layouts">
<span id="id6"></span><h2>布局<a class="headerlink" href="#view-layouts" title="永久链接至标题">¶</a></h2>
<p>布局含有包裹视图的表现层代码。任何你想要在所有视图中出现的东西，应该放在布局中。</p>
<p>CakePHP 的缺省布局位于 <tt class="docutils literal"><span class="pre">/app/View/Layouts/default.ctp</span></tt>。如果你想改变应用程序的
整体外观，那么正确的地方就应该从这里开始，因为当页面渲染时，控制器渲染的视图代码
就会放在缺省的布局里面。</p>
<p>其它的布局文件应当放在 <tt class="docutils literal"><span class="pre">/app/View/Layouts</span></tt> 目录内。当你创建一个布局时，你需要
告诉 CakePHP 视图的输出要放在哪里。为此，确保你的布局有一处包括
<tt class="docutils literal"><span class="pre">$this-&gt;fetch('content')</span></tt> 。一个缺省布局的例子可能是下面这样的：</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html lang=&quot;en&quot;&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;title&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/title&gt;</span>
<span class="x">&lt;link rel=&quot;shortcut icon&quot; href=&quot;favicon.ico&quot; type=&quot;image/x-icon&quot;&gt;</span>
<span class="x">&lt;!-- 在这里引入外部文件和脚本(欲知更多信息，请参见 HTML 助件) --&gt;</span>
<span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;meta&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;css&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;!-- 如果你要某种菜单出现在你所有的视图中，在这里引入。 --&gt;</span>
<span class="x">&lt;div id=&quot;header&quot;&gt;</span>
<span class="x">    &lt;div id=&quot;menu&quot;&gt;...&lt;/div&gt;</span>
<span class="x">&lt;/div&gt;</span>

<span class="x">&lt;!-- 这里显示我的视图 --&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;!-- 为每个显示的页面添加底边栏。 --&gt;</span>
<span class="x">&lt;div id=&quot;footer&quot;&gt;...&lt;/div&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">在 2.1 版本之前，没有 fetch() 方法。 <tt class="docutils literal"><span class="pre">fetch('content')</span></tt> 代替了
<tt class="docutils literal"><span class="pre">$content_for_layout</span></tt> ， <tt class="docutils literal"><span class="pre">fetch('meta')</span></tt> 、<tt class="docutils literal"><span class="pre">fetch('css')</span></tt> 和
<tt class="docutils literal"><span class="pre">fetch('script')</span></tt> (所生成的行)包含在 2.0 版本的 <tt class="docutils literal"><span class="pre">$scripts_for_layout</span></tt> 变
量中。</p>
</div>
<p><tt class="docutils literal"><span class="pre">script</span></tt> 、 <tt class="docutils literal"><span class="pre">css</span></tt> 和 <tt class="docutils literal"><span class="pre">meta</span></tt> 代码块包含任何在视图中用内置的 HTML 助件定义的
内容。这可用于从视图中引入 javascript 和 CSS 文件。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">在视图文件中使用 <a class="reference internal" href="core-libraries/helpers/html.html#HtmlHelper::css" title="HtmlHelper::css"><tt class="xref php php-meth docutils literal"><span class="pre">HtmlHelper::css()</span></tt></a> 和
<a class="reference internal" href="core-libraries/helpers/html.html#HtmlHelper::script" title="HtmlHelper::script"><tt class="xref php php-meth docutils literal"><span class="pre">HtmlHelper::script()</span></tt></a> 时，对 &#8216;inline&#8217; 选项指定 &#8216;false&#8217;，就可以把
html 源代码放入同名的代码块中了。(欲知用法的更多细节，请参看 API。)</p>
</div>
<p><tt class="docutils literal"><span class="pre">content</span></tt> 代码块含有渲染的视图的内容。</p>
<p><tt class="docutils literal"><span class="pre">$title_for_layout</span></tt> 含有页面的标题。这个变量是自动生成的，不过你可以通过在控制
器/视图中给它赋值来覆盖它。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last"><tt class="docutils literal"><span class="pre">$title_for_layout</span></tt> 在 2.5 版本中已经作废，请在布局中使用
<tt class="docutils literal"><span class="pre">$this-&gt;fetch('title')</span></tt> 以及 <tt class="docutils literal"><span class="pre">$this-&gt;assign('title',</span> <span class="pre">'page</span> <span class="pre">title')</span></tt> 来代
替。</p>
</div>
<p>设置布局的标题，最容易的方法是在控制器中设置 <tt class="docutils literal"><span class="pre">$title_for_layout</span></tt> 变量:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UsersController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">view_active</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;title_for_layout&#39;</span><span class="p">,</span> <span class="s1">&#39;View Active Users&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>你也可以在视图文件中设置 title_for_layout 变量:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;title_for_layout&#39;</span><span class="p">,</span> <span class="nv">$titleContent</span><span class="p">);</span>
</pre></div>
</div>
<p>你可以想要多少布局，就创建多少：只需把它们放在 <tt class="docutils literal"><span class="pre">app/View/Layouts</span></tt> 目录中，并在
控制器动作中用控制器或者视图的 <a class="reference internal" href="#View::$layout" title="View::$layout"><tt class="xref php php-attr docutils literal"><span class="pre">$layout</span></tt></a> 属性来切换布局:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// 从一个控制器</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">admin_view</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 代码</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">layout</span> <span class="o">=</span> <span class="s1">&#39;admin&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 从一个视图文件</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">layout</span> <span class="o">=</span> <span class="s1">&#39;loggedin&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>例如，如果我的网站的一个地方包含一小块广告栏(ad banner)，我也许会建一个新的含有小
块广告位置的布局，并指定它为所有控制器动作的布局，象下面这样:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UsersController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">view_active</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;title_for_layout&#39;</span><span class="p">,</span> <span class="s1">&#39;View Active Users&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">layout</span> <span class="o">=</span> <span class="s1">&#39;default_small_ad&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">view_image</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">layout</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">;</span>
        <span class="c1">// 输出用户图像</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>CakePHP 有两个核心的布局(除了 CakePHP 的缺省布局)，供你在你自己的应用程序中使用：
&#8216;ajax&#8217; 和 &#8216;flash&#8217;。Ajax 布局对生成 AJAX 响应很方便——这是一个空的布局。(绝大部分
AJAX 调用在返回值中只需要一点儿标记，而不是一个完整渲染的界面。) flash 布局用于
<a class="reference internal" href="controllers.html#Controller::flash" title="Controller::flash"><tt class="xref php php-meth docutils literal"><span class="pre">Controller::flash()</span></tt></a> 方法显示的消息。</p>
<p>其它三个核心中的布局，xml、js 和 rss，以快速简便的方式提供非 text/html 的内容。</p>
<div class="section" id="id7">
<h3>使用插件中的布局<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
<p>如果你要用存在于插件中的布局，你可以使用 <a class="reference internal" href="appendices/glossary.html#term-plugin-syntax"><em class="xref std std-term">plugin syntax</em></a> 。比如要用
Contacts 插件中的 contact 布局:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UsersController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">view_active</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">layout</span> <span class="o">=</span> <span class="s1">&#39;Contacts.contact&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="view-elements">
<span id="id8"></span><h2>元素<a class="headerlink" href="#view-elements" title="永久链接至标题">¶</a></h2>
<p>许多应用程序有小段的表现层代码，要在不同页面重复使用，有时要在布局的不同地方重复
使用。CakePHP 能够帮助你重复使用网站中要重用的部分。这些可重用的部分叫元素
(<em>element</em>)。广告、帮助框、导航控件、额外的菜单、登录表单和 callout 在 CakePHP
中经常用元素实现。元素基本上是一个微型视图，可以被引入到其它视图、布局甚至其它元
素中。元素的运用可使视图的可读性更好，把重复元素的渲染放入它们自己的文件中。它们
也可以帮助你重用应用程序中的内容片段。</p>
<p>元素存在于 <tt class="docutils literal"><span class="pre">/app/View/Elements/</span></tt> 目录中，并以 .ctp 为文件扩展名。它们用视图的
element 方法来输出:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;helpbox&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="id9">
<h3>给元素传入参数<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h3>
<p>你可以通过 element 方法的第二个参数给元素传入数据:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;helpbox&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s2">&quot;helptext&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Oh, this text is very helpful.&quot;</span>
<span class="p">));</span>
</pre></div>
</div>
<p>在元素文件中，所有传入的参数可用参数数组成员来获得(和控制器中使用
<a class="reference internal" href="controllers.html#Controller::set" title="Controller::set"><tt class="xref php php-meth docutils literal"><span class="pre">Controller::set()</span></tt></a> 方法为视图文件设置参数的方式相同)。在上述例子中，
<tt class="docutils literal"><span class="pre">/app/View/Elements/helpbox.ctp</span></tt> 文件可使用 <tt class="docutils literal"><span class="pre">$helptext</span></tt> 变量:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// 在 app/View/Elements/helpbox.ctp 中</span>
<span class="k">echo</span> <span class="nv">$helptext</span><span class="p">;</span> <span class="c1">// 输出为 &quot;Oh, this text is very helpful.&quot;</span>
</pre></div>
</div>
<p><a class="reference internal" href="#View::element" title="View::element"><tt class="xref php php-meth docutils literal"><span class="pre">View::element()</span></tt></a> 方法也支持元素的配置选项。支持的选项为 &#8216;cache&#8217; 和
&#8216;callbacks&#8217; 。例如:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;helpbox&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s2">&quot;helptext&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;This is passed to the element as </span><span class="si">$helptext</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;foobar&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;This is passed to the element as </span><span class="si">$foobar</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="c1">// 使用&quot;long_view&quot;缓存配置</span>
        <span class="s2">&quot;cache&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;long_view&quot;</span><span class="p">,</span>
        <span class="c1">// 置为 true， 让元素的 before/afterRender 回调被调用</span>
        <span class="s2">&quot;callbacks&quot;</span> <span class="o">=&gt;</span> <span class="k">true</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>元素的缓存通过 <a class="reference internal" href="core-libraries/caching.html#Cache" title="Cache"><tt class="xref php php-class docutils literal"><span class="pre">Cache</span></tt></a> 类来进行。你可以设置元素保存于任何你设置好的缓
存配置。这给予你极大的灵活性，来决定元素保存在哪里，以及保存多长时间。要在一个应
用程序中缓存同一元素的不同版本，请用下面的格式提供一个唯一的缓存键值:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;helpbox&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(),</span> <span class="k">array</span><span class="p">(</span>
        <span class="s2">&quot;cache&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;config&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;short&#39;</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;unique value&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>你可以用 <tt class="docutils literal"><span class="pre">requestAction()</span></tt> 方法来充分利用元素。<tt class="docutils literal"><span class="pre">requestAction()</span></tt> 方法从控制器
动作获取视图变量，再以数组返回。这让你的元素能够以真正的 MVC 方式运作。创建一个控
制器动作来为你的元素准备视图变量，然后在 <tt class="docutils literal"><span class="pre">element()</span></tt> 的第二个参数中调用
<tt class="docutils literal"><span class="pre">requestAction()</span></tt> ，就可以从控制器给元素提供视图变量。</p>
<p>为此，在文章(<em>Post</em>)的例子中，在你的控制器中添加下面这样的代码:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$posts</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">is</span><span class="p">(</span><span class="s1">&#39;requested&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$posts</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="nv">$posts</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>然后在元素中我们就可以访问分页的 posts 模型了。要得到最近的五篇文章(<em>post</em>)的有序
队列，我们可以这样做:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">&lt;h2&gt;Latest Posts&lt;/h2&gt;</span>
<span class="cp">&lt;?php</span>
  <span class="nv">$posts</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">requestAction</span><span class="p">(</span>
    <span class="s1">&#39;posts/index/sort:created/direction:asc/limit:5&#39;</span>
  <span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;ol&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$posts</span> <span class="k">as</span> <span class="nv">$post</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">      &lt;li&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$post</span><span class="p">[</span><span class="s1">&#39;Post&#39;</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">];</span> <span class="cp">?&gt;</span><span class="x">&lt;/li&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/ol&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h3>对元素进行缓存<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h3>
<p>如果你提供一个 cache 参数，你就可以利用 CakePHP 的视图缓存。如果设为 true，元素就
会被缓存在 &#8216;default&#8217; 缓存配置中。否则，你可设置应该使用哪个缓存配置。欲知更多配置
<a class="reference internal" href="core-libraries/caching.html#Cache" title="Cache"><tt class="xref php php-class docutils literal"><span class="pre">Cache</span></tt></a> 的信息，请参看 <a class="reference internal" href="core-libraries/caching.html"><em>缓存</em></a>。下面是缓存元素
的一个简单例子:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;helpbox&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(),</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;cache&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">));</span>
</pre></div>
</div>
<p>如果你在同一个视图中多次渲染同样的元素，并启用了缓存，记得每次把 &#8216;key&#8217; 参数设置为
不同名字。这样就可以防止每次后续的调用覆盖前一次元素调用的缓存结果。例如:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span>
    <span class="s1">&#39;helpbox&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;var&#39;</span> <span class="o">=&gt;</span> <span class="nv">$var</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;cache&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;key&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;first_use&#39;</span><span class="p">,</span> <span class="s1">&#39;config&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view_long&#39;</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span>
    <span class="s1">&#39;helpbox&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;var&#39;</span> <span class="o">=&gt;</span> <span class="nv">$differenVar</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;cache&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;key&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;second_use&#39;</span><span class="p">,</span> <span class="s1">&#39;config&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view_long&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>这样就会确保两次元素调用的结果被分别缓存。如果你要所有的元素缓存使用相同的缓存配
置，你可以省去一些重复，只需把 <a class="reference internal" href="#View::$elementCache" title="View::$elementCache"><tt class="xref php php-attr docutils literal"><span class="pre">View::$elementCache</span></tt></a> 设置为你要使用的缓
存配置。如果没有指定配置，CakePHP 就会使用这个配置。</p>
</div>
<div class="section" id="id11">
<h3>请求插件中的元素<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="id12">
<h3>2.0<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h3>
<p>要加载插件中的元素，使用 <cite>plugin</cite> 选项(已从 1.x 版本中的 <cite>data</cite> 选项中移出):</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;helpbox&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(),</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;plugin&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Contacts&#39;</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="id13">
<h3>2.1<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h3>
<p>如果你使用插件，并且使用插件中的元素，只需使用熟悉的 <a class="reference internal" href="appendices/glossary.html#term-plugin-syntax"><em class="xref std std-term">plugin syntax</em></a>。如果
视图是为插件中的控制器/动作而渲染，使用的所有元素都会自动添加插件名称为其前缀，除
非已有了另一个插件名称。如果元素不在插件内，就会在主 APP 目录内查找。</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;Contacts.helpbox&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>如果你的视图是插件的一部分，你可以省略插件名称。例如，如果你在 Contacts 插件的
<tt class="docutils literal"><span class="pre">ContactsController</span></tt> 中，下面的:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;helpbox&#39;</span><span class="p">);</span>
<span class="c1">// 和</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;Contacts.helpbox&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>是一样的，会导致同一个元素被渲染。</p>
<div class="versionchanged">
<p><span class="versionmodified">在 2.1 版更改: </span><tt class="docutils literal"><span class="pre">$options[plugin]</span></tt> 选项被废弃，增加了对 <tt class="docutils literal"><span class="pre">Plugin.element</span></tt> 的支持。</p>
</div>
</div>
</div>
<div class="section" id="id14">
<h2>创建你自己的视图类<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h2>
<p>你也许会需要创建定制的视图类，以用于新的数据视图，或者为应用程序增加额外的定制视
图渲染逻辑。象 CakePHP 的大部分组成部件一样，视图类也有一些约定:</p>
<ul class="simple">
<li>视图类应当放在 <tt class="docutils literal"><span class="pre">App/View</span></tt> 目录中。例如 <tt class="docutils literal"><span class="pre">App/View/PdfView.php</span></tt>。</li>
<li>视图类应当以 <tt class="docutils literal"><span class="pre">View</span></tt> 为后缀。例如 <tt class="docutils literal"><span class="pre">PdfView</span></tt>。</li>
<li>当引用视图类名称时，你应当省略 <tt class="docutils literal"><span class="pre">View</span></tt> 后缀。例如
<tt class="docutils literal"><span class="pre">$this-&gt;viewClass</span> <span class="pre">=</span> <span class="pre">'Pdf';</span></tt>。</li>
</ul>
<p>为使其正常工作，你应当扩展 <tt class="docutils literal"><span class="pre">View</span></tt>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// 在 App/View/PdfView.php 中</span>

<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;View&#39;</span><span class="p">,</span> <span class="s1">&#39;View&#39;</span><span class="p">);</span>
<span class="k">class</span> <span class="nc">PdfView</span> <span class="k">extends</span> <span class="nx">View</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">render</span><span class="p">(</span><span class="nv">$view</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$layout</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 这里为定制逻辑。</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>替换 render 方法让你能够完全控制内容是如何渲染的。</p>
</div>
<div class="section" id="api">
<h2>视图 API<a class="headerlink" href="#api" title="永久链接至标题">¶</a></h2>
<dl class="class">
<dt id="View">
<em class="property">class </em><tt class="descname">View</tt><a class="headerlink" href="#View" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p>视图方法在所有视图、元素和布局文件中都可使用。要调用任何视图方法，使用
<tt class="docutils literal"><span class="pre">$this-&gt;method()</span></tt>。</p>
<dl class="method">
<dt id="View::set">
<tt class="descclassname">View::</tt><tt class="descname">set</tt><big>(</big><em>string $var</em>, <em>mixed $value</em><big>)</big><a class="headerlink" href="#View::set" title="永久链接至目标">¶</a></dt>
<dd><p>视图也有 <tt class="docutils literal"><span class="pre">set()</span></tt> 方法，就像控制器对象的 <tt class="docutils literal"><span class="pre">set()</span></tt> 方法类似。在你的视图文件
中使用 set() 方法，会添加变量到以后渲染的布局和元素中。欲知关于使用 set() 的
更多信息，请看 <a class="reference internal" href="controllers.html#controller-methods"><em>控制器方法</em></a>。</p>
<p>在你的视图文件中你可以:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;activeMenuButton&#39;</span><span class="p">,</span> <span class="s1">&#39;posts&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>然后在你的布局中，变量 <tt class="docutils literal"><span class="pre">$activeMenuButton</span></tt> 就可以使用，并含有值 &#8216;posts&#8217;。</p>
</dd></dl>

<dl class="method">
<dt id="View::get">
<tt class="descclassname">View::</tt><tt class="descname">get</tt><big>(</big><em>string $var</em>, <em>$default = null</em><big>)</big><a class="headerlink" href="#View::get" title="永久链接至目标">¶</a></dt>
<dd><p>获得以 <tt class="docutils literal"><span class="pre">$var</span></tt> 命名的视图变量的值。</p>
<p>在 2.5 版本中，你可以提供一个缺省值，以备变量尚未设置之需。</p>
<div class="versionchanged">
<p><span class="versionmodified">在 2.5 版更改: </span><tt class="docutils literal"><span class="pre">$default</span></tt> 参数是在 2.5 版本中增加的。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="View::getVar">
<tt class="descclassname">View::</tt><tt class="descname">getVar</tt><big>(</big><em>string $var</em><big>)</big><a class="headerlink" href="#View::getVar" title="永久链接至目标">¶</a></dt>
<dd><p>获得以 <tt class="docutils literal"><span class="pre">$var</span></tt> 命名的视图变量的值。</p>
<div class="deprecated">
<p><span class="versionmodified">2.3 版后已移除: </span>请使用 <a class="reference internal" href="#View::get" title="View::get"><tt class="xref php php-meth docutils literal"><span class="pre">View::get()</span></tt></a> 代替。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="View::getVars">
<tt class="descclassname">View::</tt><tt class="descname">getVars</tt><big>(</big><big>)</big><a class="headerlink" href="#View::getVars" title="永久链接至目标">¶</a></dt>
<dd><p>获得当前渲染作用域范围内所有可以使用的视图变量的列表，返回变量名称的数组。</p>
</dd></dl>

<dl class="method">
<dt id="View::element">
<tt class="descclassname">View::</tt><tt class="descname">element</tt><big>(</big><em>string $elementPath</em>, <em>array $data</em>, <em>array $options = array()</em><big>)</big><a class="headerlink" href="#View::element" title="永久链接至目标">¶</a></dt>
<dd><p>渲染一个元素或视图片段。欲知更多信息和例子，请参看 <a class="reference internal" href="#view-elements"><em>元素</em></a> 一节。</p>
</dd></dl>

<dl class="method">
<dt id="View::uuid">
<tt class="descclassname">View::</tt><tt class="descname">uuid</tt><big>(</big><em>string $object</em>, <em>mixed $url</em><big>)</big><a class="headerlink" href="#View::uuid" title="永久链接至目标">¶</a></dt>
<dd><p>基于对象的类型和网址，为该对象生成一个唯一的、非随机的 DOM ID。这个方法经常被
象 <a class="reference internal" href="core-libraries/helpers/js.html#JsHelper" title="JsHelper"><tt class="xref php php-class docutils literal"><span class="pre">JsHelper</span></tt></a> 这样需要为 HTML 元素生成唯一的 DOM ID 的助件所使用:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nv">$uuid</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">uuid</span><span class="p">(</span>
  <span class="s1">&#39;form&#39;</span><span class="p">,</span>
  <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="p">);</span>
<span class="c1">// $uuid 含有 &#39;form0425fe3bad&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="View::addScript">
<tt class="descclassname">View::</tt><tt class="descname">addScript</tt><big>(</big><em>string $name</em>, <em>string $content</em><big>)</big><a class="headerlink" href="#View::addScript" title="永久链接至目标">¶</a></dt>
<dd><p>添加内容到内部的脚本缓冲区。这个缓冲区可在布局中用 <tt class="docutils literal"><span class="pre">$scripts_for_layout</span></tt> 来
访问。这个方法在创建需要直接向布局添加 javascript 或者 css 的助件时，会有用。
切记，从布局或布局中的元素添加的脚本，不会被加到 <tt class="docutils literal"><span class="pre">$scripts_for_layout</span></tt> 中。
这个方法最常用在助件内，比如 <a class="reference internal" href="core-libraries/helpers/js.html"><em>JsHelper</em></a> 和
<a class="reference internal" href="core-libraries/helpers/html.html"><em>HtmlHelper</em></a> 助件。</p>
<div class="deprecated">
<p><span class="versionmodified">2.1 版后已移除: </span>请不要再用，而是使用 <a class="reference internal" href="#view-blocks"><em>使用视图代码块</em></a>。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="View::blocks">
<tt class="descclassname">View::</tt><tt class="descname">blocks</tt><big>(</big><big>)</big><a class="headerlink" href="#View::blocks" title="永久链接至目标">¶</a></dt>
<dd><p>获得以一个数组表示的所有定义的代码块的名称。</p>
</dd></dl>

<dl class="method">
<dt id="View::start">
<tt class="descclassname">View::</tt><tt class="descname">start</tt><big>(</big><em>$name</em><big>)</big><a class="headerlink" href="#View::start" title="永久链接至目标">¶</a></dt>
<dd><p>开始视图代码块的捕获块。例子参见 <a class="reference internal" href="#view-blocks"><em>使用视图代码块</em></a> 一节。</p>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="View::end">
<tt class="descclassname">View::</tt><tt class="descname">end</tt><big>(</big><big>)</big><a class="headerlink" href="#View::end" title="永久链接至目标">¶</a></dt>
<dd><p>结束最近开始的捕获块。例子参见 <a class="reference internal" href="#view-blocks"><em>使用视图代码块</em></a> 一节。</p>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="View::append">
<tt class="descclassname">View::</tt><tt class="descname">append</tt><big>(</big><em>$name</em>, <em>$content</em><big>)</big><a class="headerlink" href="#View::append" title="永久链接至目标">¶</a></dt>
<dd><p>附加在以 <tt class="docutils literal"><span class="pre">$name</span></tt> 命名的代码块末尾。例子参见 <a class="reference internal" href="#view-blocks"><em>使用视图代码块</em></a> 一节。</p>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="View::prepend">
<tt class="descclassname">View::</tt><tt class="descname">prepend</tt><big>(</big><em>$name</em>, <em>$content</em><big>)</big><a class="headerlink" href="#View::prepend" title="永久链接至目标">¶</a></dt>
<dd><p>添加到以 <tt class="docutils literal"><span class="pre">$name</span></tt> 命名的代码块的开头。例子参见 <a class="reference internal" href="#view-blocks"><em>使用视图代码块</em></a> 一节。</p>
<div class="versionadded">
<p><span class="versionmodified">2.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="View::startIfEmpty">
<tt class="descclassname">View::</tt><tt class="descname">startIfEmpty</tt><big>(</big><em>$name</em><big>)</big><a class="headerlink" href="#View::startIfEmpty" title="永久链接至目标">¶</a></dt>
<dd><p>只有当一个代码块为空时，才开始这个代码块。若该代码块已经定义，则该代码块(在这
里定义的)的全部内容会被捕获并舍弃。</p>
<div class="versionadded">
<p><span class="versionmodified">2.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="View::assign">
<tt class="descclassname">View::</tt><tt class="descname">assign</tt><big>(</big><em>$name</em>, <em>$content</em><big>)</big><a class="headerlink" href="#View::assign" title="永久链接至目标">¶</a></dt>
<dd><p>给一个代码块赋值。这会覆盖任何现存内容。例子参见 <a class="reference internal" href="#view-blocks"><em>使用视图代码块</em></a> 一节。</p>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="View::fetch">
<tt class="descclassname">View::</tt><tt class="descname">fetch</tt><big>(</big><em>$name</em>, <em>$default = ''</em><big>)</big><a class="headerlink" href="#View::fetch" title="永久链接至目标">¶</a></dt>
<dd><p>取得代码块的值。如果代码块为空或未定义，则会返回 &#8216;&#8217;。例子参见
<a class="reference internal" href="#view-blocks"><em>使用视图代码块</em></a> 一节。</p>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="View::extend">
<tt class="descclassname">View::</tt><tt class="descname">extend</tt><big>(</big><em>$name</em><big>)</big><a class="headerlink" href="#View::extend" title="永久链接至目标">¶</a></dt>
<dd><p>用命名的视图/元素/布局扩展当前的视图/元素/布局。例子参见
<a class="reference internal" href="#extending-views"><em>扩展视图</em></a> 一节。</p>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
</dd></dl>

<dl class="attr">
<dt id="View::$layout">
<em class="property">property </em><tt class="descclassname">View::$</tt><tt class="descname">layout</tt><a class="headerlink" href="#View::$layout" title="永久链接至目标">¶</a></dt>
<dd><p>设置用来包含当前视图的布局。</p>
</dd></dl>

<dl class="attr">
<dt id="View::$elementCache">
<em class="property">property </em><tt class="descclassname">View::$</tt><tt class="descname">elementCache</tt><a class="headerlink" href="#View::$elementCache" title="永久链接至目标">¶</a></dt>
<dd><p>用来缓存元素的缓存配置。设置该属性会改变用来缓存元素的缺省配置。缺省的(缓存配
置)可以在 element 方法中用 &#8216;cache&#8217; 选项来改变。</p>
</dd></dl>

<dl class="attr">
<dt id="View::$request">
<em class="property">property </em><tt class="descclassname">View::$</tt><tt class="descname">request</tt><a class="headerlink" href="#View::$request" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="controllers/request-response.html#CakeRequest" title="CakeRequest"><tt class="xref php php-class docutils literal"><span class="pre">CakeRequest</span></tt></a> 的一个实例。用这个实例来获取当前请求的信息。</p>
</dd></dl>

<dl class="attr">
<dt id="View::$output">
<em class="property">property </em><tt class="descclassname">View::$</tt><tt class="descname">output</tt><a class="headerlink" href="#View::$output" title="永久链接至目标">¶</a></dt>
<dd><p>包含一个视图之前的渲染内容，这或者是视图文件，或者是布局内容。</p>
<div class="deprecated">
<p><span class="versionmodified">2.1 版后已移除: </span>请不要再用，而是使用 <tt class="docutils literal"><span class="pre">$view-&gt;Blocks-&gt;get('content');</span></tt>。</p>
</div>
</dd></dl>

<dl class="attr">
<dt id="View::$Blocks">
<em class="property">property </em><tt class="descclassname">View::$</tt><tt class="descname">Blocks</tt><a class="headerlink" href="#View::$Blocks" title="永久链接至目标">¶</a></dt>
<dd><p><tt class="xref php php-class docutils literal"><span class="pre">ViewBlock</span></tt> 的实例。在视图渲染中用来提供视图代码块功能。</p>
<div class="versionadded">
<p><span class="versionmodified">2.1 新版功能.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="id15">
<h2>关于视图的更多内容<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="views/themes.html">主题</a></li>
<li class="toctree-l1"><a class="reference internal" href="views/media-view.html">媒体视图</a></li>
<li class="toctree-l1"><a class="reference internal" href="views/json-and-xml-views.html">JSON 和 XML 视图</a></li>
<li class="toctree-l1"><a class="reference internal" href="views/helpers.html">助件</a></li>
</ul>
</div>
</div>
</div>


		</div>
	</div>

	<div class="sidebar columns three pull-nine">
<div id="sidebar-navigation" class="hide-on-phones">
	<h2 class="hide-on-desktops">Table of Contents</h2>
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">欢迎</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="cakephp-overview.html">CakePHP 概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers.html">控制器</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">视图</a><ul>
<li class="toctree-l2"><a class="reference internal" href="views/themes.html">主题</a></li>
<li class="toctree-l2"><a class="reference internal" href="views/media-view.html">媒体视图</a></li>
<li class="toctree-l2"><a class="reference internal" href="views/json-and-xml-views.html">JSON 和 XML 视图</a></li>
<li class="toctree-l2"><a class="reference internal" href="views/helpers.html">助件</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="models.html">模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries.html">核心库</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">插件</a></li>
<li class="toctree-l1"><a class="reference internal" href="console-and-shells.html">命令行与Shells</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">部署</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials-and-examples.html">教程 &amp; 实例</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices.html">Appendices</a></li>
</ul>

</div>

<div class="page-contents">
	<h3>Page contents</h3>
	<ul>
<li><a class="reference internal" href="#">视图</a><ul>
<li><a class="reference internal" href="#id2">视图模板</a><ul>
<li><a class="reference internal" href="#extending-views">扩展视图</a></li>
</ul>
</li>
<li><a class="reference internal" href="#view-blocks">使用视图代码块</a><ul>
<li><a class="reference internal" href="#id5">显示代码块</a></li>
<li><a class="reference internal" href="#css">代码块用于脚本和 CSS 文件</a></li>
</ul>
</li>
<li><a class="reference internal" href="#view-layouts">布局</a><ul>
<li><a class="reference internal" href="#id7">使用插件中的布局</a></li>
</ul>
</li>
<li><a class="reference internal" href="#view-elements">元素</a><ul>
<li><a class="reference internal" href="#id9">给元素传入参数</a></li>
<li><a class="reference internal" href="#id10">对元素进行缓存</a></li>
<li><a class="reference internal" href="#id11">请求插件中的元素</a></li>
<li><a class="reference internal" href="#id12">2.0</a></li>
<li><a class="reference internal" href="#id13">2.1</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id14">创建你自己的视图类</a></li>
<li><a class="reference internal" href="#api">视图 API</a></li>
<li><a class="reference internal" href="#id15">关于视图的更多内容</a></li>
</ul>
</li>
</ul>

</div>
	</div>

</div>

<div class="content row">
	<ul class="related-pages inline">
	<li>
		<a href="genindex.html" title="总目录" accesskey="I">索引</a>
	</li>
	<li>
		<a href="views/themes.html" title="主题" accesskey="N">下一页</a>
	</li>
	<li>
		<a href="controllers/components.html" title="组件" accesskey="P">上一页</a>
	</li>
	</ul>
</div>

	<div class="footer-push"> </div>
</div>






<div class="footer">
	<div class="row">
		<div class="columns six offset-by-three contribute">
			<strong>发现翻译错误?</strong>
			请在下面留言<br />
			<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">[ 我要加入翻译 ]</a>
		</div>
	</div>
	
	<div class="row">
		<div class="columns nine offset-by-three copyright">
					&copy; 版权所有 2014, Cake Software Foundation, Inc.
				最后更新于 Sep 05, 2015.
				Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
		</div>
	</div>
</div>

<div id="nav-modal" class="reveal-modal"> </div>
<div id="inline-search-results"></div>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F201cbc61deaf9f7ffb521fb23e83db40' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cakephpchina"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->

<!-- Grunt Live Reload -->
<script src="http://192.168.56.113:35729/livereload.js"></script>
<script src="http://192.168.56.113:35730/livereload.js"></script>
  </body>
</html>