

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="TimeHelper" lang="zh" name="title" />
<meta content="The Time Helper will help you format time and test time." lang="zh" name="description" />
<meta content="time helper,format time,timezone,unix epoch,time strings,time zone offset,utc,gmt" lang="zh" name="keywords" />

    <title>TimeHelper</title>
    <link href="../../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../../_static/app.js"></script>

    <link rel="alternate" hreflang="en" href="../../../en/core-libraries/helpers/time.html" /><link rel="alternate" hreflang="pt" href="../../../pt/core-libraries/helpers/time.html" /><link rel="alternate" hreflang="es" href="../../../es/core-libraries/helpers/time.html" /><link rel="alternate" hreflang="ja" href="../../../ja/core-libraries/helpers/time.html" /><link rel="alternate" hreflang="fr" href="../../../fr/core-libraries/helpers/time.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 2.x 文档" href="../../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 2.x 文档" href="../../index.html" />
    <link rel="up" title="助件" href="../../views/helpers.html" />
    <link rel="next" title="模型" href="../../models.html" />
    <link rel="prev" title="TextHelper" href="text.html" />

    <script type="text/javascript">
    window.lang = "zh";
    </script>
  </head>
  <body>

<div id="container">
	
	<header class="nav-down">
		<div class="container-fluid hidden-xs hidden-sm">
			<div class="row">
				<div class="col-sm-3 col-md-3">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-9 col-md-9">
					<nav class="navbar-right">
						<ul class="menu">
							<li class="first">
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
								<ul class="submenu">
									
<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
								</ul>
							</li>

							<li><a href="http://cakephp.org/business-solutions">Business Solutions</a></li>
							<li><a href="http://cakephp.org/showcase">Showcase</a></li>

							<li>
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
								<div class="megamenu full">
									<div class="row">
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
											</ul>
										</div>
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
											</ul>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>

		
		<div class="container-fluid hidden-md hidden-lg">
			<div class="row">
				<div class="col-sm-6 col-xs-6">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-6 col-xs-6">
					<div class="navbar-right">
						<button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
							<i class="fa fa-bars toggle-modal"></i>
						</button>
					</div>
					<div id="wrap">
						<form class="search" action="../../search.html" method="get">
							<input name="q" type="search" placeholder="What are you looking for?">
							<input id="search_submit" value="搜索" type="submit">
						</form>
					</div>
				</div>
			</div>
		</div>

		
		<section id="nav-cook" class="hidden-xs hidden-sm">
			<div class="container-fluid ">
				<div class="row ">
					<div class="col-md-12 back-book">
						<div class="col-md-4 col-md-offset-1 text-center t-cook-nav p0 hidden-sm hidden-xs">
							<h2>
								<a href="../../contents.html">
									<span class="glyph_range icon-submenu icon-submenu-cook">B</span>
									CakePHP 2.x <strong>Cookbook</strong>
								</a>
							</h2>
						</div>

						<div class="col-md-4 hidden-sm">
							<form class="search" action="../../search.html" method="get">
								<input type="hidden" name="check_keywords" value="yes" />
								<input type="hidden" name="area" value="default" />

								<div class="col-md-10 p0">
									<input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
								</div>
								<div class="col-md-2 p0 search-cook">
									<button type="submit">
										<span class="glyph_range icon-submenu icon-submenu-cook">A</span>
									</button>
								</div>
							</form>
						</div>

						
						<div class="col-md-3">
							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Language:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
													role="button" aria-haspopup="true" aria-expanded="false" href="#">
														zh
														<i class="fa fa-menu-en fa-chevron-down"></i>
													</a>
											<ul class="dropdown-menu">
											
												<li><a href="../../../en/core-libraries/helpers/time.html">en</a></li>
											
												<li><a href="../../../pt/core-libraries/helpers/time.html">pt</a></li>
											
												<li><a href="../../../es/core-libraries/helpers/time.html">es</a></li>
											
												<li><a href="../../../ja/core-libraries/helpers/time.html">ja</a></li>
											
												<li><a href="../../../fr/core-libraries/helpers/time.html">fr</a></li>
											
												<li></li>
											
											</ul>
										</li>
									</ul>
								</div>
							</div>

							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Version:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">2.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
											<ul class="dropdown-menu">
												<li><a href="http://book.cakephp.org/3.0/zh">3.x Book</a></li>
												<li><a href="http://book.cakephp.org/2.0/zh">2.x Book</a></li>
												<li><a href="http://book.cakephp.org/1.3/zh/">1.3 Book</a></li>
												<li><a href="http://book.cakephp.org/1.2/zh/">1.2 Book</a></li>
												<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
											</ul>
										</li>
									</ul>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</section>
	</header>

	
	<section class="nav-btn visible-sm visible-xs">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
				</div>

				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
				</div>
			</div>
		</div>
	</section>

	
	<div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title-cookbook" id="modal-header"></h4>
				</div>
				<div class="modal-body"></div>
			</div>
		</div>
	</div>

<div class="container page-container"><div id="improve-slideout">
		<i class="fa fa-pencil icon-improve"></i>
		<a href="https://github.com/cakephp/docs/edit/master/zh/core-libraries/helpers/time.rst" target="_blank">
			<div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
		</a>
	</div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

	
	<div class="row">
		<div class="col-sm-12 col-md-9 col-md-push-3 space-left push-off"><div class="page-contents col-sm-5">
				<h3>Page Contents</h3>
				<ul>
<li><a class="reference internal" href="#">TimeHelper</a><ul>
<li><a class="reference internal" href="#using-the-helper">Using the Helper</a></li>
<li><a class="reference internal" href="#formatting">Formatting</a></li>
<li><a class="reference internal" href="#testing-time">Testing Time</a></li>
</ul>
</li>
</ul>

			</div><div class="document-body">
			
  <div class="section" id="timehelper">
<h1>TimeHelper<a class="headerlink" href="#timehelper" title="永久链接至标题">¶</a></h1>
<dl class="class">
<dt id="TimeHelper">
<em class="property">class </em><code class="descname">TimeHelper</code><span class="sig-paren">(</span><em>View $view</em>, <em>array $settings = array()</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p>The Time Helper does what it says on the tin: saves you time. It
allows for the quick processing of time related information. The
Time Helper has two main tasks that it can perform:</p>
<ol class="arabic simple">
<li>It can format time strings.</li>
<li>It can test time (but cannot bend time, sorry).</li>
</ol>
<div class="versionchanged">
<p><span class="versionmodified">在 2.1 版更改: </span><code class="docutils literal"><span class="pre">TimeHelper</span></code> have been refactored into <a class="reference internal" href="../../core-utility-libraries/time.html#CakeTime" title="CakeTime"><code class="xref php php-class docutils literal"><span class="pre">CakeTime</span></code></a> class to allow
easier use outside of the <code class="docutils literal"><span class="pre">View</span></code> layer.
Within a view, these methods are accessible via the <cite>TimeHelper</cite>
class and you can called it as you would call a normal helper method:
<code class="docutils literal"><span class="pre">$this-&gt;Time-&gt;method($args);</span></code>.</p>
</div>
<div class="section" id="using-the-helper">
<h2>Using the Helper<a class="headerlink" href="#using-the-helper" title="永久链接至标题">¶</a></h2>
<p>A common use of the Time Helper is to offset the date and time to match a
user&#8217;s time zone. Lets use a forum as an example. Your forum has many users who
may post messages at any time from any part of the world. An easy way to
manage the time is to save all dates and times as GMT+0 or UTC. Uncomment the
line <code class="docutils literal"><span class="pre">date_default_timezone_set('UTC');</span></code> in <code class="docutils literal"><span class="pre">app/Config/core.php</span></code> to ensure
your application&#8217;s time zone is set to GMT+0.</p>
<p>Next add a time zone field to your users table and make the necessary
modifications to allow your users to set their time zone. Now that we know
the time zone of the logged in user we can correct the date and time on our
posts using the Time Helper:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;F jS, Y h:i A&#39;</span><span class="p">,</span> <span class="nv">$post</span><span class="p">[</span><span class="s1">&#39;Post&#39;</span><span class="p">][</span><span class="s1">&#39;created&#39;</span><span class="p">],</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$user</span><span class="p">[</span><span class="s1">&#39;User&#39;</span><span class="p">][</span><span class="s1">&#39;time_zone&#39;</span><span class="p">]);</span>
<span class="c1">// Will display August 22nd, 2011 11:53 PM for a user in GMT+0</span>
<span class="c1">// August 22nd, 2011 03:53 PM for a user in GMT-8</span>
<span class="c1">// and August 23rd, 2011 09:53 AM GMT+10</span>
</pre></div>
</div>
<p>Most of the Time Helper methods have a $timezone parameter. The $timezone parameter
accepts a valid timezone identifier string or an instance of <cite>DateTimeZone</cite> class.</p>
</div>
<div class="section" id="formatting">
<h2>Formatting<a class="headerlink" href="#formatting" title="永久链接至标题">¶</a></h2>
<dl class="method">
<dt id="TimeHelper::convert">
<code class="descclassname">TimeHelper::</code><code class="descname">convert</code><span class="sig-paren">(</span><em>$serverTime</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::convert" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">integer</td>
</tr>
</tbody>
</table>
<p>Converts given time (in server&#8217;s time zone) to user&#8217;s local
time, given his/her timezone.:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">convert</span><span class="p">(</span><span class="nb">time</span><span class="p">(),</span> <span class="s1">&#39;Asia/Jakarta&#39;</span><span class="p">);</span>
<span class="c1">// 1321038036</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">convert</span><span class="p">(</span><span class="nb">time</span><span class="p">(),</span> <span class="k">new</span> <span class="nx">DateTimeZone</span><span class="p">(</span><span class="s1">&#39;Asia/Jakarta&#39;</span><span class="p">));</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span><code class="docutils literal"><span class="pre">$timezone</span></code> parameter replaces <code class="docutils literal"><span class="pre">$userOffset</span></code> parameter used in 2.1 and below.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::convertSpecifiers">
<code class="descclassname">TimeHelper::</code><code class="descname">convertSpecifiers</code><span class="sig-paren">(</span><em>$format</em>, <em>$time = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::convertSpecifiers" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Converts a string representing the format for the function
strftime and returns a windows safe and i18n aware format.</p>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::dayAsSql">
<code class="descclassname">TimeHelper::</code><code class="descname">dayAsSql</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$field_name</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::dayAsSql" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Creates a string in the same format as daysAsSql but
only needs a single date object:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">dayAsSql</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">,</span> <span class="s1">&#39;modified&#39;</span><span class="p">);</span>
<span class="c1">// (modified &gt;= &#39;2011-08-22 00:00:00&#39;) AND (modified &lt;= &#39;2011-08-22 23:59:59&#39;)</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">dayAsSql</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">,</span> <span class="s1">&#39;modified&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span><code class="docutils literal"><span class="pre">$timezone</span></code> parameter replaces <code class="docutils literal"><span class="pre">$userOffset</span></code> parameter used in 2.1 and below.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span><code class="docutils literal"><span class="pre">$dateString</span></code> parameter now also accepts a DateTime object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::daysAsSql">
<code class="descclassname">TimeHelper::</code><code class="descname">daysAsSql</code><span class="sig-paren">(</span><em>$begin</em>, <em>$end</em>, <em>$fieldName</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::daysAsSql" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Returns a string in the format &#8220;($field_name &gt;=
&#8216;2008-01-21 00:00:00&#8217;) AND ($field_name &lt;= &#8216;2008-01-25
23:59:59&#8217;)&#8221;. This is handy if you need to search for records
between two dates inclusively:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">daysAsSql</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">,</span> <span class="s1">&#39;Aug 25, 2011&#39;</span><span class="p">,</span> <span class="s1">&#39;created&#39;</span><span class="p">);</span>
<span class="c1">// (created &gt;= &#39;2011-08-22 00:00:00&#39;) AND (created &lt;= &#39;2011-08-25 23:59:59&#39;)</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">daysAsSql</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">,</span> <span class="s1">&#39;Aug 25, 2011&#39;</span><span class="p">,</span> <span class="s1">&#39;created&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span><code class="docutils literal"><span class="pre">$timezone</span></code> parameter replaces <code class="docutils literal"><span class="pre">$userOffset</span></code> parameter used in 2.1 and below.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span><code class="docutils literal"><span class="pre">$dateString</span></code> parameter now also accepts a DateTime object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::format">
<code class="descclassname">TimeHelper::</code><code class="descname">format</code><span class="sig-paren">(</span><em>$date</em>, <em>$format = NULL</em>, <em>$default = false</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::format" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Will return a string formatted to the given format using the
<a class="reference external" href="http://www.php.net/manual/en/function.date.php">PHP date() formatting options</a>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;2011-08-22 11:53:00&#39;</span><span class="p">,</span> <span class="s1">&#39;F jS, Y h:i A&#39;</span><span class="p">);</span>
<span class="c1">// August 22nd, 2011 11:53 AM</span>

<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;+2 days&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">);</span>
<span class="c1">// 2 days from now formatted as Sun, 13 Nov 2011 03:36:10 +0800</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;2011-08-22 11:53:00&#39;</span><span class="p">,</span> <span class="s1">&#39;F jS, Y h:i A&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;+2 days&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span><code class="docutils literal"><span class="pre">$format</span></code> and <code class="docutils literal"><span class="pre">$date</span></code> parameters are in opposite order as used in 2.1 and below.
<code class="docutils literal"><span class="pre">$timezone</span></code> parameter replaces <code class="docutils literal"><span class="pre">$userOffset</span></code> parameter used in 2.1 and below.
<code class="docutils literal"><span class="pre">$default</span></code> parameter replaces <code class="docutils literal"><span class="pre">$invalid</span></code> parameter used in 2.1 and below.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span><code class="docutils literal"><span class="pre">$date</span></code> parameter now also accepts a DateTime object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::fromString">
<code class="descclassname">TimeHelper::</code><code class="descname">fromString</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::fromString" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Takes a string and uses <a class="reference external" href="http://us.php.net/manual/en/function.date.php">strtotime</a>
to convert it into a date integer:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">fromString</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">);</span>
<span class="c1">// 1313971200</span>

<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">fromString</span><span class="p">(</span><span class="s1">&#39;+1 days&#39;</span><span class="p">);</span>
<span class="c1">// 1321074066 (+1 day from current date)</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">fromString</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">fromString</span><span class="p">(</span><span class="s1">&#39;+1 days&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span><code class="docutils literal"><span class="pre">$timezone</span></code> parameter replaces <code class="docutils literal"><span class="pre">$userOffset</span></code> parameter used in 2.1 and below.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span><code class="docutils literal"><span class="pre">$dateString</span></code> parameter now also accepts a DateTime object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::gmt">
<code class="descclassname">TimeHelper::</code><code class="descname">gmt</code><span class="sig-paren">(</span><em>$dateString = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::gmt" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">integer</td>
</tr>
</tbody>
</table>
<p>Will return the date as an integer set to Greenwich Mean Time (GMT).:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">gmt</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">);</span>
<span class="c1">// 1313971200</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">gmt</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::i18nFormat">
<code class="descclassname">TimeHelper::</code><code class="descname">i18nFormat</code><span class="sig-paren">(</span><em>$date</em>, <em>$format = NULL</em>, <em>$invalid = false</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::i18nFormat" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Returns a formatted date string, given either a UNIX timestamp or a
valid strtotime() date string. It take in account the default date
format for the current language if a LC_TIME file is used.</p>
<div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span><code class="docutils literal"><span class="pre">$timezone</span></code> parameter replaces <code class="docutils literal"><span class="pre">$userOffset</span></code> parameter used in 2.1 and below.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::nice">
<code class="descclassname">TimeHelper::</code><code class="descname">nice</code><span class="sig-paren">(</span><em>$dateString = NULL</em>, <em>$timezone = NULL</em>, <em>$format = null</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::nice" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Takes a date string and outputs it in the format &#8220;Tue, Jan
1st 2008, 19:25&#8221; or as per optional <code class="docutils literal"><span class="pre">$format</span></code> param passed:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">nice</span><span class="p">(</span><span class="s1">&#39;2011-08-22 11:53:00&#39;</span><span class="p">);</span>
<span class="c1">// Mon, Aug 22nd 2011, 11:53</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">nice</span><span class="p">(</span><span class="s1">&#39;2011-08-22 11:53:00&#39;</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::niceShort">
<code class="descclassname">TimeHelper::</code><code class="descname">niceShort</code><span class="sig-paren">(</span><em>$dateString = NULL</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::niceShort" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Takes a date string and outputs it in the format &#8220;Jan
1st 2008, 19:25&#8221;. If the date object is today, the format will be
&#8220;Today, 19:25&#8221;. If the date object is yesterday, the format will be
&#8220;Yesterday, 19:25&#8221;:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">niceShort</span><span class="p">(</span><span class="s1">&#39;2011-08-22 11:53:00&#39;</span><span class="p">);</span>
<span class="c1">// Aug 22nd, 11:53</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">niceShort</span><span class="p">(</span><span class="s1">&#39;2011-08-22 11:53:00&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span><code class="docutils literal"><span class="pre">$timezone</span></code> parameter replaces <code class="docutils literal"><span class="pre">$userOffset</span></code> parameter used in 2.1 and below.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span><code class="docutils literal"><span class="pre">$dateString</span></code> parameter now also accepts a DateTime object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::serverOffset">
<code class="descclassname">TimeHelper::</code><code class="descname">serverOffset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::serverOffset" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">integer</td>
</tr>
</tbody>
</table>
<p>Returns server&#8217;s offset from GMT in seconds.</p>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::timeAgoInWords">
<code class="descclassname">TimeHelper::</code><code class="descname">timeAgoInWords</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$options = array()</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::timeAgoInWords" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Will take a datetime string (anything that is
parsable by PHP&#8217;s strtotime() function or MySQL&#8217;s datetime format)
and convert it into a friendly word format like, &#8220;3 weeks, 3 days
ago&#8221;:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">timeAgoInWords</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">);</span>
<span class="c1">// on 22/8/11</span>

<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">timeAgoInWords</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;F jS, Y&#39;</span><span class="p">));</span>
<span class="c1">// on August 22nd, 2011</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">timeAgoInWords</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">timeAgoInWords</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;F jS, Y&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>Use the &#8216;end&#8217; option to determine the cutoff point to no longer will use words; default &#8216;+1 month&#8217;:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">timeAgoInWords</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;F jS, Y&#39;</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;+1 year&#39;</span><span class="p">));</span>
<span class="c1">// On Nov 10th, 2011 it would display: 2 months, 2 weeks, 6 days ago</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">timeAgoInWords</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;F jS, Y&#39;</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;+1 year&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>Use the &#8216;accuracy&#8217; option to determine how precise the output should be.
You can use this to limit the output:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// If $timestamp is 1 month, 1 week, 5 days and 6 hours ago</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">timeAgoInWords</span><span class="p">(</span><span class="nv">$timestamp</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;accuracy&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;month&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;month&#39;</span><span class="p">),</span>
    <span class="s1">&#39;end&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;1 year&#39;</span>
<span class="p">));</span>
<span class="c1">// Outputs &#39;1 month ago&#39;</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span>The <code class="docutils literal"><span class="pre">accuracy</span></code> option was added.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span><code class="docutils literal"><span class="pre">$dateString</span></code> parameter now also accepts a DateTime object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::toAtom">
<code class="descclassname">TimeHelper::</code><code class="descname">toAtom</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::toAtom" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Will return a date string in the Atom format &#8220;2008-01-12T00:00:00Z&#8221;</p>
<div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span><code class="docutils literal"><span class="pre">$timezone</span></code> parameter replaces <code class="docutils literal"><span class="pre">$userOffset</span></code> parameter used in 2.1 and below.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span><code class="docutils literal"><span class="pre">$dateString</span></code> parameter now also accepts a DateTime object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::toQuarter">
<code class="descclassname">TimeHelper::</code><code class="descname">toQuarter</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$range = false</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::toQuarter" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">mixed</td>
</tr>
</tbody>
</table>
<p>Will return 1, 2, 3 or 4 depending on what quarter of
the year the date falls in. If range is set to true, a two element
array will be returned with start and end dates in the format
&#8220;2008-03-31&#8221;:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">toQuarter</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">);</span>
<span class="c1">// Would print 3</span>

<span class="nv">$arr</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">toQuarter</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
<span class="cm">/*</span>
<span class="cm">Array</span>
<span class="cm">(</span>
<span class="cm">    [0] =&gt; 2011-07-01</span>
<span class="cm">    [1] =&gt; 2011-09-30</span>
<span class="cm">)</span>
<span class="cm">*/</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">toQuarter</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">);</span>
<span class="nv">$arr</span> <span class="o">=</span> <span class="nx">CakeTime</span><span class="o">::</span><span class="na">toQuarter</span><span class="p">(</span><span class="s1">&#39;Aug 22, 2011&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span><code class="docutils literal"><span class="pre">$dateString</span></code> parameter now also accepts a DateTime object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::toRSS">
<code class="descclassname">TimeHelper::</code><code class="descname">toRSS</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::toRSS" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Will return a date string in the RSS format &#8220;Sat, 12 Jan 2008
00:00:00 -0500&#8221;</p>
<div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span><code class="docutils literal"><span class="pre">$timezone</span></code> parameter replaces <code class="docutils literal"><span class="pre">$userOffset</span></code> parameter used in 2.1 and below.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span><code class="docutils literal"><span class="pre">$dateString</span></code> parameter now also accepts a DateTime object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::toUnix">
<code class="descclassname">TimeHelper::</code><code class="descname">toUnix</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::toUnix" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">integer</td>
</tr>
</tbody>
</table>
<p>A wrapper for fromString.</p>
<div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span><code class="docutils literal"><span class="pre">$timezone</span></code> parameter replaces <code class="docutils literal"><span class="pre">$userOffset</span></code> parameter used in 2.1 and below.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span><code class="docutils literal"><span class="pre">$dateString</span></code> parameter now also accepts a DateTime object.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::toServer">
<code class="descclassname">TimeHelper::</code><code class="descname">toServer</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$timezone = NULL</em>, <em>$format = 'Y-m-d H:i:s'</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::toServer" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">mixed</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span>Returns a formatted date in server&#8217;s timezone.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::timezone">
<code class="descclassname">TimeHelper::</code><code class="descname">timezone</code><span class="sig-paren">(</span><em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::timezone" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">DateTimeZone</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span>Returns a timezone object from a string or the user&#8217;s timezone object. If the function is called
without a parameter it tries to get timezone from &#8216;Config.timezone&#8217; configuration variable.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="TimeHelper::listTimezones">
<code class="descclassname">TimeHelper::</code><code class="descname">listTimezones</code><span class="sig-paren">(</span><em>$filter = null</em>, <em>$country = null</em>, <em>$group = true</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::listTimezones" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body">array</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span>Returns a list of timezone identifiers.</p>
</div>
</dd></dl>

</div>
<div class="section" id="testing-time">
<h2>Testing Time<a class="headerlink" href="#testing-time" title="永久链接至标题">¶</a></h2>
<dl class="method">
<dt id="TimeHelper::isToday">
<code class="descclassname">TimeHelper::</code><code class="descname">isToday</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::isToday" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="TimeHelper::isThisWeek">
<code class="descclassname">TimeHelper::</code><code class="descname">isThisWeek</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::isThisWeek" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="TimeHelper::isThisMonth">
<code class="descclassname">TimeHelper::</code><code class="descname">isThisMonth</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::isThisMonth" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="TimeHelper::isThisYear">
<code class="descclassname">TimeHelper::</code><code class="descname">isThisYear</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::isThisYear" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="TimeHelper::wasYesterday">
<code class="descclassname">TimeHelper::</code><code class="descname">wasYesterday</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::wasYesterday" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="TimeHelper::isTomorrow">
<code class="descclassname">TimeHelper::</code><code class="descname">isTomorrow</code><span class="sig-paren">(</span><em>$dateString</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::isTomorrow" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="TimeHelper::wasWithinLast">
<code class="descclassname">TimeHelper::</code><code class="descname">wasWithinLast</code><span class="sig-paren">(</span><em>$timeInterval</em>, <em>$dateString</em>, <em>$timezone = NULL</em><span class="sig-paren">)</span><a class="headerlink" href="#TimeHelper::wasWithinLast" title="永久链接至目标">¶</a></dt>
<dd><div class="versionchanged">
<p><span class="versionmodified">在 2.2 版更改: </span><code class="docutils literal"><span class="pre">$timezone</span></code> parameter replaces <code class="docutils literal"><span class="pre">$userOffset</span></code> parameter used in 2.1 and below.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span><code class="docutils literal"><span class="pre">$dateString</span></code> parameter now also accepts a DateTime object.</p>
</div>
<p>All of the above functions return true or false when passed a date
string. <code class="docutils literal"><span class="pre">wasWithinLast</span></code> takes an additional <code class="docutils literal"><span class="pre">$timeInterval</span></code>
option:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// called via TimeHelper</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Time</span><span class="o">-&gt;</span><span class="na">wasWithinLast</span><span class="p">(</span><span class="nv">$timeInterval</span><span class="p">,</span> <span class="nv">$dateString</span><span class="p">);</span>

<span class="c1">// called as CakeTime</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeTime&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="nx">CakeTime</span><span class="o">::</span><span class="na">wasWithinLast</span><span class="p">(</span><span class="nv">$timeInterval</span><span class="p">,</span> <span class="nv">$dateString</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">wasWithinLast</span></code> takes a time interval which is a string in the
format &#8220;3 months&#8221; and accepts a time interval of seconds, minutes,
hours, days, weeks, months and years (plural and not). If a time
interval is not recognized (for example, if it is mistyped) then it
will default to days.</p>
</dd></dl>

</div>
</div>


			</div>
		</div>

		
		<div class="col-md-3 col-md-pull-9 pull-off hidden-xs hidden-sm" lang="zh">
			<aside class="sidebar">
				<div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">欢迎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cakephp-overview.html">CakePHP 概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controllers.html">控制器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../views.html">视图</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../models.html">模型</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../core-libraries.html">核心库</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../toc-general-purpose.html">通用</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../global-constants-and-functions.html">全局常量和函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-utility-libraries/app.html">App Class</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../events.html">Events System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collections.html">Collections</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../toc-behaviors.html">行为</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc-components.html">组件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc-helpers.html">助件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc-utilities.html">工具</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">插件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../console-and-shells.html">Shells，任务与命令行工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment.html">部署</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-and-examples.html">教程 &amp; 实例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices.html">Appendices</a></li>
</ul>

</div>

				</div>
			</aside>
			<aside class="sidebar">
				<div class="mb30 row">
				</div>
			</aside>
		</div>
	</div>
</div>

<section id="socials" class="back-3">
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-4  social text-center">
				<div class="col-sm-3 col-xs-3">
					<div id="fb-root"></div>
						<script>(function(d, s, id) {
						  var js, fjs = d.getElementsByTagName(s)[0];
						  if (d.getElementById(id)) return;
						  js = d.createElement(s); js.id = id;
						  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
						  fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));
						</script>
						<div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
					<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
				</div>
			</div>

			<div class="col-xs-12 col-sm-12 col-md-8 social-footer text-center ">
				<a href="#">发现翻译错误? 请在下面留言</a>
				<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">我要加入翻译</a>
				<a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
				<a href="http://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
				<a href="http://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
				<a href="http://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
				<a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
				<a href="http://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
				<a href="http://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
				<a href="http://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
			</div>
		</div>
	</div>
</section>

<footer id="footer" class="footer-wrapper">
	<div class="container">

		<div class="row col-p30">
			<div class="col-sm-12 col-md-3">
				<div class="footer-widget t-footer">
					<div class="col-md-12">
						<a href="https://www.openhub.net/p/cakephp">
							<img src="../../_static/open-hub.png">
						</a>
						<div class="mt10">
							<a href="https://www.rackspace.com/">
								<img src="../../_static/rackspace.png">
							</a>
						</div>
					</div>
				</div>
			</div>

			<div class="col-sm-12 col-md-9">
				<div class="col-md-3 col-sm-6 business-solution">
					<ul class="footer-menu">
						<li class="menu-title">
	<a href="http://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
	<a href="http://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 text-center mt30">
				<p class="copyright">
							&copy; 版权所有 2016, Cake Software Foundation, Inc.
						最后更新于 8月 06, 2016.
						Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
				</p>
			</div>
		</div>
	</div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-743287-3']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>

<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F201cbc61deaf9f7ffb521fb23e83db40' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cakephpchina"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
  </body>
</html>