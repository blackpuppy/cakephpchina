

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Pagination" lang="zh" name="title" />
<meta content="order array,query conditions,php class,web applications,headaches,obstacles,complexity,programmers,parameters,paginate,designers,cakephp,satisfaction,developers" lang="zh" name="keywords" />

    <title>分页</title>
    <link href="../../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../../_static/app.js"></script>

    <link rel="alternate" hreflang="en" href="../../../en/core-libraries/components/pagination.html" /><link rel="alternate" hreflang="pt" href="../../../pt/core-libraries/components/pagination.html" /><link rel="alternate" hreflang="es" href="../../../es/core-libraries/components/pagination.html" /><link rel="alternate" hreflang="ja" href="../../../ja/core-libraries/components/pagination.html" /><link rel="alternate" hreflang="fr" href="../../../fr/core-libraries/components/pagination.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 2.x 文档" href="../../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 2.x 文档" href="../../index.html" />
    <link rel="up" title="组件" href="../toc-components.html" />
    <link rel="next" title="Flash" href="flash.html" />
    <link rel="prev" title="组件" href="../toc-components.html" />

    <script type="text/javascript">
    window.lang = "zh";
    </script>
  </head>
  <body>

<div id="container">
	
	<header class="nav-down">
		<div class="container-fluid hidden-xs hidden-sm">
			<div class="row">
				<div class="col-sm-3 col-md-3">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-9 col-md-9">
					<nav class="navbar-right">
						<ul class="menu">
							<li class="first">
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
								<ul class="submenu">
									
<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
								</ul>
							</li>

							<li><a href="http://cakephp.org/business-solutions">Business Solutions</a></li>
							<li><a href="http://cakephp.org/showcase">Showcase</a></li>

							<li>
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
								<div class="megamenu full">
									<div class="row">
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
											</ul>
										</div>
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
											</ul>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>

		
		<div class="container-fluid hidden-md hidden-lg">
			<div class="row">
				<div class="col-sm-6 col-xs-6">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-6 col-xs-6">
					<div class="navbar-right">
						<button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
							<i class="fa fa-bars toggle-modal"></i>
						</button>
					</div>
					<div id="wrap">
						<form class="search" action="../../search.html" method="get">
							<input name="q" type="search" placeholder="What are you looking for?">
							<input id="search_submit" value="搜索" type="submit">
						</form>
					</div>
				</div>
			</div>
		</div>

		
		<section id="nav-cook" class="hidden-xs hidden-sm">
			<div class="container-fluid ">
				<div class="row ">
					<div class="col-md-12 back-book">
						<div class="col-md-4 col-md-offset-1 text-center t-cook-nav p0 hidden-sm hidden-xs">
							<h2>
								<a href="../../contents.html">
									<span class="glyph_range icon-submenu icon-submenu-cook">B</span>
									CakePHP 2.x <strong>Cookbook</strong>
								</a>
							</h2>
						</div>

						<div class="col-md-4 hidden-sm">
							<form class="search" action="../../search.html" method="get">
								<input type="hidden" name="check_keywords" value="yes" />
								<input type="hidden" name="area" value="default" />

								<div class="col-md-10 p0">
									<input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
								</div>
								<div class="col-md-2 p0 search-cook">
									<button type="submit">
										<span class="glyph_range icon-submenu icon-submenu-cook">A</span>
									</button>
								</div>
							</form>
						</div>

						
						<div class="col-md-3">
							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Language:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
													role="button" aria-haspopup="true" aria-expanded="false" href="#">
														zh
														<i class="fa fa-menu-en fa-chevron-down"></i>
													</a>
											<ul class="dropdown-menu">
											
												<li><a href="../../../en/core-libraries/components/pagination.html">en</a></li>
											
												<li><a href="../../../pt/core-libraries/components/pagination.html">pt</a></li>
											
												<li><a href="../../../es/core-libraries/components/pagination.html">es</a></li>
											
												<li><a href="../../../ja/core-libraries/components/pagination.html">ja</a></li>
											
												<li><a href="../../../fr/core-libraries/components/pagination.html">fr</a></li>
											
												<li></li>
											
											</ul>
										</li>
									</ul>
								</div>
							</div>

							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Version:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">2.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
											<ul class="dropdown-menu">
												<li><a href="http://book.cakephp.org/3.0/zh">3.x Book</a></li>
												<li><a href="http://book.cakephp.org/2.0/zh">2.x Book</a></li>
												<li><a href="http://book.cakephp.org/1.3/zh/">1.3 Book</a></li>
												<li><a href="http://book.cakephp.org/1.2/zh/">1.2 Book</a></li>
												<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
											</ul>
										</li>
									</ul>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</section>
	</header>

	
	<section class="nav-btn visible-sm visible-xs">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
				</div>

				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
				</div>
			</div>
		</div>
	</section>

	
	<div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title-cookbook" id="modal-header"></h4>
				</div>
				<div class="modal-body"></div>
			</div>
		</div>
	</div>

<div class="container page-container"><div id="improve-slideout">
		<i class="fa fa-pencil icon-improve"></i>
		<a href="https://github.com/cakephp/docs/edit/master/zh/core-libraries/components/pagination.rst" target="_blank">
			<div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
		</a>
	</div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

	
	<div class="row">
		<div class="col-sm-12 col-md-9 col-md-push-3 space-left push-off"><div class="page-contents col-sm-5">
				<h3>Page Contents</h3>
				<ul>
<li><a class="reference internal" href="#">分页</a></li>
<li><a class="reference internal" href="#pagination">Pagination</a><ul>
<li><a class="reference internal" href="#id2">查询的设置</a></li>
<li><a class="reference internal" href="#query-setup">Query Setup</a></li>
<li><a class="reference internal" href="#id3">自定义查询分页</a></li>
<li><a class="reference internal" href="#custom-query-pagination">Custom Query Pagination</a></li>
<li><a class="reference internal" href="#id4">控制哪些字段用于排序</a></li>
<li><a class="reference internal" href="#control-which-fields-used-for-ordering">Control which fields used for ordering</a></li>
<li><a class="reference internal" href="#id5">限制可以读取的最大行数</a></li>
<li><a class="reference internal" href="#limit-the-maximum-number-of-rows-that-can-be-fetched">Limit the maximum number of rows that can be fetched</a></li>
<li><a class="reference internal" href="#get">用 GET 参数进行分页</a></li>
<li><a class="reference internal" href="#pagination-with-get-parameters">Pagination with GET parameters</a></li>
<li><a class="reference internal" href="#id6">请求的页超出范围</a></li>
<li><a class="reference internal" href="#out-of-range-page-requests">Out of range page requests</a></li>
<li><a class="reference internal" href="#ajax">AJAX 分页</a></li>
<li><a class="reference internal" href="#ajax-pagination">AJAX Pagination</a></li>
<li><a class="reference internal" href="#id7">视图中的分页</a></li>
<li><a class="reference internal" href="#pagination-in-the-view">Pagination in the view</a></li>
</ul>
</li>
</ul>

			</div><div class="document-body">
			
  <div class="section" id="id1">
<h1>分页<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
</div>
<div class="section" id="pagination">
<h1>Pagination<a class="headerlink" href="#pagination" title="永久链接至标题">¶</a></h1>
<dl class="class">
<dt id="PaginatorComponent">
<em class="property">class </em><code class="descname">PaginatorComponent</code><span class="sig-paren">(</span><em>ComponentCollection $collection</em>, <em>array $settings = array()</em><span class="sig-paren">)</span><a class="headerlink" href="#PaginatorComponent" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p>创建灵活和对用户友好的网页应用程序，最主要的障碍之一就是设计直观的用户界面。很多应用程序的规模和复杂性与日俱增，设计师和程序员们发现他们无法应付成百上千条记录的显示。重构要花时间，而性能和用户满意度将受损。</p>
<p>One of the main obstacles of creating flexible and user-friendly
web applications is designing an intuitive user interface. Many applications
tend to grow in size and complexity quickly, and designers and
programmers alike find they are unable to cope with displaying
hundreds or thousands of records. Refactoring takes time, and
performance and user satisfaction can suffer.</p>
<p>每页显示合理数量的记录，一直都是每个应用程序的关键部分，历来导致开发人员的烦恼。CakePHP 通过提供快速而又简单的方式来分页显示数据，从而减轻了开发人员的负担。</p>
<p>Displaying a reasonable number of records per page has always been
a critical part of every application and used to cause many
headaches for developers. CakePHP eases the burden on the developer
by providing a quick, easy way to paginate data.</p>
<p>CakePHP 中的分页功能在控制器（<em>controller</em>）中是由组件（<em>component</em>）来提供的，使得构建分页的查询更容易。在视图（<em>view</em>）中则用 <a class="reference internal" href="../helpers/paginator.html#PaginatorHelper" title="PaginatorHelper"><code class="xref php php-class docutils literal"><span class="pre">PaginatorHelper</span></code></a> 简化了分页链接和按键的生成。</p>
<p>Pagination in CakePHP is offered by a Component in the controller, to make
building paginated queries easier. In the View <a class="reference internal" href="../helpers/paginator.html#PaginatorHelper" title="PaginatorHelper"><code class="xref php php-class docutils literal"><span class="pre">PaginatorHelper</span></code></a> is
used to make the generation of pagination links &amp; buttons simple.</p>
<div class="section" id="id2">
<h2>查询的设置<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="query-setup">
<h2>Query Setup<a class="headerlink" href="#query-setup" title="永久链接至标题">¶</a></h2>
<p>在控制器中，我们先着手在控制器变量 <code class="docutils literal"><span class="pre">$paginate</span></code> 中定义分页默认会使用的查询条件。这些条件，将作为分页查询的基础。它们会与排序、方向、（每页）最大记录数和页数这些从网址（<em>URL</em>）传入的参数相结合。这里需要指出，排序键必须用下面的数组结构定义:</p>
<p>In the controller, we start by defining the query conditions pagination will use
by default in the <code class="docutils literal"><span class="pre">$paginate</span></code> controller variable. These conditions, serve as
the basis of your pagination queries. They are augmented by the sort, direction
limit, and page parameters passed in from the URL. It is important to note
here that the order key must be defined in an array structure like below:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>

    <span class="k">public</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Paginator&#39;</span><span class="p">);</span>

    <span class="k">public</span> <span class="nv">$paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">25</span><span class="p">,</span>
        <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;Post.title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;asc&#39;</span>
        <span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>也可以包含其他 <code class="xref php php-meth docutils literal"><span class="pre">find()</span></code> 选项，比如 <code class="docutils literal"><span class="pre">fields</span></code>:</p>
<p>You can also include other <code class="xref php php-meth docutils literal"><span class="pre">find()</span></code> options, such as
<code class="docutils literal"><span class="pre">fields</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>

    <span class="k">public</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Paginator&#39;</span><span class="p">);</span>

    <span class="k">public</span> <span class="nv">$paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;fields&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Post.id&#39;</span><span class="p">,</span> <span class="s1">&#39;Post.created&#39;</span><span class="p">),</span>
        <span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">25</span><span class="p">,</span>
        <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;Post.title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;asc&#39;</span>
        <span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">$paginate</span></code> 数组中可以包括的其他键与 <code class="docutils literal"><span class="pre">Model-&gt;find('all')</span></code> 方法的参数相似，即：<code class="docutils literal"><span class="pre">conditions</span></code>、 <code class="docutils literal"><span class="pre">fields</span></code>、<code class="docutils literal"><span class="pre">order</span></code>、<code class="docutils literal"><span class="pre">limit</span></code>、<code class="docutils literal"><span class="pre">page</span></code>、<code class="docutils literal"><span class="pre">contain</span></code>、<code class="docutils literal"><span class="pre">joins``和``recursive</span></code>。除了前面提到的这些键之外，以及任何其他键都会传递给模型（<em>model</em>）的 find 方法。这样就很容易和分页一起使用象 <a class="reference internal" href="../behaviors/containable.html#ContainableBehavior" title="ContainableBehavior"><code class="xref php php-class docutils literal"><span class="pre">ContainableBehavior</span></code></a> 这样的行为（<em>behavior</em>）。</p>
<p>Other keys that can be included in the <code class="docutils literal"><span class="pre">$paginate</span></code> array are
similar to the parameters of the <code class="docutils literal"><span class="pre">Model-&gt;find('all')</span></code> method, that
is: <code class="docutils literal"><span class="pre">conditions</span></code>, <code class="docutils literal"><span class="pre">fields</span></code>, <code class="docutils literal"><span class="pre">order</span></code>, <code class="docutils literal"><span class="pre">limit</span></code>, <code class="docutils literal"><span class="pre">page</span></code>, <code class="docutils literal"><span class="pre">contain</span></code>,
<code class="docutils literal"><span class="pre">joins</span></code>, and <code class="docutils literal"><span class="pre">recursive</span></code>. In addition to the aforementioned keys, any
additional keys will also be passed directly to the model find methods. This
makes it very simple to use behaviors like <a class="reference internal" href="../behaviors/containable.html#ContainableBehavior" title="ContainableBehavior"><code class="xref php php-class docutils literal"><span class="pre">ContainableBehavior</span></code></a> with
pagination:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RecipesController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>

    <span class="k">public</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Paginator&#39;</span><span class="p">);</span>

    <span class="k">public</span> <span class="nv">$paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">25</span><span class="p">,</span>
        <span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Article&#39;</span><span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>除了可以定义通用的分页参数，也可以在控制器中定义多组分页默认值，只需把要配置的模型名称作为数组的键:</p>
<p>In addition to defining general pagination values, you can define more than one
set of pagination defaults in the controller, you just name the keys of the
array after the model you wish to configure:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>

    <span class="k">public</span> <span class="nv">$paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;Post&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="o">...</span><span class="p">),</span>
        <span class="s1">&#39;Author&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>键 <code class="docutils literal"><span class="pre">Post</span></code> 和 <code class="docutils literal"><span class="pre">Author</span></code> 对应的值可以包含不带模型/键的 <code class="docutils literal"><span class="pre">$paginate</span></code> 数组能够包含的所有属性。</p>
<p>The values of the <code class="docutils literal"><span class="pre">Post</span></code> and <code class="docutils literal"><span class="pre">Author</span></code> keys could contain all the properties
that a model/key less <code class="docutils literal"><span class="pre">$paginate</span></code> array could.</p>
<p>一旦定义了 <code class="docutils literal"><span class="pre">$paginate</span></code> 变量，就可以在控制器动作（<em>action</em>）中使用 <a class="reference internal" href="#PaginatorComponent" title="PaginatorComponent"><code class="xref php php-class docutils literal"><span class="pre">PaginatorComponent</span></code></a> 的 <code class="docutils literal"><span class="pre">paginate()</span></code> 方法了。这会从模型返回 <code class="docutils literal"><span class="pre">find()</span></code> 结果。同时也设置一些其他的分页参数，并添加到请求（<em>request</em>）对象中。这些额外的信息设置在 <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;params['paging']</span></code> 中，被 <a class="reference internal" href="../helpers/paginator.html#PaginatorHelper" title="PaginatorHelper"><code class="xref php php-class docutils literal"><span class="pre">PaginatorHelper</span></code></a> 用于创建链接。<code class="xref php php-meth docutils literal"><span class="pre">PaginatorComponent::paginate()</span></code> 方法同时也把 <a class="reference internal" href="../helpers/paginator.html#PaginatorHelper" title="PaginatorHelper"><code class="xref php php-class docutils literal"><span class="pre">PaginatorHelper</span></code></a> 助件（<em>helper</em>）添加到控制器的助件列表中，如果还没有加入的话:</p>
<p>Once the <code class="docutils literal"><span class="pre">$paginate</span></code> variable has been defined, we can use the
<a class="reference internal" href="#PaginatorComponent" title="PaginatorComponent"><code class="xref php php-class docutils literal"><span class="pre">PaginatorComponent</span></code></a>&#8216;s <code class="docutils literal"><span class="pre">paginate()</span></code> method from our controller
action. This will return <code class="docutils literal"><span class="pre">find()</span></code> results from the model. It also sets some
additional paging parameters, which are added to the request object. The
additional information is set to <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;params['paging']</span></code>, and is
used by <a class="reference internal" href="../helpers/paginator.html#PaginatorHelper" title="PaginatorHelper"><code class="xref php php-class docutils literal"><span class="pre">PaginatorHelper</span></code></a> for creating links.
<code class="xref php php-meth docutils literal"><span class="pre">PaginatorComponent::paginate()</span></code> also adds
<a class="reference internal" href="../helpers/paginator.html#PaginatorHelper" title="PaginatorHelper"><code class="xref php php-class docutils literal"><span class="pre">PaginatorHelper</span></code></a> to the list of helpers in your controller, if it
has not been added already:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">list_recipes</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">settings</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">;</span>

    <span class="c1">// 类似于 findAll()，但是读取分页的结果</span>
    <span class="c1">// similar to findAll(), but fetches paged results</span>
    <span class="nv">$data</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">(</span><span class="s1">&#39;Recipe&#39;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>也可以把条件作为第二个参数传入 <code class="docutils literal"><span class="pre">paginate()</span></code> 方法，来过滤结果:</p>
<p>You can filter the records by passing conditions as second
parameter to the <code class="docutils literal"><span class="pre">paginate()</span></code> function:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$data</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">(</span>
    <span class="s1">&#39;Recipe&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Recipe.title LIKE&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;a%&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>也可以在动作中设置 <code class="docutils literal"><span class="pre">conditions</span></code> 和其他分页设置数组:</p>
<p>Or you can also set <code class="docutils literal"><span class="pre">conditions</span></code> and other pagination settings array inside
your action:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">list_recipes</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">settings</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Recipe.title LIKE&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;a%&#39;</span><span class="p">),</span>
        <span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span>
    <span class="p">);</span>
    <span class="nv">$data</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">(</span><span class="s1">&#39;Recipe&#39;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2>自定义查询分页<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="custom-query-pagination">
<h2>Custom Query Pagination<a class="headerlink" href="#custom-query-pagination" title="永久链接至标题">¶</a></h2>
<p>如果你无法用标准的 find 操作来创建显示数据所需要的查询，还有一些其他办法。你可以使用 <a class="reference internal" href="../../models/retrieving-your-data.html#model-custom-find"><span class="std std-ref">自定义查询类型</span></a>。你也可以在模型中实现 <code class="docutils literal"><span class="pre">paginate()</span></code> 和 <code class="docutils literal"><span class="pre">paginateCount()</span></code> 方法，或者把它们放在附加到模型的行为中。实现 <code class="docutils literal"><span class="pre">paginate()</span></code> 和 <code class="docutils literal"><span class="pre">paginateCount()</span></code> 方法的行为应当实现如下定义的方法签名，带有惯有的额外的第一个参数 <code class="docutils literal"><span class="pre">$model</span></code>:</p>
<p>If you&#8217;re not able to use the standard find options to create the query you need
to display your data, there are a few options. You can use a
<a class="reference internal" href="../../models/retrieving-your-data.html#model-custom-find"><span class="std std-ref">custom find type</span></a>. You can also implement the
<code class="docutils literal"><span class="pre">paginate()</span></code> and <code class="docutils literal"><span class="pre">paginateCount()</span></code> methods on your model, or include them in
a behavior attached to your model. Behaviors implementing <code class="docutils literal"><span class="pre">paginate</span></code> and/or
<code class="docutils literal"><span class="pre">paginateCount</span></code> should implement the method signatures defined below with the
normal additional first parameter of <code class="docutils literal"><span class="pre">$model</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// 在行为中实现的 paginate 和 paginateCount 方法。</span>
<span class="c1">// paginate and paginateCount implemented on a behavior.</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">paginate</span><span class="p">(</span><span class="nx">Model</span> <span class="nv">$model</span><span class="p">,</span> <span class="nv">$conditions</span><span class="p">,</span> <span class="nv">$fields</span><span class="p">,</span> <span class="nv">$order</span><span class="p">,</span> <span class="nv">$limit</span><span class="p">,</span>
    <span class="nv">$page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">$recursive</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$extra</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// method content</span>
    <span class="c1">// 方法内容</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">paginateCount</span><span class="p">(</span><span class="nx">Model</span> <span class="nv">$model</span><span class="p">,</span> <span class="nv">$conditions</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$recursive</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nv">$extra</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// method body</span>
    <span class="c1">// 方法主体</span>
<span class="p">}</span>
</pre></div>
</div>
<p>你极少会需要实现 <code class="docutils literal"><span class="pre">paginate()</span></code> 和 <code class="docutils literal"><span class="pre">paginateCount()</span></code> 方法。你应当确保的确无法用核心的模型方法或自定义查询来达到目的。要用自定义 find 类型进行分页，在 2.3 版本，你应当设置第 <code class="docutils literal"><span class="pre">0</span></code> 个元素或者 <code class="docutils literal"><span class="pre">findType</span></code>:</p>
<p>It&#8217;s seldom you&#8217;ll need to implement paginate() and paginateCount(). You should
make sure  you can&#8217;t achieve your goal with the core model methods, or a custom
finder. To paginate with a custom find type, you should set the <code class="docutils literal"><span class="pre">0</span></code>&#8216;th
element, or the <code class="docutils literal"><span class="pre">findType</span></code> key as of 2.3:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;popular&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
<p>由于第 0 个元素难于处理，在 2.3 版本增加了 <code class="docutils literal"><span class="pre">findType</span></code> 选项:</p>
<p>Since the 0th index is difficult to manage, in 2.3 the <code class="docutils literal"><span class="pre">findType</span></code> option was
added:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;findType&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;popular&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">paginate()</span></code> 方法应当实现下面的方法签名。要使用你自己的方法/逻辑，在要用来查询数据模型中重载它:</p>
<p>The <code class="docutils literal"><span class="pre">paginate()</span></code> method should implement the following method signature. To
use your own method/logic override it in the model you wish to get the data
from:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * 重载 paginate 方法 - 按照 week、away_team_id 和 home_team_id 分组</span>
<span class="sd"> * Overridden paginate method - group by week, away_team_id and home_team_id</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">paginate</span><span class="p">(</span><span class="nv">$conditions</span><span class="p">,</span> <span class="nv">$fields</span><span class="p">,</span> <span class="nv">$order</span><span class="p">,</span> <span class="nv">$limit</span><span class="p">,</span> <span class="nv">$page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nv">$recursive</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$extra</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span> <span class="p">{</span>

    <span class="nv">$recursive</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="nv">$group</span> <span class="o">=</span> <span class="nv">$fields</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;week&#39;</span><span class="p">,</span> <span class="s1">&#39;away_team_id&#39;</span><span class="p">,</span> <span class="s1">&#39;home_team_id&#39;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span>
        <span class="s1">&#39;all&#39;</span><span class="p">,</span>
        <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;conditions&#39;</span><span class="p">,</span> <span class="s1">&#39;fields&#39;</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span><span class="p">,</span> <span class="s1">&#39;limit&#39;</span><span class="p">,</span> <span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="s1">&#39;recursive&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>你还需要重载核心的 <code class="docutils literal"><span class="pre">paginateCount()</span></code> 方法，该方法的参数与 <code class="docutils literal"><span class="pre">Model::find('count')</span></code> 方法相同。下面的例子用了 PostgresSQL 特有的功能，所以请根据你使用的数据库做出相应调整:</p>
<p>You also need to override the core <code class="docutils literal"><span class="pre">paginateCount()</span></code>, this method
expects the same arguments as <code class="docutils literal"><span class="pre">Model::find('count')</span></code>. The example
below uses some PostgresSQL-specifc features, so please adjust
accordingly depending on what database you are using:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * 重载 paginateCount 方法</span>
<span class="sd"> * Overridden paginateCount method</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">paginateCount</span><span class="p">(</span><span class="nv">$conditions</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$recursive</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="nv">$extra</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span> <span class="p">{</span>
    <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&quot;SELECT</span>
<span class="s2">        DISTINCT ON(</span>
<span class="s2">            week, home_team_id, away_team_id</span>
<span class="s2">        )</span>
<span class="s2">            week, home_team_id, away_team_id</span>
<span class="s2">        FROM</span>
<span class="s2">            games&quot;</span><span class="p">;</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">recursive</span> <span class="o">=</span> <span class="nv">$recursive</span><span class="p">;</span>
    <span class="nv">$results</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$results</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>观察力好的读者应该已经注意到了，到此为止我们定义的分页方法实际上并不必要——你只需要在控制器的 <code class="docutils literal"><span class="pre">$paginate</span></code> 类变量中加入关键字:</p>
<p>The observant reader will have noticed that the paginate method
we&#8217;ve defined wasn&#8217;t actually necessary - All you have to do is add
the keyword in controller&#8217;s <code class="docutils literal"><span class="pre">$paginate</span></code> class variable:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * 加上 GROUP BY 子句</span>
<span class="sd"> * Add GROUP BY clause</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="nv">$paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;MyModel&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
        <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;week&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;desc&#39;</span><span class="p">),</span>
        <span class="s1">&#39;group&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;week&#39;</span><span class="p">,</span> <span class="s1">&#39;home_team_id&#39;</span><span class="p">,</span> <span class="s1">&#39;away_team_id&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
<span class="sd">/**</span>
<span class="sd"> * 或者在动作中随时加入</span>
<span class="sd"> * Or on-the-fly from within the action</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">settings</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;MyModel&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span>
            <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;week&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;desc&#39;</span><span class="p">),</span>
            <span class="s1">&#39;group&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;week&#39;</span><span class="p">,</span> <span class="s1">&#39;home_team_id&#39;</span><span class="p">,</span> <span class="s1">&#39;away_team_id&#39;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>在 CakePHP 2.0 中，使用 GROUP BY 子句时不再需要实现 <code class="docutils literal"><span class="pre">paginateCount()</span></code> 方法。核心的 <code class="docutils literal"><span class="pre">find('count')</span></code> 方法会正确地计算总行数。</p>
<p>In CakePHP 2.0, you no longer need to implement <code class="docutils literal"><span class="pre">paginateCount()</span></code> when using
group clauses. The core <code class="docutils literal"><span class="pre">find('count')</span></code> will correctly count the total number
of rows.</p>
</div>
<div class="section" id="id4">
<h2>控制哪些字段用于排序<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="control-which-fields-used-for-ordering">
<h2>Control which fields used for ordering<a class="headerlink" href="#control-which-fields-used-for-ordering" title="永久链接至标题">¶</a></h2>
<p>默认情况下可以用模型的任何列进行排序。有时候这样也不好，因为这允许用户把没有索引的列、或者虚拟字段用于排序，而后者得计算更可能要耗费昂贵的资源。在这种情况下，你可以用 <code class="docutils literal"><span class="pre">PaginatorComponent::paginate()</span></code> 方法的第三个参数来限制能用于排序的字段:</p>
<p>By default sorting can be done with any column on a model. This is sometimes
undesirable as it can allow users to sort on un-indexed columns, or virtual
fields that can be expensive to calculate. You can use the 3rd parameter of
<code class="docutils literal"><span class="pre">PaginatorComponent::paginate()</span></code> to restrict the columns that sorting will be
done on:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">(</span><span class="s1">&#39;Post&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(),</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;slug&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>这样就只允许用 title 和 slug 列进行排序。设置任何其他字段进行排序都会被忽略。</p>
<p>This would allow sorting on the title and slug columns only. A user that sets
sort to any other value will be ignored.</p>
</div>
<div class="section" id="id5">
<h2>限制可以读取的最大行数<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="limit-the-maximum-number-of-rows-that-can-be-fetched">
<h2>Limit the maximum number of rows that can be fetched<a class="headerlink" href="#limit-the-maximum-number-of-rows-that-can-be-fetched" title="永久链接至标题">¶</a></h2>
<p>读取的结果的行数以 <code class="docutils literal"><span class="pre">limit</span></code> 参数提供给用户。在分页结果中允许用户读取所有行，通常不好。默认情况下 CakePHP 限制可以读取的最大行数为 100。如果此默认值不适合你的应用程序，你可以把它作为分页选项的一部分进行调整:</p>
<p>The number of results that are fetched is exposed to the user as the
<code class="docutils literal"><span class="pre">limit</span></code> parameter. It is generally undesirable to allow users to fetch all
rows in a paginated set. By default CakePHP limits the maximum number of rows
that can be fetched to 100. If this default is not appropriate for your
application, you can adjust it as part of the pagination options:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">// 这里还有其他键。</span>
    <span class="c1">// other keys here.</span>
    <span class="s1">&#39;maxLimit&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span>
<span class="p">);</span>
</pre></div>
</div>
<p>如果请求的 limit 参数大于该值，就会被减小为 <code class="docutils literal"><span class="pre">maxLimit</span></code> 的值。</p>
<p>If the request&#8217;s limit param is greater than this value, it will be reduced to
the <code class="docutils literal"><span class="pre">maxLimit</span></code> value.</p>
</div>
<div class="section" id="get">
<span id="pagination-with-get"></span><h2>用 GET 参数进行分页<a class="headerlink" href="#get" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="pagination-with-get-parameters">
<h2>Pagination with GET parameters<a class="headerlink" href="#pagination-with-get-parameters" title="永久链接至标题">¶</a></h2>
<p>在之前版本的 CakePHP 中，只能用命名参数（<em>named parameter</em>）来生成分页链接。但是如果页面用 GET 参数进行请求，它们还可以照常运行。对 2.0 版本，我们决定使生成分页参数的方式更加可控和一致。你可以在组件中选择使用查询字符串（<em>querystring</em>）或命名参数。收到的请求只会接受选中的类型，而且 <a class="reference internal" href="../helpers/paginator.html#PaginatorHelper" title="PaginatorHelper"><code class="xref php php-class docutils literal"><span class="pre">PaginatorHelper</span></code></a> 助件只会生成带有选中类型的参数的链接:</p>
<p>In previous versions of CakePHP you could only generate pagination links using
named parameters. But if pages were requested with GET parameters they would
still work. For 2.0, we decided to make how you generate pagination parameters
more controlled and consistent. You can choose to use either querystring or
named parameters in the component. Incoming requests will accept only the chosen
type, and the <a class="reference internal" href="../helpers/paginator.html#PaginatorHelper" title="PaginatorHelper"><code class="xref php php-class docutils literal"><span class="pre">PaginatorHelper</span></code></a> will generate links with the chosen type of
parameter:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;paramType&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;querystring&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
<p>上面的代码会启用查询字符串参数的解析和生成。你也可以改变 PaginatorComponent 组件的 <code class="docutils literal"><span class="pre">$settings</span></code> 属性:</p>
<p>The above would enable querystring parameter parsing and generation. You can
also modify the <code class="docutils literal"><span class="pre">$settings</span></code> property on the PaginatorComponent:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">settings</span><span class="p">[</span><span class="s1">&#39;paramType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;querystring&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>默认情况下，所有标准的分页参数都会转换成 GET 参数。</p>
<p>By default all of the typical paging parameters will be converted into GET
arguments.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p>你可能会遇到这样的情况，赋值给不存在的属性会抛出错误:</p>
<p>You can run into a situation where assigning a value to a nonexistent property will throw errors:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">[</span><span class="s1">&#39;limit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</pre></div>
</div>
<p>这会抛出错误 &#8220;Notice: Indirect modification of overloaded property $paginate has no effect.&#8221;。给该属性赋予初始值就解决了问题:</p>
<p>will throw the error &#8220;Notice: Indirect modification of overloaded property $paginate has no effect.&#8221;
Assigning an initial value to the property solves the issue:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">[</span><span class="s1">&#39;limit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="c1">//或者</span>
<span class="c1">//or</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">);</span>
</pre></div>
</div>
<p>或者在控制器类中声明该属性:</p>
<p>Or just declare the property in the controller class:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PostsController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>或者使用 <code class="docutils literal"><span class="pre">$this-&gt;Paginator-&gt;settings</span> <span class="pre">=</span> <span class="pre">array('limit'</span> <span class="pre">=&gt;</span> <span class="pre">10);</span></code>。</p>
<p>Or use <code class="docutils literal"><span class="pre">$this-&gt;Paginator-&gt;settings</span> <span class="pre">=</span> <span class="pre">array('limit'</span> <span class="pre">=&gt;</span> <span class="pre">10);</span></code></p>
<p>如果要改变 PaginatorComponent 组件的 <code class="docutils literal"><span class="pre">$settings</span></code> 属性，确保添加 Paginator 组件到 $components 数组中。</p>
<p>Make sure you have added the Paginator component to your $components array if
you want to modify the <code class="docutils literal"><span class="pre">$settings</span></code> property of the PaginatorComponent.</p>
<p>以上这两种方法都能够解决 notice 错误。</p>
<p class="last">Either of these approaches will solve the notice errors.</p>
</div>
</div>
<div class="section" id="id6">
<h2>请求的页超出范围<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="out-of-range-page-requests">
<h2>Out of range page requests<a class="headerlink" href="#out-of-range-page-requests" title="永久链接至标题">¶</a></h2>
<p>从 2.3 版本开始，当试图访问不存在的页，即请求的页数大于总页数，PaginatorComponent 组件会抛出 <cite>NotFoundException</cite> 异常。</p>
<p>As of 2.3 the PaginatorComponent will throw a <cite>NotFoundException</cite> when trying to
access a non-existent page, i.e. page number requested is greater than total
page count.</p>
<p>那么，或者任正常的错误页面显示，或者使用 try catch 块，并在捕获 <cite>NotFoundException</cite> 异常时做出适当的处理。</p>
<p>So you could either let the normal error page be rendered or use a try catch
block and take appropriate action when a <cite>NotFoundException</cite> is caught:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Paginator</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">NotFoundException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//在这里进行处理，比如跳转到第一页或最后一页。</span>
        <span class="c1">//Do something here like redirecting to first or last page.</span>
        <span class="c1">//$this-&gt;request-&gt;params[&#39;paging&#39;] will give you required info.</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="ajax">
<h2>AJAX 分页<a class="headerlink" href="#ajax" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="ajax-pagination">
<h2>AJAX Pagination<a class="headerlink" href="#ajax-pagination" title="永久链接至标题">¶</a></h2>
<p>在分页中加入 AJAX 功能是很容易的。使用 <a class="reference internal" href="../helpers/js.html#JsHelper" title="JsHelper"><code class="xref php php-class docutils literal"><span class="pre">JsHelper</span></code></a> 助件和 <a class="reference internal" href="request-handling.html#RequestHandlerComponent" title="RequestHandlerComponent"><code class="xref php php-class docutils literal"><span class="pre">RequestHandlerComponent</span></code></a> 组件就能够容易地给应用程序加上 AJAX 分页。欲知详情，请见 <a class="reference internal" href="../helpers/js.html#ajax-pagination"><span class="std std-ref">Ajax Pagination</span></a>。</p>
<p>It&#8217;s very easy to incorporate AJAX functionality into pagination.
Using the <a class="reference internal" href="../helpers/js.html#JsHelper" title="JsHelper"><code class="xref php php-class docutils literal"><span class="pre">JsHelper</span></code></a> and <a class="reference internal" href="request-handling.html#RequestHandlerComponent" title="RequestHandlerComponent"><code class="xref php php-class docutils literal"><span class="pre">RequestHandlerComponent</span></code></a> you can
easily add AJAX pagination to your application. See <a class="reference internal" href="../helpers/js.html#ajax-pagination"><span class="std std-ref">Ajax Pagination</span></a> for
more information.</p>
</div>
<div class="section" id="id7">
<h2>视图中的分页<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="pagination-in-the-view">
<h2>Pagination in the view<a class="headerlink" href="#pagination-in-the-view" title="永久链接至标题">¶</a></h2>
<p>关于如何创建分页导航的链接，请查看 <a class="reference internal" href="../helpers/paginator.html#PaginatorHelper" title="PaginatorHelper"><code class="xref php php-class docutils literal"><span class="pre">PaginatorHelper</span></code></a> 的文档。</p>
<p>Check the <a class="reference internal" href="../helpers/paginator.html#PaginatorHelper" title="PaginatorHelper"><code class="xref php php-class docutils literal"><span class="pre">PaginatorHelper</span></code></a> documentation for how to create links for
pagination navigation.</p>
</div>
</div>


			</div>
		</div>

		
		<div class="col-md-3 col-md-pull-9 pull-off hidden-xs hidden-sm" lang="zh">
			<aside class="sidebar">
				<div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">欢迎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cakephp-overview.html">CakePHP 概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controllers.html">控制器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../views.html">视图</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../models.html">模型</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../core-libraries.html">核心库</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../toc-general-purpose.html">通用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc-behaviors.html">行为</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../toc-components.html">组件</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">分页</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pagination">Pagination</a></li>
<li class="toctree-l3"><a class="reference internal" href="flash.html">Flash</a></li>
<li class="toctree-l3"><a class="reference internal" href="sessions.html">Sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="authentication.html">Authentication 认证</a></li>
<li class="toctree-l3"><a class="reference internal" href="security-component.html">Form tampering prevention</a></li>
<li class="toctree-l3"><a class="reference internal" href="security-component.html#csrf-protection">CSRF protection</a></li>
<li class="toctree-l3"><a class="reference internal" href="request-handling.html">请求处理</a></li>
<li class="toctree-l3"><a class="reference internal" href="cookie.html">Cookie</a></li>
<li class="toctree-l3"><a class="reference internal" href="access-control-lists.html">访问控制列表组件</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../toc-helpers.html">助件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc-utilities.html">工具</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">插件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../console-and-shells.html">Shells，任务与命令行工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment.html">部署</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-and-examples.html">教程 &amp; 实例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices.html">Appendices</a></li>
</ul>

</div>

				</div>
			</aside>
			<aside class="sidebar">
				<div class="mb30 row">
				</div>
			</aside>
		</div>
	</div>
</div>

<section id="socials" class="back-3">
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-4  social text-center">
				<div class="col-sm-3 col-xs-3">
					<div id="fb-root"></div>
						<script>(function(d, s, id) {
						  var js, fjs = d.getElementsByTagName(s)[0];
						  if (d.getElementById(id)) return;
						  js = d.createElement(s); js.id = id;
						  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
						  fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));
						</script>
						<div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
					<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
				</div>
			</div>

			<div class="col-xs-12 col-sm-12 col-md-8 social-footer text-center ">
				<a href="#">发现翻译错误? 请在下面留言</a>
				<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">我要加入翻译</a>
				<a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
				<a href="http://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
				<a href="http://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
				<a href="http://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
				<a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
				<a href="http://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
				<a href="http://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
				<a href="http://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
			</div>
		</div>
	</div>
</section>

<footer id="footer" class="footer-wrapper">
	<div class="container">

		<div class="row col-p30">
			<div class="col-sm-12 col-md-3">
				<div class="footer-widget t-footer">
					<div class="col-md-12">
						<a href="https://www.openhub.net/p/cakephp">
							<img src="../../_static/open-hub.png">
						</a>
						<div class="mt10">
							<a href="https://www.rackspace.com/">
								<img src="../../_static/rackspace.png">
							</a>
						</div>
					</div>
				</div>
			</div>

			<div class="col-sm-12 col-md-9">
				<div class="col-md-3 col-sm-6 business-solution">
					<ul class="footer-menu">
						<li class="menu-title">
	<a href="http://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
	<a href="http://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 text-center mt30">
				<p class="copyright">
							&copy; 版权所有 2016, Cake Software Foundation, Inc.
						最后更新于 8月 04, 2016.
						Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
				</p>
			</div>
		</div>
	</div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-743287-3']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
  </body>
</html>