
<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="New Features in CakePHP 2.0" lang="zh_CN" name="title" />
<meta content="time reductions,doctypes,model construction,key value,option one,database connection,content view,configuration file,constructor,great time,array,new features,bootstrap process,elements,new models" lang="zh_CN" name="keywords" />

    <title>New Features in CakePHP 2.0 &mdash; CakePHP Cookbook 2.x 文档</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/app.js"></script>
    <script type="text/javascript" src="../_static/modernizr.foundation.js"></script>
    <script type="text/javascript" src="../_static/foundation.js"></script>
    <link rel="top" title="CakePHP Cookbook 2.x 文档" href="../index.html" />
    <link rel="up" title="Appendices" href="../appendices.html" />
    <link rel="next" title="PHPUnit Migration Hints" href="phpunit-migration-hints.html" />
    <link rel="prev" title="2.0 Migration Guide" href="2-0-migration-guide.html" />
<link href="../_static/favicon.ico" type="image/x-icon" rel="icon" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="alternate" hreflang="en" href="../../en/appendices/new-features-in-cakephp-2-0.html" /><link rel="alternate" hreflang="pt" href="../../pt/appendices/new-features-in-cakephp-2-0.html" /><link rel="alternate" hreflang="es" href="../../es/appendices/new-features-in-cakephp-2-0.html" /><link rel="alternate" hreflang="ja" href="../../ja/appendices/new-features-in-cakephp-2-0.html" /><link rel="alternate" hreflang="fr" href="../../fr/appendices/new-features-in-cakephp-2-0.html" />

<link rel="search" type="application/opensearchdescription+xml" title="CakePHP Book 2.x Search" href="../_static/opensearchdescription-book-2-x.xml">
<script type="text/javascript">
window.lang = "zh_CN";
</script>

  </head>
  <body>

<div id="container">

<div id="cakephp-global-navigation">
	<ul>
		<li class="main"><a href="http://cakephp.org">CakePHP</a></li>
		<li class="primary"><a href="#" class="empty">Downloads</a>
			<ul class="second-level">
				<li><a href="https://github.com/cakephp/cakephp/tags">Releases</a></li>
				<li><a href="http://pear.cakephp.org">Pear channel</a></li>
			</ul>
		</li>
		<li class="primary"><a href="#" class="empty">Documentation</a>
			<ul class="second-level">
				<li><a href="http://api.cakephp.org">API</a></li>
				<li><a href="http://book.cakephp.org">Book</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://community.cakephp.org">Community</a>
			<ul class="second-level">
				<li><a href="http://webchat.freenode.net/?channels=cakephp&uio=MT1mYWxzZSY5PXRydWUmMTE9MjQ2b8">Help &amp; Support</a></li>
				<li><a href="https://github.com/cakephp/cakephp/issues">Issues</a></li>
				<li><a href="http://bakery.cakephp.org">The Bakery</a></li>
				<li><a href="http://stackoverflow.com/tags/cakephp">Stack Overflow</a></li>
				<li><a href="http://www.facebook.com/groups/cake.community">Facebook Group</a></li>
				<li><a href="http://goo.gl/mSC0s">Google+ Community</a></li>
				<li><a href="http://www.youtube.com/user/CakePHP">YouTube Channel</a></li>
				<li><a href="http://podcast.cakephp.org">CakePHP Podcast</a></li>
				<li><a href="http://twitter.com/CakePHP">Follow us on Twitter</a></li>
				<li><a href="http://groups.google.com/group/cake-php">Google Group</a></li>
				<li><a href="http://github.com/cakephp/cakephp/contributors">Contributors</a></li>
				<li><a href="http://plugins.cakephp.org">Plugins &amp; Packages</a></li>
				<li><a href="http://community.cakephp.org/get-involved">Get Involved</a></li>
				<li><a href="http://community.cakephp.org/guidelines">Guidelines</a></li>
				<li><a href="http://cakefest.org">CakeFest</a></li>
				<li><a href="http://cakephp.org/logos">Logo</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://cakephp.org/services">Services</a>
			<ul class="second-level">
				<li><a href="http://cakephp.org/services/certification">Certification</a></li>
				<li><a href="http://cakephp.org/services/consultation">Consultation</a></li>
				<li><a href="http://cakephp.org/services/support">Support</a></li>
				<li><a href="http://training.cakephp.org">Training</a></li>
			</ul>
		</li>
	</ul>
</div>

<div class="masthead">
	<div class="header-backing"></div>
	<div class="searchbar row">
		<div class="columns three phone-one">
			<a class="logo" href="../contents.html">
			<img src="../_static/cake-logo.png" alt="CakePHP" width="70" />
			</a>
		</div>
		
<div id="searchbox" class="columns nine phone-three">

	<form id="searchform" class="search" action="../search.html" method="get">
		<input class="search-input" autocomplete="off" type="search" name="q" size="18" />
		<input class="search-submit search-big button red" type="submit" value="搜索" />
		<input type="hidden" name="check_keywords" value="yes" />
		<input type="hidden" name="area" value="default" />

		<a href="#" id="tablet-nav" class="show-on-phones pale button small">Nav</a>
	</form>

</div>
	</div>
</div>
<div class="breadcrumb-header">
	<div class="related row">
		<div class="columns three root-link">
			<a href="../contents.html">Cookbook 2.x</a>
		</div>
		<div class="columns nine">
			<ul class="inline breadcrumb">
			<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
				<a href="../appendices.html" accesskey="U" itemprop="url"><span itemprop="title">Appendices</span></a>
			</li>
			</ul>
			<div class="versions dropdown">
				<a href="#">2.x Book</a>
				<ul>
					<li><a href="http://book.cakephp.org/3.0/en">3.0 Book</a></li>
					<li><a href="http://book.cakephp.org/1.3/zh_CN/">1.3 Book</a></li>
					<li><a href="http://book.cakephp.org/1.2/zh_CN/">1.2 Book</a></li>
					<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
				</ul>
			</div>

			<div class="languages dropdown">
				<a href="#">zh_CN</a>

				<ul>
				
					<li><a href="../../en/appendices/new-features-in-cakephp-2-0.html">en</a></li>
				
					<li><a href="../../pt/appendices/new-features-in-cakephp-2-0.html">pt</a></li>
				
					<li><a href="../../es/appendices/new-features-in-cakephp-2-0.html">es</a></li>
				
					<li><a href="../../ja/appendices/new-features-in-cakephp-2-0.html">ja</a></li>
				
					<li><a href="../../fr/appendices/new-features-in-cakephp-2-0.html">fr</a></li>
				
					<li></li>
				
				</ul>
			</div>
		</div>
	</div>
</div>

<div class="content row">
	<div class="document columns nine push-three">
		<div class="body"><a class="button pale improve" href="https://github.com/cakephp/docs/edit/master/zh/appendices/new-features-in-cakephp-2-0.rst" target="_blank">Improve this Doc</a>
  <div class="section" id="new-features-in-cakephp-2-0">
<h1>New Features in CakePHP 2.0<a class="headerlink" href="#new-features-in-cakephp-2-0" title="永久链接至标题">¶</a></h1>
<div class="section" id="models">
<h2>Models<a class="headerlink" href="#models" title="永久链接至标题">¶</a></h2>
<p>The model construction process has been made lighter. Model associations are
now lazy loaded, applications with lots of models and associations will see
great time reductions in the bootstrap process.</p>
<p>Now models won&#8217;t require a database connection in the construction process.
The database will be accessed for the first time only when a find operation is
issued or information for one of the columns is required.</p>
</div>
<div class="section" id="view">
<h2>View<a class="headerlink" href="#view" title="永久链接至标题">¶</a></h2>
<div class="section" id="view-output">
<h3>View::$output<a class="headerlink" href="#view-output" title="永久链接至标题">¶</a></h3>
<p>View will now always have the last rendered content (view or layout) accessible
through <tt class="docutils literal"><span class="pre">$this-&gt;output</span></tt>. In helpers you can use <tt class="docutils literal"><span class="pre">$this-&gt;_View-&gt;output</span></tt>. Modifying
this property will change the content that comes out of the view rendering.</p>
</div>
</div>
<div class="section" id="helpers">
<h2>Helpers<a class="headerlink" href="#helpers" title="永久链接至标题">¶</a></h2>
<div class="section" id="htmlhelper">
<h3>HtmlHelper<a class="headerlink" href="#htmlhelper" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">getCrumbList()</span></tt> Creates breadcrumb links wrapped in <tt class="docutils literal"><span class="pre">&lt;li&gt;</span></tt> elements.
See <a class="reference external" href="http://cakephp.lighthouseapp.com/projects/42648/tickets/856">#856</a>.</li>
<li><tt class="docutils literal"><span class="pre">loadConfig()</span></tt> has moved from <a class="reference internal" href="../views/helpers.html#Helper" title="Helper"><tt class="xref php php-class docutils literal"><span class="pre">Helper</span></tt></a> to <a class="reference internal" href="../core-libraries/helpers/html.html#HtmlHelper" title="HtmlHelper"><tt class="xref php php-class docutils literal"><span class="pre">HtmlHelper</span></tt></a>
class. This method now uses the new reader classes (see 2.0 <a class="reference internal" href="../development/configuration.html#Configure" title="Configure"><tt class="xref php php-class docutils literal"><span class="pre">Configure</span></tt></a>)
to load your config file. As an option you can pass the path as second parameter
(<tt class="docutils literal"><span class="pre">app/Config</span></tt> is default). To simplify, you can set the configuration file
(and the reader) in <tt class="docutils literal"><span class="pre">Controller::$helpers</span></tt> (example below) to load on helper
constructor. In configuration file you can set the below keys:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">tags</span></tt> Should be an array with key value;</li>
<li><tt class="docutils literal"><span class="pre">minimizedAttributes</span></tt> Should be a list;</li>
<li><tt class="docutils literal"><span class="pre">docTypes</span></tt> Should be an array with key value;</li>
<li><tt class="docutils literal"><span class="pre">attributeFormat</span></tt> Should be a string;</li>
<li><tt class="docutils literal"><span class="pre">minimizedAttributeFormat</span></tt> Should be a string.</li>
</ul>
</div></blockquote>
<p>Example of how to set configuration file on controller:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$helpers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Html&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;configFile&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;config_file&#39;</span><span class="p">,</span> <span class="s1">&#39;php&#39;</span><span class="p">)</span> <span class="c1">// Option one: an array with filename and reader name</span>
        <span class="s1">&#39;configFile&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;config_file&#39;</span> <span class="c1">// Option two: a string with filename. The PhpReader will be used</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="formhelper">
<h3>FormHelper<a class="headerlink" href="#formhelper" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../core-libraries/helpers/form.html#FormHelper" title="FormHelper"><tt class="xref php php-class docutils literal"><span class="pre">FormHelper</span></tt></a> now supports all HTML5 input types and custom input
types. Just use the input type you want as the method on the helper. For
example <tt class="docutils literal"><span class="pre">range()</span></tt> would create an input with type = range.</li>
<li><tt class="docutils literal"><span class="pre">postLink()</span></tt> and <tt class="docutils literal"><span class="pre">postButton()</span></tt> Creates link/button to
access some page using HTTP method POST. With this, in your controller you can
avoid some action, like delete, to be accessed by GET method.</li>
<li><tt class="docutils literal"><span class="pre">select()</span></tt> with multiple = checkbox, now treats the <tt class="docutils literal"><span class="pre">'id'</span></tt>
attribute as a prefix for all the generated options.</li>
</ul>
</div>
</div>
<div class="section" id="libs">
<h2>Libs<a class="headerlink" href="#libs" title="永久链接至标题">¶</a></h2>
<div class="section" id="cakerequest">
<h3>CakeRequest<a class="headerlink" href="#cakerequest" title="永久链接至标题">¶</a></h3>
<p><a class="reference internal" href="../controllers/request-response.html#CakeRequest" title="CakeRequest"><tt class="xref php php-class docutils literal"><span class="pre">CakeRequest</span></tt></a> is a new class introduced in 2.0. It encapsulates
commonly used request introspection methods and replaces the params array with a
more useful object. Read more about <a class="reference internal" href="../controllers/request-response.html#CakeRequest" title="CakeRequest"><tt class="xref php php-class docutils literal"><span class="pre">CakeRequest</span></tt></a>.</p>
</div>
<div class="section" id="cakeresponse">
<h3>CakeResponse<a class="headerlink" href="#cakeresponse" title="永久链接至标题">¶</a></h3>
<p><a class="reference internal" href="../controllers/request-response.html#CakeResponse" title="CakeResponse"><tt class="xref php php-class docutils literal"><span class="pre">CakeResponse</span></tt></a> is a new class introduced in 2.0. It encapsulates
commonly used methods and properties in the HTTP response your application
generates. It consolidates several features in CakePHP. Read more about
<a class="reference internal" href="../controllers/request-response.html#CakeResponse" title="CakeResponse"><tt class="xref php php-class docutils literal"><span class="pre">CakeResponse</span></tt></a>.</p>
</div>
<div class="section" id="cakesession-sessioncomponent">
<h3>CakeSession, SessionComponent<a class="headerlink" href="#cakesession-sessioncomponent" title="永久链接至标题">¶</a></h3>
<p><a class="reference internal" href="../development/sessions.html#CakeSession" title="CakeSession"><tt class="xref php php-class docutils literal"><span class="pre">CakeSession</span></tt></a> and the <a class="reference internal" href="../core-libraries/components/sessions.html#SessionComponent" title="SessionComponent"><tt class="xref php php-class docutils literal"><span class="pre">SessionComponent</span></tt></a> have had a number
of changes, see the session section for more information.</p>
</div>
<div class="section" id="router">
<h3>Router<a class="headerlink" href="#router" title="永久链接至标题">¶</a></h3>
<div class="section" id="routes-can-return-full-urls">
<h4>Routes can return full urls<a class="headerlink" href="#routes-can-return-full-urls" title="永久链接至标题">¶</a></h4>
<p>Route objects can now return full urls, and <a class="reference internal" href="../development/routing.html#Router" title="Router"><tt class="xref php php-class docutils literal"><span class="pre">Router</span></tt></a> will not further
modify them beyond adding the query string and fragment elements. For example
this could be used to create routes to handle subdomains, or enabling https/http
flags. An example of a route class that supports subdomains would be:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SubdomainRoute</span> <span class="k">extends</span> <span class="nx">CakeRoute</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">match</span><span class="p">(</span><span class="nv">$params</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$subdomain</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;subdomain&#39;</span><span class="p">])</span> <span class="o">?</span> <span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;subdomain&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="k">null</span><span class="p">;</span>
        <span class="nb">unset</span><span class="p">(</span><span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;subdomain&#39;</span><span class="p">]);</span>
        <span class="nv">$path</span> <span class="o">=</span> <span class="k">parent</span><span class="o">::</span><span class="na">match</span><span class="p">(</span><span class="nv">$params</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$subdomain</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$path</span> <span class="o">=</span> <span class="s1">&#39;http://&#39;</span> <span class="o">.</span> <span class="nv">$subdomain</span> <span class="o">.</span> <span class="s1">&#39;.localhost&#39;</span> <span class="o">.</span> <span class="nv">$path</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$path</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When creating links you could do the following to make links pointing at other
subdomains.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;Other domain&#39;</span><span class="p">,</span>
     <span class="k">array</span><span class="p">(</span><span class="s1">&#39;subdomain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;add&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The above would create a link with <a class="reference external" href="http://test.localhost/posts/add">http://test.localhost/posts/add</a> as the url.</p>
</div>
</div>
<div class="section" id="xml">
<h3>Xml<a class="headerlink" href="#xml" title="永久链接至标题">¶</a></h3>
<p><a class="reference internal" href="../core-utility-libraries/xml.html#Xml" title="Xml"><tt class="xref php php-class docutils literal"><span class="pre">Xml</span></tt></a> has had a number of changes. Read more about
<a class="reference internal" href="../core-utility-libraries/xml.html"><em>Xml</em></a> class.</p>
</div>
</div>
<div class="section" id="new-lib-features">
<h2>New Lib features<a class="headerlink" href="#new-lib-features" title="永久链接至标题">¶</a></h2>
<div class="section" id="configure-readers">
<h3>Configure readers<a class="headerlink" href="#configure-readers" title="永久链接至标题">¶</a></h3>
<p><a class="reference internal" href="../development/configuration.html#Configure" title="Configure"><tt class="xref php php-class docutils literal"><span class="pre">Configure</span></tt></a> can now be configured to load configuration files from a
variety of sources and formats. The <a class="reference internal" href="../development/configuration.html"><em>配置</em></a> section
contains more information about the changes made to configure.</p>
<p><a class="reference internal" href="../development/configuration.html#Configure::read" title="Configure::read"><tt class="xref php php-meth docutils literal"><span class="pre">Configure::read()</span></tt></a> without any arguments allows you to read all
values from configure, instead of just the debug value.</p>
</div>
<div class="section" id="error-and-exception-handling">
<h3>Error and exception handling<a class="headerlink" href="#error-and-exception-handling" title="永久链接至标题">¶</a></h3>
<p>CakePHP 2.0 has had <a class="reference internal" href="../development/exceptions.html"><em>异常</em></a> and <a class="reference internal" href="../development/errors.html"><em>错误处理</em></a>
handling rebuilt, to be more flexible and give more power to developers.</p>
</div>
<div class="section" id="string-wrap">
<h3>String::wrap()<a class="headerlink" href="#string-wrap" title="永久链接至标题">¶</a></h3>
<p><a class="reference internal" href="../core-utility-libraries/string.html#String::wrap" title="String::wrap"><tt class="xref php php-meth docutils literal"><span class="pre">String::wrap()</span></tt></a> was added to help make fixed width formatting of
text easier. It&#8217;s used in Shells whenever you use <a class="reference internal" href="../console-and-shells.html#Shell::wrapText" title="Shell::wrapText"><tt class="xref php php-meth docutils literal"><span class="pre">Shell::wrapText()</span></tt></a>.</p>
</div>
<div class="section" id="debug">
<h3>debug()<a class="headerlink" href="#debug" title="永久链接至标题">¶</a></h3>
<p><a class="reference internal" href="../development/debugging.html#debug" title="debug"><tt class="xref php php-func docutils literal"><span class="pre">debug()</span></tt></a> no longer outputs html in the console. Instead it makes
output like the following:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">########## DEBUG ##########</span>
<span class="k">Array</span>
<span class="p">(</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">test</span>
<span class="p">)</span>
<span class="c1">###########################</span>
</pre></div>
</div>
<p>This should improve readability of <tt class="docutils literal"><span class="pre">debug()</span></tt> on the command line.</p>
</div>
</div>
<div class="section" id="components">
<h2>Components<a class="headerlink" href="#components" title="永久链接至标题">¶</a></h2>
<p>Components received a similar treatment to helpers and behaviors,
<a class="reference internal" href="../controllers/components.html#Component" title="Component"><tt class="xref php php-class docutils literal"><span class="pre">Component</span></tt></a> is now the base class for components. Read more about the
component changes.</p>
<div class="section" id="requesthandler">
<h3>RequestHandler<a class="headerlink" href="#requesthandler" title="永久链接至标题">¶</a></h3>
<p><tt class="xref php php-class docutils literal"><span class="pre">RequestHandler</span></tt> was heavily refactored due to the introduction of
<a class="reference internal" href="../controllers/request-response.html#CakeRequest" title="CakeRequest"><tt class="xref php php-class docutils literal"><span class="pre">CakeRequest</span></tt></a>. These changes allowed for some new features to be
introduced as well.</p>
<div class="section" id="automatic-parsing-of-accept-headers">
<h4>Automatic parsing of Accept headers<a class="headerlink" href="#automatic-parsing-of-accept-headers" title="永久链接至标题">¶</a></h4>
<p>If a client sends a single Accept mime type that matches one of the extensions
enabled in :php:class`Router`, <tt class="xref php php-class docutils literal"><span class="pre">RequestHandler</span></tt> will treat it the
same an extension. This expands CakePHP&#8217;s support for REST style endpoints. To
use this feature start off by enabling extensions in <tt class="docutils literal"><span class="pre">app/Config/routes.php</span></tt>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nx">Router</span><span class="o">::</span><span class="na">parseExtensions</span><span class="p">(</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;xml&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Once you have created layouts and views for your extensions, you will be able to
visit a url like posts/view/1 and send Accept: <tt class="docutils literal"><span class="pre">application/json</span></tt> in the
headers to receive the json version of that url.</p>
</div>
</div>
<div class="section" id="cookiecomponent">
<h3>CookieComponent<a class="headerlink" href="#cookiecomponent" title="永久链接至标题">¶</a></h3>
<p><a class="reference internal" href="../core-libraries/components/cookie.html#CookieComponent" title="CookieComponent"><tt class="xref php php-class docutils literal"><span class="pre">CookieComponent</span></tt></a> now supports http only cookies. You can enable
their use by setting <tt class="docutils literal"><span class="pre">$this-&gt;Cookie-&gt;httpOnly</span> <span class="pre">=</span> <span class="pre">true;</span></tt>. Having http only
cookies will make them inaccessible from the browser.</p>
</div>
<div class="section" id="security-component-csrf-separation">
<h3>Security Component CSRF separation<a class="headerlink" href="#security-component-csrf-separation" title="永久链接至标题">¶</a></h3>
<p>CakePHP has had CSRF protection since 1.2. For 2.0 the existing CSRF has a new
more paranoid mode, and is its own standalone feature. In the past CSRF features
were coupled with form tampering safe-guards. Developers often disabled
validatePost in order to do dynamic forms, disabling the CSRF protection at the
same time. For 2.0 CSRF checking has been separated from form tampering giving
you greater control.</p>
<p>For more information see <a class="reference internal" href="../core-libraries/components/security-component.html#security-csrf"><em>CSRF protection</em></a></p>
</div>
</div>
<div class="section" id="controller">
<h2>Controller<a class="headerlink" href="#controller" title="永久链接至标题">¶</a></h2>
<p>Controllers now have access to request and response objects. You can read more
about these objects on their specific pages.</p>
</div>
<div class="section" id="console">
<h2>Console<a class="headerlink" href="#console" title="永久链接至标题">¶</a></h2>
<p>The console for CakePHP 2.0 was almost entirely rebuilt. Several new features as
well as some backwards incompatible changes were made. Read more about console
changes.</p>
</div>
<div class="section" id="pagination">
<h2>Pagination<a class="headerlink" href="#pagination" title="永久链接至标题">¶</a></h2>
<p>Pagination now provides a default maxLimit for pagination at 100.</p>
<p>This limit can be overridden with the paginate variable on Controller:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;maxLimit&#39;</span> <span class="o">=&gt;</span> <span class="mi">1000</span><span class="p">);</span>
</pre></div>
</div>
<p>This default is provided to prevent user URL manipulation causing excessive
strain on the database for subsequent requests, where a user would edit the
&#8216;limit&#8217; parameter to a very large number.</p>
</div>
<div class="section" id="aliasing">
<h2>Aliasing<a class="headerlink" href="#aliasing" title="永久链接至标题">¶</a></h2>
<p>You can now alias helpers, components and behaviors to use your class instead of
a different one. This means that you can very easily make a <tt class="docutils literal"><span class="pre">MyHtml</span></tt> helper
and not need to replace every instance of <tt class="docutils literal"><span class="pre">$this-&gt;Html</span></tt> in your views. To do
this, pass the &#8216;className&#8217; key along with your class, like you would with
models:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$helpers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Html&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;MyHtml&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Similarly, you can alias components for use in your controllers:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Email&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;QueueEmailer&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Calls to the Email component would call the QueueEmailer component instead.
Finally, you can alias behaviors as well:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$actsAs</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Containable&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;SuperContainable&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Because of the way 2.0 utilizes collections and shares them across the
application, any classes you alias will be used throughout your application.
Whenever your application tries to access the alias, it will access your class.
For instance, when we aliased the Html helper in the example above, any helpers
that use the Html helper or elements that load the Html helper, will use MyHtml
instead.</p>
</div>
<div class="section" id="connectionmanager">
<h2>ConnectionManager<a class="headerlink" href="#connectionmanager" title="永久链接至标题">¶</a></h2>
<p>A new method <tt class="xref php php-meth docutils literal"><span class="pre">ConnectionManager::drop()</span></tt> was added to allow
removing connections at runtime.</p>
</div>
</div>


		</div>
	</div>

	<div class="sidebar columns three pull-nine">
<div id="sidebar-navigation" class="hide-on-phones">
	<h2 class="hide-on-desktops">Table of Contents</h2>
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">欢迎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cakephp-overview.html">CakePHP 概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">控制器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">视图</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries.html">核心库</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">插件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">命令行与Shells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">部署</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">教程 &amp; 实例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">贡献</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../appendices.html">Appendices</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="2-7-migration-guide.html">2.7 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-6-migration-guide.html">2.6 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-5-migration-guide.html">2.5 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-4-migration-guide.html">2.4 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-3-migration-guide.html">2.3 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-2-migration-guide.html">2.2 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-1-migration-guide.html">2.1 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="new-features-in-cakephp-2-1.html">New Features in CakePHP 2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-0-migration-guide.html">2.0 Migration Guide</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">New Features in CakePHP 2.0</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="phpunit-migration-hints.html">PHPUnit Migration Hints</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-cakephp-1-2-to-1-3.html">Migrating from CakePHP 1.2 to 1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="new-features-in-cakephp-1-3.html">New features in CakePHP 1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
</li>
</ul>

</div>

<div class="page-contents">
	<h3>Page contents</h3>
	<ul>
<li><a class="reference internal" href="#">New Features in CakePHP 2.0</a><ul>
<li><a class="reference internal" href="#models">Models</a></li>
<li><a class="reference internal" href="#view">View</a><ul>
<li><a class="reference internal" href="#view-output">View::$output</a></li>
</ul>
</li>
<li><a class="reference internal" href="#helpers">Helpers</a><ul>
<li><a class="reference internal" href="#htmlhelper">HtmlHelper</a></li>
<li><a class="reference internal" href="#formhelper">FormHelper</a></li>
</ul>
</li>
<li><a class="reference internal" href="#libs">Libs</a><ul>
<li><a class="reference internal" href="#cakerequest">CakeRequest</a></li>
<li><a class="reference internal" href="#cakeresponse">CakeResponse</a></li>
<li><a class="reference internal" href="#cakesession-sessioncomponent">CakeSession, SessionComponent</a></li>
<li><a class="reference internal" href="#router">Router</a><ul>
<li><a class="reference internal" href="#routes-can-return-full-urls">Routes can return full urls</a></li>
</ul>
</li>
<li><a class="reference internal" href="#xml">Xml</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-lib-features">New Lib features</a><ul>
<li><a class="reference internal" href="#configure-readers">Configure readers</a></li>
<li><a class="reference internal" href="#error-and-exception-handling">Error and exception handling</a></li>
<li><a class="reference internal" href="#string-wrap">String::wrap()</a></li>
<li><a class="reference internal" href="#debug">debug()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#components">Components</a><ul>
<li><a class="reference internal" href="#requesthandler">RequestHandler</a><ul>
<li><a class="reference internal" href="#automatic-parsing-of-accept-headers">Automatic parsing of Accept headers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cookiecomponent">CookieComponent</a></li>
<li><a class="reference internal" href="#security-component-csrf-separation">Security Component CSRF separation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#controller">Controller</a></li>
<li><a class="reference internal" href="#console">Console</a></li>
<li><a class="reference internal" href="#pagination">Pagination</a></li>
<li><a class="reference internal" href="#aliasing">Aliasing</a></li>
<li><a class="reference internal" href="#connectionmanager">ConnectionManager</a></li>
</ul>
</li>
</ul>

</div>
	</div>

</div>

<div class="content row">
	<ul class="related-pages inline">
	<li>
		<a href="../genindex.html" title="总目录" accesskey="I">索引</a>
	</li>
	<li>
		<a href="phpunit-migration-hints.html" title="PHPUnit Migration Hints" accesskey="N">下一页</a>
	</li>
	<li>
		<a href="2-0-migration-guide.html" title="2.0 Migration Guide" accesskey="P">上一页</a>
	</li>
	</ul>
</div>

	<div class="footer-push"> </div>
</div>






<div class="footer">
	<div class="row">
		<div class="columns six offset-by-three contribute">
			<strong>发现翻译错误?</strong>
			请在下面留言<br />
			<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">[ 我要加入翻译 ]</a>
		</div>
	</div>
	
	<div class="row">
		<div class="columns nine offset-by-three copyright">
					&copy; 版权所有 2014, Cake Software Foundation, Inc.
				最后更新于 Sep 05, 2015.
				Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
		</div>
	</div>
</div>

<div id="nav-modal" class="reveal-modal"> </div>
<div id="inline-search-results"></div>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F201cbc61deaf9f7ffb521fb23e83db40' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cakephpchina"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->

<!-- Grunt Live Reload -->
<script src="http://192.168.56.113:35729/livereload.js"></script>
<script src="http://192.168.56.113:35730/livereload.js"></script>
  </body>
</html>