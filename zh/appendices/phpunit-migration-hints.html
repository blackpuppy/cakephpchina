

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="PHPUnit Migration Hints" lang="zh" name="title" />
<meta content="free transition,vendor directory,static methods,teardown,test cases,pear,dependencies,test case,replacements,phpunit,migration,simpletest,cakephp,discover channel" lang="zh" name="keywords" />

    <title>PHPUnit Migration Hints</title>
    <link href="../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../_static/app.js"></script>

    <link rel="alternate" hreflang="en" href="../../en/appendices/phpunit-migration-hints.html" /><link rel="alternate" hreflang="pt" href="../../pt/appendices/phpunit-migration-hints.html" /><link rel="alternate" hreflang="es" href="../../es/appendices/phpunit-migration-hints.html" /><link rel="alternate" hreflang="ja" href="../../ja/appendices/phpunit-migration-hints.html" /><link rel="alternate" hreflang="fr" href="../../fr/appendices/phpunit-migration-hints.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 2.x 文档" href="../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 2.x 文档" href="../index.html" />
    <link rel="up" title="Appendices" href="../appendices.html" />
    <link rel="next" title="Migrating from CakePHP 1.2 to 1.3" href="migrating-from-cakephp-1-2-to-1-3.html" />
    <link rel="prev" title="New Features in CakePHP 2.0" href="new-features-in-cakephp-2-0.html" />

    <script type="text/javascript">
    window.lang = "zh";
    </script>
  </head>
  <body>

<div id="container">
	
	<header class="nav-down">
		<div class="container-fluid hidden-xs hidden-sm">
			<div class="row">
				<div class="col-sm-3 col-md-3">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-9 col-md-9">
					<nav class="navbar-right">
						<ul class="menu">
							<li class="first">
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
								<ul class="submenu">
									
<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
								</ul>
							</li>

							<li><a href="http://cakephp.org/business-solutions">Business Solutions</a></li>
							<li><a href="http://cakephp.org/showcase">Showcase</a></li>

							<li>
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
								<div class="megamenu full">
									<div class="row">
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
											</ul>
										</div>
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
											</ul>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>

		
		<div class="container-fluid hidden-md hidden-lg">
			<div class="row">
				<div class="col-sm-6 col-xs-6">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-6 col-xs-6">
					<div class="navbar-right">
						<button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
							<i class="fa fa-bars toggle-modal"></i>
						</button>
					</div>
					<div id="wrap">
						<form class="search" action="../search.html" method="get">
							<input name="q" type="search" placeholder="What are you looking for?">
							<input id="search_submit" value="搜索" type="submit">
						</form>
					</div>
				</div>
			</div>
		</div>

		
		<section id="nav-cook" class="hidden-xs hidden-sm">
			<div class="container-fluid ">
				<div class="row ">
					<div class="col-md-12 back-book">
						<div class="col-md-4 col-md-offset-1 text-center t-cook-nav p0 hidden-sm hidden-xs">
							<h2>
								<a href="../contents.html">
									<span class="glyph_range icon-submenu icon-submenu-cook">B</span>
									CakePHP 2.x <strong>Cookbook</strong>
								</a>
							</h2>
						</div>

						<div class="col-md-4 hidden-sm">
							<form class="search" action="../search.html" method="get">
								<input type="hidden" name="check_keywords" value="yes" />
								<input type="hidden" name="area" value="default" />

								<div class="col-md-10 p0">
									<input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
								</div>
								<div class="col-md-2 p0 search-cook">
									<button type="submit">
										<span class="glyph_range icon-submenu icon-submenu-cook">A</span>
									</button>
								</div>
							</form>
						</div>

						
						<div class="col-md-3">
							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Language:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
													role="button" aria-haspopup="true" aria-expanded="false" href="#">
														zh
														<i class="fa fa-menu-en fa-chevron-down"></i>
													</a>
											<ul class="dropdown-menu">
											
												<li><a href="../../en/appendices/phpunit-migration-hints.html">en</a></li>
											
												<li><a href="../../pt/appendices/phpunit-migration-hints.html">pt</a></li>
											
												<li><a href="../../es/appendices/phpunit-migration-hints.html">es</a></li>
											
												<li><a href="../../ja/appendices/phpunit-migration-hints.html">ja</a></li>
											
												<li><a href="../../fr/appendices/phpunit-migration-hints.html">fr</a></li>
											
												<li></li>
											
											</ul>
										</li>
									</ul>
								</div>
							</div>

							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Version:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">2.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
											<ul class="dropdown-menu">
												<li><a href="http://book.cakephp.org/3.0/zh">3.x Book</a></li>
												<li><a href="http://book.cakephp.org/2.0/zh">2.x Book</a></li>
												<li><a href="http://book.cakephp.org/1.3/zh/">1.3 Book</a></li>
												<li><a href="http://book.cakephp.org/1.2/zh/">1.2 Book</a></li>
												<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
											</ul>
										</li>
									</ul>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</section>
	</header>

	
	<section class="nav-btn visible-sm visible-xs">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
				</div>

				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
				</div>
			</div>
		</div>
	</section>

	
	<div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title-cookbook" id="modal-header"></h4>
				</div>
				<div class="modal-body"></div>
			</div>
		</div>
	</div>

<div class="container page-container"><div id="improve-slideout">
		<i class="fa fa-pencil icon-improve"></i>
		<a href="https://github.com/cakephp/docs/edit/master/zh/appendices/phpunit-migration-hints.rst" target="_blank">
			<div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
		</a>
	</div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

	
	<div class="row">
		<div class="col-sm-12 col-md-9 col-md-push-3 space-left push-off"><div class="page-contents col-sm-5">
				<h3>Page Contents</h3>
				<ul>
<li><a class="reference internal" href="#">PHPUnit Migration Hints</a><ul>
<li><a class="reference internal" href="#differences-between-simpletest">Differences between SimpleTest</a><ul>
<li><a class="reference internal" href="#startcase-and-endcase">startCase() and endCase()</a></li>
<li><a class="reference internal" href="#start-end-before-and-after">start(), end(), before() and after()</a></li>
<li><a class="reference internal" href="#setup-and-teardown">setUp() and tearDown()</a></li>
<li><a class="reference internal" href="#gettests">getTests</a></li>
<li><a class="reference internal" href="#assertion-methods">Assertion methods</a></li>
<li><a class="reference internal" href="#mock-expectations">Mock expectations</a><ul>
<li><a class="reference internal" href="#replacing-method-calls">Replacing method calls</a><ul>
<li><a class="reference internal" href="#replace-expectonce-no-params">Replace expectOnce() no params</a></li>
<li><a class="reference internal" href="#replace-expectonce-with-params">Replace expectOnce() with params</a></li>
<li><a class="reference internal" href="#replace-expectat">Replace expectAt()</a></li>
<li><a class="reference internal" href="#replace-expectnever">Replace expectNever</a></li>
<li><a class="reference internal" href="#replace-setreturnvalue">Replace setReturnValue</a></li>
<li><a class="reference internal" href="#replace-setreturnvalueat">Replace setReturnValueAt</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#group-tests">Group tests</a></li>
</ul>
</li>
</ul>
</li>
</ul>

			</div><div class="document-body">
			
  <div class="section" id="phpunit-migration-hints">
<h1>PHPUnit Migration Hints<a class="headerlink" href="#phpunit-migration-hints" title="永久链接至标题">¶</a></h1>
<p>Migrating your test cases to <a class="reference external" href="http://www.phpunit.de/manual/current/en/">PHPUnit 3.7</a>
will hopefully be a fairly pain free transition. However, there are a few known
differences between test cases under PHPUnit and
<a class="reference external" href="http://www.simpletest.org/">SimpleTest</a>.</p>
<div class="section" id="differences-between-simpletest">
<h2>Differences between SimpleTest<a class="headerlink" href="#differences-between-simpletest" title="永久链接至标题">¶</a></h2>
<p>There are a number of differences between SimpleTest and PHPUnit. The following
is an attempt to list the most frequently encountered differences.</p>
<div class="section" id="startcase-and-endcase">
<h3>startCase() and endCase()<a class="headerlink" href="#startcase-and-endcase" title="永久链接至标题">¶</a></h3>
<p>These methods are no longer supported. Use the static methods PHPUnit provides:
<code class="docutils literal"><span class="pre">setupBeforeClass</span></code> and <code class="docutils literal"><span class="pre">tearDownAfterClass</span></code>.</p>
</div>
<div class="section" id="start-end-before-and-after">
<h3>start(), end(), before() and after()<a class="headerlink" href="#start-end-before-and-after" title="永久链接至标题">¶</a></h3>
<p>These methods were part of SimpleTest&#8217;s test case initialization. <code class="docutils literal"><span class="pre">start()</span></code> and
<code class="docutils literal"><span class="pre">end()</span></code> have no replacements. You can use <code class="docutils literal"><span class="pre">setUp()</span></code> and <code class="docutils literal"><span class="pre">tearDown()</span></code> to
replace <code class="docutils literal"><span class="pre">before()</span></code> and <code class="docutils literal"><span class="pre">after()</span></code>.</p>
</div>
<div class="section" id="setup-and-teardown">
<h3>setUp() and tearDown()<a class="headerlink" href="#setup-and-teardown" title="永久链接至标题">¶</a></h3>
<p>In the past the methods <code class="docutils literal"><span class="pre">setUp</span></code>, <code class="docutils literal"><span class="pre">tearDown</span></code>, <code class="docutils literal"><span class="pre">startTest</span></code> and <code class="docutils literal"><span class="pre">endTest</span></code>
where supported, and caused confusion as they looked almost like the same thing
but in some cases you should use one or the other.</p>
<p>In the new CakePHP test suite, it is recommended to use only <code class="docutils literal"><span class="pre">setUp</span></code> and
<code class="docutils literal"><span class="pre">tearDown</span></code>. The methods startTest and endTest are still supported but are
deprecated.</p>
</div>
<div class="section" id="gettests">
<h3>getTests<a class="headerlink" href="#gettests" title="永久链接至标题">¶</a></h3>
<p>The method <code class="docutils literal"><span class="pre">getTests</span></code> is no longer supported. You can use filters instead. The
web test runner now takes an additional query string parameter that allows you
to specify a basic regular expression. This regular expression is used to
restrict the methods that are run:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">e</span><span class="o">.</span><span class="nx">g</span><span class="o">.</span> <span class="nx">filter</span><span class="o">=</span><span class="nx">myMethod</span>
</pre></div>
</div>
<p>Only tests containing the string <code class="docutils literal"><span class="pre">myMethod</span></code> will be run on the next refresh.
The cake test shell also supports a &#8211;filter option to filter methods.</p>
</div>
<div class="section" id="assertion-methods">
<h3>Assertion methods<a class="headerlink" href="#assertion-methods" title="永久链接至标题">¶</a></h3>
<p>Many of the assertion methods have slightly different names between PHPUnit and
SimpleTest. Where possible <code class="xref php php-class docutils literal"><span class="pre">CakeTestCase</span></code> provides a wrapper for the
SimpleTest method names. These compatibility wrappers will be removed in 2.1.0.
The following methods will be affected.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertEqual</span></code> -&gt; <code class="docutils literal"><span class="pre">assertEquals</span></code></li>
<li><code class="docutils literal"><span class="pre">assertNotEqual</span></code> -&gt; <code class="docutils literal"><span class="pre">assertNotEquals</span></code></li>
<li><code class="docutils literal"><span class="pre">assertPattern</span></code> -&gt; <code class="docutils literal"><span class="pre">assertRegExp</span></code></li>
<li><code class="docutils literal"><span class="pre">assertIdentical</span></code> -&gt; <code class="docutils literal"><span class="pre">assertSame</span></code></li>
<li><code class="docutils literal"><span class="pre">assertNotIdentical</span></code> -&gt; <code class="docutils literal"><span class="pre">assertNotSame</span></code></li>
<li><code class="docutils literal"><span class="pre">assertNoPattern</span></code> -&gt; <code class="docutils literal"><span class="pre">assertNotRegExp</span></code></li>
<li><code class="docutils literal"><span class="pre">assertNoErrors</span></code> -&gt; no replacement</li>
<li><code class="docutils literal"><span class="pre">expectError</span></code> -&gt; <code class="docutils literal"><span class="pre">setExpectedException</span></code></li>
<li><code class="docutils literal"><span class="pre">expectException</span></code> -&gt; <code class="docutils literal"><span class="pre">setExpectedException</span></code></li>
<li><code class="docutils literal"><span class="pre">assertReference</span></code> -&gt; <code class="docutils literal"><span class="pre">assertSame</span></code></li>
<li><code class="docutils literal"><span class="pre">assertIsA</span></code> -&gt; <code class="docutils literal"><span class="pre">assertType</span></code></li>
</ul>
<p>Some methods take their arguments in different orders, be sure to check the
methods you are using when updating them.</p>
</div>
<div class="section" id="mock-expectations">
<h3>Mock expectations<a class="headerlink" href="#mock-expectations" title="永久链接至标题">¶</a></h3>
<p>Mock objects are dramatically different between PHPUnit and SimpleTest. There is
no compatibility wrapper between them. Updating mock object usage can be a
painful process but we hope the following tips help you in your migration. It&#8217;s
highly recommended you familiarize yourself with the <a class="reference external" href="http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.mock-objects">PHPUnit Mock object</a>
documentation.</p>
<div class="section" id="replacing-method-calls">
<h4>Replacing method calls<a class="headerlink" href="#replacing-method-calls" title="永久链接至标题">¶</a></h4>
<p>The following regular expressions should help update some of your more
straightforward mock object expectations.</p>
<div class="section" id="replace-expectonce-no-params">
<h5>Replace expectOnce() no params<a class="headerlink" href="#replace-expectonce-no-params" title="永久链接至标题">¶</a></h5>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">expectOnce\</span><span class="p">(([</span><span class="o">^</span><span class="nx">\</span><span class="p">)]</span><span class="o">+</span><span class="p">)</span><span class="nx">\</span><span class="p">);</span>
<span class="nx">expects</span><span class="p">(</span><span class="nx">\</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">once</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">method</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="replace-expectonce-with-params">
<h5>Replace expectOnce() with params<a class="headerlink" href="#replace-expectonce-with-params" title="永久链接至标题">¶</a></h5>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">expectOnce\</span><span class="p">(([</span><span class="o">^</span><span class="p">,]</span><span class="o">+</span><span class="p">),</span> <span class="k">array</span><span class="nx">\</span><span class="p">((</span><span class="o">.+</span><span class="p">)</span><span class="nx">\</span><span class="p">)</span><span class="nx">\</span><span class="p">);</span>
<span class="nx">expects</span><span class="p">(</span><span class="nx">\</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">once</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">method</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="err">$</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="replace-expectat">
<h5>Replace expectAt()<a class="headerlink" href="#replace-expectat" title="永久链接至标题">¶</a></h5>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">expectAt\</span><span class="p">((</span><span class="nx">\d</span><span class="o">+</span><span class="p">),</span> <span class="p">(</span><span class="o">.+</span><span class="p">),</span> <span class="k">array</span><span class="nx">\</span><span class="p">((</span><span class="o">.+</span><span class="p">)</span><span class="nx">\</span><span class="p">)</span><span class="nx">\</span><span class="p">);</span>
<span class="nx">expects</span><span class="p">(</span><span class="nx">\</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">at</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">))</span><span class="o">-&gt;</span><span class="na">method</span><span class="p">(</span><span class="err">$</span><span class="mi">2</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="err">$</span><span class="mi">3</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="replace-expectnever">
<h5>Replace expectNever<a class="headerlink" href="#replace-expectnever" title="永久链接至标题">¶</a></h5>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">expectNever\</span><span class="p">(([</span><span class="o">^</span><span class="nx">\</span><span class="p">)]</span><span class="o">+</span><span class="p">)</span><span class="nx">\</span><span class="p">);</span>
<span class="nx">expects</span><span class="p">(</span><span class="nx">\</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">never</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">method</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="replace-setreturnvalue">
<h5>Replace setReturnValue<a class="headerlink" href="#replace-setreturnvalue" title="永久链接至标题">¶</a></h5>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">setReturnValue\</span><span class="p">(([</span><span class="o">^</span><span class="p">,]</span><span class="o">+</span><span class="p">),</span> <span class="p">(</span><span class="o">.+</span><span class="p">)</span><span class="nx">\</span><span class="p">);</span>
<span class="nx">expects</span><span class="p">(</span><span class="nx">\</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">once</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">method</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">will</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">returnValue</span><span class="p">(</span><span class="err">$</span><span class="mi">2</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="replace-setreturnvalueat">
<h5>Replace setReturnValueAt<a class="headerlink" href="#replace-setreturnvalueat" title="永久链接至标题">¶</a></h5>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">setReturnValueAt</span><span class="p">((</span><span class="nx">\d</span><span class="o">+</span><span class="p">),</span> <span class="p">([</span><span class="o">^</span><span class="p">,]</span><span class="o">+</span><span class="p">),</span> <span class="p">(</span><span class="o">.+</span><span class="p">));</span>
<span class="nx">expects</span><span class="p">(</span><span class="nx">\</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">at</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">))</span><span class="o">-&gt;</span><span class="na">method</span><span class="p">(</span><span class="err">$</span><span class="mi">2</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">will</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">returnValue</span><span class="p">(</span><span class="err">$</span><span class="mi">3</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="group-tests">
<h3>Group tests<a class="headerlink" href="#group-tests" title="永久链接至标题">¶</a></h3>
<p>Group tests have been removed as PHPUnit treats individual test cases and test
suites as composable entities in the runner. You can place group tests inside
the cases directory and use <code class="docutils literal"><span class="pre">PHPUnit_Framework_TestSuite</span></code> as a base class. An
example Testsuite would look like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AllJavascriptHelpersTest</span> <span class="k">extends</span> <span class="nx">PHPUnit_Framework_TestSuite</span> <span class="p">{</span>

<span class="sd">/**</span>
<span class="sd"> * Suite define the tests for this suite</span>
<span class="sd"> *</span>
<span class="sd"> * @return void</span>
<span class="sd"> */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">suite</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$suite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PHPUnit_Framework_TestSuite</span><span class="p">(</span><span class="s1">&#39;JsHelper and all Engine Helpers&#39;</span><span class="p">);</span>

        <span class="nv">$helperTestPath</span> <span class="o">=</span> <span class="nx">CORE_TEST_CASES</span> <span class="o">.</span> <span class="nx">DS</span> <span class="o">.</span> <span class="s1">&#39;View&#39;</span> <span class="o">.</span> <span class="nx">DS</span> <span class="o">.</span> <span class="s1">&#39;Helper&#39;</span> <span class="o">.</span> <span class="nx">DS</span><span class="p">;</span>
        <span class="nv">$suite</span><span class="o">-&gt;</span><span class="na">addTestFile</span><span class="p">(</span><span class="nv">$helperTestPath</span> <span class="o">.</span> <span class="s1">&#39;JsHelperTest.php&#39;</span><span class="p">);</span>
        <span class="nv">$suite</span><span class="o">-&gt;</span><span class="na">addTestFile</span><span class="p">(</span><span class="nv">$helperTestPath</span> <span class="o">.</span> <span class="s1">&#39;JqueryEngineHelperTest.php&#39;</span><span class="p">);</span>
        <span class="nv">$suite</span><span class="o">-&gt;</span><span class="na">addTestFile</span><span class="p">(</span><span class="nv">$helperTestPath</span> <span class="o">.</span> <span class="s1">&#39;MootoolsEngineHelperTest.php&#39;</span><span class="p">);</span>
        <span class="nv">$suite</span><span class="o">-&gt;</span><span class="na">addTestFile</span><span class="p">(</span><span class="nv">$helperTestPath</span> <span class="o">.</span> <span class="s1">&#39;PrototypeEngineHelperTest.php&#39;</span><span class="p">);</span>
        <span class="k">return</span> <span class="nv">$suite</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">TestManger</span></code> no longer has methods to add tests to group tests either. It is
recommended that you use the methods PHPUnit offers.</p>
</div>
</div>
</div>


			</div>
		</div>

		
		<div class="col-md-3 col-md-pull-9 pull-off hidden-xs hidden-sm" lang="zh">
			<aside class="sidebar">
				<div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">欢迎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cakephp-overview.html">CakePHP 概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">控制器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">视图</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries.html">核心库</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">插件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Shells，任务与命令行工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">部署</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">教程 &amp; 实例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">贡献</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../appendices.html">Appendices</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="2-8-migration-guide.html">2.8 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-7-migration-guide.html">2.7 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-6-migration-guide.html">2.6 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-5-migration-guide.html">2.5 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-4-migration-guide.html">2.4 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-3-migration-guide.html">2.3 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-2-migration-guide.html">2.2 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-1-migration-guide.html">2.1 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="new-features-in-cakephp-2-1.html">New Features in CakePHP 2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-0-migration-guide.html">2.0 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="new-features-in-cakephp-2-0.html">New Features in CakePHP 2.0</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">PHPUnit Migration Hints</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-cakephp-1-2-to-1-3.html">Migrating from CakePHP 1.2 to 1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="new-features-in-cakephp-1-3.html">New features in CakePHP 1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
</li>
</ul>

</div>

				</div>
			</aside>
			<aside class="sidebar">
				<div class="mb30 row">
				</div>
			</aside>
		</div>
	</div>
</div>

<section id="socials" class="back-3">
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-4  social text-center">
				<div class="col-sm-3 col-xs-3">
					<div id="fb-root"></div>
						<script>(function(d, s, id) {
						  var js, fjs = d.getElementsByTagName(s)[0];
						  if (d.getElementById(id)) return;
						  js = d.createElement(s); js.id = id;
						  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
						  fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));
						</script>
						<div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
					<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
				</div>
			</div>

			<div class="col-xs-12 col-sm-12 col-md-8 social-footer text-center ">
				<a href="#">发现翻译错误? 请在下面留言</a>
				<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">我要加入翻译</a>
				<a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
				<a href="http://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
				<a href="http://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
				<a href="http://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
				<a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
				<a href="http://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
				<a href="http://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
				<a href="http://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
			</div>
		</div>
	</div>
</section>

<footer id="footer" class="footer-wrapper">
	<div class="container">

		<div class="row col-p30">
			<div class="col-sm-12 col-md-3">
				<div class="footer-widget t-footer">
					<div class="col-md-12">
						<a href="https://www.openhub.net/p/cakephp">
							<img src="../_static/open-hub.png">
						</a>
						<div class="mt10">
							<a href="https://www.rackspace.com/">
								<img src="../_static/rackspace.png">
							</a>
						</div>
					</div>
				</div>
			</div>

			<div class="col-sm-12 col-md-9">
				<div class="col-md-3 col-sm-6 business-solution">
					<ul class="footer-menu">
						<li class="menu-title">
	<a href="http://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
	<a href="http://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 text-center mt30">
				<p class="copyright">
							&copy; 版权所有 2016, Cake Software Foundation, Inc.
						最后更新于 8月 09, 2016.
						Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
				</p>
			</div>
		</div>
	</div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-743287-3']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>

<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F201cbc61deaf9f7ffb521fb23e83db40' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cakephpchina"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
  </body>
</html>