
<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="How To Use Plugins" lang="en" name="title" />
<meta content="plugin folder,configuration database,bootstrap,management module,webroot,user management,contactmanager,array,config,cakephp,models,php,directories,blog,plugins,applications" lang="en" name="keywords" />

    <title>How To Use Plugins &mdash; CakePHP Cookbook 2.x 文档</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/app.js"></script>
    <script type="text/javascript" src="../_static/modernizr.foundation.js"></script>
    <script type="text/javascript" src="../_static/foundation.js"></script>
    <link rel="top" title="CakePHP Cookbook 2.x 文档" href="../index.html" />
    <link rel="up" title="插件" href="../plugins.html" />
    <link rel="next" title="How To Create Plugins" href="how-to-create-plugins.html" />
    <link rel="prev" title="How To Install Plugins" href="how-to-install-plugins.html" />
<link href="../_static/favicon.ico" type="image/x-icon" rel="icon" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="alternate" hreflang="en" href="../../en/plugins/how-to-use-plugins.html" /><link rel="alternate" hreflang="pt" href="../../pt/plugins/how-to-use-plugins.html" /><link rel="alternate" hreflang="es" href="../../es/plugins/how-to-use-plugins.html" /><link rel="alternate" hreflang="ja" href="../../ja/plugins/how-to-use-plugins.html" /><link rel="alternate" hreflang="fr" href="../../fr/plugins/how-to-use-plugins.html" />

<link rel="search" type="application/opensearchdescription+xml" title="CakePHP Book 2.x Search" href="../_static/opensearchdescription-book-2-x.xml">
<script type="text/javascript">
window.lang = "zh_CN";
</script>

  </head>
  <body>

<div id="container">

<div id="cakephp-global-navigation">
	<ul>
		<li class="main"><a href="http://cakephp.org">CakePHP</a></li>
		<li class="primary"><a href="#" class="empty">Downloads</a>
			<ul class="second-level">
				<li><a href="https://github.com/cakephp/cakephp/tags">Releases</a></li>
				<li><a href="http://pear.cakephp.org">Pear channel</a></li>
			</ul>
		</li>
		<li class="primary"><a href="#" class="empty">Documentation</a>
			<ul class="second-level">
				<li><a href="http://api.cakephp.org">API</a></li>
				<li><a href="http://book.cakephp.org">Book</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://community.cakephp.org">Community</a>
			<ul class="second-level">
				<li><a href="http://webchat.freenode.net/?channels=cakephp&uio=MT1mYWxzZSY5PXRydWUmMTE9MjQ2b8">Help &amp; Support</a></li>
				<li><a href="https://github.com/cakephp/cakephp/issues">Issues</a></li>
				<li><a href="http://bakery.cakephp.org">The Bakery</a></li>
				<li><a href="http://stackoverflow.com/tags/cakephp">Stack Overflow</a></li>
				<li><a href="http://www.facebook.com/groups/cake.community">Facebook Group</a></li>
				<li><a href="http://goo.gl/mSC0s">Google+ Community</a></li>
				<li><a href="http://www.youtube.com/user/CakePHP">YouTube Channel</a></li>
				<li><a href="http://podcast.cakephp.org">CakePHP Podcast</a></li>
				<li><a href="http://twitter.com/CakePHP">Follow us on Twitter</a></li>
				<li><a href="http://groups.google.com/group/cake-php">Google Group</a></li>
				<li><a href="http://github.com/cakephp/cakephp/contributors">Contributors</a></li>
				<li><a href="http://plugins.cakephp.org">Plugins &amp; Packages</a></li>
				<li><a href="http://community.cakephp.org/get-involved">Get Involved</a></li>
				<li><a href="http://community.cakephp.org/guidelines">Guidelines</a></li>
				<li><a href="http://cakefest.org">CakeFest</a></li>
				<li><a href="http://cakephp.org/logos">Logo</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://cakephp.org/services">Services</a>
			<ul class="second-level">
				<li><a href="http://cakephp.org/services/certification">Certification</a></li>
				<li><a href="http://cakephp.org/services/consultation">Consultation</a></li>
				<li><a href="http://cakephp.org/services/support">Support</a></li>
				<li><a href="http://training.cakephp.org">Training</a></li>
			</ul>
		</li>
	</ul>
</div>

<div class="masthead">
	<div class="header-backing"></div>
	<div class="searchbar row">
		<div class="columns three phone-one">
			<a class="logo" href="../contents.html">
			<img src="../_static/cake-logo.png" alt="CakePHP" width="70" />
			</a>
		</div>
		
<div id="searchbox" class="columns nine phone-three">

	<form id="searchform" class="search" action="../search.html" method="get">
		<input class="search-input" autocomplete="off" type="search" name="q" size="18" />
		<input class="search-submit search-big button red" type="submit" value="搜索" />
		<input type="hidden" name="check_keywords" value="yes" />
		<input type="hidden" name="area" value="default" />

		<a href="#" id="tablet-nav" class="show-on-phones pale button small">Nav</a>
	</form>

</div>
	</div>
</div>
<div class="breadcrumb-header">
	<div class="related row">
		<div class="columns three root-link">
			<a href="../contents.html">Cookbook 2.x</a>
		</div>
		<div class="columns nine">
			<ul class="inline breadcrumb">
			<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
				<a href="../plugins.html" accesskey="U" itemprop="url"><span itemprop="title">插件</span></a>
			</li>
			</ul>
			<div class="versions dropdown">
				<a href="#">2.x Book</a>
				<ul>
					<li><a href="http://book.cakephp.org/3.0/en">3.0 Book</a></li>
					<li><a href="http://book.cakephp.org/1.3/zh_CN/">1.3 Book</a></li>
					<li><a href="http://book.cakephp.org/1.2/zh_CN/">1.2 Book</a></li>
					<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
				</ul>
			</div>

			<div class="languages dropdown">
				<a href="#">zh_CN</a>

				<ul>
				
					<li><a href="../../en/plugins/how-to-use-plugins.html">en</a></li>
				
					<li><a href="../../pt/plugins/how-to-use-plugins.html">pt</a></li>
				
					<li><a href="../../es/plugins/how-to-use-plugins.html">es</a></li>
				
					<li><a href="../../ja/plugins/how-to-use-plugins.html">ja</a></li>
				
					<li><a href="../../fr/plugins/how-to-use-plugins.html">fr</a></li>
				
					<li></li>
				
				</ul>
			</div>
		</div>
	</div>
</div>

<div class="content row">
	<div class="document columns nine push-three">
		<div class="body"><a class="button pale improve" href="https://github.com/cakephp/docs/edit/master/zh/plugins/how-to-use-plugins.rst" target="_blank">Improve this Doc</a>
  <div class="section" id="how-to-use-plugins">
<h1>How To Use Plugins<a class="headerlink" href="#how-to-use-plugins" title="永久链接至标题">¶</a></h1>
<p>Before you can use a plugin, you must install and enable it first.
See <a class="reference internal" href="how-to-install-plugins.html"><em>How To Install Plugins</em></a>.</p>
<div class="section" id="id1">
<h2>插件配置<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="plugin-configuration">
<h2>Plugin Configuration<a class="headerlink" href="#plugin-configuration" title="永久链接至标题">¶</a></h2>
<p>load 和 loadAll 方法包含有很多插件的配置和路由参数。也许你想要自动加载所有插件，
同时要为某些插件指定自定义路由和bootstrap文件。</p>
<p>There is a lot you can do with the load and loadAll methods to help with
plugin configuration and routing. Perhaps you want to load all plugins
automatically, while specifying custom routes and bootstrap files for
certain plugins.</p>
<p>没问题:</p>
<p>No problem:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nx">CakePlugin</span><span class="o">::</span><span class="na">loadAll</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Blog&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;routes&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">),</span>
    <span class="s1">&#39;ContactManager&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">),</span>
    <span class="s1">&#39;WebmasterTools&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span> <span class="s1">&#39;routes&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
<p>基于这种配置，无需再手动 include() 或 require() 加载进来一个插件的配置或路由文件 &#8211;
它会在正确的时间和地点发生。load() 方法同样有这些参数。</p>
<p>With this style of configuration, you no longer need to manually
include() or require() a plugin&#8217;s configuration or routes file&#8211;It happens
automatically at the right time and place. The exact same parameters could
have also been supplied to the load() method, which would have loaded only those
three plugins, and not the rest.</p>
<p>最后，可以为loadAll指定一组默认的配置以适用于每一个插件，这样就不需要更多特定的配置。</p>
<p>Finally, you can also specify a set of defaults for loadAll which will apply to
every plugin that doesn&#8217;t have a more specific configuration.</p>
<p>从所有的插件中加载 bootstrap 文件，但是使用Blog插件中的路由。</p>
<p>Load the bootstrap file from all plugins, and additionally the routes from the Blog plugin:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nx">CakePlugin</span><span class="o">::</span><span class="na">loadAll</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;bootstrap&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">),</span>
    <span class="s1">&#39;Blog&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;routes&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>注意，插件配置中指定的所有文件应该确实存在，否则PHP会抛出警告，哪一个文件无法加载。
当为所有插件指定默认值时尤其记住这点。</p>
<p>Note that all files specified should actually exist in the configured
plugin(s) or PHP will give warnings for each file it cannot load. This is
especially important to remember when specifying defaults for all plugins.</p>
<p>CakePHP 2.3.0 added an <tt class="docutils literal"><span class="pre">ignoreMissing`</span></tt> option, that allows you to ignore any
missing routes and bootstrap files when loading plugins. You can shorten the
code needed to load all plugins using this:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// Loads all plugins including any possible routes and bootstrap files</span>
<span class="nx">CakePlugin</span><span class="o">::</span><span class="na">loadAll</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;routes&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span> <span class="s1">&#39;bootstrap&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span> <span class="s1">&#39;ignoreMissing&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>有些插件需要在数据库中建立额外的表。这种时候，通常会包含一个 schema 文件，可以使用cake的shell
命令执行：</p>
<p>Some plugins additionally need to create one or more tables in your database. In
those cases, they will often include a schema file which you can
call from the cake shell like this:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nx">user</span><span class="o">@</span><span class="nx">host</span><span class="err">$</span> <span class="nx">cake</span> <span class="nx">schema</span> <span class="nx">create</span> <span class="o">--</span><span class="nx">plugin</span> <span class="nx">ContactManager</span>
</pre></div>
</div>
<p>大多数的插件在他们的文档中会有具体的配置和安装过程。一些插件可能需要更多的设置。</p>
<p>Most plugins will indicate the proper procedure for configuring
them and setting up the database in their documentation. Some
plugins will require more setup than others.</p>
</div>
<div class="section" id="bootstrapping">
<h2>高级 Bootstrapping<a class="headerlink" href="#bootstrapping" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="advanced-bootstrapping">
<h2>Advanced Bootstrapping<a class="headerlink" href="#advanced-bootstrapping" title="永久链接至标题">¶</a></h2>
<p>If you like to load more than one bootstrap file for a plugin. You can specify
an array of files for the bootstrap configuration key:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nx">CakePlugin</span><span class="o">::</span><span class="na">loadAll</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Blog&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;bootstrap&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;config1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;config2&#39;</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>You can also specify a callable function that needs to be called when the plugin
has been loaded:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">function</span> <span class="nf">aCallableFunction</span><span class="p">(</span><span class="nv">$pluginName</span><span class="p">,</span> <span class="nv">$config</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>

<span class="nx">CakePlugin</span><span class="o">::</span><span class="na">loadAll</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Blog&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;bootstrap&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;aCallableFunction&#39;</span>
    <span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="using-a-plugin">
<h2>Using a Plugin<a class="headerlink" href="#using-a-plugin" title="永久链接至标题">¶</a></h2>
<p>You can reference a plugin&#8217;s controllers, models, components,
behaviors, and helpers by prefixing the name of the plugin before
the class name.</p>
<p>For example, say you wanted to use the ContactManager plugin&#8217;s
ContactInfoHelper to output some pretty contact information in
one of your views. In your controller, your $helpers array
could look like this:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$helpers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;ContactManager.ContactInfo&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>You would then be able to access the ContactInfoHelper just like
any other helper in your view, such as:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">ContactInfo</span><span class="o">-&gt;</span><span class="na">address</span><span class="p">(</span><span class="nv">$contact</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>


		</div>
	</div>

	<div class="sidebar columns three pull-nine">
<div id="sidebar-navigation" class="hide-on-phones">
	<h2 class="hide-on-desktops">Table of Contents</h2>
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">欢迎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cakephp-overview.html">CakePHP 概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">控制器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">视图</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries.html">核心库</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../plugins.html">插件</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="how-to-install-plugins.html">How To Install Plugins</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">How To Use Plugins</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="how-to-create-plugins.html">How To Create Plugins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">命令行与Shells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">部署</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">教程 &amp; 实例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Appendices</a></li>
</ul>

</div>

<div class="page-contents">
	<h3>Page contents</h3>
	<ul>
<li><a class="reference internal" href="#">How To Use Plugins</a><ul>
<li><a class="reference internal" href="#id1">插件配置</a></li>
<li><a class="reference internal" href="#plugin-configuration">Plugin Configuration</a></li>
<li><a class="reference internal" href="#bootstrapping">高级 Bootstrapping</a></li>
<li><a class="reference internal" href="#advanced-bootstrapping">Advanced Bootstrapping</a></li>
<li><a class="reference internal" href="#using-a-plugin">Using a Plugin</a></li>
</ul>
</li>
</ul>

</div>
	</div>

</div>

<div class="content row">
	<ul class="related-pages inline">
	<li>
		<a href="../genindex.html" title="总目录" accesskey="I">索引</a>
	</li>
	<li>
		<a href="how-to-create-plugins.html" title="How To Create Plugins" accesskey="N">下一页</a>
	</li>
	<li>
		<a href="how-to-install-plugins.html" title="How To Install Plugins" accesskey="P">上一页</a>
	</li>
	</ul>
</div>

	<div class="footer-push"> </div>
</div>






<div class="footer">
	<div class="row">
		<div class="columns six offset-by-three contribute">
			<strong>发现翻译错误?</strong>
			请在下面留言<br />
			<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">[ 我要加入翻译 ]</a>
		</div>
	</div>
	
	<div class="row">
		<div class="columns nine offset-by-three copyright">
					&copy; 版权所有 2014, Cake Software Foundation, Inc.
				最后更新于 Aug 31, 2015.
				Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
		</div>
	</div>
</div>

<div id="nav-modal" class="reveal-modal"> </div>
<div id="inline-search-results"></div>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F201cbc61deaf9f7ffb521fb23e83db40' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cakephpchina"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
  </body>
</html>