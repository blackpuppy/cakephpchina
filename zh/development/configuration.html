

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Configuration" lang="zh" name="title" />
<meta content="finished configuration,legacy database,database configuration,value pairs,default connection,optional configuration,example database,php class,configuration database,default database,configuration steps,index database,configuration details,class database,host localhost,inflections,key value,database connection,piece of cake,basic web" lang="zh" name="keywords" />

    <title>配置</title>
    <link href="../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../_static/app.js"></script>

    <link rel="alternate" hreflang="en" href="../../en/development/configuration.html" /><link rel="alternate" hreflang="pt" href="../../pt/development/configuration.html" /><link rel="alternate" hreflang="es" href="../../es/development/configuration.html" /><link rel="alternate" hreflang="ja" href="../../ja/development/configuration.html" /><link rel="alternate" hreflang="fr" href="../../fr/development/configuration.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 2.x 文档" href="../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 2.x 文档" href="../index.html" />
    <link rel="up" title="开发" href="../development.html" />
    <link rel="next" title="路由" href="routing.html" />
    <link rel="prev" title="开发" href="../development.html" />

    <script type="text/javascript">
    window.lang = "zh";
    </script>
  </head>
  <body>

<div id="container">
	
	<header class="nav-down">
		<div class="container-fluid hidden-xs hidden-sm">
			<div class="row">
				<div class="col-sm-3 col-md-3">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-9 col-md-9">
					<nav class="navbar-right">
						<ul class="menu">
							<li class="first">
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
								<ul class="submenu">
									
<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
								</ul>
							</li>

							<li><a href="http://cakephp.org/business-solutions">Business Solutions</a></li>
							<li><a href="http://cakephp.org/showcase">Showcase</a></li>

							<li>
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
								<div class="megamenu full">
									<div class="row">
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
											</ul>
										</div>
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
											</ul>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>

		
		<div class="container-fluid hidden-md hidden-lg">
			<div class="row">
				<div class="col-sm-6 col-xs-6">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-6 col-xs-6">
					<div class="navbar-right">
						<button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
							<i class="fa fa-bars toggle-modal"></i>
						</button>
					</div>
					<div id="wrap">
						<form class="search" action="../search.html" method="get">
							<input name="q" type="search" placeholder="What are you looking for?">
							<input id="search_submit" value="搜索" type="submit">
						</form>
					</div>
				</div>
			</div>
		</div>

		
		<section id="nav-cook" class="hidden-xs hidden-sm">
			<div class="container-fluid ">
				<div class="row ">
					<div class="col-md-12 back-book">
						<div class="col-md-4 col-md-offset-1 text-center t-cook-nav p0 hidden-sm hidden-xs">
							<h2>
								<a href="../contents.html">
									<span class="glyph_range icon-submenu icon-submenu-cook">B</span>
									CakePHP 2.x <strong>Cookbook</strong>
								</a>
							</h2>
						</div>

						<div class="col-md-4 hidden-sm">
							<form class="search" action="../search.html" method="get">
								<input type="hidden" name="check_keywords" value="yes" />
								<input type="hidden" name="area" value="default" />

								<div class="col-md-10 p0">
									<input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
								</div>
								<div class="col-md-2 p0 search-cook">
									<button type="submit">
										<span class="glyph_range icon-submenu icon-submenu-cook">A</span>
									</button>
								</div>
							</form>
						</div>

						
						<div class="col-md-3">
							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Language:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
													role="button" aria-haspopup="true" aria-expanded="false" href="#">
														zh
														<i class="fa fa-menu-en fa-chevron-down"></i>
													</a>
											<ul class="dropdown-menu">
											
												<li><a href="../../en/development/configuration.html">en</a></li>
											
												<li><a href="../../pt/development/configuration.html">pt</a></li>
											
												<li><a href="../../es/development/configuration.html">es</a></li>
											
												<li><a href="../../ja/development/configuration.html">ja</a></li>
											
												<li><a href="../../fr/development/configuration.html">fr</a></li>
											
												<li></li>
											
											</ul>
										</li>
									</ul>
								</div>
							</div>

							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Version:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">2.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
											<ul class="dropdown-menu">
												<li><a href="http://book.cakephp.org/3.0/zh">3.x Book</a></li>
												<li><a href="http://book.cakephp.org/2.0/zh">2.x Book</a></li>
												<li><a href="http://book.cakephp.org/1.3/zh/">1.3 Book</a></li>
												<li><a href="http://book.cakephp.org/1.2/zh/">1.2 Book</a></li>
												<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
											</ul>
										</li>
									</ul>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</section>
	</header>

	
	<section class="nav-btn visible-sm visible-xs">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
				</div>

				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
				</div>
			</div>
		</div>
	</section>

	
	<div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title-cookbook" id="modal-header"></h4>
				</div>
				<div class="modal-body"></div>
			</div>
		</div>
	</div>

<div class="container page-container"><div id="improve-slideout">
		<i class="fa fa-pencil icon-improve"></i>
		<a href="https://github.com/cakephp/docs/edit/master/zh/development/configuration.rst" target="_blank">
			<div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
		</a>
	</div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

	
	<div class="row">
		<div class="col-sm-12 col-md-9 col-md-push-3 space-left push-off"><div class="page-contents col-sm-5">
				<h3>Page Contents</h3>
				<ul>
<li><a class="reference internal" href="#">配置</a><ul>
<li><a class="reference internal" href="#database-configuration">数据库配置</a></li>
<li><a class="reference internal" href="#id3">额外的类路径</a></li>
<li><a class="reference internal" href="#index-2">核心配置</a><ul>
<li><a class="reference internal" href="#cakephp">CakePHP 核心配置</a></li>
<li><a class="reference internal" href="#id5">配置常量</a></li>
<li><a class="reference internal" href="#id6">核心缓存配置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configure">Configure 类</a></li>
<li><a class="reference internal" href="#id7">读写配置文件</a><ul>
<li><a class="reference internal" href="#loading-configuration-files">加载配置文件</a></li>
<li><a class="reference internal" href="#id9">创建或者修改配置文件</a></li>
<li><a class="reference internal" href="#id10">存储运行时配置</a></li>
<li><a class="reference internal" href="#id11">恢复运行时配置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id12">创建自己的配置读取器</a><ul>
<li><a class="reference internal" href="#id13">内置配置读取器</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inflection-configuration">词形变化配置</a><ul>
<li><a class="reference internal" href="#id15">加载自定义词形变化</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id16">引导启动 CakePHP</a></li>
</ul>
</li>
</ul>

			</div><div class="document-body">
			
  <div class="section" id="id1">
<h1>配置<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>配置 CakePHP 应用程序简直是小菜一碟。在安装完 CakePHP 后，创建一个基本的 web
应用只需设置数据库配置。</p>
<p>当然，还有其它可选的配置步骤可以采用，来充分利用 CakePHP 的灵活架构。可以容易地
对继承自 CakePHP 核心的功能添加(新的功能)，配置额外的/不同的网址(<em>URL</em>)映射(路由
)，以及定义额外/不同的词形变化(<em>inflections</em>)。</p>
<div class="section" id="database-configuration">
<span id="index-0"></span><span id="id2"></span><h2>数据库配置<a class="headerlink" href="#database-configuration" title="永久链接至标题">¶</a></h2>
<p>CakePHP 期待的数据库配置信息位于 <code class="docutils literal"><span class="pre">app/Config/database.php</span></code> 文件中。示例数据库
配置文件在 <code class="docutils literal"><span class="pre">app/Config/database.php.default</span></code> 。一个完成的配置应该看起来像这样:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DATABASE_CONFIG</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$default</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;datasource&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;Database/Mysql&#39;</span><span class="p">,</span>
        <span class="s1">&#39;persistent&#39;</span>  <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
        <span class="s1">&#39;host&#39;</span>        <span class="o">=&gt;</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
        <span class="s1">&#39;login&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;cakephpuser&#39;</span><span class="p">,</span>
        <span class="s1">&#39;password&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;c4k3roxx!&#39;</span><span class="p">,</span>
        <span class="s1">&#39;database&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;my_cakephp_project&#39;</span><span class="p">,</span>
        <span class="s1">&#39;prefix&#39;</span>      <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>(默认情况下)会使用 $default 连接数组，除非用模型的 <code class="docutils literal"><span class="pre">$useDbConfig</span></code> 属性指定了另
外一个连接。例如，如果应用程序除了默认的数据库还有一个额外的遗留数据库，可以创建
一个结构类似于 $default 数组的新的 $legacy 数据库连接数组，然后在适当的模型中设
置 <code class="docutils literal"><span class="pre">public</span> <span class="pre">$useDbConfig</span> <span class="pre">=</span> <span class="pre">'legacy';</span></code>，就可以使用遗留数据库了。</p>
<p>填写配置数组中的键/值对以尽可能满足需求。</p>
<dl class="docutils">
<dt>datasource</dt>
<dd>该配置数组的数据源名称。例如：Database/Mysql、Database/Sqlserver、
Database/Postgres、Database/Sqlite。可以使用 <a class="reference internal" href="../appendices/glossary.html#term-plugin-syntax"><span class="xref std std-term">plugin syntax</span></a> 指定要
使用的插件数据源。</dd>
<dt>persistent</dt>
<dd>是否使用连接数据库的持久化连接。</dd>
<dt>host</dt>
<dd>数据库服务器的主机名(或IP地址)。</dd>
<dt>login</dt>
<dd>账号的用户名。</dd>
<dt>password</dt>
<dd>账号的密码。</dd>
<dt>database</dt>
<dd>该连接要使用的数据库名称。</dd>
<dt>prefix (<em>可选</em>)</dt>
<dd>数据库中每个表名的前缀字符串。如果表没有前缀，设置为空字符串。</dd>
<dt>port (<em>可选</em>)</dt>
<dd>用于连接服务器的 TCP 端口或 Unix 套接字(<em>socket</em>)。</dd>
<dt>encoding</dt>
<dd>指定了发送 SQL 语句到服务器使用的字符集。对除了 DB2 数据库以外的所有数据库，
默认使用数据库的默认编码。如果对 mysql/mysqli 连接想使用 UTF-8 编码，必须
使用不带连字符的&#8217;utf8&#8217;。</dd>
<dt>schema</dt>
<dd>用于 PostgreSQL 数据库设置，指定使用哪个 schema。</dd>
<dt>unix_socket</dt>
<dd>用于支持通过 unix 套接字(<em>socket</em>)文件连接的驱动程序。如果使用 PostgreSQL
数据库，并且想使用 unix 套接字，需要将 host 键留空。</dd>
<dt>ssl_key</dt>
<dd>SSL 密钥(<em>SSL key</em>)文件的路径(仅为 MySQL 所支持，要求 PHP 5.3.7+)。</dd>
<dt>ssl_cert</dt>
<dd>SSL 证书(<em>SSL certificate</em>)文件的路径(仅为 MySQL 所支持，要求 PHP 5.3.7+)。</dd>
<dt>ssl_ca</dt>
<dd>SSL 证书颁发机构(SSL certificate authority)文件的路径(仅为 MySQL 所支持，
要求 PHP 5.3.7+)。</dd>
<dt>settings</dt>
<dd>一个包含键值对的数组，在建立连接时应当作为 <code class="docutils literal"><span class="pre">SET</span></code> 命令发送到数据库服务器。
该选项当前只被 Mysql、Postgres 和 Sqlserver 所支持。</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified">在 2.4 版更改: </span>参数 <code class="docutils literal"><span class="pre">settings</span></code> 、 <code class="docutils literal"><span class="pre">ssl_key</span></code> 、 <code class="docutils literal"><span class="pre">ssl_cert</span></code> 和 <code class="docutils literal"><span class="pre">ssl_ca</span></code> 是在 2.4 版本
中新增的。</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">前缀设置作用于表，<strong>而不是</strong> 模型。举个例子，如果为 Apple 和 Flavor 模型创建
了一个连接表，应当命名为 prefix_apples_flavors(<strong>而不是</strong>
prefix_apples_prefix_flavors)，前缀设置应设为 &#8216;prefix_&#8217;。</p>
</div>
<p>在这个时候，你也许可以看下 <a class="reference internal" href="../getting-started/cakephp-conventions.html"><span class="doc">CakePHP 的约定</span></a> 。对表(
以及某些字段)的正确命名让你自动获得一些功能，而且避免配置。例如，如果将表命名为
big_boxes，模型命名为 BigBox，控制器命名为 BigBoxesController，那这一切就能够自动协作了。按照约定，数据库表名应当使用下划线
分隔的小写复数形式 — 例如：bakers、pastry_stores 和 savory_cakes。</p>
</div>
<div class="section" id="id3">
<h2>额外的类路径<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>偶尔，在同一个系统上的应用程序之间共享 MVC 类库是很有用的。如果想要在两个应用
程序间使用同一个控制器，可以使用 CakePHP 的 bootstrap.php 把这些额外的类引入。</p>
<p>在 bootstrap.php 使用 <a class="reference internal" href="../core-utility-libraries/app.html#App::build" title="App::build"><code class="xref php php-meth docutils literal"><span class="pre">App::build()</span></code></a> 可以定义额外的路径，CakePHP 就会
在这些路径中搜寻类:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">App</span><span class="o">::</span><span class="na">build</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Model&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/models&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/models&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Model/Behavior&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/behaviors&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/behaviors&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Model/Datasource&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/datasources&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/datasources&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Model/Datasource/Database&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/databases&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/database&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Model/Datasource/Session&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/sessions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/sessions&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Controller&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/controllers&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/controllers&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Controller/Component&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/components&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/components&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Controller/Component/Auth&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/auths&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/auths&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Controller/Component/Acl&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/acls&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/acls&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;View&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/views&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/views&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;View/Helper&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/helpers&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/helpers&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Console&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/consoles&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/consoles&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Console/Command&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/commands&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/commands&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Console/Command/Task&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/tasks&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/tasks&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Lib&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/libs&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/libs&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Locale&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/locales&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/locales&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Vendor&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/vendors&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/vendors&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Plugin&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/path/to/plugins&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/next/path/to/plugins&#39;</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">所有额外路径的配置应该在程序的 bootstrap.php 最开始定义。这样会确保应用程序
的其余部分可以使用这些路径。</p>
</div>
</div>
<div class="section" id="index-2">
<span id="id4"></span><h2>核心配置<a class="headerlink" href="#index-2" title="永久链接至标题">¶</a></h2>
<p>每个 CakePHP 应用程序包含一个配置文件 <code class="docutils literal"><span class="pre">app/Config/core.php</span></code> ，决定 CakePHP 的
内部行为。这个文件是一个 Configure 类变量和常量定义的集合，决定应用程序的行为。
在我们深入这些特定的变量之前，你需要熟悉 <a class="reference internal" href="#Configure" title="Configure"><code class="xref php php-class docutils literal"><span class="pre">Configure</span></code></a>，CakePHP的配置
注册表类。</p>
<div class="section" id="cakephp">
<h3>CakePHP 核心配置<a class="headerlink" href="#cakephp" title="永久链接至标题">¶</a></h3>
<p><a class="reference internal" href="#Configure" title="Configure"><code class="xref php php-class docutils literal"><span class="pre">Configure</span></code></a> 类用来管理一系列 CakePHP 核心配置变量。这些变量可在
<code class="docutils literal"><span class="pre">app/Config/core.php</span></code> 文件中找到。下面是每个变量的描述、以及如何影响到程序的。</p>
<dl class="docutils">
<dt>debug</dt>
<dd><p class="first">改变 CakePHP 调试输出。</p>
<ul class="last simple">
<li>0 = 生产模式。无输出。</li>
<li>1 = 显示错误和警告。</li>
<li>2 = 显示错误，警告和 SQL 语句。 [只有在视图或布局中添加
$this-&gt;element(&#8216;sql_dump&#8217;) 才会显示 SQL 日志。]</li>
</ul>
</dd>
<dt>Error</dt>
<dd><p class="first">配置处理应用程序错误的错误处理器。默认使用
<code class="xref php php-meth docutils literal"><span class="pre">ErrorHandler::handleError()</span></code>。当 debug &gt; 0 时，使用
<a class="reference internal" href="debugging.html#Debugger" title="Debugger"><code class="xref php php-class docutils literal"><span class="pre">Debugger</span></code></a> 显示错误，而当 debug = 0 时，使用 <a class="reference internal" href="../core-libraries/logging.html#CakeLog" title="CakeLog"><code class="xref php php-class docutils literal"><span class="pre">CakeLog</span></code></a>
将错误记录在日志中。</p>
<p>子键:</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">handler</span></code> - callback - 处理错误的回调方法。可设置为任何回调类型，包括
匿名函数。</li>
<li><code class="docutils literal"><span class="pre">level</span></code> - int - 要捕获的错误等级。</li>
<li><code class="docutils literal"><span class="pre">trace</span></code> - boolean - 是否在日志文件中记录错误的堆栈跟踪(<em>stack trace</em>)
信息。</li>
</ul>
</dd>
<dt>Exception</dt>
<dd>配置异常处理程序用于未捕获的异常。默认情况下，会使用
ErrorHandler::handleException()。对异常会显示一个 HTML 页面。当 debug &gt; 0 时，
像 Missing Controller 这样的框架错误会显示出来。而当 debug = 0 时，框架错误
被强制转换为通常的 HTTP 错误。欲知更多异常处理的信息，请参见
<a class="reference internal" href="exceptions.html"><span class="doc">异常</span></a> 一节。</dd>
</dl>
<dl class="docutils" id="core-configuration-baseurl">
<dt>App.baseUrl</dt>
<dd><p class="first">如果你不想或者无法在你的服务器上运行 mod_rewrite (或者一些其它兼容模块），
你就要使用 CakePHP 的内置美观网址了。在 <code class="docutils literal"><span class="pre">/app/ConfigScore.php</span></code> 中，对下面
这行去掉注释:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Configure</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;App.baseUrl&#39;</span><span class="p">,</span> <span class="nx">env</span><span class="p">(</span><span class="s1">&#39;SCRIPT_NAME&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>也要删除这些 .htaccess 文件:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="o">/.</span><span class="nx">htaccess</span>
<span class="o">/</span><span class="nx">app</span><span class="o">/.</span><span class="nx">htaccess</span>
<span class="o">/</span><span class="nx">app</span><span class="o">/</span><span class="nx">webroot</span><span class="o">/.</span><span class="nx">htaccess</span>
</pre></div>
</div>
<p>这会让网址看起来象
www.example.com/index.php/controllername/actionname/param rather
而不是 www.example.com/controllername/actionname/param.</p>
<p class="last">如果你把 CakePHP 安装到不是 Apache 的 web 服务器上，你可以从
<a class="reference internal" href="../installation/url-rewriting.html"><span class="doc">网址重写(URL Rewriting)</span></a> 一节找到在其它服务器上使网址重写运行的
说明。</p>
</dd>
<dt>App.encoding</dt>
<dd>定义应用程序使用的编码。该编码用来生成布局(<em>layout</em>)中的字符集，和编码实体。
这应当符合为数据库指定的编码值。</dd>
<dt>Routing.prefixes</dt>
<dd>如果想要使用象 admin 这样的 CakePHP 前缀路由(<em>prefixed routes</em>)，去掉对该
定义的注释。设置该变量为你想要使用的路由的前缀名称数组。对此后面有更多的描述。</dd>
<dt>Cache.disable</dt>
<dd>当设置为 true 时，整个网站的持久化缓存会被禁用。这会导致所有的
<a class="reference internal" href="../core-libraries/caching.html#Cache" title="Cache"><code class="xref php php-class docutils literal"><span class="pre">Cache</span></code></a> 读/写失败。</dd>
<dt>Cache.check</dt>
<dd>如果设置为 true，启用视图缓存。仍然需要在控制器中启用，但是该变量开启了这些
设置的检测。</dd>
<dt>Session</dt>
<dd><p class="first">包含设置数组，用于会话(<em>session</em>)配置。defaults 键用于定义会话的默认预设，
这里声明的任何设置会覆盖默认配置的设置。</p>
<p>子键</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">name</span></code> - 要使用的，cookie 的名字。默认为&#8217;CAKEPHP&#8217;</li>
<li><code class="docutils literal"><span class="pre">timeout</span></code> - 要会话存在的分钟数。这个超时是由 CakePHP 处理的。</li>
<li><code class="docutils literal"><span class="pre">cookieTimeout</span></code> - 要会话 coookie 存在的分钟数。</li>
<li><code class="docutils literal"><span class="pre">checkAgent</span></code> - 在启动会话时，要检查用户代理吗？在处理旧版 IE、Chrome
Frame 或者某些网络浏览设备以及 AJAX 时，你或许想要设置该值为 false。</li>
<li><code class="docutils literal"><span class="pre">defaults</span></code> - 会话作为基础使用的默认配置集。有四种内置(默认配置集): php、
cake、cache、database。</li>
<li><code class="docutils literal"><span class="pre">handler</span></code> - 可以用来启用自定义会话处理器。期待可用于
<cite>session_save_handler</cite> 的回调数组。使用该选项会自动添加
<cite>session.save_handler</cite> 到 ini 数组。</li>
<li><code class="docutils literal"><span class="pre">autoRegenerate</span></code> - 启用该设置，就启用了会话的自动延续，以及频繁变化的
sessionid。参看 <code class="xref php php-attr docutils literal"><span class="pre">CakeSession::$requestCountdown</span></code>。</li>
<li><code class="docutils literal"><span class="pre">ini</span></code> - 要设置的额外 ini 值的关联数组。</li>
</ul>
<p>内置默认值为：</p>
<ul class="simple">
<li>&#8216;php&#8217; - 使用在 php.ini 中定义的设置。</li>
<li>&#8216;cake&#8217; - 在 CakePHP 的 /tmp 目录中保存会话文件。</li>
<li>&#8216;database&#8217; - 使用 CakePHP 的数据库会话。</li>
<li>&#8216;cache&#8217; - 使用 Cache 类保存会话。</li>
</ul>
<p>要定义自定义会话处理器，把它保存在
<code class="docutils literal"><span class="pre">app/ModelSDatasource/Session/&lt;name&gt;.php</span></code> 中。确保这个类实现了
<code class="xref php php-interface docutils literal"><span class="pre">CakeSessionHandlerInterface</span></code>，并设置 Session.handler 为
&lt;name&gt;。</p>
<p class="last">要使用数据库会话，用 cake 控制台命令运行 <code class="docutils literal"><span class="pre">app/ConfigSSchema/sessions.php</span></code>
数据结构： <code class="docutils literal"><span class="pre">cake</span> <span class="pre">schema</span> <span class="pre">create</span> <span class="pre">Sessions</span></code></p>
</dd>
<dt>Security.salt</dt>
<dd>用于 安全哈希(<em>security hashing</em>)的一个随机字符串。</dd>
<dt>Security.cipherSeed</dt>
<dd>随机数字字符串(只允许数字)，用来加密/解密字符串。</dd>
<dt>Asset.timestamp</dt>
<dd><p class="first">在使用正确的助件时，在资源文件网址(CSS、JavaScript、Image)末尾附加特定文件
最后修改的时间戳。</p>
<p>合法值：</p>
<ul class="last simple">
<li>(boolean) false - 什么也不做(默认)</li>
<li>(boolean) true - 当 debug &gt; 0 时附加时间戳</li>
<li>(string) &#8216;force&#8217; - 当 debug &gt;= 0 时附加时间戳</li>
</ul>
</dd>
<dt>Acl.classname, Acl.database</dt>
<dd>用于 CakePHP 的访问控制列表(Access Control Access)功能的常数。欲知详情，参见
访问控制列表一章。</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">在 core.php 中也有缓存配置 — 稍安勿躁，后面会讲到。</p>
</div>
<p><a class="reference internal" href="#Configure" title="Configure"><code class="xref php php-class docutils literal"><span class="pre">Configure</span></code></a> 类可以随时用来读写核心配置设置。这很方便，例如，在应用
程序中要对有限的一部分逻辑启用 debug 设置。</p>
</div>
<div class="section" id="id5">
<h3>配置常量<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h3>
<p>尽管大部分配置选项由 Configure 类处理，还是有一些 CakePHP 在运行时使用的常量。</p>
<dl class="const">
<dt id="LOG_ERROR">
<em class="property">constant </em><code class="descname">LOG_ERROR</code><a class="headerlink" href="#LOG_ERROR" title="永久链接至目标">¶</a></dt>
<dd><p>错误常量。用于区分错误的日志记录和调试。当前 PHP 支持 LOG_DEBUG。</p>
</dd></dl>

</div>
<div class="section" id="id6">
<h3>核心缓存配置<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h3>
<p>CakePHP 在内部使用两个缓存配置，<code class="docutils literal"><span class="pre">_cake_model_</span></code> 和 <code class="docutils literal"><span class="pre">_cake_core_</span></code>。
<code class="docutils literal"><span class="pre">_cake_core_</span></code> 用于保存文件路径和对象位置。<code class="docutils literal"><span class="pre">_cakeMmodel_</span></code> 用于保存数据结构
描述和数据源的源列表。建议对这些配置使用象 APC 或 Memcached 这样的高速缓存存储，
因为它们会在每次请求时读取。默认情况下，当 debug 大于 0 时这两个配置都是每 10 秒
就会过期。</p>
<p>就象所有缓存在 <code class="xref php php-class docutils literal"><span class="pre">Class</span></code> 中的缓存数据一样，可以使用
<a class="reference internal" href="../core-libraries/caching.html#Cache::clear" title="Cache::clear"><code class="xref php php-meth docutils literal"><span class="pre">Cache::clear()</span></code></a> 清除数据。</p>
</div>
</div>
<div class="section" id="configure">
<h2>Configure 类<a class="headerlink" href="#configure" title="永久链接至标题">¶</a></h2>
<dl class="class">
<dt id="Configure">
<em class="property">class </em><code class="descname">Configure</code><a class="headerlink" href="#Configure" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p>尽管在 CakePHP 中很少需要配置，有时对应用程序有自己的配置规则还是有用的。过去你
也许在某些文件中定义变量或常量来定义自定义配置值。这么做迫使你在每次需要这些值时
必须引入那个配置文件。</p>
<p>CakePHP 的 Configure 类可以用来保存和读取应用程序或运行时相关的值。当心，这个类
允许在其中保存任何东西，然后在代码的任何部分使用它：明显诱使人打破作为 CakePHP
的设计目的的 MVC 模式。Configure 类的主要目标是保持变量集中在一起，可在许多对象
之间共享。记得尽量保持“约定重于配置”，你就不会打破我们设定好的 MVC 结构了。</p>
<p>这个类可以在应用程序的任何地方以静态方式调用:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Configure</span><span class="o">::</span><span class="na">read</span><span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">);</span>
</pre></div>
</div>
<dl class="staticmethod">
<dt id="Configure::write">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">write</code><span class="sig-paren">(</span><em>$key</em>, <em>$value</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::write" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$key</strong> (<em>string</em>) &#8211; 要写入的键，可以是 <a class="reference internal" href="../appendices/glossary.html#term-dot-notation"><span class="xref std std-term">dot notation</span></a> 值。</li>
<li><strong>$value</strong> (<em>mixed</em>) &#8211; 要存储的值。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>用 <code class="docutils literal"><span class="pre">write()</span></code> 在应用程序的配置中存储数据:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Configure</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;Company.name&#39;</span><span class="p">,</span><span class="s1">&#39;Pizza, Inc.&#39;</span><span class="p">);</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;Company.slogan&#39;</span><span class="p">,</span><span class="s1">&#39;Pizza for your body and soul&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last"><code class="docutils literal"><span class="pre">$key</span></code> 参数中使用的 <a class="reference internal" href="../appendices/glossary.html#term-dot-notation"><span class="xref std std-term">dot notation</span></a> 可以用来把配置设置组织成符合
逻辑的分组。</p>
</div>
<p>上面的例子也可以写成一个调用:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Configure</span><span class="o">::</span><span class="na">write</span><span class="p">(</span>
    <span class="s1">&#39;Company&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pizza, Inc.&#39;</span><span class="p">,</span>
        <span class="s1">&#39;slogan&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pizza for your body and soul&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>可以使用 <code class="docutils literal"><span class="pre">Configure::write('debug',</span> <span class="pre">$int)</span></code> 来动态切换调试和生产模式。这对
与 AMF 或 SOAP 的交互尤其方便，因为调试信息回引起解析的问题。</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Configure::read">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">read</code><span class="sig-paren">(</span><em>$key = null</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::read" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$key</strong> (<em>string</em>) &#8211; 读取的键名，可以是 <a class="reference internal" href="../appendices/glossary.html#term-dot-notation"><span class="xref std std-term">dot notation</span></a> 值。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>用来从应用程序中读取配置数据。默认是 CakePHP 重要的 debug 值。如果提供键，则
返回数据。使用上面的 write() 的例子，可以读取那个数据:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Configure</span><span class="o">::</span><span class="na">read</span><span class="p">(</span><span class="s1">&#39;Company.name&#39;</span><span class="p">);</span>    <span class="c1">//得到：&#39;Pizza, Inc.&#39;</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">read</span><span class="p">(</span><span class="s1">&#39;Company.slogan&#39;</span><span class="p">);</span>  <span class="c1">//得到：&#39;Pizza for your body</span>
                                    <span class="c1">//and soul&#39;</span>

<span class="nx">Configure</span><span class="o">::</span><span class="na">read</span><span class="p">(</span><span class="s1">&#39;Company&#39;</span><span class="p">);</span>

<span class="c1">//得到：</span>
<span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pizza, Inc.&#39;</span><span class="p">,</span> <span class="s1">&#39;slogan&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pizza for your body and soul&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>如果$key为null，返回Configure中所有的值。如果对应制定的键$key的值不存在，则
返回null。</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Configure::consume">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">consume</code><span class="sig-paren">(</span><em>$key</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::consume" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$key</strong> (<em>string</em>) &#8211; 读取的键名，可以是 <a class="reference internal" href="../appendices/glossary.html#term-dot-notation"><span class="xref std std-term">dot notation</span></a> 值。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>从Configure读取并删除键。当你想要合并读取和删除值为单一操作时，这比较有用。</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Configure::check">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">check</code><span class="sig-paren">(</span><em>$key</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::check" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$key</strong> (<em>string</em>) &#8211; 要检测的键。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>检测键/路径是否存在，且值不是 null 。</p>
<div class="versionadded">
<p><span class="versionmodified">2.3 新版功能: </span><code class="docutils literal"><span class="pre">Configure::check()</span></code> 是在 2.3 版本中新增的</p>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Configure::delete">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">delete</code><span class="sig-paren">(</span><em>$key</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::delete" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$key</strong> (<em>string</em>) &#8211; 要删除的键，可以是 <a class="reference internal" href="../appendices/glossary.html#term-dot-notation"><span class="xref std std-term">dot notation</span></a> 值。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>用来从应用程序中的配置中删除信息:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Configure</span><span class="o">::</span><span class="na">delete</span><span class="p">(</span><span class="s1">&#39;Company.name&#39;</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Configure::version">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">version</code><a class="headerlink" href="#Configure::version" title="永久链接至目标">¶</a></dt>
<dd><p>返回当前应用程序的 CakePHP 版本。</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Configure::config">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">config</code><span class="sig-paren">(</span><em>$name</em>, <em>$reader</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::config" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$name</strong> (<em>string</em>) &#8211; 附加的读取器(<em>reader</em>)的名称。</li>
<li><strong>$reader</strong> (<a class="reference internal" href="#ConfigReaderInterface" title="ConfigReaderInterface"><em>ConfigReaderInterface</em></a>) &#8211; 附加的读取器实例。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>在 Configure 类上附加一个配置读取器。然后附加的读取器就可以加载配置文件。
欲知如何读取配置文件，请参见 <a class="reference internal" href="#loading-configuration-files"><span class="std std-ref">加载配置文件</span></a>。</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Configure::configured">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">configured</code><span class="sig-paren">(</span><em>$name = null</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::configured" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$name</strong> (<em>string</em>) &#8211; 要检查的读取器的名称，如果为 null，则返回所有附加的
读取器的列表。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>或者检查指定名称的读取器是否附加了，或者得到附加的读取器列表。</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Configure::drop">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">drop</code><span class="sig-paren">(</span><em>$name</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::drop" title="永久链接至目标">¶</a></dt>
<dd><p>去掉一个连接的读取器对象。</p>
</dd></dl>

</div>
<div class="section" id="id7">
<h2>读写配置文件<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h2>
<p>CakePHP 附带两种内置的配置文件读取器。<a class="reference internal" href="#PhpReader" title="PhpReader"><code class="xref php php-class docutils literal"><span class="pre">PhpReader</span></code></a> 能够读取 PHP 配置
文件，与 Configure 类之前读取的格式相同。<a class="reference internal" href="#IniReader" title="IniReader"><code class="xref php php-class docutils literal"><span class="pre">IniReader</span></code></a> 能够读取 ini
配置文件。欲知 ini 文件的更多细节，请参见
<a class="reference external" href="http://php.net/parse_ini_file">PHP 文档</a>。为了使用核心配置读取器，需要使用
<a class="reference internal" href="#Configure::config" title="Configure::config"><code class="xref php php-meth docutils literal"><span class="pre">Configure::config()</span></code></a> 把它附加到 Configure 类上:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;PhpReader&#39;</span><span class="p">,</span> <span class="s1">&#39;Configure&#39;</span><span class="p">);</span>
<span class="c1">// 从 app/Config 读取配置文件</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">config</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">PhpReader</span><span class="p">());</span>

<span class="c1">// 从其它路径读配置文件。</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">config</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">PhpReader</span><span class="p">(</span><span class="s1">&#39;/path/to/your/config/files/&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>可以有多个附加到 Configure 类的读取器，每个读取不同的配置文件，或者从不同种类的
来源读取。可以用 Configure 类的一些其它方法与附加的读取器交互。要查看附加了哪些
读取器别名，可以使用 <a class="reference internal" href="#Configure::configured" title="Configure::configured"><code class="xref php php-meth docutils literal"><span class="pre">Configure::configured()</span></code></a> 方法:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// 得到附加的读取器的别名数组。</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">configured</span><span class="p">();</span>

<span class="c1">// 检查是否附加了某个特定的读取器</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">configured</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>也可以删除附加的读取器。<code class="docutils literal"><span class="pre">Configure::drop('default')</span></code> 方法会删除默认的读取器
别名。以后任何使用该读取器加载配置文件的企图都会失败。</p>
<div class="section" id="loading-configuration-files">
<span id="id8"></span><h3>加载配置文件<a class="headerlink" href="#loading-configuration-files" title="永久链接至标题">¶</a></h3>
<dl class="staticmethod">
<dt id="Configure::load">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">load</code><span class="sig-paren">(</span><em>$key</em>, <em>$config = 'default'</em>, <em>$merge = true</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::load" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$key</strong> (<em>string</em>) &#8211; 要加载的配置文件的标识符。</li>
<li><strong>$config</strong> (<em>string</em>) &#8211; 配置的读取器的别名。</li>
<li><strong>$merge</strong> (<em>boolean</em>) &#8211; 是否要合并读取的文件内容，或者覆盖现有的值。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>一旦在 Configure 类上附加了配置读取器，就可以加载配置文件:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// 使用 &#39;default&#39; 读取器对象加载 my_file.php</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">load</span><span class="p">(</span><span class="s1">&#39;my_file&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>加载的配置文件把它们的数据与 Configure 类中的已有的运行时配置合并。这允许对现有
的运行时配置进行覆盖和增加新值。设置 <code class="docutils literal"><span class="pre">$merge</span></code> 为 true，值就不会覆盖已有的配置
了。</p>
</div>
<div class="section" id="id9">
<h3>创建或者修改配置文件<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h3>
<dl class="staticmethod">
<dt id="Configure::dump">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">dump</code><span class="sig-paren">(</span><em>$key</em>, <em>$config = 'default'</em>, <em>$keys = array()</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::dump" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$key</strong> (<em>string</em>) &#8211; 要创建的文件/保存的配置的名称。</li>
<li><strong>$config</strong> (<em>string</em>) &#8211; 要保存数据的读取器的名称。</li>
<li><strong>$keys</strong> (<em>array</em>) &#8211; 要保存的顶层键的列表。默认为所有键。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>把 Configure 类中的所有或部分数据保存到配置读取器支持的文件或存储系统中。序列化
的格式由 $config 指定的附加配置读取器来决定。例如，如果 &#8216;default&#8217; 适配器为
<a class="reference internal" href="#PhpReader" title="PhpReader"><code class="xref php php-class docutils literal"><span class="pre">PhpReader</span></code></a> 类，生成的文件将会是一个 PHP 配置文件，能够由
<a class="reference internal" href="#PhpReader" title="PhpReader"><code class="xref php php-class docutils literal"><span class="pre">PhpReader</span></code></a> 类加载。</p>
<p>假定 &#8216;default&#8217; 读取器是一个 PhpReader 的实例。保存 Configure 类中的所有数据到
文件 <cite>my_config.php</cite> 中:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Configure</span><span class="o">::</span><span class="na">dump</span><span class="p">(</span><span class="s1">&#39;my_config.php&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>仅保存错误处理配置:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Configure</span><span class="o">::</span><span class="na">dump</span><span class="p">(</span><span class="s1">&#39;error.php&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;Exception&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Configure::dump()</span></code> 方法可以用来修改或覆盖可以用 <a class="reference internal" href="#Configure::load" title="Configure::load"><code class="xref php php-meth docutils literal"><span class="pre">Configure::load()</span></code></a>
方法读取的配置文件。</p>
<div class="versionadded">
<p><span class="versionmodified">2.2 新版功能: </span>在 2.2 版本中增加了 <code class="docutils literal"><span class="pre">Configure::dump()</span></code> 方法。</p>
</div>
</div>
<div class="section" id="id10">
<h3>存储运行时配置<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h3>
<dl class="staticmethod">
<dt id="Configure::store">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">store</code><span class="sig-paren">(</span><em>$name</em>, <em>$cacheConfig = 'default'</em>, <em>$data = null</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::store" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$name</strong> (<em>string</em>) &#8211; 缓存文件的存储键。</li>
<li><strong>$cacheConfig</strong> (<em>string</em>) &#8211; 用来存储配置数据的缓存配置的名称。</li>
<li><strong>$data</strong> (<em>mixed</em>) &#8211; 或者为要保存的数据，或者为 null 来保存 Configure 类中的
所有数据。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>也可以保存运行时配置的值，在以后的请中使用。由于配置只记得当前请求的值，如果想要
在以后的请求中使用，需要保存任何修改过的配置信息:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// 保存当前配置在 &#39;default&#39; 缓存的 &#39;user_1234&#39; 键中。</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">store</span><span class="p">(</span><span class="s1">&#39;user_1234&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>保存的配置数据持久化在 <a class="reference internal" href="../core-libraries/caching.html#Cache" title="Cache"><code class="xref php php-class docutils literal"><span class="pre">Cache</span></code></a> 类中。这让你可以把配置信息保存在任何可
以与 <a class="reference internal" href="../core-libraries/caching.html#Cache" title="Cache"><code class="xref php php-class docutils literal"><span class="pre">Cache</span></code></a> 类交互的存储引擎中。</p>
</div>
<div class="section" id="id11">
<h3>恢复运行时配置<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h3>
<dl class="staticmethod">
<dt id="Configure::restore">
<em class="property">static </em><code class="descclassname">Configure::</code><code class="descname">restore</code><span class="sig-paren">(</span><em>$name</em>, <em>$cacheConfig = 'default'</em><span class="sig-paren">)</span><a class="headerlink" href="#Configure::restore" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$name</strong> (<em>string</em>) &#8211; 要加载的存储键。</li>
<li><strong>$cacheConfig</strong> (<em>string</em>) &#8211; 要加载数据的源的缓存配置。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>一旦保存了运行时配置，很可能需要恢复它，从而可以再次访问。
<code class="docutils literal"><span class="pre">Configure::restore()</span></code> 方法就是做这件事情的:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// 从缓存恢复运行时配置。</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">restore</span><span class="p">(</span><span class="s1">&#39;user_1234&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>在恢复配置信息时，重要的是要使用保存时使用的相同的键和缓存配置来恢复。恢复的信息
会合并到现有运行时配置上。</p>
</div>
</div>
<div class="section" id="id12">
<h2>创建自己的配置读取器<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h2>
<p>既然配置读取器是 CakePHP 可以扩展的部分，就可以在应用程序和插件中创建配置读取器。
配置读取器需要实现 <a class="reference internal" href="#ConfigReaderInterface" title="ConfigReaderInterface"><code class="xref php php-interface docutils literal"><span class="pre">ConfigReaderInterface</span></code></a> 接口。该接口定义了
read 方法为唯一必需的方法。如果你真的喜欢 XML 文件，你可以为应用程序创建一个简单
的 Xml 配置读取器:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// 在 app/Lib/Configure/MyXmlReader.php 中</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;Xml&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
<span class="k">class</span> <span class="nc">MyXmlReader</span> <span class="k">implements</span> <span class="nx">ConfigReaderInterface</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$path</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$path</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$path</span> <span class="o">=</span> <span class="nx">APP</span> <span class="o">.</span> <span class="s1">&#39;Config&#39;</span> <span class="o">.</span> <span class="nx">DS</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_path</span> <span class="o">=</span> <span class="nv">$path</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">read</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$xml</span> <span class="o">=</span> <span class="nx">Xml</span><span class="o">::</span><span class="na">build</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_path</span> <span class="o">.</span> <span class="nv">$key</span> <span class="o">.</span> <span class="s1">&#39;.xml&#39;</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">Xml</span><span class="o">::</span><span class="na">toArray</span><span class="p">(</span><span class="nv">$xml</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// 在 2.3 版本中，还要求 dump() 方法</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">dump</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 保存数据到文件的代码</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>在 <code class="docutils literal"><span class="pre">app/Config/bootstrap.php</span></code> 中可以附加这个读取器并使用它:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;MyXmlReader&#39;</span><span class="p">,</span> <span class="s1">&#39;Configure&#39;</span><span class="p">);</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">config</span><span class="p">(</span><span class="s1">&#39;xml&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">MyXmlReader</span><span class="p">());</span>
<span class="o">...</span>

<span class="nx">Configure</span><span class="o">::</span><span class="na">load</span><span class="p">(</span><span class="s1">&#39;my_xml&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">把自定义配置类叫做 <code class="docutils literal"><span class="pre">XmlReader</span></code>，可不是个好主意，因为这个类名已经是 PHP
内部的一个类了：
<a class="reference external" href="http://php.net/manual/en/book.xmlreader.php">XMLReader</a></p>
</div>
<p>配置读取器的 <code class="docutils literal"><span class="pre">read()</span></code> 方法必需返回一个名为 <code class="docutils literal"><span class="pre">$key</span></code> 的资源包含的配置信息数组。</p>
<dl class="interface">
<dt id="ConfigReaderInterface">
<em class="property">interface </em><code class="descname">ConfigReaderInterface</code><a class="headerlink" href="#ConfigReaderInterface" title="永久链接至目标">¶</a></dt>
<dd><p>定义读取配置数据和在 <a class="reference internal" href="#Configure" title="Configure"><code class="xref php php-class docutils literal"><span class="pre">Configure</span></code></a> 类中保存配置数据的类使用的接口。</p>
</dd></dl>

<dl class="method">
<dt id="ConfigReaderInterface::read">
<code class="descclassname">ConfigReaderInterface::</code><code class="descname">read</code><span class="sig-paren">(</span><em>$key</em><span class="sig-paren">)</span><a class="headerlink" href="#ConfigReaderInterface::read" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$key</strong> (<em>string</em>) &#8211; 要加载的键名或者标识符。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>这个方法应当加载/解析由 <code class="docutils literal"><span class="pre">$key</span></code> 标识的配置数据，并返回文件中的数据数组。</p>
</dd></dl>

<dl class="method">
<dt id="ConfigReaderInterface::dump">
<code class="descclassname">ConfigReaderInterface::</code><code class="descname">dump</code><span class="sig-paren">(</span><em>$key</em>, <em>$data</em><span class="sig-paren">)</span><a class="headerlink" href="#ConfigReaderInterface::dump" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>$key</strong> (<em>string</em>) &#8211; 要写入的标识符。</li>
<li><strong>$data</strong> (<em>array</em>) &#8211; 要保存的数据。</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>这个方法把提供的配置数据保存到 <code class="docutils literal"><span class="pre">$key</span></code> 所指定的键中。</p>
</dd></dl>

<div class="versionadded">
<p><span class="versionmodified">2.3 新版功能: </span>在 2.3 版本中增加了 <code class="docutils literal"><span class="pre">ConfigReaderInterface::dump()</span></code> 方法。</p>
</div>
<dl class="exception">
<dt id="ConfigureException">
<em class="property">exception </em><code class="descname">ConfigureException</code><a class="headerlink" href="#ConfigureException" title="永久链接至目标">¶</a></dt>
<dd><p>在加载/保存/恢复配置数据时，当发生错误时抛出。<a class="reference internal" href="#ConfigReaderInterface" title="ConfigReaderInterface"><code class="xref php php-interface docutils literal"><span class="pre">ConfigReaderInterface</span></code></a> 接口的实现在遇到错误时应当抛出这个异常。</p>
</dd></dl>

<div class="section" id="id13">
<h3>内置配置读取器<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="PhpReader">
<em class="property">class </em><code class="descname">PhpReader</code><a class="headerlink" href="#PhpReader" title="永久链接至目标">¶</a></dt>
<dd><p>让你可以读取保存为普通 PHP 文件的配置文件。你可以从 <code class="docutils literal"><span class="pre">app/Config</span></code> 目录中
读取，也可以用 <a class="reference internal" href="../appendices/glossary.html#term-plugin-syntax"><span class="xref std std-term">plugin syntax</span></a> 从插件配置目录中读取。文件 <strong>必须</strong>
包含 <code class="docutils literal"><span class="pre">$config</span></code> 变量。下面是一个配置文件示例:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$config</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;debug&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;Security&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;salt&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;its-secret&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;Exception&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;handler&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ErrorHandler::handleException&#39;</span><span class="p">,</span>
        <span class="s1">&#39;renderer&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ExceptionRenderer&#39;</span><span class="p">,</span>
        <span class="s1">&#39;log&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>没有 <code class="docutils literal"><span class="pre">$config</span></code> 的文件将会导致 <a class="reference internal" href="#ConfigureException" title="ConfigureException"><code class="xref php php-exc docutils literal"><span class="pre">ConfigureException</span></code></a>。</p>
<p>在 app/Config/bootstrap.php 中插入如下代码来加载自定义配置文件:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Configure</span><span class="o">::</span><span class="na">load</span><span class="p">(</span><span class="s1">&#39;customConfig&#39;</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="IniReader">
<em class="property">class </em><code class="descname">IniReader</code><a class="headerlink" href="#IniReader" title="永久链接至目标">¶</a></dt>
<dd><p>让你可以读取保存为普通 .ini 文件的配置文件。ini 文件必须与 PHP 的
<code class="docutils literal"><span class="pre">parse_ini_file</span></code> 函数兼容，并且从以下改进中获益</p>
<ul class="simple">
<li>点分隔的值会扩展为数组。</li>
<li>象 &#8216;on&#8217; 和 &#8216;off&#8217; 这样的类似布尔类型的值会转化为布尔值。</li>
</ul>
<p>下面是一个 ini 文件示例:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">debug</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nx">Security</span><span class="o">.</span><span class="nx">salt</span> <span class="o">=</span> <span class="nx">its</span><span class="o">-</span><span class="nx">secret</span>

<span class="p">[</span><span class="nx">Exception</span><span class="p">]</span>
<span class="nx">handler</span> <span class="o">=</span> <span class="nx">ErrorHandler</span><span class="o">::</span><span class="na">handleException</span>
<span class="nx">renderer</span> <span class="o">=</span> <span class="nx">ExceptionRenderer</span>
<span class="nb">log</span> <span class="o">=</span> <span class="k">true</span>
</pre></div>
</div>
<p>上述 ini 文件会得到与之前的 PHP 示例相同的最终配置数据。数组结构可以通过点
分隔的值或者小节创建。小节可以包含点分隔的键来实现更深的嵌套。</p>
</dd></dl>

</div>
</div>
<div class="section" id="inflection-configuration">
<span id="id14"></span><h2>词形变化配置<a class="headerlink" href="#inflection-configuration" title="永久链接至标题">¶</a></h2>
<p>CakePHP 的命名约定真的很好 —— 你可以把数据库表命名为 big_boxes，把模型命名为
BigBox，把控制器命名为 BigBoxesController，所有这一切就可以自动在一起运作。
CakePHP 知道如何把这些联结在一起，是通过单词的单数和复数形式之间的词形变化。</p>
<p>偶尔(特别是对我们操非英语的朋友们)，你会遇到 CakePHP 的 <a class="reference internal" href="../core-utility-libraries/inflector.html#Inflector" title="Inflector"><code class="xref php php-class docutils literal"><span class="pre">Inflector</span></code></a>
类(把单词变成复数形式、单数形式、驼峰命名形式和下划线分隔形式的类)不像你希望的
那样进行词形变化。如果 CakePHP 认不出你的 Foci 或者 Fish，你可以告诉 CakePHP
这些特殊情形。</p>
<div class="section" id="id15">
<h3>加载自定义词形变化<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h3>
<p>你可以在 <code class="docutils literal"><span class="pre">app/Config/bootstrap.php</span></code> 文件中用 <a class="reference internal" href="../core-utility-libraries/inflector.html#Inflector::rules" title="Inflector::rules"><code class="xref php php-meth docutils literal"><span class="pre">Inflector::rules()</span></code></a>
方法加载自定义词形变化:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Inflector</span><span class="o">::</span><span class="na">rules</span><span class="p">(</span><span class="s1">&#39;singular&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;rules&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;/^(bil)er$/i&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;\1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/^(inflec|contribu)tors$/i&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;\1ta&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;uninflected&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;singulars&#39;</span><span class="p">),</span>
    <span class="s1">&#39;irregular&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;spins&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;spinor&#39;</span><span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>或者:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Inflector</span><span class="o">::</span><span class="na">rules</span><span class="p">(</span><span class="s1">&#39;plural&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;irregular&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;phylum&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;phyla&#39;</span><span class="p">)));</span>
</pre></div>
</div>
<p>会把提供的规则合并到 lib/Cake/Utility/Inflector.php 中定义的词形变化集合中，新增
的规则具有比核心规则更高的优先级。</p>
</div>
</div>
<div class="section" id="id16">
<h2>引导启动 CakePHP<a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h2>
<p>如果有任何额外的配置需求，可以使用 CakePHP 位于 app/Config/bootstrap.php 的引导
文件。这个文件会在 CakePHP 的核心启动引导后执行。</p>
<p>此文件非常适合用于一些常见的启动任务：</p>
<ul class="simple">
<li>定义方便的函数。</li>
<li>注册全局常量。</li>
<li>定义额外的模型、视图和控制器的路径。</li>
<li>创建缓存配置。</li>
<li>配置词形变化。</li>
<li>加载配置文件。</li>
</ul>
<p>当向引导文件添加内容时请注意保持 MVC 的软件设计模式：也许会忍不住想把格式化函数
放在那里，从而可以在控制器中使用。</p>
<p>请克制住这种想法。以后你会庆幸你在程序其它的部分这么做的。</p>
<p>你也可以考虑把代码放到 <code class="xref php php-class docutils literal"><span class="pre">AppController</span></code> 类中。这个类是应用程序中所有
控制器的父类。<code class="xref php php-class docutils literal"><span class="pre">AppController</span></code> 是一个方便的地方，来使用控制器回调，
以及定义供所有控制器使用的方法。</p>
</div>
</div>


			</div>
		</div>

		
		<div class="col-md-3 col-md-pull-9 pull-off hidden-xs hidden-sm" lang="zh">
			<aside class="sidebar">
				<div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">欢迎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cakephp-overview.html">CakePHP 概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">控制器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">视图</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries.html">核心库</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">插件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Shells，任务与命令行工具</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../development.html">开发</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html">路由</a></li>
<li class="toctree-l2"><a class="reference internal" href="sessions.html">会话</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">异常</a></li>
<li class="toctree-l2"><a class="reference internal" href="errors.html">错误处理</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">调试</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest.html">REST</a></li>
<li class="toctree-l2"><a class="reference internal" href="dispatch-filters.html">调度器过滤器</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">部署</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">教程 &amp; 实例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Appendices</a></li>
</ul>

</div>

				</div>
			</aside>
			<aside class="sidebar">
				<div class="mb30 row">
				</div>
			</aside>
		</div>
	</div>
</div>

<section id="socials" class="back-3">
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-4  social text-center">
				<div class="col-sm-3 col-xs-3">
					<div id="fb-root"></div>
						<script>(function(d, s, id) {
						  var js, fjs = d.getElementsByTagName(s)[0];
						  if (d.getElementById(id)) return;
						  js = d.createElement(s); js.id = id;
						  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
						  fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));
						</script>
						<div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
					<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
				</div>
			</div>

			<div class="col-xs-12 col-sm-12 col-md-8 social-footer text-center ">
				<a href="#">发现翻译错误? 请在下面留言</a>
				<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">我要加入翻译</a>
				<a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
				<a href="http://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
				<a href="http://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
				<a href="http://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
				<a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
				<a href="http://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
				<a href="http://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
				<a href="http://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
			</div>
		</div>
	</div>
</section>

<footer id="footer" class="footer-wrapper">
	<div class="container">

		<div class="row col-p30">
			<div class="col-sm-12 col-md-3">
				<div class="footer-widget t-footer">
					<div class="col-md-12">
						<a href="https://www.openhub.net/p/cakephp">
							<img src="../_static/open-hub.png">
						</a>
						<div class="mt10">
							<a href="https://www.rackspace.com/">
								<img src="../_static/rackspace.png">
							</a>
						</div>
					</div>
				</div>
			</div>

			<div class="col-sm-12 col-md-9">
				<div class="col-md-3 col-sm-6 business-solution">
					<ul class="footer-menu">
						<li class="menu-title">
	<a href="http://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
	<a href="http://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 text-center mt30">
				<p class="copyright">
							&copy; 版权所有 2016, Cake Software Foundation, Inc.
						最后更新于 8月 02, 2016.
						Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
				</p>
			</div>
		</div>
	</div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-743287-3']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
  </body>
</html>