
<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Data Validation" lang="en" name="title" />
<meta content="validation rules,validation data,validation errors,data validation,credit card numbers,core libraries,password email,model fields,login field,model definition,php class,many different aspects,eight characters,letters and numbers,business rules,validation process,date validation,error messages,array,formatting" lang="en" name="keywords" />

    <title>Data Validation &mdash; CakePHP Cookbook 2.x documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/app.js"></script>
    <script type="text/javascript" src="../_static/modernizr.foundation.js"></script>
    <script type="text/javascript" src="../_static/foundation.js"></script>
    <link rel="top" title="CakePHP Cookbook 2.x documentation" href="../index.html" />
    <link rel="up" title="Models" href="../models.html" />
    <link rel="next" title="Validating Data from the Controller" href="data-validation/validating-data-from-the-controller.html" />
    <link rel="prev" title="Deleting Data" href="deleting-data.html" />
<link href="../_static/favicon.ico" type="image/x-icon" rel="icon" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="alternate" hreflang="pt" href="../../pt/models/data-validation.html" /><link rel="alternate" hreflang="es" href="../../es/models/data-validation.html" /><link rel="alternate" hreflang="ja" href="../../ja/models/data-validation.html" /><link rel="alternate" hreflang="fr" href="../../fr/models/data-validation.html" /><link rel="alternate" hreflang="zh_CN" href="../../zh/models/data-validation.html" />

<link rel="search" type="application/opensearchdescription+xml" title="CakePHP Book 2.x Search" href="../_static/opensearchdescription-book-2-x.xml">
<script type="text/javascript">
window.lang = "en";
</script>

  </head>
  <body>

<div id="container">

<div id="cakephp-global-navigation">
	<ul>
		<li class="main"><a href="http://cakephp.org">CakePHP</a></li>
		<li class="primary"><a href="#" class="empty">Downloads</a>
			<ul class="second-level">
				<li><a href="https://github.com/cakephp/cakephp/tags">Releases</a></li>
				<li><a href="http://pear.cakephp.org">Pear channel</a></li>
			</ul>
		</li>
		<li class="primary"><a href="#" class="empty">Documentation</a>
			<ul class="second-level">
				<li><a href="http://api.cakephp.org">API</a></li>
				<li><a href="http://book.cakephp.org">Book</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://community.cakephp.org">Community</a>
			<ul class="second-level">
				<li><a href="http://webchat.freenode.net/?channels=cakephp&uio=MT1mYWxzZSY5PXRydWUmMTE9MjQ2b8">Help &amp; Support</a></li>
				<li><a href="https://github.com/cakephp/cakephp/issues">Issues</a></li>
				<li><a href="http://bakery.cakephp.org">The Bakery</a></li>
				<li><a href="http://stackoverflow.com/tags/cakephp">Stack Overflow</a></li>
				<li><a href="http://www.facebook.com/groups/cake.community">Facebook Group</a></li>
				<li><a href="http://goo.gl/mSC0s">Google+ Community</a></li>
				<li><a href="http://www.youtube.com/user/CakePHP">YouTube Channel</a></li>
				<li><a href="http://podcast.cakephp.org">CakePHP Podcast</a></li>
				<li><a href="http://twitter.com/CakePHP">Follow us on Twitter</a></li>
				<li><a href="http://groups.google.com/group/cake-php">Google Group</a></li>
				<li><a href="http://github.com/cakephp/cakephp/contributors">Contributors</a></li>
				<li><a href="http://plugins.cakephp.org">Plugins &amp; Packages</a></li>
				<li><a href="http://community.cakephp.org/get-involved">Get Involved</a></li>
				<li><a href="http://community.cakephp.org/guidelines">Guidelines</a></li>
				<li><a href="http://cakefest.org">CakeFest</a></li>
				<li><a href="http://cakephp.org/logos">Logo</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://cakephp.org/services">Services</a>
			<ul class="second-level">
				<li><a href="http://cakephp.org/services/certification">Certification</a></li>
				<li><a href="http://cakephp.org/services/consultation">Consultation</a></li>
				<li><a href="http://cakephp.org/services/support">Support</a></li>
				<li><a href="http://training.cakephp.org">Training</a></li>
			</ul>
		</li>
	</ul>
</div>

<div class="masthead">
	<div class="header-backing"></div>
	<div class="searchbar row">
		<div class="columns three phone-one">
			<a class="logo" href="../contents.html">
			<img src="../_static/cake-logo.png" alt="CakePHP" width="70" />
			</a>
		</div>
		
<div id="searchbox" class="columns nine phone-three">

	<form id="searchform" class="search" action="../search.html" method="get">
		<input class="search-input" autocomplete="off" type="search" name="q" size="18" />
		<input class="search-submit search-big button red" type="submit" value="Search" />
		<input type="hidden" name="check_keywords" value="yes" />
		<input type="hidden" name="area" value="default" />

		<a href="#" id="tablet-nav" class="show-on-phones pale button small">Nav</a>
	</form>

</div>
	</div>
</div>
<div class="breadcrumb-header">
	<div class="related row">
		<div class="columns three root-link">
			<a href="../contents.html">Cookbook 2.x</a>
		</div>
		<div class="columns nine">
			<ul class="inline breadcrumb">
			<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
				<a href="../models.html" accesskey="U" itemprop="url"><span itemprop="title">Models</span></a>
			</li>
			</ul>
			<div class="versions dropdown">
				<a href="#">2.x Book</a>
				<ul>
					<li><a href="http://book.cakephp.org/3.0/en">3.0 Book</a></li>
					<li><a href="http://book.cakephp.org/1.3/en/">1.3 Book</a></li>
					<li><a href="http://book.cakephp.org/1.2/en/">1.2 Book</a></li>
					<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
				</ul>
			</div>

			<div class="languages dropdown">
				<a href="#">en</a>

				<ul>
				
					<li></li>
				
					<li><a href="../../pt/models/data-validation.html">pt</a></li>
				
					<li><a href="../../es/models/data-validation.html">es</a></li>
				
					<li><a href="../../ja/models/data-validation.html">ja</a></li>
				
					<li><a href="../../fr/models/data-validation.html">fr</a></li>
				
					<li><a href="../../zh/models/data-validation.html">zh_CN</a></li>
				
				</ul>
			</div>
		</div>
	</div>
</div>

<div class="content row">
	<div class="document columns nine push-three">
		<div class="body"><a class="button pale improve" href="https://github.com/cakephp/docs/edit/master/en/models/data-validation.rst" target="_blank">Improve this Doc</a>
  <div class="section" id="data-validation">
<h1>Data Validation<a class="headerlink" href="#data-validation" title="Permalink to this headline">¶</a></h1>
<p>Data validation is an important part of any application, as it
helps to make sure that the data in a Model conforms to the
business rules of the application. For example, you might want to
make sure that passwords are at least eight characters long, or
ensure that usernames are unique. Defining validation rules makes
form handling much, much easier.</p>
<p>There are many different aspects to the validation process. What
we&#8217;ll cover in this section is the model side of things.
Essentially: what happens when you call the save() method of your
model. For more information about how to handle the displaying of
validation errors, check out
<a class="reference internal" href="../core-libraries/helpers/form.html"><em>FormHelper</em></a>.</p>
<p>The first step to data validation is creating the validation rules
in the Model. To do that, use the Model::validate array in the
Model definition, for example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">AppModel</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the example above, the <tt class="docutils literal"><span class="pre">$validate</span></tt> array is added to the User
Model, but the array contains no validation rules. Assuming that
the users table has login, password, email and born fields, the
example below shows some simple validation rules that apply to
those fields:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">AppModel</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alphaNumeric&#39;</span><span class="p">,</span>
        <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span>
        <span class="s1">&#39;born&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;date&#39;</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This last example shows how validation rules can be added to model
fields. For the login field, only letters and numbers will be
accepted, the email should be valid, and born should be a valid
date. Defining validation rules enables CakePHP&#8217;s automagic showing
of error messages in forms if the data submitted does not follow
the defined rules.</p>
<p>CakePHP has many validation rules and using them can be quite easy.
Some of the built-in rules allow you to verify the formatting of
emails, URLs, and credit card numbers – but we&#8217;ll cover these in
detail later on.</p>
<p>Here is a more complex validation example that takes advantage of
some of these built-in validation rules:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">AppModel</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alphaNumeric&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alphaNumeric&#39;</span><span class="p">,</span>
                <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Letters and numbers only&#39;</span>
            <span class="p">),</span>
            <span class="s1">&#39;between&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;lengthBetween&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Between 5 to 15 characters&#39;</span>
            <span class="p">)</span>
        <span class="p">),</span>
        <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;minLength&#39;</span><span class="p">,</span> <span class="s1">&#39;8&#39;</span><span class="p">),</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Minimum 8 characters long&#39;</span>
        <span class="p">),</span>
        <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span>
        <span class="s1">&#39;born&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Enter a valid date&#39;</span><span class="p">,</span>
            <span class="s1">&#39;allowEmpty&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
        <span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Two validation rules are defined for login: it should contain
letters and numbers only, and its length should be between 5 and
15. The password field should be a minimum of 8 characters long.
The email should be a valid email address, and born should be a
valid date. Also, notice how you can define specific error messages
that CakePHP will use when these validation rules fail.</p>
<p>As the example above shows, a single field can have multiple
validation rules. And if the built-in rules do not match your
criteria, you can always add your own validation rules as
required.</p>
<p>Now that you&#8217;ve seen the big picture on how validation works, let&#8217;s
look at how these rules are defined in the model. There are three
different ways that you can define validation rules: simple arrays,
single rule per field, and multiple rules per field.</p>
<div class="section" id="simple-rules">
<h2>Simple Rules<a class="headerlink" href="#simple-rules" title="Permalink to this headline">¶</a></h2>
<p>As the name suggests, this is the simplest way to define a
validation rule. The general syntax for defining rules this way
is:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;fieldName&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ruleName&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Where, &#8216;fieldName&#8217; is the name of the field the rule is defined
for, and &#8216;ruleName&#8217; is a pre-defined rule name, such as
&#8216;alphaNumeric&#8217;, &#8216;email&#8217; or &#8216;isUnique&#8217;.</p>
<p>For example, to ensure that the user is giving a well formatted
email address, you could use this rule:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;user_email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;email&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="one-rule-per-field">
<h2>One Rule Per Field<a class="headerlink" href="#one-rule-per-field" title="Permalink to this headline">¶</a></h2>
<p>This definition technique allows for better control of how the
validation rules work. But before we discuss that, let&#8217;s see the
general usage pattern adding a rule for a single field:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;fieldName1&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="c1">// or: array(&#39;ruleName&#39;, &#39;param1&#39;, &#39;param2&#39; ...)</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ruleName&#39;</span><span class="p">,</span>
        <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
        <span class="s1">&#39;allowEmpty&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
        <span class="c1">// or: &#39;update&#39;</span>
        <span class="s1">&#39;on&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;create&#39;</span><span class="p">,</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Your Error Message&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The &#8216;rule&#8217; key is required. If you only set &#8216;required&#8217; =&gt; true, the
form validation will not function correctly. This is because
&#8216;required&#8217; is not actually a rule.</p>
<p>As you can see here, each field (only one field shown above) is
associated with an array that contains five keys: &#8216;rule&#8217;,
&#8216;required&#8217;, &#8216;allowEmpty&#8217;, &#8216;on&#8217; and &#8216;message&#8217;. Let&#8217;s have a closer
look at these keys.</p>
<div class="section" id="rule">
<h3>rule<a class="headerlink" href="#rule" title="Permalink to this headline">¶</a></h3>
<p>The &#8216;rule&#8217; key defines the validation method and takes either a
single value or an array. The specified &#8216;rule&#8217; may be the name of a
method in your model, a method of the core Validation class, or a
regular expression. For more information on the rules available by
default, see
<a class="reference internal" href="#core-validation-rules"><em>Core Validation Rules</em></a>.</p>
<p>If the rule does not require any parameters, &#8216;rule&#8217; can be a single
value e.g.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alphaNumeric&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>If the rule requires some parameters (like the max, min or range),
&#8216;rule&#8217; should be an array:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;minLength&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Remember, the &#8216;rule&#8217; key is required for array-based rule
definitions.</p>
</div>
<div class="section" id="required">
<h3>required<a class="headerlink" href="#required" title="Permalink to this headline">¶</a></h3>
<p>This key accepts either a boolean, or <tt class="docutils literal"><span class="pre">create</span></tt> or <tt class="docutils literal"><span class="pre">update</span></tt>. Setting this
key to <tt class="docutils literal"><span class="pre">true</span></tt> will make the field always required. While setting it to
<tt class="docutils literal"><span class="pre">create</span></tt> or <tt class="docutils literal"><span class="pre">update</span></tt> will make the field required only for update or  create
operations. If &#8216;required&#8217; is evaluated to true, the field must be present in the
data array. For example, if the validation rule has been defined as follows:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alphaNumeric&#39;</span><span class="p">,</span>
        <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The data sent to the model&#8217;s save() method must contain data for
the login field. If it doesn&#8217;t, validation will fail. The default
value for this key is boolean false.</p>
<p><tt class="docutils literal"><span class="pre">required</span> <span class="pre">=&gt;</span> <span class="pre">true</span></tt> does not mean the same as the validation rule
<tt class="docutils literal"><span class="pre">notBlank()</span></tt>. <tt class="docutils literal"><span class="pre">required</span> <span class="pre">=&gt;</span> <span class="pre">true</span></tt> indicates that the array <em>key</em>
must be present - it does not mean it must have a value. Therefore
validation will fail if the field is not present in the dataset,
but may (depending on the rule) succeed if the value submitted is
empty (&#8216;&#8217;).</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.1: </span>Support for <tt class="docutils literal"><span class="pre">create</span></tt> and <tt class="docutils literal"><span class="pre">update</span></tt> were added.</p>
</div>
</div>
<div class="section" id="allowempty">
<h3>allowEmpty<a class="headerlink" href="#allowempty" title="Permalink to this headline">¶</a></h3>
<p>If set to <tt class="docutils literal"><span class="pre">false</span></tt>, the field value must be <strong>nonempty</strong>, where
&#8220;nonempty&#8221; is defined as <tt class="docutils literal"><span class="pre">!empty($value)</span> <span class="pre">||</span> <span class="pre">is_numeric($value)</span></tt>.
The numeric check is so that CakePHP does the right thing when
<tt class="docutils literal"><span class="pre">$value</span></tt> is zero.</p>
<p>The difference between <tt class="docutils literal"><span class="pre">required</span></tt> and <tt class="docutils literal"><span class="pre">allowEmpty</span></tt> can be
confusing. <tt class="docutils literal"><span class="pre">'required'</span> <span class="pre">=&gt;</span> <span class="pre">true</span></tt> means that you cannot save the
model without the <em>key</em> for this field being present in
<tt class="docutils literal"><span class="pre">$this-&gt;data</span></tt> (the check is performed with <tt class="docutils literal"><span class="pre">isset</span></tt>); whereas,
<tt class="docutils literal"><span class="pre">'allowEmpty'</span> <span class="pre">=&gt;</span> <span class="pre">false</span></tt> makes sure that the current field <em>value</em>
is nonempty, as described above.</p>
</div>
<div class="section" id="on">
<h3>on<a class="headerlink" href="#on" title="Permalink to this headline">¶</a></h3>
<p>The &#8216;on&#8217; key can be set to either one of the following values:
&#8216;update&#8217; or &#8216;create&#8217;. This provides a mechanism that allows a
certain rule to be applied either during the creation of a new
record, or during update of a record.</p>
<p>If a rule has defined &#8216;on&#8217; =&gt; &#8216;create&#8217;, the rule will only be
enforced during the creation of a new record. Likewise, if it is
defined as &#8216;on&#8217; =&gt; &#8216;update&#8217;, it will only be enforced during the
updating of a record.</p>
<p>The default value for &#8216;on&#8217; is null. When &#8216;on&#8217; is null, the rule
will be enforced during both creation and update.</p>
</div>
<div class="section" id="message">
<h3>message<a class="headerlink" href="#message" title="Permalink to this headline">¶</a></h3>
<p>The message key allows you to define a custom validation error
message for the rule:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;minLength&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Password must be at least 8 characters long&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Regardless of the rule, validation failure without a defined message defaults to &#8220;This field cannot be left blank.&#8221;</p>
</div>
</div>
</div>
<div class="section" id="multiple-rules-per-field">
<h2>Multiple Rules per Field<a class="headerlink" href="#multiple-rules-per-field" title="Permalink to this headline">¶</a></h2>
<p>The technique outlined above gives us much more flexibility than
simple rules assignment, but there&#8217;s an extra step we can take in
order to gain more fine-grained control of data validation. The
next technique we&#8217;ll outline allows us to assign multiple
validation rules per model field.</p>
<p>If you would like to assign multiple validation rules to a single
field, this is basically how it should look:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;fieldName&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;ruleName&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ruleName&#39;</span><span class="p">,</span>
            <span class="c1">// extra keys like on, required, etc. go here...</span>
        <span class="p">),</span>
        <span class="s1">&#39;ruleName2&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ruleName2&#39;</span><span class="p">,</span>
            <span class="c1">// extra keys like on, required, etc. go here...</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>As you can see, this is quite similar to what we did in the
previous section. There, for each field we had only one array of
validation parameters. In this case, each &#8216;fieldName&#8217; consists of
an array of rule indexes. Each &#8216;ruleName&#8217; contains a separate array
of validation parameters.</p>
<p>This is better explained with a practical example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;loginRule-1&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alphaNumeric&#39;</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Only alphabets and numbers allowed&#39;</span><span class="p">,</span>
         <span class="p">),</span>
        <span class="s1">&#39;loginRule-2&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;minLength&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Minimum length of 8 characters&#39;</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The above example defines two rules for the login field:
loginRule-1 and loginRule-2. As you can see, each rule is
identified with an arbitrary name.</p>
<p>When using multiple rules per field the &#8216;required&#8217; and &#8216;allowEmpty&#8217;
keys need to be used only once in the first rule.</p>
<div class="section" id="last">
<h3>last<a class="headerlink" href="#last" title="Permalink to this headline">¶</a></h3>
<p>In case of multiple rules per field by default if a particular rule
fails error message for that rule is returned and the following rules
for that field are not processed. If you want validation to continue
in spite of a rule failing set key <tt class="docutils literal"><span class="pre">last</span></tt> to <tt class="docutils literal"><span class="pre">false</span></tt> for that rule.</p>
<p>In the following example even if &#8220;rule1&#8221; fails &#8220;rule2&#8221; will be processed
and error messages for both failing rules will be returned if &#8220;rule2&#8221; also
fails:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule1&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alphaNumeric&#39;</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Only alphabets and numbers allowed&#39;</span><span class="p">,</span>
            <span class="s1">&#39;last&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span>
         <span class="p">),</span>
        <span class="s1">&#39;rule2&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;minLength&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Minimum length of 8 characters&#39;</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>When specifying validation rules in this array form it&#8217;s possible to avoid
providing the <tt class="docutils literal"><span class="pre">message</span></tt> key. Consider this example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;Only alphabets and numbers allowed&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alphaNumeric&#39;</span><span class="p">,</span>
         <span class="p">),</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>If the <tt class="docutils literal"><span class="pre">alphaNumeric</span></tt> rules fails the array key for this rule
&#8216;Only alphabets and numbers allowed&#8217; will be returned as error message since
the <tt class="docutils literal"><span class="pre">message</span></tt> key is not set.</p>
</div>
</div>
<div class="section" id="custom-validation-rules">
<h2>Custom Validation Rules<a class="headerlink" href="#custom-validation-rules" title="Permalink to this headline">¶</a></h2>
<p>If you haven&#8217;t found what you need thus far, you can always create
your own validation rules. There are two ways you can do this: by
defining custom regular expressions, or by creating custom
validation methods.</p>
<div class="section" id="custom-regular-expression-validation">
<h3>Custom Regular Expression Validation<a class="headerlink" href="#custom-regular-expression-validation" title="Permalink to this headline">¶</a></h3>
<p>If the validation technique you need to use can be completed by
using regular expression matching, you can define a custom
expression as a field validation rule:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/^[a-z0-9]{3,}$/i&#39;</span><span class="p">,</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Only letters and integers, min 3 characters&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The example above checks if the login contains only letters and
integers, with a minimum of three characters.</p>
<p>The regular expression in the <tt class="docutils literal"><span class="pre">rule</span></tt> must be delimited by
slashes. The optional trailing &#8216;i&#8217; after the last slash means the
reg-exp is case <em>i</em>nsensitive.</p>
</div>
<div class="section" id="adding-your-own-validation-methods">
<h3>Adding your own Validation Methods<a class="headerlink" href="#adding-your-own-validation-methods" title="Permalink to this headline">¶</a></h3>
<p>Sometimes checking data with regular expression patterns is not
enough. For example, if you want to ensure that a promotional code
can only be used 25 times, you need to add your own validation
function, as shown below:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">AppModel</span> <span class="p">{</span>

    <span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;promotion_code&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;limitDuplicates&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;This code has been used too many times.&#39;</span>
        <span class="p">)</span>
    <span class="p">);</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">limitDuplicates</span><span class="p">(</span><span class="nv">$check</span><span class="p">,</span> <span class="nv">$limit</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// $check will have value: array(&#39;promotion_code&#39; =&gt; &#39;some-value&#39;)</span>
        <span class="c1">// $limit will have value: 25</span>
        <span class="nv">$existingPromoCount</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="nv">$check</span><span class="p">,</span>
            <span class="s1">&#39;recursive&#39;</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">));</span>
        <span class="k">return</span> <span class="nv">$existingPromoCount</span> <span class="o">&lt;</span> <span class="nv">$limit</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The current field to be validated is passed into the function as
first parameter as an associated array with field name as key and
posted data as value.</p>
<p>If you want to pass extra parameters to your validation function,
add elements onto the &#8216;rule&#8217; array, and handle them as extra params
(after the main <tt class="docutils literal"><span class="pre">$check</span></tt> param) in your function.</p>
<p>Your validation function can be in the model (as in the example
above), or in a behavior that the model implements. This includes
mapped methods.</p>
<p>Model/behavior methods are checked first, before looking for a
method on the <tt class="docutils literal"><span class="pre">Validation</span></tt> class. This means that you can
override existing validation methods (such as <tt class="docutils literal"><span class="pre">alphaNumeric()</span></tt>)
at an application level (by adding the method to <tt class="docutils literal"><span class="pre">AppModel</span></tt>), or
at model level.</p>
<p>When writing a validation rule which can be used by multiple
fields, take care to extract the field value from the $check array.
The $check array is passed with the form field name as its key and
the field value as its value. The full record being validated is
stored in $this-&gt;data member variable:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Post</span> <span class="k">extends</span> <span class="nx">AppModel</span> <span class="p">{</span>

    <span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alphaNumericDashUnderscore&#39;</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Slug can only be letters,&#39;</span> <span class="o">.</span>
                <span class="s1">&#39; numbers, dash and underscore&#39;</span>
        <span class="p">)</span>
    <span class="p">);</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">alphaNumericDashUnderscore</span><span class="p">(</span><span class="nv">$check</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// $data array is passed using the form field name as the key</span>
        <span class="c1">// have to extract the value to make the function generic</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="nb">array_values</span><span class="p">(</span><span class="nv">$check</span><span class="p">);</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

        <span class="k">return</span> <span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;|^[0-9a-zA-Z_-]*$|&#39;</span><span class="p">,</span> <span class="nv">$value</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Your own validation methods must have <tt class="docutils literal"><span class="pre">public</span></tt> visibility. Validation
methods that are <tt class="docutils literal"><span class="pre">protected</span></tt> and <tt class="docutils literal"><span class="pre">private</span></tt> are not supported.</p>
</div>
<p>The method should return <tt class="docutils literal"><span class="pre">true</span></tt> if the value is valid. If the validation
failed, return <tt class="docutils literal"><span class="pre">false</span></tt>. The other valid return value are strings which will
be shown as the error message. Returning a string means the validation failed.
The string will overwrite the message set in the $validate array and be shown
in the view&#8217;s form as the reason why the field was not valid.</p>
</div>
</div>
<div class="section" id="dynamically-change-validation-rules">
<h2>Dynamically change validation rules<a class="headerlink" href="#dynamically-change-validation-rules" title="Permalink to this headline">¶</a></h2>
<p>Using the <tt class="docutils literal"><span class="pre">$validate</span></tt> property to declare validation rules is a good way of
statically defining rules for each model. Nevertheless, there are cases when you
want to dynamically add, change or remove validation rules from the predefined
set.</p>
<p>All validation rules are stored in a <tt class="docutils literal"><span class="pre">ModelValidator</span></tt> object, which holds
every rule set for each field in your model. Defining new validation rules is as
easy as telling this object to store new validation methods for the fields you
want to.</p>
<div class="section" id="adding-new-validation-rules">
<h3>Adding new validation rules<a class="headerlink" href="#adding-new-validation-rules" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<p>The <tt class="docutils literal"><span class="pre">ModelValidator</span></tt> objects allows several ways for adding new fields to the
set. The first one is using the <tt class="docutils literal"><span class="pre">add</span></tt> method:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// Inside a model class</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;notBlank&#39;</span><span class="p">,</span>
    <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;create&#39;</span>
<span class="p">));</span>
</pre></div>
</div>
<p>This will add a single rule to the <cite>password</cite> field in the model. You can chain
multiple calls to add to create as many rules as you like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// Inside a model class</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;notBlank&#39;</span><span class="p">,</span>
        <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;create&#39;</span>
    <span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;lengthBetween&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Password should be at least 8 chars long&#39;</span>
    <span class="p">));</span>
</pre></div>
</div>
<p>It is also possible to add multiple rules at once for a single field:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;notBlank&#39;</span><span class="p">,</span>
        <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;create&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;lengthBetween&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Password should be at least 8 chars long&#39;</span>
    <span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>Alternatively, you can use the validator object to set rules directly to fields
using the array interface:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nv">$validator</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="p">();</span>
<span class="nv">$validator</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;unique&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;isUnique&#39;</span><span class="p">,</span>
        <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;create&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;alphanumeric&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alphanumeric&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="modifying-current-validation-rules">
<h3>Modifying current validation rules<a class="headerlink" href="#modifying-current-validation-rules" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<p>Modifying current validation rules is also possible using the validator object,
there are several ways in which you can alter current rules, append methods to a
field or completely remove a rule from a field rule set:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// In a model class</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getField</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
    <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
<span class="p">));</span>
</pre></div>
</div>
<p>You can also completely replace all the rules for a field using a similar
method:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// In a model class</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getField</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">setRules</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
    <span class="s1">&#39;otherRule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>If you wish to just modify a single property in a rule you can set properties
directly into the <tt class="docutils literal"><span class="pre">CakeValidationRule</span></tt> object:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// In a model class</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getField</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">getRule</span><span class="p">(</span><span class="s1">&#39;required&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;This field cannot be left blank&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Properties in any <tt class="docutils literal"><span class="pre">CakeValidationRule</span></tt> get their name from the array keys
one is allowed to use when defining a validation rule&#8217;s properties, such as the
array keys &#8216;message&#8217; and &#8216;allowEmpty&#8217; for example.</p>
<p>As with adding new rule to the set, it is also possible to modify existing rules
using the array interface:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nv">$validator</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="p">();</span>
<span class="nv">$validator</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">][</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;isUnique&#39;</span><span class="p">,</span>
    <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;create&#39;</span>
<span class="p">);</span>

<span class="nv">$validator</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">][</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">last</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nv">$validator</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">][</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;Name already taken&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="removing-rules-from-the-set">
<h3>Removing rules from the set<a class="headerlink" href="#removing-rules-from-the-set" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<p>It is possible to both completely remove all rules for a field and to delete a
single rule in a field&#8217;s rule set:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// Completely remove all rules for a field</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">remove</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">);</span>

<span class="c1">// Remove &#39;required&#39; rule from password</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">remove</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;required&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Optionally, you can use the array interface to delete rules from the set:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nv">$validator</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="p">();</span>
<span class="c1">// Completely remove all rules for a field</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$validator</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]);</span>

<span class="c1">// Remove &#39;required&#39; rule from password</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$validator</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">][</span><span class="s1">&#39;required&#39;</span><span class="p">]);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="core-validation-rules">
<span id="id1"></span><h2>Core Validation Rules<a class="headerlink" href="#core-validation-rules" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="Validation">
<em class="property">class </em><tt class="descname">Validation</tt><a class="headerlink" href="#Validation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>The Validation class in CakePHP contains many validation rules that
can make model data validation much easier. This class contains
many oft-used validation techniques you won&#8217;t need to write on your
own. Below, you&#8217;ll find a complete list of all the rules, along
with usage examples.</p>
<dl class="staticmethod">
<dt id="Validation::alphaNumeric">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">alphaNumeric</tt><big>(</big><em>mixed $check</em><big>)</big><a class="headerlink" href="#Validation::alphaNumeric" title="Permalink to this definition">¶</a></dt>
<dd><p>The data for the field must only contain letters and numbers.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;alphaNumeric&#39;</span><span class="p">,</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Usernames must only contain letters and numbers.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::lengthBetween">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">lengthBetween</tt><big>(</big><em>string $check</em>, <em>integer $min</em>, <em>integer $max</em><big>)</big><a class="headerlink" href="#Validation::lengthBetween" title="Permalink to this definition">¶</a></dt>
<dd><p>The length of the data for the field must fall within the specified
numeric range. Both minimum and maximum values must be supplied.
Uses = not.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span>    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;lengthBetween&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Passwords must be between 5 and 15 characters long.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The length of data is &#8220;the number of bytes in the string
representation of the data&#8221;. Be careful that it may be larger than
the number of characters when handling non-ASCII characters.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::blank">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">blank</tt><big>(</big><em>mixed $check</em><big>)</big><a class="headerlink" href="#Validation::blank" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule is used to make sure that the field is left blank or only
white space characters are present in its value. White space
characters include space, tab, carriage return, and newline.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;blank&#39;</span><span class="p">,</span>
        <span class="s1">&#39;on&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;create&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::boolean">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">boolean</tt><big>(</big><em>string $check</em><big>)</big><a class="headerlink" href="#Validation::boolean" title="Permalink to this definition">¶</a></dt>
<dd><p>The data for the field must be a boolean value. Valid values are
true or false, integers 0 or 1 or strings &#8216;0&#8217; or &#8216;1&#8217;.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;myCheckbox&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;boolean&#39;</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Incorrect value for myCheckbox&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::cc">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">cc</tt><big>(</big><em>mixed $check</em>, <em>mixed $type = 'fast'</em>, <em>boolean $deep = false</em>, <em>string $regex = null</em><big>)</big><a class="headerlink" href="#Validation::cc" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule is used to check whether the data is a valid credit card
number. It takes three parameters: &#8216;type&#8217;, &#8216;deep&#8217; and &#8216;regex&#8217;.</p>
<p>The &#8216;type&#8217; key can be assigned to the values of &#8216;fast&#8217;, &#8216;all&#8217; or
any of the following:</p>
<ul class="simple">
<li>amex</li>
<li>bankcard</li>
<li>diners</li>
<li>disc</li>
<li>electron</li>
<li>enroute</li>
<li>jcb</li>
<li>maestro</li>
<li>mc</li>
<li>solo</li>
<li>switch</li>
<li>visa</li>
<li>voyager</li>
</ul>
<p>If &#8216;type&#8217; is set to &#8216;fast&#8217;, it validates the data against the major
credit cards&#8217; numbering formats. Setting &#8216;type&#8217; to &#8216;all&#8217; will check
with all the credit card types. You can also set &#8216;type&#8217; to an array
of the types you wish to match.</p>
<p>The &#8216;deep&#8217; key should be set to a boolean value. If it is set to
true, the validation will check the Luhn algorithm of the credit
card
(<a class="reference external" href="http://en.wikipedia.org/wiki/Luhn_algorithm">http://en.wikipedia.org/wiki/Luhn_algorithm</a>).
It defaults to false.</p>
<p>The &#8216;regex&#8217; key allows you to supply your own regular expression
that will be used to validate the credit card number:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;ccnumber&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;cc&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;visa&#39;</span><span class="p">,</span> <span class="s1">&#39;maestro&#39;</span><span class="p">),</span> <span class="k">false</span><span class="p">,</span> <span class="k">null</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;The credit card number you supplied was invalid.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::comparison">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">comparison</tt><big>(</big><em>mixed $check1</em>, <em>string $operator = null</em>, <em>integer $check2 = null</em><big>)</big><a class="headerlink" href="#Validation::comparison" title="Permalink to this definition">¶</a></dt>
<dd><p>Comparison is used to compare numeric values. It supports &#8220;is
greater&#8221;, &#8220;is less&#8221;, &#8220;greater or equal&#8221;, &#8220;less or equal&#8221;, &#8220;equal
to&#8221;, and &#8220;not equal&#8221;. Some examples are shown below:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;comparison&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Must be at least 18 years old to qualify.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;comparison&#39;</span><span class="p">,</span> <span class="s1">&#39;greater or equal&#39;</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Must be at least 18 years old to qualify.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::custom">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">custom</tt><big>(</big><em>mixed $check</em>, <em>string $regex = null</em><big>)</big><a class="headerlink" href="#Validation::custom" title="Permalink to this definition">¶</a></dt>
<dd><p>Used when a custom regular expression is needed:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;infinite&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;custom&#39;</span><span class="p">,</span> <span class="s1">&#39;\u221E&#39;</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please enter an infinite number.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::date">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">date</tt><big>(</big><em>string $check</em>, <em>mixed $format = 'ymd'</em>, <em>string $regex = null</em><big>)</big><a class="headerlink" href="#Validation::date" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule ensures that data is submitted in valid date formats. A
single parameter (which can be an array) can be passed that will be
used to check the format of the supplied date. The value of the
parameter can be one of the following:</p>
<ul class="simple">
<li>&#8216;dmy&#8217; e.g. 27-12-2006 or 27-12-06 (separators can be a space,
period, dash, forward slash)</li>
<li>&#8216;mdy&#8217; e.g. 12-27-2006 or 12-27-06 (separators can be a space,
period, dash, forward slash)</li>
<li>&#8216;ymd&#8217; e.g. 2006-12-27 or 06-12-27 (separators can be a space,
period, dash, forward slash)</li>
<li>&#8216;dMy&#8217; e.g. 27 December 2006 or 27 Dec 2006</li>
<li>&#8216;Mdy&#8217; e.g. December 27, 2006 or Dec 27, 2006 (comma is optional)</li>
<li>&#8216;My&#8217; e.g. (December 2006 or Dec 2006)</li>
<li>&#8216;my&#8217; e.g. 12/2006 or 12/06 (separators can be a space, period,
dash, forward slash)</li>
<li>&#8216;ym&#8217; e.g. 2006/12 or 06/12 (separators can be a space, period,
dash, forward slash)</li>
<li>&#8216;y&#8217; e.g. 2006 (separators can be a space, period,
dash, forward slash)</li>
</ul>
<p>If no keys are supplied, the default key that will be used is
&#8216;ymd&#8217;:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;born&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;ymd&#39;</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Enter a valid date in YY-MM-DD format.&#39;</span><span class="p">,</span>
        <span class="s1">&#39;allowEmpty&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>While many data stores require a certain date format, you might
consider doing the heavy lifting by accepting a wide-array of date
formats and trying to convert them, rather than forcing users to
supply a given format. The more work you can do for your users, the
better.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.4: </span>The <tt class="docutils literal"><span class="pre">ym</span></tt> and <tt class="docutils literal"><span class="pre">y</span></tt> formats were added.</p>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::datetime">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">datetime</tt><big>(</big><em>array $check</em>, <em>mixed $dateFormat = 'ymd'</em>, <em>string $regex = null</em><big>)</big><a class="headerlink" href="#Validation::datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule ensures that the data is a valid datetime format. A
parameter (which can be an array) can be passed to specify the format
of the date. The value of the parameter can be one or more of the
following:</p>
<ul class="simple">
<li>&#8216;dmy&#8217; e.g. 27-12-2006 or 27-12-06 (separators can be a space,
period, dash, forward slash)</li>
<li>&#8216;mdy&#8217; e.g. 12-27-2006 or 12-27-06 (separators can be a space,
period, dash, forward slash)</li>
<li>&#8216;ymd&#8217; e.g. 2006-12-27 or 06-12-27 (separators can be a space,
period, dash, forward slash)</li>
<li>&#8216;dMy&#8217; e.g. 27 December 2006 or 27 Dec 2006</li>
<li>&#8216;Mdy&#8217; e.g. December 27, 2006 or Dec 27, 2006 (comma is optional)</li>
<li>&#8216;My&#8217; e.g. (December 2006 or Dec 2006)</li>
<li>&#8216;my&#8217; e.g. 12/2006 or 12/06 (separators can be a space, period,
dash, forward slash)</li>
</ul>
<p>If no keys are supplied, the default key that will be used is
&#8216;ymd&#8217;:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;birthday&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;dmy&#39;</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please enter a valid date and time.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Also a second parameter can be passed to specify a custom regular
expression. If this parameter is used, this will be the only
validation that will occur.</p>
<p>Note that unlike date(), datetime() will validate a date and a time.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::decimal">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">decimal</tt><big>(</big><em>string $check</em>, <em>integer $places = null</em>, <em>string $regex = null</em><big>)</big><a class="headerlink" href="#Validation::decimal" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule ensures that the data is a valid decimal number. A
parameter can be passed to specify the number of digits required
after the decimal point. If no parameter is passed, the data will
be validated as a scientific float, which will cause validation to
fail if no digits are found after the decimal point:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;decimal&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::email">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">email</tt><big>(</big><em>string $check</em>, <em>boolean $deep = false</em>, <em>string $regex = null</em><big>)</big><a class="headerlink" href="#Validation::email" title="Permalink to this definition">¶</a></dt>
<dd><p>This checks whether the data is a valid email address. Passing a
boolean true as the second parameter for this rule will also
attempt to verify that the host for the address is valid:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;email&#39;</span><span class="p">));</span>

<span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please supply a valid email address.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::equalTo">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">equalTo</tt><big>(</big><em>mixed $check</em>, <em>mixed $compareTo</em><big>)</big><a class="headerlink" href="#Validation::equalTo" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule will ensure that the value is equal to, and of the same
type as the given value.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;food&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;equalTo&#39;</span><span class="p">,</span> <span class="s1">&#39;cake&#39;</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;This value must be the string cake&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::extension">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">extension</tt><big>(</big><em>mixed $check</em>, <em>array $extensions = array('gif'</em>, <em>'jpeg'</em>, <em>'png'</em>, <em>'jpg')</em><big>)</big><a class="headerlink" href="#Validation::extension" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule checks for valid file extensions like .jpg or .png. Allow
multiple extensions by passing them in array form.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;image&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;extension&#39;</span><span class="p">,</span>
            <span class="k">array</span><span class="p">(</span><span class="s1">&#39;gif&#39;</span><span class="p">,</span> <span class="s1">&#39;jpeg&#39;</span><span class="p">,</span> <span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="s1">&#39;jpg&#39;</span><span class="p">)</span>
        <span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please supply a valid image.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::fileSize">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">fileSize</tt><big>(</big><em>$check</em>, <em>$operator = null</em>, <em>$size = null</em><big>)</big><a class="headerlink" href="#Validation::fileSize" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule allows you to check filesizes. You can use <tt class="docutils literal"><span class="pre">$operator</span></tt> to
decide the type of comparison you want to use. All the operators supported
by <a class="reference internal" href="#Validation::comparison" title="Validation::comparison"><tt class="xref php php-func docutils literal"><span class="pre">comparison()</span></tt></a> are supported here as well. This
method will automatically handle array values from <tt class="docutils literal"><span class="pre">$_FILES</span></tt> by reading
from the <tt class="docutils literal"><span class="pre">tmp_name</span></tt> key if <tt class="docutils literal"><span class="pre">$check</span></tt> is an array and contains that key:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;image&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;fileSize&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="s1">&#39;1MB&#39;</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Image must be less than 1MB&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3: </span>This method was added in 2.3</p>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::inList">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">inList</tt><big>(</big><em>string $check</em>, <em>array $list</em>, <em>boolean $caseInsensitive = false</em><big>)</big><a class="headerlink" href="#Validation::inList" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule will ensure that the value is in a given set. It needs an
array of values. The field is valid if the field&#8217;s value matches
one of the values in the given array.</p>
<p>Example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;function&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
         <span class="s1">&#39;allowedChoice&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
             <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;inList&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="s1">&#39;Bar&#39;</span><span class="p">)),</span>
             <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Enter either Foo or Bar.&#39;</span>
         <span class="p">)</span>
     <span class="p">)</span>
 <span class="p">);</span>
</pre></div>
</div>
<p>Comparison is case sensitive by default. You can set <tt class="docutils literal"><span class="pre">$caseInsensitive</span></tt> to true
if you need case insensitive comparison.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::ip">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">ip</tt><big>(</big><em>string $check</em>, <em>string $type = 'both'</em><big>)</big><a class="headerlink" href="#Validation::ip" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule will ensure that a valid IPv4 or IPv6 address has been
submitted. Accepts as option &#8216;both&#8217; (default), &#8216;IPv4&#8217; or &#8216;IPv6&#8217;.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;clientip&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;ip&#39;</span><span class="p">,</span> <span class="s1">&#39;IPv4&#39;</span><span class="p">),</span> <span class="c1">// or &#39;IPv6&#39; or &#39;both&#39; (default)</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please supply a valid IP address.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Model::Validation::isUnique">
<tt class="descclassname">Model::</tt><tt class="descname">isUnique</tt><big>(</big><big>)</big><a class="headerlink" href="#Model::Validation::isUnique" title="Permalink to this definition">¶</a></dt>
<dd><p>The data for the field must be unique, it cannot be used by any
other rows:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;isUnique&#39;</span><span class="p">,</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;This username has already been taken.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>You can validate that a set of fields are unique by providing multiple
fields and set <tt class="docutils literal"><span class="pre">$or</span></tt> to <tt class="docutils literal"><span class="pre">false</span></tt>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;isUnique&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;username&#39;</span><span class="p">),</span> <span class="k">false</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;This username &amp; email combination has already been used.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Make sure to include the original field in the list of fields when making
a unique rule across multiple fields.</p>
<p>If a listed field isn&#8217;t included in the model data, then it&#8217;s treated as a null value.
You may consider marking the listed fields as <tt class="docutils literal"><span class="pre">required</span></tt>.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::luhn">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">luhn</tt><big>(</big><em>string|array $check</em>, <em>boolean $deep = false</em><big>)</big><a class="headerlink" href="#Validation::luhn" title="Permalink to this definition">¶</a></dt>
<dd><p>The Luhn algorithm: A checksum formula to validate a variety of
identification numbers. See <a class="reference external" href="http://en.wikipedia.org/wiki/Luhn_algorithm">http://en.wikipedia.org/wiki/Luhn_algorithm</a> for
more information.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::maxLength">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">maxLength</tt><big>(</big><em>string $check</em>, <em>integer $max</em><big>)</big><a class="headerlink" href="#Validation::maxLength" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule ensures that the data stays within a maximum length
requirement.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;maxLength&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Usernames must be no larger than 15 characters long.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The length here is &#8220;the number of bytes in the string
representation of the data&#8221;. Be careful that it may be larger than
the number of characters when handling non-ASCII characters.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::mimeType">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">mimeType</tt><big>(</big><em>mixed $check</em>, <em>array|string $mimeTypes</em><big>)</big><a class="headerlink" href="#Validation::mimeType" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<p>This rule checks for valid mime types. Comparison is case sensitive.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.5.</span></p>
</div>
<p>Since 2.5 <tt class="docutils literal"><span class="pre">$mimeTypes</span></tt> can be a regex string.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;image&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;mimeType&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;image/gif&#39;</span><span class="p">)),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Invalid mime type.&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;logo&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;mimeType&#39;</span><span class="p">,</span> <span class="s1">&#39;#image/.+#&#39;</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Invalid mime type.&#39;</span>
    <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::minLength">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">minLength</tt><big>(</big><em>string $check</em>, <em>integer $min</em><big>)</big><a class="headerlink" href="#Validation::minLength" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule ensures that the data meets a minimum length
requirement.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;minLength&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Usernames must be at least 8 characters long.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The length here is &#8220;the number of bytes in the string
representation of the data&#8221;. Be careful that it may be larger than
the number of characters when handling non-ASCII characters.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::money">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">money</tt><big>(</big><em>string $check</em>, <em>string $symbolPosition = 'left'</em><big>)</big><a class="headerlink" href="#Validation::money" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule will ensure that the value is in a valid monetary
amount.</p>
<p>Second parameter defines where symbol is located (left/right).</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;salary&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;money&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please supply a valid monetary amount.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::multiple">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">multiple</tt><big>(</big><em>mixed $check</em>, <em>mixed $options = array()</em>, <em>boolean $caseInsensitive = false</em><big>)</big><a class="headerlink" href="#Validation::multiple" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this for validating a multiple select input. It supports
parameters &#8220;in&#8221;, &#8220;max&#8221; and &#8220;min&#8221;.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;multiple&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;multiple&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;in&#39;</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;do&#39;</span><span class="p">,</span> <span class="s1">&#39;re&#39;</span><span class="p">,</span> <span class="s1">&#39;mi&#39;</span><span class="p">,</span> <span class="s1">&#39;fa&#39;</span><span class="p">,</span> <span class="s1">&#39;sol&#39;</span><span class="p">,</span> <span class="s1">&#39;la&#39;</span><span class="p">,</span> <span class="s1">&#39;ti&#39;</span><span class="p">),</span>
            <span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;max&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span>
        <span class="p">)),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please select one, two or three options&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Comparison is case sensitive by default. You can set <tt class="docutils literal"><span class="pre">$caseInsensitive</span></tt> to true
if you need case insensitive comparison.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::notEmpty">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">notEmpty</tt><big>(</big><em>mixed $check</em><big>)</big><a class="headerlink" href="#Validation::notEmpty" title="Permalink to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified">Deprecated since version 2.7.</span></p>
</div>
<p>Use <tt class="docutils literal"><span class="pre">notBlank</span></tt> instead.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::notBlank">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">notBlank</tt><big>(</big><em>mixed $check</em><big>)</big><a class="headerlink" href="#Validation::notBlank" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 2.7.</span></p>
</div>
<p>The basic rule to ensure that a field is not empty.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;notBlank&#39;</span><span class="p">,</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;This field cannot be left blank&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Do not use this for a multiple select input as it will cause an
error. Instead, use &#8220;multiple&#8221;.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::numeric">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">numeric</tt><big>(</big><em>string $check</em><big>)</big><a class="headerlink" href="#Validation::numeric" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the data passed is a valid number.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;cars&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;numeric&#39;</span><span class="p">,</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please supply the number of cars.&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::naturalNumber">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">naturalNumber</tt><big>(</big><em>mixed $check</em>, <em>boolean $allowZero = false</em><big>)</big><a class="headerlink" href="#Validation::naturalNumber" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<p>This rule checks if the data passed is a valid natural number.
If <tt class="docutils literal"><span class="pre">$allowZero</span></tt> is set to true, zero is also accepted as a value.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;wheels&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;naturalNumber&#39;</span><span class="p">,</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please supply the number of wheels.&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;airbags&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;naturalNumber&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please supply the number of airbags.&#39;</span>
    <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::phone">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">phone</tt><big>(</big><em>mixed $check</em>, <em>string $regex = null</em>, <em>string $country = 'all'</em><big>)</big><a class="headerlink" href="#Validation::phone" title="Permalink to this definition">¶</a></dt>
<dd><p>Phone validates US phone numbers. If you want to validate non-US
phone numbers, you can provide a regular expression as the second
parameter to cover additional number formats.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;phone&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;phone&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s1">&#39;us&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::postal">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">postal</tt><big>(</big><em>mixed $check</em>, <em>string $regex = null</em>, <em>string $country = 'us'</em><big>)</big><a class="headerlink" href="#Validation::postal" title="Permalink to this definition">¶</a></dt>
<dd><p>Postal is used to validate ZIP codes from the U.S. (us), Canada
(ca), U.K (uk), Italy (it), Germany (de) and Belgium (be). For
other ZIP code formats, you may provide a regular expression as the
second parameter.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;zipcode&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;postal&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s1">&#39;us&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::range">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">range</tt><big>(</big><em>string $check</em>, <em>integer $lower = null</em>, <em>integer $upper = null</em><big>)</big><a class="headerlink" href="#Validation::range" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule ensures that the value is in a given range. If no range
is supplied, the rule will check to ensure the value is a legal
finite on the current platform.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;number&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;range&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please enter a number between -1 and 11&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The above example will accept any value which is larger than -1
(e.g., -0.99) and less than 11 (e.g., 10.99).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The range lower/upper are not inclusive</p>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::ssn">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">ssn</tt><big>(</big><em>mixed $check</em>, <em>string $regex = null</em>, <em>string $country = null</em><big>)</big><a class="headerlink" href="#Validation::ssn" title="Permalink to this definition">¶</a></dt>
<dd><p>Ssn validates social security numbers from the U.S. (us), Denmark
(dk), and the Netherlands (nl). For other social security number
formats, you may provide a regular expression.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;ssn&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;ssn&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s1">&#39;us&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::time">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">time</tt><big>(</big><em>string $check</em><big>)</big><a class="headerlink" href="#Validation::time" title="Permalink to this definition">¶</a></dt>
<dd><p>Time validation, determines if the string passed is a valid time. Validates
time as 24hr (HH:MM) or am/pm ([H]H:MM[a|p]m) Does not allow/validate
seconds.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::uploadError">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">uploadError</tt><big>(</big><em>mixed $check</em><big>)</big><a class="headerlink" href="#Validation::uploadError" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<p>This rule checks if a file upload has an error.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;image&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;uploadError&#39;</span><span class="p">,</span>
        <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Something went wrong with the upload.&#39;</span>
    <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::url">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">url</tt><big>(</big><em>string $check</em>, <em>boolean $strict = false</em><big>)</big><a class="headerlink" href="#Validation::url" title="Permalink to this definition">¶</a></dt>
<dd><p>This rule checks for valid URL formats. Supports http(s), ftp(s),
file, news, and gopher protocols:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;website&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;url&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>To ensure that a protocol is in the url, strict mode can be enabled
like so:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;website&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This validation method uses a complex regular expression that can sometimes
cause issues with Apache2 on Windows using mod_php.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::userDefined">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">userDefined</tt><big>(</big><em>mixed $check</em>, <em>object $object</em>, <em>string $method</em>, <em>array $args = null</em><big>)</big><a class="headerlink" href="#Validation::userDefined" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs an user-defined validation.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Validation::uuid">
<em class="property">static </em><tt class="descclassname">Validation::</tt><tt class="descname">uuid</tt><big>(</big><em>string $check</em><big>)</big><a class="headerlink" href="#Validation::uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that a value is a valid UUID: <a class="reference external" href="http://tools.ietf.org/html/rfc4122">http://tools.ietf.org/html/rfc4122</a></p>
</dd></dl>

</div>
<div class="section" id="localized-validation">
<h2>Localized Validation<a class="headerlink" href="#localized-validation" title="Permalink to this headline">¶</a></h2>
<p>The validation rules phone() and postal() will pass off any country prefix
they do not know how to handle to another class with the appropriate name. For
example if you lived in the Netherlands you would create a class like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">NlValidation</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">phone</span><span class="p">(</span><span class="nv">$check</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">postal</span><span class="p">(</span><span class="nv">$check</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This file could be placed in <tt class="docutils literal"><span class="pre">APP/Validation/</span></tt> or
<tt class="docutils literal"><span class="pre">App/PluginName/Validation/</span></tt>, but must be imported via App::uses() before
attempting to use it. In your model validation you could use your NlValidation
class by doing the following:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$validate</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;phone_no&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;phone&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s1">&#39;nl&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;postal_code&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;postal&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s1">&#39;nl&#39;</span><span class="p">)),</span>
<span class="p">);</span>
</pre></div>
</div>
<p>When your model data is validated, Validation will see that it cannot handle
the <tt class="docutils literal"><span class="pre">nl</span></tt> locale and will attempt to delegate out to
<tt class="docutils literal"><span class="pre">NlValidation::postal()</span></tt> and the return of that method will be used as the
pass/fail for the validation. This approach allows you to create classes that
handle a subset or group of locales, something that a large switch would not
have. The usage of the individual validation methods has not changed, the
ability to pass off to another validator has been added.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The Localized Plugin already contains a lot of rules ready to use:
<a class="reference external" href="https://github.com/cakephp/localized">https://github.com/cakephp/localized</a>
Also feel free to contribute with your localized validation rules.</p>
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="data-validation/validating-data-from-the-controller.html">Validating Data from the Controller</a></li>
</ul>
</div>
</div>
</div>


		</div>
	</div>

	<div class="sidebar columns three pull-nine">
<div id="sidebar-navigation" class="hide-on-phones">
	<h2 class="hide-on-desktops">Table of Contents</h2>
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cakephp-overview.html">CakePHP Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../models.html">Models</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="associations-linking-models-together.html">Associations: Linking Models Together</a></li>
<li class="toctree-l2"><a class="reference internal" href="retrieving-your-data.html">Retrieving Your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="saving-your-data.html">Saving Your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="deleting-data.html">Deleting Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Data Validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data-validation/validating-data-from-the-controller.html">Validating Data from the Controller</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="callback-methods.html">Callback Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="behaviors.html">Behaviors</a></li>
<li class="toctree-l2"><a class="reference internal" href="datasources.html">DataSources</a></li>
<li class="toctree-l2"><a class="reference internal" href="model-attributes.html">Model Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="additional-methods-and-properties.html">Additional Methods and Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="virtual-fields.html">Virtual fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="transactions.html">Transactions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries.html">Core Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Console and Shells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Appendices</a></li>
</ul>

</div>

<div class="page-contents">
	<h3>Page contents</h3>
	<ul>
<li><a class="reference internal" href="#">Data Validation</a><ul>
<li><a class="reference internal" href="#simple-rules">Simple Rules</a></li>
<li><a class="reference internal" href="#one-rule-per-field">One Rule Per Field</a><ul>
<li><a class="reference internal" href="#rule">rule</a></li>
<li><a class="reference internal" href="#required">required</a></li>
<li><a class="reference internal" href="#allowempty">allowEmpty</a></li>
<li><a class="reference internal" href="#on">on</a></li>
<li><a class="reference internal" href="#message">message</a></li>
</ul>
</li>
<li><a class="reference internal" href="#multiple-rules-per-field">Multiple Rules per Field</a><ul>
<li><a class="reference internal" href="#last">last</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-validation-rules">Custom Validation Rules</a><ul>
<li><a class="reference internal" href="#custom-regular-expression-validation">Custom Regular Expression Validation</a></li>
<li><a class="reference internal" href="#adding-your-own-validation-methods">Adding your own Validation Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dynamically-change-validation-rules">Dynamically change validation rules</a><ul>
<li><a class="reference internal" href="#adding-new-validation-rules">Adding new validation rules</a></li>
<li><a class="reference internal" href="#modifying-current-validation-rules">Modifying current validation rules</a></li>
<li><a class="reference internal" href="#removing-rules-from-the-set">Removing rules from the set</a></li>
</ul>
</li>
<li><a class="reference internal" href="#core-validation-rules">Core Validation Rules</a></li>
<li><a class="reference internal" href="#localized-validation">Localized Validation</a></li>
</ul>
</li>
</ul>

</div>
	</div>

</div>

<div class="content row">
	<ul class="related-pages inline">
	<li>
		<a href="../genindex.html" title="General Index" accesskey="I">index</a>
	</li>
	<li>
		<a href="data-validation/validating-data-from-the-controller.html" title="Validating Data from the Controller" accesskey="N">next</a>
	</li>
	<li>
		<a href="deleting-data.html" title="Deleting Data" accesskey="P">previous</a>
	</li>
	</ul>
</div>

	<div class="footer-push"> </div>
</div>






<div class="footer">
	<div class="row">
		<div class="columns six offset-by-three contribute">
			<strong>Found an issue?</strong>
			Submit a correction on <a href="https://github.com/cakephp/docs">GitHub</a><br />
			<a href="http://book.cakephp.org/2.0/en/contributing/documentation.html">[ documentation on how to contribute ]</a>
		</div>
	</div>
	
	<div class="row">
		<div class="columns nine offset-by-three copyright">
					&copy; Copyright 2014, Cake Software Foundation, Inc.
				Last updated on Aug 24, 2015.
				Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
		</div>
	</div>
</div>

<div id="nav-modal" class="reveal-modal"> </div>
<div id="inline-search-results"></div>
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-743287-3']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
  </body>
</html>