

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Containable" lang="en" name="title" />
<meta content="model behavior,author daniel,article content,new addition,wear and tear,array,aaa,email,fly,models" lang="en" name="keywords" />

    <title>Containable</title>
    <link href="../../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../../_static/app.js"></script>

    <link rel="alternate" hreflang="pt" href="../../../pt/core-libraries/behaviors/containable.html" /><link rel="alternate" hreflang="es" href="../../../es/core-libraries/behaviors/containable.html" /><link rel="alternate" hreflang="ja" href="../../../ja/core-libraries/behaviors/containable.html" /><link rel="alternate" hreflang="fr" href="../../../fr/core-libraries/behaviors/containable.html" /><link rel="alternate" hreflang="zh" href="../../../zh/core-libraries/behaviors/containable.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 2.x documentation" href="../../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 2.x documentation" href="../../index.html" />
    <link rel="up" title="Behaviors" href="../../models/behaviors.html" />
    <link rel="next" title="Translate" href="translate.html" />
    <link rel="prev" title="ACL" href="acl.html" />

    <script type="text/javascript">
    window.lang = "en";
    </script>
  </head>
  <body>

<div id="container">
	
	<header class="nav-down">
		<div class="container-fluid hidden-xs hidden-sm">
			<div class="row">
				<div class="col-sm-3 col-md-3">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-9 col-md-9">
					<nav class="navbar-right">
						<ul class="menu">
							<li class="first">
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
								<ul class="submenu">
									
<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
								</ul>
							</li>

							<li><a href="http://cakephp.org/business-solutions">Business Solutions</a></li>
							<li><a href="http://cakephp.org/showcase">Showcase</a></li>

							<li>
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
								<div class="megamenu full">
									<div class="row">
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
											</ul>
										</div>
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
											</ul>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>

		
		<div class="container-fluid hidden-md hidden-lg">
			<div class="row">
				<div class="col-sm-6 col-xs-6">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-6 col-xs-6">
					<div class="navbar-right">
						<button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
							<i class="fa fa-bars toggle-modal"></i>
						</button>
					</div>
					<div id="wrap">
						<form class="search" action="../../search.html" method="get">
							<input name="q" type="search" placeholder="What are you looking for?">
							<input id="search_submit" value="Search" type="submit">
						</form>
					</div>
				</div>
			</div>
		</div>

		
		<section id="nav-cook" class="hidden-xs hidden-sm">
			<div class="container-fluid ">
				<div class="row ">
					<div class="col-md-12 back-book">
						<div class="col-md-4 col-md-offset-1 text-center t-cook-nav p0 hidden-sm hidden-xs">
							<h2>
								<a href="../../contents.html">
									<span class="glyph_range icon-submenu icon-submenu-cook">B</span>
									CakePHP 2.x <strong>Cookbook</strong>
								</a>
							</h2>
						</div>

						<div class="col-md-4 hidden-sm">
							<form class="search" action="../../search.html" method="get">
								<input type="hidden" name="check_keywords" value="yes" />
								<input type="hidden" name="area" value="default" />

								<div class="col-md-10 p0">
									<input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
								</div>
								<div class="col-md-2 p0 search-cook">
									<button type="submit">
										<span class="glyph_range icon-submenu icon-submenu-cook">A</span>
									</button>
								</div>
							</form>
						</div>

						
						<div class="col-md-3">
							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Language:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
													role="button" aria-haspopup="true" aria-expanded="false" href="#">
														en
														<i class="fa fa-menu-en fa-chevron-down"></i>
													</a>
											<ul class="dropdown-menu">
											
												<li></li>
											
												<li><a href="../../../pt/core-libraries/behaviors/containable.html">pt</a></li>
											
												<li><a href="../../../es/core-libraries/behaviors/containable.html">es</a></li>
											
												<li><a href="../../../ja/core-libraries/behaviors/containable.html">ja</a></li>
											
												<li><a href="../../../fr/core-libraries/behaviors/containable.html">fr</a></li>
											
												<li><a href="../../../zh/core-libraries/behaviors/containable.html">zh</a></li>
											
											</ul>
										</li>
									</ul>
								</div>
							</div>

							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Version:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">2.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
											<ul class="dropdown-menu">
												<li><a href="http://book.cakephp.org/3.0/en">3.x Book</a></li>
												<li><a href="http://book.cakephp.org/2.0/en">2.x Book</a></li>
												<li><a href="http://book.cakephp.org/1.3/en/">1.3 Book</a></li>
												<li><a href="http://book.cakephp.org/1.2/en/">1.2 Book</a></li>
												<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
											</ul>
										</li>
									</ul>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</section>
	</header>

	
	<section class="nav-btn visible-sm visible-xs">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
				</div>

				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
				</div>
			</div>
		</div>
	</section>

	
	<div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title-cookbook" id="modal-header"></h4>
				</div>
				<div class="modal-body"></div>
			</div>
		</div>
	</div>

<div class="container page-container"><div id="improve-slideout">
		<i class="fa fa-pencil icon-improve"></i>
		<a href="https://github.com/cakephp/docs/edit/master/en/core-libraries/behaviors/containable.rst" target="_blank">
			<div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
		</a>
	</div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

	
	<div class="row">
		<div class="col-sm-12 col-md-9 col-md-push-3 space-left push-off"><div class="page-contents col-sm-5">
				<h3>Page Contents</h3>
				<ul>
<li><a class="reference internal" href="#">Containable</a><ul>
<li><a class="reference internal" href="#using-containable">Using Containable</a></li>
<li><a class="reference internal" href="#containing-deeper-associations">Containing deeper associations</a></li>
<li><a class="reference internal" href="#containablebehavior-options">ContainableBehavior options</a><ul>
<li><a class="reference internal" href="#using-containable-with-pagination">Using Containable with pagination</a></li>
</ul>
</li>
</ul>
</li>
</ul>

			</div><div class="document-body">
			
  <div class="section" id="containable">
<h1>Containable<a class="headerlink" href="#containable" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ContainableBehavior">
<em class="property">class </em><code class="descname">ContainableBehavior</code><a class="headerlink" href="#ContainableBehavior" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>A new addition to the CakePHP 1.2 core is the
<code class="docutils literal"><span class="pre">ContainableBehavior</span></code>. This model behavior allows you to filter
and limit model find operations. Using Containable will help you
cut down on needless wear and tear on your database, increasing the
speed and overall performance of your application. The class will
also help you search and filter your data for your users in a clean
and consistent way.</p>
<p>Containable allows you to streamline and simplify operations on
your model bindings. It works by temporarily or permanently
altering the associations of your models. It does this by using
the supplied containments to generate a series of <code class="docutils literal"><span class="pre">bindModel</span></code> and
<code class="docutils literal"><span class="pre">unbindModel</span></code> calls. Since Containable only modifies existing relationships it
will not allow you to restrict results by distant associations. Instead
you should refer to <a class="reference internal" href="../../models/associations-linking-models-together.html#joining-tables"><span class="std std-ref">Joining tables</span></a>.</p>
<p>To use the new behavior, you can add it to the $actsAs property of
your model:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Post</span> <span class="k">extends</span> <span class="nx">AppModel</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$actsAs</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Containable&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can also attach the behavior on the fly:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">Behaviors</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="s1">&#39;Containable&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="using-containable">
<span id="id1"></span><h2>Using Containable<a class="headerlink" href="#using-containable" title="Permalink to this headline">¶</a></h2>
<p>To see how Containable works, let&#8217;s look at a few examples. First,
we&#8217;ll start off with a <code class="docutils literal"><span class="pre">find()</span></code> call on a model named &#8216;Post&#8217;. Let&#8217;s say
that &#8216;Post&#8217; hasMany &#8216;Comment&#8217;, and &#8216;Post&#8217; hasAndBelongsToMany &#8216;Tag&#8217;. The
amount of data fetched in a normal <code class="docutils literal"><span class="pre">find()</span></code> call is rather
extensive:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">debug</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">));</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="nx">Post</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                    <span class="p">[</span><span class="nx">title</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">First</span> <span class="nx">article</span>
                    <span class="p">[</span><span class="nx">content</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">aaa</span>
                    <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                <span class="p">)</span>
            <span class="p">[</span><span class="nx">Comment</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                        <span class="p">(</span>
                            <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                            <span class="p">[</span><span class="nx">post_id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                            <span class="p">[</span><span class="nx">author</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Daniel</span>
                            <span class="p">[</span><span class="nx">email</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">dan</span><span class="o">@</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span>
                            <span class="p">[</span><span class="nx">website</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">http</span><span class="o">://</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span>
                            <span class="p">[</span><span class="nx">comment</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">First</span> <span class="nx">comment</span>
                            <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                        <span class="p">)</span>
                    <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                        <span class="p">(</span>
                            <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2</span>
                            <span class="p">[</span><span class="nx">post_id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                            <span class="p">[</span><span class="nx">author</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Sam</span>
                            <span class="p">[</span><span class="nx">email</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">sam</span><span class="o">@</span><span class="nx">example</span><span class="o">.</span><span class="nx">net</span>
                            <span class="p">[</span><span class="nx">website</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">http</span><span class="o">://</span><span class="nx">example</span><span class="o">.</span><span class="nx">net</span>
                            <span class="p">[</span><span class="nx">comment</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Second</span> <span class="nx">comment</span>
                            <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                        <span class="p">)</span>
                <span class="p">)</span>
            <span class="p">[</span><span class="nx">Tag</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                        <span class="p">(</span>
                            <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                            <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Awesome</span>
                        <span class="p">)</span>
                    <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                        <span class="p">(</span>
                            <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2</span>
                            <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Baking</span>
                        <span class="p">)</span>
                <span class="p">)</span>
        <span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="nx">Post</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span><span class="o">...</span>
</pre></div>
</div>
<p>For some interfaces in your application, you may not need that much
information from the Post model. One thing the
<code class="docutils literal"><span class="pre">ContainableBehavior</span></code> does is help you cut down on what find()
returns.</p>
<p>For example, to get only the post-related information, you can do
the following:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">();</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>You can also invoke Containable&#8217;s magic from inside the find()
call:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">));</span>
</pre></div>
</div>
<p>Having done that, you end up with something a lot more concise:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="nx">Post</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                    <span class="p">[</span><span class="nx">title</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">First</span> <span class="nx">article</span>
                    <span class="p">[</span><span class="nx">content</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">aaa</span>
                    <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                <span class="p">)</span>
        <span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="nx">Post</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2</span>
                    <span class="p">[</span><span class="nx">title</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Second</span> <span class="nx">article</span>
                    <span class="p">[</span><span class="nx">content</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">bbb</span>
                    <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">19</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                <span class="p">)</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>This sort of help isn&#8217;t new: in fact, you can do that without the
<code class="docutils literal"><span class="pre">ContainableBehavior</span></code> doing something like this:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">recursive</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Containable really shines when you have complex associations, and
you want to pare down things that sit at the same level. The
model&#8217;s <code class="docutils literal"><span class="pre">$recursive</span></code> property is helpful if you want to hack off
an entire level of recursion, but not when you want to pick and
choose what to keep at each level. Let&#8217;s see how it works by using
the <code class="docutils literal"><span class="pre">contain()</span></code> method.</p>
<p>The contain method&#8217;s first argument accepts the name, or an array
of names, of the models to keep in the find operation. If we wanted
to fetch all posts and their related tags (without any comment
information), we&#8217;d try something like this:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Again, we can use the contain key inside a find() call:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Tag&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>Without Containable, you&#8217;d end up needing to use the
<code class="docutils literal"><span class="pre">unbindModel()</span></code> method of the model, multiple times if you&#8217;re
paring off multiple models. Containable creates a cleaner way to
accomplish this same task.</p>
</div>
<div class="section" id="containing-deeper-associations">
<h2>Containing deeper associations<a class="headerlink" href="#containing-deeper-associations" title="Permalink to this headline">¶</a></h2>
<p>Containable also goes a step deeper: you can filter the data of the
<em>associated</em> models. If you look at the results of the original
find() call, notice the author field in the Comment model. If you
are interested in the posts and the names of the comment authors —
and nothing else — you could do something like the following:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">(</span><span class="s1">&#39;Comment.author&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">);</span>

<span class="c1">// or..</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Comment.author&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>Here, we&#8217;ve told Containable to give us our post information, and
just the author field of the associated Comment model. The output
of the find call might look something like this:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="nx">Post</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                    <span class="p">[</span><span class="nx">title</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">First</span> <span class="nx">article</span>
                    <span class="p">[</span><span class="nx">content</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">aaa</span>
                    <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                <span class="p">)</span>
            <span class="p">[</span><span class="nx">Comment</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                        <span class="p">(</span>
                            <span class="p">[</span><span class="nx">author</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Daniel</span>
                            <span class="p">[</span><span class="nx">post_id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                        <span class="p">)</span>
                    <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                        <span class="p">(</span>
                            <span class="p">[</span><span class="nx">author</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Sam</span>
                            <span class="p">[</span><span class="nx">post_id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                        <span class="p">)</span>
                <span class="p">)</span>
        <span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
        <span class="p">(</span><span class="o">...</span>
</pre></div>
</div>
<p>As you can see, the Comment arrays only contain the author field
(plus the post_id which is needed by CakePHP to map the results).</p>
<p>You can also filter the associated Comment data by specifying a
condition:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">(</span><span class="s1">&#39;Comment.author = &quot;Daniel&quot;&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">);</span>

<span class="c1">//or...</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Comment.author = &quot;Daniel&quot;&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>This gives us a result that gives us posts with comments authored
by Daniel:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="nx">Post</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                    <span class="p">[</span><span class="nx">title</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">First</span> <span class="nx">article</span>
                    <span class="p">[</span><span class="nx">content</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">aaa</span>
                    <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                <span class="p">)</span>
            <span class="p">[</span><span class="nx">Comment</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                        <span class="p">(</span>
                            <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                            <span class="p">[</span><span class="nx">post_id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                            <span class="p">[</span><span class="nx">author</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Daniel</span>
                            <span class="p">[</span><span class="nx">email</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">dan</span><span class="o">@</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span>
                            <span class="p">[</span><span class="nx">website</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">http</span><span class="o">://</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span>
                            <span class="p">[</span><span class="nx">comment</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">First</span> <span class="nx">comment</span>
                            <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                        <span class="p">)</span>
                <span class="p">)</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>There is an important caveat to using Containable when filtering on a deeper association. In the previous example,
assume you had 3 posts in your database and Daniel had commented on 2 of those posts. The operation
$this-&gt;Post-&gt;find(&#8216;all&#8217;, array(&#8216;contain&#8217; =&gt; &#8216;Comment.author = &#8220;Daniel&#8221;&#8217;)); would return ALL 3 posts, not
just the 2 posts that Daniel had commented on. It won&#8217;t return all comments however, just comments by Daniel.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="nx">Post</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                    <span class="p">[</span><span class="nx">title</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">First</span> <span class="nx">article</span>
                    <span class="p">[</span><span class="nx">content</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">aaa</span>
                    <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                <span class="p">)</span>
            <span class="p">[</span><span class="nx">Comment</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                        <span class="p">(</span>
                            <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                            <span class="p">[</span><span class="nx">post_id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
                            <span class="p">[</span><span class="nx">author</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Daniel</span>
                            <span class="p">[</span><span class="nx">email</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">dan</span><span class="o">@</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span>
                            <span class="p">[</span><span class="nx">website</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">http</span><span class="o">://</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span>
                            <span class="p">[</span><span class="nx">comment</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">First</span> <span class="nx">comment</span>
                            <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                        <span class="p">)</span>
                <span class="p">)</span>
        <span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="nx">Post</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2</span>
                    <span class="p">[</span><span class="nx">title</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Second</span> <span class="nx">article</span>
                    <span class="p">[</span><span class="nx">content</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">bbb</span>
                    <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                <span class="p">)</span>
            <span class="p">[</span><span class="nx">Comment</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                <span class="p">)</span>
        <span class="p">)</span>
<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="nx">Post</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">3</span>
                    <span class="p">[</span><span class="nx">title</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Third</span> <span class="nx">article</span>
                    <span class="p">[</span><span class="nx">content</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">ccc</span>
                    <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                <span class="p">)</span>
            <span class="p">[</span><span class="nx">Comment</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                <span class="p">(</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="k">Array</span>
                        <span class="p">(</span>
                            <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">22</span>
                            <span class="p">[</span><span class="nx">post_id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">3</span>
                            <span class="p">[</span><span class="nx">author</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Daniel</span>
                            <span class="p">[</span><span class="nx">email</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">dan</span><span class="o">@</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span>
                            <span class="p">[</span><span class="nx">website</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">http</span><span class="o">://</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span>
                            <span class="p">[</span><span class="nx">comment</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Another</span> <span class="nx">comment</span>
                            <span class="p">[</span><span class="nx">created</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2008</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
                        <span class="p">)</span>
                <span class="p">)</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>If you want to filter the posts by the comments, so that posts without a comment by Daniel won&#8217;t be
returned, the easiest way is to find all the comments by Daniel and contain the Posts.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Comment</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Comment.author = &quot;Daniel&quot;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Post&#39;</span>
<span class="p">));</span>
</pre></div>
</div>
<p>Additional filtering can be performed by supplying the standard <a class="reference internal" href="../../models/retrieving-your-data.html#model-find"><span class="std std-ref">find</span></a> options:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Comment&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Comment.author =&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Daniel&quot;</span><span class="p">),</span>
        <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Comment.created DESC&#39;</span>
    <span class="p">)</span>
<span class="p">)));</span>
</pre></div>
</div>
<p>Here&#8217;s an example of using the <code class="docutils literal"><span class="pre">ContainableBehavior</span></code> when you&#8217;ve
got deep and complex model relationships.</p>
<p>Let&#8217;s consider the following model associations:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">User</span><span class="o">-&gt;</span><span class="na">Profile</span>
<span class="nx">User</span><span class="o">-&gt;</span><span class="na">Account</span><span class="o">-&gt;</span><span class="na">AccountSummary</span>
<span class="nx">User</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">PostAttachment</span><span class="o">-&gt;</span><span class="na">PostAttachmentHistory</span><span class="o">-&gt;</span><span class="na">HistoryNotes</span>
<span class="nx">User</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">Tag</span>
</pre></div>
</div>
<p>This is how we retrieve the above associations with Containable:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">User</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;Profile&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Account&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;AccountSummary&#39;</span>
        <span class="p">),</span>
        <span class="s1">&#39;Post&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;PostAttachment&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;fields&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">),</span>
                <span class="s1">&#39;PostAttachmentHistory&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;HistoryNotes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                        <span class="s1">&#39;fields&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;note&#39;</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="p">),</span>
            <span class="s1">&#39;Tag&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Tag.name LIKE&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;%happy%&#39;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>Keep in mind that <code class="docutils literal"><span class="pre">contain</span></code> key is only used once in the main
model, you don&#8217;t need to use &#8216;contain&#8217; again for related models.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When using &#8216;fields&#8217; and &#8216;contain&#8217; options - be careful to include
all foreign keys that your query directly or indirectly requires.
Please also note that because Containable must to be attached to
all models used in containment, you may consider attaching it to
your AppModel.</p>
</div>
</div>
<div class="section" id="containablebehavior-options">
<span id="id2"></span><h2>ContainableBehavior options<a class="headerlink" href="#containablebehavior-options" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">ContainableBehavior</span></code> has a number of options that can be set
when the Behavior is attached to a model. The settings allow you to
fine tune the behavior of Containable and work with other behaviors
more easily.</p>
<ul class="simple">
<li><strong>recursive</strong> (boolean, optional) set to true to allow
containable to automatically determine the recursiveness level
needed to fetch specified models, and set the model recursiveness
to this level. setting it to false disables this feature. The
default value is <code class="docutils literal"><span class="pre">true</span></code>.</li>
<li><strong>notices</strong> (boolean, optional) issues E_NOTICES for bindings
referenced in a containable call that are not valid. The default
value is <code class="docutils literal"><span class="pre">true</span></code>.</li>
<li><strong>autoFields</strong>: (boolean, optional) auto-add needed fields to
fetch requested bindings. The default value is <code class="docutils literal"><span class="pre">true</span></code>.</li>
<li><strong>order</strong>: (string, optional) the order of how the contained
elements are sorted.</li>
</ul>
<p>From the previous example, this is an example of how to force the posts
to be ordered by the date when they were last updated:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">User</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;Profile&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Post&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Post.updated DESC&#39;</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>You can change ContainableBehavior settings at run time by
reattaching the behavior as seen in
<a class="reference internal" href="../../models/behaviors.html"><span class="doc">Behaviors</span></a> (Using Behaviors).</p>
<p>ContainableBehavior can sometimes cause issues with other behaviors
or queries that use aggregate functions and/or GROUP BY statements.
If you get invalid SQL errors due to mixing of aggregate and
non-aggregate fields, try disabling the <code class="docutils literal"><span class="pre">autoFields</span></code> setting.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">Behaviors</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="s1">&#39;Containable&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;autoFields&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">));</span>
</pre></div>
</div>
<div class="section" id="using-containable-with-pagination">
<h3>Using Containable with pagination<a class="headerlink" href="#using-containable-with-pagination" title="Permalink to this headline">¶</a></h3>
<p>By including the &#8216;contain&#8217; parameter in the <code class="docutils literal"><span class="pre">$paginate</span></code> property
it will apply to both the find(&#8216;count&#8217;) and the find(&#8216;all&#8217;) done on
the model.</p>
<p>See the section <a class="reference internal" href="#using-containable"><span class="std std-ref">Using Containable</span></a> for further details.</p>
<p>Here&#8217;s an example of how to contain associations when paginating:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">[</span><span class="s1">&#39;User&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Profile&#39;</span><span class="p">,</span> <span class="s1">&#39;Account&#39;</span><span class="p">),</span>
    <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User.username&#39;</span>
<span class="p">);</span>

<span class="nv">$users</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">(</span><span class="s1">&#39;User&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you contained the associations through the model instead,
it will not honor Containable&#8217;s <a class="reference internal" href="#containablebehavior-options"><span class="std std-ref">recursive option</span></a>.
So if you set recursive to -1 for example for the model, it won&#8217;t work:</p>
<div class="last highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">User</span><span class="o">-&gt;</span><span class="na">recursive</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">User</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;Profile&#39;</span><span class="p">,</span> <span class="s1">&#39;Account&#39;</span><span class="p">));</span>

<span class="nv">$users</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">(</span><span class="s1">&#39;User&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


			</div>
		</div>

		
		<div class="col-md-3 col-md-pull-9 pull-off hidden-xs hidden-sm" lang="en">
			<aside class="sidebar">
				<div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cakephp-overview.html">CakePHP Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../views.html">Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../models.html">Models</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../core-libraries.html">Core Libraries</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../toc-general-purpose.html">General Purpose</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../global-constants-and-functions.html">Global Constants and Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-utility-libraries/app.html">App Class</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../events.html">Events System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collections.html">Collections</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../toc-behaviors.html">Behaviors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc-components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc-helpers.html">Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc-utilities.html">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../console-and-shells.html">Shells, Tasks &amp; Console Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices.html">Appendices</a></li>
</ul>

</div>

				</div>
			</aside>
			<aside class="sidebar">
				<div class="mb30 row">
				</div>
			</aside>
		</div>
	</div>
</div>

<section id="socials" class="back-3">
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-4  social text-center">
				<div class="col-sm-3 col-xs-3">
					<div id="fb-root"></div>
						<script>(function(d, s, id) {
						  var js, fjs = d.getElementsByTagName(s)[0];
						  if (d.getElementById(id)) return;
						  js = d.createElement(s); js.id = id;
						  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
						  fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));
						</script>
						<div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
					<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
				</div>
			</div>

			<div class="col-xs-12 col-sm-12 col-md-8 social-footer text-center ">
				<a href="#">发现翻译错误? 请在下面留言</a>
				<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">我要加入翻译</a>
				<a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
				<a href="http://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
				<a href="http://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
				<a href="http://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
				<a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
				<a href="http://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
				<a href="http://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
				<a href="http://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
			</div>
		</div>
	</div>
</section>

<footer id="footer" class="footer-wrapper">
	<div class="container">

		<div class="row col-p30">
			<div class="col-sm-12 col-md-3">
				<div class="footer-widget t-footer">
					<div class="col-md-12">
						<a href="https://www.openhub.net/p/cakephp">
							<img src="../../_static/open-hub.png">
						</a>
						<div class="mt10">
							<a href="https://www.rackspace.com/">
								<img src="../../_static/rackspace.png">
							</a>
						</div>
					</div>
				</div>
			</div>

			<div class="col-sm-12 col-md-9">
				<div class="col-md-3 col-sm-6 business-solution">
					<ul class="footer-menu">
						<li class="menu-title">
	<a href="http://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
	<a href="http://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 text-center mt30">
				<p class="copyright">
							&copy; Copyright 2016, Cake Software Foundation, Inc.
						Last updated on Aug 12, 2016.
						Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
				</p>
			</div>
		</div>
	</div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-743287-3']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>

<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F201cbc61deaf9f7ffb521fb23e83db40' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cakephpchina"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
  </body>
</html>