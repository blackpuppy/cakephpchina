
<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="RssHelper" lang="en" name="title" />
<meta content="The RSS helper makes generating XML for RSS feeds easy." lang="en" name="description" />
<meta content="rss helper,rss feed,isrss,rss item,channel data,document data,parse extensions,request handler" lang="en" name="keywords" />

    <title>RSS &mdash; CakePHP Cookbook 2.x documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/app.js"></script>
    <script type="text/javascript" src="../../_static/modernizr.foundation.js"></script>
    <script type="text/javascript" src="../../_static/foundation.js"></script>
    <link rel="top" title="CakePHP Cookbook 2.x documentation" href="../../index.html" />
    <link rel="up" title="Helpers" href="../toc-helpers.html" />
    <link rel="next" title="SessionHelper" href="session.html" />
    <link rel="prev" title="Paginator" href="paginator.html" />
<link href="../../_static/favicon.ico" type="image/x-icon" rel="icon" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="alternate" hreflang="pt" href="../../../pt/core-libraries/helpers/rss.html" /><link rel="alternate" hreflang="es" href="../../../es/core-libraries/helpers/rss.html" /><link rel="alternate" hreflang="ja" href="../../../ja/core-libraries/helpers/rss.html" /><link rel="alternate" hreflang="fr" href="../../../fr/core-libraries/helpers/rss.html" /><link rel="alternate" hreflang="zh_CN" href="../../../zh/core-libraries/helpers/rss.html" />

<link rel="search" type="application/opensearchdescription+xml" title="CakePHP Book 2.x Search" href="../../_static/opensearchdescription-book-2-x.xml">
<script type="text/javascript">
window.lang = "en";
</script>

  </head>
  <body>

<div id="container">

<div id="cakephp-global-navigation">
	<ul>
		<li class="main"><a href="http://cakephp.org">CakePHP</a></li>
		<li class="primary"><a href="#" class="empty">Downloads</a>
			<ul class="second-level">
				<li><a href="https://github.com/cakephp/cakephp/tags">Releases</a></li>
				<li><a href="http://pear.cakephp.org">Pear channel</a></li>
			</ul>
		</li>
		<li class="primary"><a href="#" class="empty">Documentation</a>
			<ul class="second-level">
				<li><a href="http://api.cakephp.org">API</a></li>
				<li><a href="http://book.cakephp.org">Book</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://community.cakephp.org">Community</a>
			<ul class="second-level">
				<li><a href="http://webchat.freenode.net/?channels=cakephp&uio=MT1mYWxzZSY5PXRydWUmMTE9MjQ2b8">Help &amp; Support</a></li>
				<li><a href="https://github.com/cakephp/cakephp/issues">Issues</a></li>
				<li><a href="http://bakery.cakephp.org">The Bakery</a></li>
				<li><a href="http://stackoverflow.com/tags/cakephp">Stack Overflow</a></li>
				<li><a href="http://www.facebook.com/groups/cake.community">Facebook Group</a></li>
				<li><a href="http://goo.gl/mSC0s">Google+ Community</a></li>
				<li><a href="http://www.youtube.com/user/CakePHP">YouTube Channel</a></li>
				<li><a href="http://podcast.cakephp.org">CakePHP Podcast</a></li>
				<li><a href="http://twitter.com/CakePHP">Follow us on Twitter</a></li>
				<li><a href="http://groups.google.com/group/cake-php">Google Group</a></li>
				<li><a href="http://github.com/cakephp/cakephp/contributors">Contributors</a></li>
				<li><a href="http://plugins.cakephp.org">Plugins &amp; Packages</a></li>
				<li><a href="http://community.cakephp.org/get-involved">Get Involved</a></li>
				<li><a href="http://community.cakephp.org/guidelines">Guidelines</a></li>
				<li><a href="http://cakefest.org">CakeFest</a></li>
				<li><a href="http://cakephp.org/logos">Logo</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://cakephp.org/services">Services</a>
			<ul class="second-level">
				<li><a href="http://cakephp.org/services/certification">Certification</a></li>
				<li><a href="http://cakephp.org/services/consultation">Consultation</a></li>
				<li><a href="http://cakephp.org/services/support">Support</a></li>
				<li><a href="http://training.cakephp.org">Training</a></li>
			</ul>
		</li>
	</ul>
</div>

<div class="masthead">
	<div class="header-backing"></div>
	<div class="searchbar row">
		<div class="columns three phone-one">
			<a class="logo" href="../../contents.html">
			<img src="../../_static/cake-logo.png" alt="CakePHP" width="70" />
			</a>
		</div>
		
<div id="searchbox" class="columns nine phone-three">

	<form id="searchform" class="search" action="../../search.html" method="get">
		<input class="search-input" autocomplete="off" type="search" name="q" size="18" />
		<input class="search-submit search-big button red" type="submit" value="Search" />
		<input type="hidden" name="check_keywords" value="yes" />
		<input type="hidden" name="area" value="default" />

		<a href="#" id="tablet-nav" class="show-on-phones pale button small">Nav</a>
	</form>

</div>
	</div>
</div>
<div class="breadcrumb-header">
	<div class="related row">
		<div class="columns three root-link">
			<a href="../../contents.html">Cookbook 2.x</a>
		</div>
		<div class="columns nine">
			<ul class="inline breadcrumb">
			<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
				<a href="../../core-libraries.html"  itemprop="url"><span itemprop="title">Core Libraries</span></a>
			</li>
			<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
				<a href="../toc-helpers.html" accesskey="U" itemprop="url"><span itemprop="title">Helpers</span></a>
			</li>
			</ul>
			<div class="versions dropdown">
				<a href="#">2.x Book</a>
				<ul>
					<li><a href="http://book.cakephp.org/3.0/en">3.0 Book</a></li>
					<li><a href="http://book.cakephp.org/1.3/en/">1.3 Book</a></li>
					<li><a href="http://book.cakephp.org/1.2/en/">1.2 Book</a></li>
					<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
				</ul>
			</div>

			<div class="languages dropdown">
				<a href="#">en</a>

				<ul>
				
					<li></li>
				
					<li><a href="../../../pt/core-libraries/helpers/rss.html">pt</a></li>
				
					<li><a href="../../../es/core-libraries/helpers/rss.html">es</a></li>
				
					<li><a href="../../../ja/core-libraries/helpers/rss.html">ja</a></li>
				
					<li><a href="../../../fr/core-libraries/helpers/rss.html">fr</a></li>
				
					<li><a href="../../../zh/core-libraries/helpers/rss.html">zh_CN</a></li>
				
				</ul>
			</div>
		</div>
	</div>
</div>

<div class="content row">
	<div class="document columns nine push-three">
		<div class="body"><a class="button pale improve" href="https://github.com/cakephp/docs/edit/master/en/core-libraries/helpers/rss.rst" target="_blank">Improve this Doc</a>
  <div class="section" id="rss">
<h1>RSS<a class="headerlink" href="#rss" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="RssHelper">
<em class="property">class </em><tt class="descname">RssHelper</tt><big>(</big><em>View $view</em>, <em>array $settings = array()</em><big>)</big><a class="headerlink" href="#RssHelper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>The RSS helper makes generating XML for RSS feeds easy.</p>
<div class="section" id="creating-an-rss-feed-with-the-rsshelper">
<h2>Creating an RSS feed with the RssHelper<a class="headerlink" href="#creating-an-rss-feed-with-the-rsshelper" title="Permalink to this headline">¶</a></h2>
<p>This example assumes you have a Posts Controller and Post Model
already created and want to make an alternative view for RSS.</p>
<p>Creating an xml/rss version of posts/index is a snap with CakePHP.
After a few simple steps you can simply append the desired
extension .rss to <tt class="docutils literal"><span class="pre">posts/index</span></tt> making your URL <tt class="docutils literal"><span class="pre">posts/index.rss</span></tt>.
Before we jump too far ahead trying to get our webservice up and
running we need to do a few things. First parseExtensions needs to
be activated, this is done in <tt class="docutils literal"><span class="pre">app/Config/routes.php</span></tt>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nx">Router</span><span class="o">::</span><span class="na">parseExtensions</span><span class="p">(</span><span class="s1">&#39;rss&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>In the call above we&#8217;ve activated the .rss extension. When using
<a class="reference internal" href="../../development/routing.html#Router::parseExtensions" title="Router::parseExtensions"><tt class="xref php php-meth docutils literal"><span class="pre">Router::parseExtensions()</span></tt></a> you can pass as many arguments or
extensions as you want. This will activate each
extension/content-type for use in your application. Now when the
address <tt class="docutils literal"><span class="pre">posts/index.rss</span></tt> is requested you will get an xml version of
your <tt class="docutils literal"><span class="pre">posts/index</span></tt>. However, first we need to edit the controller to
add in the rss-specific code.</p>
<div class="section" id="controller-code">
<h3>Controller Code<a class="headerlink" href="#controller-code" title="Permalink to this headline">¶</a></h3>
<p>It is a good idea to add RequestHandler to your PostsController&#8217;s
$components array. This will allow a lot of automagic to occur:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;RequestHandler&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Our view will also use the <a class="reference internal" href="text.html#TextHelper" title="TextHelper"><tt class="xref php php-class docutils literal"><span class="pre">TextHelper</span></tt></a> for formatting, so that
should be added to the controller as well:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$helpers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Text&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Before we can make an RSS version of our posts/index we need to get
a few things in order. It may be tempting to put the channel
metadata in the controller action and pass it to your view using
the <a class="reference internal" href="../../controllers.html#Controller::set" title="Controller::set"><tt class="xref php php-meth docutils literal"><span class="pre">Controller::set()</span></tt></a> method but this is inappropriate. That
information can also go in the view. That will come later though,
for now if you have a different set of logic for the data used to
make the RSS feed and the data for the HTML view you can use the
<tt class="xref php php-meth docutils literal"><span class="pre">RequestHandler::isRss()</span></tt> method, otherwise your controller can stay
the same:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// Modify the Posts Controller action that corresponds to</span>
<span class="c1">// the action which deliver the rss feed, which is the</span>
<span class="c1">// index action in our example</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">RequestHandler</span><span class="o">-&gt;</span><span class="na">isRss</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$posts</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Post</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span>
            <span class="s1">&#39;all&#39;</span><span class="p">,</span>
            <span class="k">array</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Post.created DESC&#39;</span><span class="p">)</span>
        <span class="p">);</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;posts&#39;</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="c1">// this is not an Rss request, so deliver</span>
    <span class="c1">// data used by website&#39;s interface</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">[</span><span class="s1">&#39;Post&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Post.created DESC&#39;</span><span class="p">,</span>
        <span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span>
    <span class="p">);</span>

    <span class="nv">$posts</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">();</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;posts&#39;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With all the View variables set we need to create an rss layout.</p>
</div>
<div class="section" id="layout">
<h3>Layout<a class="headerlink" href="#layout" title="Permalink to this headline">¶</a></h3>
<p>An Rss layout is very simple, put the following contents in
<tt class="docutils literal"><span class="pre">app/View/Layouts/rss/default.ctp</span></tt>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$documentData</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$documentData</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$channelData</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$channelData</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$channelData</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$channelData</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="nv">$channel</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Rss</span><span class="o">-&gt;</span><span class="na">channel</span><span class="p">(</span><span class="k">array</span><span class="p">(),</span> <span class="nv">$channelData</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">));</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Rss</span><span class="o">-&gt;</span><span class="na">document</span><span class="p">(</span><span class="nv">$documentData</span><span class="p">,</span> <span class="nv">$channel</span><span class="p">);</span>
</pre></div>
</div>
<p>It doesn&#8217;t look like much but thanks to the power in the <tt class="docutils literal"><span class="pre">RssHelper</span></tt>
it&#8217;s doing a lot of lifting for us. We haven&#8217;t set <tt class="docutils literal"><span class="pre">$documentData</span></tt> or
<tt class="docutils literal"><span class="pre">$channelData</span></tt> in the controller, however in CakePHP your views
can pass variables back to the layout. Which is where our
<tt class="docutils literal"><span class="pre">$channelData</span></tt> array will come from setting all of the meta data for
our feed.</p>
<p>Next up is view file for my posts/index. Much like the layout file
we created, we need to create a <tt class="docutils literal"><span class="pre">View/Posts/rss/</span></tt> directory and
create a new <tt class="docutils literal"><span class="pre">index.ctp</span></tt> inside that folder. The contents of the file
are below.</p>
</div>
<div class="section" id="view">
<h3>View<a class="headerlink" href="#view" title="Permalink to this headline">¶</a></h3>
<p>Our view, located at <tt class="docutils literal"><span class="pre">app/View/Posts/rss/index.ctp</span></tt>, begins by
setting the <tt class="docutils literal"><span class="pre">$documentData</span></tt> and <tt class="docutils literal"><span class="pre">$channelData</span></tt> variables for the
layout, these contain all the metadata for our RSS feed. This is
done by using the <a class="reference internal" href="../../views.html#View::set" title="View::set"><tt class="xref php php-meth docutils literal"><span class="pre">View::set()</span></tt></a> method which is analogous to the
<a class="reference internal" href="../../controllers.html#Controller::set" title="Controller::set"><tt class="xref php php-meth docutils literal"><span class="pre">Controller::set()</span></tt></a> method. Here though we are passing the channel&#8217;s
metadata back to the layout:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;channelData&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span><span class="s2">&quot;Most Recent Posts&quot;</span><span class="p">),</span>
    <span class="s1">&#39;link&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
    <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span><span class="s2">&quot;Most recent posts.&quot;</span><span class="p">),</span>
    <span class="s1">&#39;language&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;en-us&#39;</span>
<span class="p">));</span>
</pre></div>
</div>
<p>The second part of the view generates the elements for the actual
records of the feed. This is accomplished by looping through the
data that has been passed to the view ($items) and using the
<a class="reference internal" href="#RssHelper::item" title="RssHelper::item"><tt class="xref php php-meth docutils literal"><span class="pre">RssHelper::item()</span></tt></a> method. The other method you can use,
<a class="reference internal" href="#RssHelper::items" title="RssHelper::items"><tt class="xref php php-meth docutils literal"><span class="pre">RssHelper::items()</span></tt></a> which takes a callback and an array of items for
the feed. (The method I have seen used for the callback has always
been called <tt class="docutils literal"><span class="pre">transformRss()</span></tt>. There is one downfall to this method,
which is that you cannot use any of the other helper classes to
prepare your data inside the callback method because the scope
inside the method does not include anything that is not passed
inside, thus not giving access to the TimeHelper or any other
helper that you may need. The <a class="reference internal" href="#RssHelper::item" title="RssHelper::item"><tt class="xref php php-meth docutils literal"><span class="pre">RssHelper::item()</span></tt></a> transforms the
associative array into an element for each key value pair.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You will need to modify the $postLink variable as appropriate to
your application.</p>
</div>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">foreach</span> <span class="p">(</span><span class="nv">$posts</span> <span class="k">as</span> <span class="nv">$post</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$postTime</span> <span class="o">=</span> <span class="nb">strtotime</span><span class="p">(</span><span class="nv">$post</span><span class="p">[</span><span class="s1">&#39;Post&#39;</span><span class="p">][</span><span class="s1">&#39;created&#39;</span><span class="p">]);</span>

    <span class="nv">$postLink</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span>
        <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span>
        <span class="s1">&#39;year&#39;</span> <span class="o">=&gt;</span> <span class="nb">date</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="nv">$postTime</span><span class="p">),</span>
        <span class="s1">&#39;month&#39;</span> <span class="o">=&gt;</span> <span class="nb">date</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="nv">$postTime</span><span class="p">),</span>
        <span class="s1">&#39;day&#39;</span> <span class="o">=&gt;</span> <span class="nb">date</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="nv">$postTime</span><span class="p">),</span>
        <span class="nv">$post</span><span class="p">[</span><span class="s1">&#39;Post&#39;</span><span class="p">][</span><span class="s1">&#39;slug&#39;</span><span class="p">]</span>
    <span class="p">);</span>

    <span class="c1">// Remove &amp; escape any HTML to make sure the feed content will validate.</span>
    <span class="nv">$bodyText</span> <span class="o">=</span> <span class="nx">h</span><span class="p">(</span><span class="nb">strip_tags</span><span class="p">(</span><span class="nv">$post</span><span class="p">[</span><span class="s1">&#39;Post&#39;</span><span class="p">][</span><span class="s1">&#39;body&#39;</span><span class="p">]));</span>
    <span class="nv">$bodyText</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Text</span><span class="o">-&gt;</span><span class="na">truncate</span><span class="p">(</span><span class="nv">$bodyText</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;ending&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;...&#39;</span><span class="p">,</span>
        <span class="s1">&#39;exact&#39;</span>  <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
        <span class="s1">&#39;html&#39;</span>   <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">));</span>

    <span class="k">echo</span>  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Rss</span><span class="o">-&gt;</span><span class="na">item</span><span class="p">(</span><span class="k">array</span><span class="p">(),</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$post</span><span class="p">[</span><span class="s1">&#39;Post&#39;</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">],</span>
        <span class="s1">&#39;link&#39;</span> <span class="o">=&gt;</span> <span class="nv">$postLink</span><span class="p">,</span>
        <span class="s1">&#39;guid&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="nv">$postLink</span><span class="p">,</span> <span class="s1">&#39;isPermaLink&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;true&#39;</span><span class="p">),</span>
        <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="nv">$bodyText</span><span class="p">,</span>
        <span class="s1">&#39;pubDate&#39;</span> <span class="o">=&gt;</span> <span class="nv">$post</span><span class="p">[</span><span class="s1">&#39;Post&#39;</span><span class="p">][</span><span class="s1">&#39;created&#39;</span><span class="p">]</span>
    <span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can see above that we can use the loop to prepare the data to be transformed
into XML elements. It is important to filter out any non-plain text characters
out of the description, especially if you are using a rich text editor for the
body of your blog. In the code above we used <tt class="docutils literal"><span class="pre">strip_tags()</span></tt> and
<a class="reference internal" href="../global-constants-and-functions.html#h" title="h"><tt class="xref php php-func docutils literal"><span class="pre">h()</span></tt></a> to remove/escape any XML special characters from the content,
as they could cause validation errors. Once we have set up the data for the
feed, we can then use the <a class="reference internal" href="#RssHelper::item" title="RssHelper::item"><tt class="xref php php-meth docutils literal"><span class="pre">RssHelper::item()</span></tt></a> method to create the XML
in RSS format. Once you have all this setup, you can test your RSS feed by going
to your site <tt class="docutils literal"><span class="pre">/posts/index.rss</span></tt> and you will see your new feed. It is always
important that you validate your RSS feed before making it live. This can be
done by visiting sites that validate the XML such as Feed Validator or the w3c
site at <a class="reference external" href="http://validator.w3.org/feed/">http://validator.w3.org/feed/</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may need to set the value of &#8216;debug&#8217; in your core configuration
to 1 or to 0 to get a valid feed, because of the various debug
information added automagically under higher debug settings that
break XML syntax or feed validation rules.</p>
</div>
</div>
</div>
<div class="section" id="rss-helper-api">
<h2>Rss Helper API<a class="headerlink" href="#rss-helper-api" title="Permalink to this headline">¶</a></h2>
<dl class="attr">
<dt id="RssHelper::$action">
<em class="property">property </em><tt class="descclassname">RssHelper::$</tt><tt class="descname">action</tt><a class="headerlink" href="#RssHelper::$action" title="Permalink to this definition">¶</a></dt>
<dd><p>Current action</p>
</dd></dl>

<dl class="attr">
<dt id="RssHelper::$base">
<em class="property">property </em><tt class="descclassname">RssHelper::$</tt><tt class="descname">base</tt><a class="headerlink" href="#RssHelper::$base" title="Permalink to this definition">¶</a></dt>
<dd><p>Base URL</p>
</dd></dl>

<dl class="attr">
<dt id="RssHelper::$data">
<em class="property">property </em><tt class="descclassname">RssHelper::$</tt><tt class="descname">data</tt><a class="headerlink" href="#RssHelper::$data" title="Permalink to this definition">¶</a></dt>
<dd><p>POSTed model data</p>
</dd></dl>

<dl class="attr">
<dt id="RssHelper::$field">
<em class="property">property </em><tt class="descclassname">RssHelper::$</tt><tt class="descname">field</tt><a class="headerlink" href="#RssHelper::$field" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the current field</p>
</dd></dl>

<dl class="attr">
<dt id="RssHelper::$helpers">
<em class="property">property </em><tt class="descclassname">RssHelper::$</tt><tt class="descname">helpers</tt><a class="headerlink" href="#RssHelper::$helpers" title="Permalink to this definition">¶</a></dt>
<dd><p>Helpers used by the RSS Helper</p>
</dd></dl>

<dl class="attr">
<dt id="RssHelper::$here">
<em class="property">property </em><tt class="descclassname">RssHelper::$</tt><tt class="descname">here</tt><a class="headerlink" href="#RssHelper::$here" title="Permalink to this definition">¶</a></dt>
<dd><p>URL to current action</p>
</dd></dl>

<dl class="attr">
<dt id="RssHelper::$model">
<em class="property">property </em><tt class="descclassname">RssHelper::$</tt><tt class="descname">model</tt><a class="headerlink" href="#RssHelper::$model" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of current model</p>
</dd></dl>

<dl class="attr">
<dt id="RssHelper::$params">
<em class="property">property </em><tt class="descclassname">RssHelper::$</tt><tt class="descname">params</tt><a class="headerlink" href="#RssHelper::$params" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameter array</p>
</dd></dl>

<dl class="attr">
<dt id="RssHelper::$version">
<em class="property">property </em><tt class="descclassname">RssHelper::$</tt><tt class="descname">version</tt><a class="headerlink" href="#RssHelper::$version" title="Permalink to this definition">¶</a></dt>
<dd><p>Default spec version of generated RSS.</p>
</dd></dl>

<dl class="method">
<dt id="RssHelper::channel">
<tt class="descclassname">RssHelper::</tt><tt class="descname">channel</tt><big>(</big><em>array $attrib = array ()</em>, <em>array $elements = array ()</em>, <em>mixed $content = null</em><big>)</big><a class="headerlink" href="#RssHelper::channel" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Returns an RSS <tt class="docutils literal"><span class="pre">&lt;channel</span> <span class="pre">/&gt;</span></tt> element.</p>
</dd></dl>

<dl class="method">
<dt id="RssHelper::document">
<tt class="descclassname">RssHelper::</tt><tt class="descname">document</tt><big>(</big><em>array $attrib = array ()</em>, <em>string $content = null</em><big>)</big><a class="headerlink" href="#RssHelper::document" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Returns an RSS document wrapped in <tt class="docutils literal"><span class="pre">&lt;rss</span> <span class="pre">/&gt;</span></tt> tags.</p>
</dd></dl>

<dl class="method">
<dt id="RssHelper::elem">
<tt class="descclassname">RssHelper::</tt><tt class="descname">elem</tt><big>(</big><em>string $name</em>, <em>array $attrib = array ()</em>, <em>mixed $content = null</em>, <em>boolean $endTag = true</em><big>)</big><a class="headerlink" href="#RssHelper::elem" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Generates an XML element.</p>
</dd></dl>

<dl class="method">
<dt id="RssHelper::item">
<tt class="descclassname">RssHelper::</tt><tt class="descname">item</tt><big>(</big><em>array $att = array ()</em>, <em>array $elements = array ()</em><big>)</big><a class="headerlink" href="#RssHelper::item" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Converts an array into an <tt class="docutils literal"><span class="pre">&lt;item</span> <span class="pre">/&gt;</span></tt> element and its contents.</p>
</dd></dl>

<dl class="method">
<dt id="RssHelper::items">
<tt class="descclassname">RssHelper::</tt><tt class="descname">items</tt><big>(</big><em>array $items</em>, <em>mixed $callback = null</em><big>)</big><a class="headerlink" href="#RssHelper::items" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Transforms an array of data using an optional callback, and maps it to a
set of <tt class="docutils literal"><span class="pre">&lt;item</span> <span class="pre">/&gt;</span></tt> tags.</p>
</dd></dl>

<dl class="method">
<dt id="RssHelper::time">
<tt class="descclassname">RssHelper::</tt><tt class="descname">time</tt><big>(</big><em>mixed $time</em><big>)</big><a class="headerlink" href="#RssHelper::time" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Converts a time in any format to an RSS time. See
<a class="reference internal" href="time.html#TimeHelper::toRSS" title="TimeHelper::toRSS"><tt class="xref php php-meth docutils literal"><span class="pre">TimeHelper::toRSS()</span></tt></a>.</p>
</dd></dl>

</div>
</div>


		</div>
	</div>

	<div class="sidebar columns three pull-nine">
<div id="sidebar-navigation" class="hide-on-phones">
	<h2 class="hide-on-desktops">Table of Contents</h2>
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cakephp-overview.html">CakePHP Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controllers.html">Controllers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../views.html">Views</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../views/themes.html">Themes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../views/media-view.html">Media Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../views/json-and-xml-views.html">JSON and XML views</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../views/helpers.html">Helpers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cache.html">CacheHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="flash.html">Flash</a></li>
<li class="toctree-l3"><a class="reference internal" href="form.html">FormHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="html.html">HtmlHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="js.html">JsHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="number.html">NumberHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="paginator.html">Paginator</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">RSS</a></li>
<li class="toctree-l3"><a class="reference internal" href="session.html">SessionHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="text.html">TextHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="time.html">TimeHelper</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../models.html">Models</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../core-libraries.html">Core Libraries</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../toc-general-purpose.html">General Purpose</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../global-constants-and-functions.html">Global Constants and Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-utility-libraries/app.html">App Class</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../events.html">Events System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collections.html">Collections</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../toc-behaviors.html">Behaviors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc-components.html">Components</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../toc-helpers.html">Helpers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cache.html">CacheHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="flash.html">Flash</a></li>
<li class="toctree-l3"><a class="reference internal" href="form.html">FormHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="html.html">HtmlHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="js.html">JsHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="number.html">NumberHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="paginator.html">Paginator</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">RSS</a></li>
<li class="toctree-l3"><a class="reference internal" href="session.html">SessionHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="text.html">TextHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="time.html">TimeHelper</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../toc-utilities.html">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../console-and-shells.html">Console and Shells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices.html">Appendices</a></li>
</ul>

</div>

<div class="page-contents">
	<h3>Page contents</h3>
	<ul>
<li><a class="reference internal" href="#">RSS</a><ul>
<li><a class="reference internal" href="#creating-an-rss-feed-with-the-rsshelper">Creating an RSS feed with the RssHelper</a><ul>
<li><a class="reference internal" href="#controller-code">Controller Code</a></li>
<li><a class="reference internal" href="#layout">Layout</a></li>
<li><a class="reference internal" href="#view">View</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rss-helper-api">Rss Helper API</a></li>
</ul>
</li>
</ul>

</div>
	</div>

</div>

<div class="content row">
	<ul class="related-pages inline">
	<li>
		<a href="../../genindex.html" title="General Index" accesskey="I">index</a>
	</li>
	<li>
		<a href="session.html" title="SessionHelper" accesskey="N">next</a>
	</li>
	<li>
		<a href="paginator.html" title="Paginator" accesskey="P">previous</a>
	</li>
	</ul>
</div>

	<div class="footer-push"> </div>
</div>






<div class="footer">
	<div class="row">
		<div class="columns six offset-by-three contribute">
			<strong>发现翻译错误?</strong>
			请在下面留言<br />
			<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">[ 我要加入翻译 ]</a>
		</div>
	</div>
	
	<div class="row">
		<div class="columns nine offset-by-three copyright">
					&copy; Copyright 2014, Cake Software Foundation, Inc.
				Last updated on Aug 31, 2015.
				Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
		</div>
	</div>
</div>

<div id="nav-modal" class="reveal-modal"> </div>
<div id="inline-search-results"></div>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F201cbc61deaf9f7ffb521fb23e83db40' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cakephpchina"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
  </body>
</html>