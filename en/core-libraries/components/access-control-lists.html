

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Access Control Lists" lang="en" name="title" />
<meta content="fantasy novel,access control list,request objects,online diary,request object,acls,adventurers,gandalf,lingo,web service,computer system,grandma,lord of the rings,entities,assets,logic,cakephp,stuff,control objects,control object" lang="en" name="keywords" />

    <title>Access Control Lists</title>
    <link href="../../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../../_static/app.js"></script>

    <link rel="alternate" hreflang="pt" href="../../../pt/core-libraries/components/access-control-lists.html" /><link rel="alternate" hreflang="es" href="../../../es/core-libraries/components/access-control-lists.html" /><link rel="alternate" hreflang="ja" href="../../../ja/core-libraries/components/access-control-lists.html" /><link rel="alternate" hreflang="fr" href="../../../fr/core-libraries/components/access-control-lists.html" /><link rel="alternate" hreflang="zh" href="../../../zh/core-libraries/components/access-control-lists.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 2.x documentation" href="../../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 2.x documentation" href="../../index.html" />
    <link rel="up" title="Components" href="../toc-components.html" />
    <link rel="next" title="Helpers" href="../toc-helpers.html" />
    <link rel="prev" title="Cookie" href="cookie.html" />

    <script type="text/javascript">
    window.lang = "en";
    </script>
  </head>
  <body>

<div id="container">
	
	<header class="nav-down">
		<div class="container-fluid hidden-xs hidden-sm">
			<div class="row">
				<div class="col-sm-3 col-md-3">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-9 col-md-9">
					<nav class="navbar-right">
						<ul class="menu">
							<li class="first">
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
								<ul class="submenu">
									
<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
								</ul>
							</li>

							<li><a href="http://cakephp.org/business-solutions">Business Solutions</a></li>
							<li><a href="http://cakephp.org/showcase">Showcase</a></li>

							<li>
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
								<div class="megamenu full">
									<div class="row">
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
											</ul>
										</div>
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
											</ul>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>

		
		<div class="container-fluid hidden-md hidden-lg">
			<div class="row">
				<div class="col-sm-6 col-xs-6">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-6 col-xs-6">
					<div class="navbar-right">
						<button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
							<i class="fa fa-bars toggle-modal"></i>
						</button>
					</div>
					<div id="wrap">
						<form class="search" action="../../search.html" method="get">
							<input name="q" type="search" placeholder="What are you looking for?">
							<input id="search_submit" value="Search" type="submit">
						</form>
					</div>
				</div>
			</div>
		</div>

		
		<section id="nav-cook" class="hidden-xs hidden-sm">
			<div class="container-fluid ">
				<div class="row ">
					<div class="col-md-12 back-book">
						<div class="col-md-4 col-md-offset-1 text-center t-cook-nav p0 hidden-sm hidden-xs">
							<h2>
								<a href="../../contents.html">
									<span class="glyph_range icon-submenu icon-submenu-cook">B</span>
									CakePHP 2.x <strong>Cookbook</strong>
								</a>
							</h2>
						</div>

						<div class="col-md-4 hidden-sm">
							<form class="search" action="../../search.html" method="get">
								<input type="hidden" name="check_keywords" value="yes" />
								<input type="hidden" name="area" value="default" />

								<div class="col-md-10 p0">
									<input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
								</div>
								<div class="col-md-2 p0 search-cook">
									<button type="submit">
										<span class="glyph_range icon-submenu icon-submenu-cook">A</span>
									</button>
								</div>
							</form>
						</div>

						
						<div class="col-md-3">
							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Language:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
													role="button" aria-haspopup="true" aria-expanded="false" href="#">
														en
														<i class="fa fa-menu-en fa-chevron-down"></i>
													</a>
											<ul class="dropdown-menu">
											
												<li></li>
											
												<li><a href="../../../pt/core-libraries/components/access-control-lists.html">pt</a></li>
											
												<li><a href="../../../es/core-libraries/components/access-control-lists.html">es</a></li>
											
												<li><a href="../../../ja/core-libraries/components/access-control-lists.html">ja</a></li>
											
												<li><a href="../../../fr/core-libraries/components/access-control-lists.html">fr</a></li>
											
												<li><a href="../../../zh/core-libraries/components/access-control-lists.html">zh</a></li>
											
											</ul>
										</li>
									</ul>
								</div>
							</div>

							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Version:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">2.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
											<ul class="dropdown-menu">
												<li><a href="http://book.cakephp.org/3.0/en">3.x Book</a></li>
												<li><a href="http://book.cakephp.org/2.0/en">2.x Book</a></li>
												<li><a href="http://book.cakephp.org/1.3/en/">1.3 Book</a></li>
												<li><a href="http://book.cakephp.org/1.2/en/">1.2 Book</a></li>
												<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
											</ul>
										</li>
									</ul>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</section>
	</header>

	
	<section class="nav-btn visible-sm visible-xs">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
				</div>

				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
				</div>
			</div>
		</div>
	</section>

	
	<div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title-cookbook" id="modal-header"></h4>
				</div>
				<div class="modal-body"></div>
			</div>
		</div>
	</div>

<div class="container page-container"><div id="improve-slideout">
		<i class="fa fa-pencil icon-improve"></i>
		<a href="https://github.com/cakephp/docs/edit/master/en/core-libraries/components/access-control-lists.rst" target="_blank">
			<div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
		</a>
	</div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

	
	<div class="row">
		<div class="col-sm-12 col-md-9 col-md-push-3 space-left push-off"><div class="page-contents col-sm-5">
				<h3>Page Contents</h3>
				<ul>
<li><a class="reference internal" href="#">Access Control Lists</a><ul>
<li><a class="reference internal" href="#understanding-how-acl-works">Understanding How ACL Works</a></li>
<li><a class="reference internal" href="#defining-permissions-cakephp-s-ini-based-acl">Defining Permissions: CakePHP&#8217;s INI-based ACL</a></li>
<li><a class="reference internal" href="#defining-permissions-cakephp-s-database-acl">Defining Permissions: CakePHP&#8217;s Database ACL</a><ul>
<li><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li><a class="reference internal" href="#creating-access-request-objects-aros-and-access-control-objects-acos">Creating Access Request Objects (AROs) and Access Control Objects (ACOs)</a></li>
<li><a class="reference internal" href="#assigning-permissions">Assigning Permissions</a></li>
<li><a class="reference internal" href="#checking-permissions-the-acl-component">Checking Permissions: The ACL Component</a></li>
</ul>
</li>
</ul>
</li>
</ul>

			</div><div class="document-body">
			
  <div class="section" id="access-control-lists">
<h1>Access Control Lists<a class="headerlink" href="#access-control-lists" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="AclComponent">
<em class="property">class </em><code class="descname">AclComponent</code><span class="sig-paren">(</span><em>ComponentCollection $collection</em>, <em>array $settings = array()</em><span class="sig-paren">)</span><a class="headerlink" href="#AclComponent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<div class="section" id="understanding-how-acl-works">
<h2>Understanding How ACL Works<a class="headerlink" href="#understanding-how-acl-works" title="Permalink to this headline">¶</a></h2>
<p>Powerful things require access control. Access control lists are a
way to manage application permissions in a fine-grained, yet easily
maintainable and manageable way.</p>
<p>Access control lists, or ACL, handle two main things: things that
want stuff, and things that are wanted. In ACL lingo, things (most
often users) that want to use stuff are represented by access request
objects, or AROs. Things in the system that are wanted (most often
actions or data) are represented by access control objects, or ACOs. The
entities are called &#8216;objects&#8217; because sometimes the requesting
object isn&#8217;t a person. Sometimes you might want to limit the
ability of certain CakePHP controllers to initiate logic in other
parts of your application. ACOs could be anything you want to
control, from a controller action, to a web service, to a line in
your grandma&#8217;s online diary.</p>
<p>To review:</p>
<ul class="simple">
<li>ACO - Access Control Object - Represents something that is wanted</li>
<li>ARO - Access Request Object - Represents something that wants something else</li>
</ul>
<p>Essentially, ACLs are used to decide when an ARO can have
access to an ACO.</p>
<p>In order to help you understand how everything works together,
let&#8217;s use a semi-practical example. Imagine, for a moment, a
computer system used by a familiar group of adventurers
from the fantasy novel <em>Lord of the Rings</em>. The leader of the group,
Gandalf, wants to manage the party&#8217;s assets while maintaining a
healthy amount of privacy and security for the other members of the
party. The first thing he needs to do is create a list of the AROs
(requesters) involved:</p>
<ul class="simple">
<li>Gandalf</li>
<li>Aragorn</li>
<li>Bilbo</li>
<li>Frodo</li>
<li>Gollum</li>
<li>Legolas</li>
<li>Gimli</li>
<li>Pippin</li>
<li>Merry</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Realize that ACL is <em>not</em> the same as authentication. ACL is what
happens <em>after</em> a user has been authenticated. Although the two are
usually used in concert, it&#8217;s important to realize the difference
between knowing who someone is (authentication) and knowing what
they can do (ACL).</p>
</div>
<p>The next thing Gandalf needs to do is make an initial list of
ACOs (resources) the system will handle. His list might look
something like:</p>
<ul class="simple">
<li>Weapons</li>
<li>The One Ring</li>
<li>Salted Pork</li>
<li>Diplomacy</li>
<li>Ale</li>
</ul>
<p>Traditionally, systems were managed using a sort of matrix that
showed a basic set of users and permissions relating to objects. If
this information were stored in a table, it might look like this:</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="15%" />
<col width="17%" />
<col width="22%" />
<col width="19%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">x</th>
<th class="head">Weapons</th>
<th class="head">The Ring</th>
<th class="head">Salted Pork</th>
<th class="head">Diplomacy</th>
<th class="head">Ale</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Gandalf</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Allow</td>
<td>Allow</td>
<td>Allow</td>
</tr>
<tr class="row-odd"><td>Aragorn</td>
<td>Allow</td>
<td>&nbsp;</td>
<td>Allow</td>
<td>Allow</td>
<td>Allow</td>
</tr>
<tr class="row-even"><td>Bilbo</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Allow</td>
</tr>
<tr class="row-odd"><td>Frodo</td>
<td>&nbsp;</td>
<td>Allow</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Allow</td>
</tr>
<tr class="row-even"><td>Gollum</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Allow</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Legolas</td>
<td>Allow</td>
<td>&nbsp;</td>
<td>Allow</td>
<td>Allow</td>
<td>Allow</td>
</tr>
<tr class="row-even"><td>Gimli</td>
<td>Allow</td>
<td>&nbsp;</td>
<td>Allow</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Pippin</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Allow</td>
<td>Allow</td>
</tr>
<tr class="row-even"><td>Merry</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>Allow</td>
<td>Allow</td>
</tr>
</tbody>
</table>
<p>At first glance, it seems that this sort of system could work
rather well. Assignments can be made to protect security (only
Frodo can access the ring) and protect against accidents (keeping
the hobbits out of the salted pork and weapons). It seems sufficiently
fine-grained and easy to read, right?</p>
<p>For a small system like this, maybe a matrix setup would work. But
for a growing system, or a system with a large number of resources
(ACOs) and users (AROs), a table can quickly become unwieldy.
Imagine trying to control access to the hundreds of war
encampments and trying to manage them by unit. Another drawback to
matrices is that you can&#8217;t create logical groups of users
or make cascading permissions changes to groups of users based on
those logical groupings. For example, it would sure be nice to
automatically allow the hobbits access to the ale and pork once the
battle is over. Doing it on an individual user basis would be
tedious and error prone. Making a cascading permissions change to
all members of the &#8216;hobbit&#8217; group at once would be easy.</p>
<p>ACL is most usually implemented in a tree structure, with
a tree of AROs and a tree of ACOs. By organizing your
objects in trees, you can deal out permissions in a granular
fashion while maintaining a good grip on the big picture.
Being the wise leader he is, Gandalf elects to use ACL in his new
system, and organizes his objects along the following lines:</p>
<ul class="simple">
<li>Fellowship of the Ring™<ul>
<li>Warriors<ul>
<li>Aragorn</li>
<li>Legolas</li>
<li>Gimli</li>
</ul>
</li>
<li>Wizards<ul>
<li>Gandalf</li>
</ul>
</li>
<li>Hobbits<ul>
<li>Frodo</li>
<li>Bilbo</li>
<li>Merry</li>
<li>Pippin</li>
</ul>
</li>
<li>Visitors<ul>
<li>Gollum</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Using a tree structure for AROs allows Gandalf to define
permissions that apply to entire groups of users at once. So, using
our ARO tree, Gandalf can tack on a few group-based permissions:</p>
<ul class="simple">
<li>Fellowship of the Ring
(<strong>Deny</strong>: all)<ul>
<li>Warriors
(<strong>Allow</strong>: Weapons, Ale, Elven Rations, Salted Pork)<ul>
<li>Aragorn</li>
<li>Legolas</li>
<li>Gimli</li>
</ul>
</li>
<li>Wizards
(<strong>Allow</strong>: Salted Pork, Diplomacy, Ale)<ul>
<li>Gandalf</li>
</ul>
</li>
<li>Hobbits
(<strong>Allow</strong>: Ale)<ul>
<li>Frodo</li>
<li>Bilbo</li>
<li>Merry</li>
<li>Pippin</li>
</ul>
</li>
<li>Visitors
(<strong>Allow</strong>: Salted Pork)<ul>
<li>Gollum</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>If we wanted to use ACL to see whether Pippin was allowed to access
the ale, we&#8217;d first consult the tree to retrieve his path through it, which is
Fellowship-&gt;Hobbits-&gt;Pippin. Then we see the different permissions
that reside at each of those points, and use the most specific
permission relating to Pippin and the Ale.</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="26%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ARO Node</th>
<th class="head">Permission Info</th>
<th class="head">Result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Fellowship of the Ring</td>
<td>Deny all</td>
<td>Denying access to ale.</td>
</tr>
<tr class="row-odd"><td>Hobbits</td>
<td>Allow &#8216;ale&#8217;</td>
<td>Allowing access to ale!</td>
</tr>
<tr class="row-even"><td>Pippin</td>
<td>&#8211;</td>
<td>Still allowing ale!</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since the &#8216;Pippin&#8217; node in the ACL tree doesn&#8217;t specifically deny
access to the ale ACO, the final result is that we allow access to
that ACO.</p>
</div>
<p>The tree also allows us to make finer adjustments for more granular
control, while still keeping the ability to make sweeping changes
to groups of AROs:</p>
<ul class="simple">
<li>Fellowship of the Ring
(<strong>Deny</strong>: all)<ul>
<li>Warriors
(<strong>Allow</strong>: Weapons, Ale, Elven Rations, Salted Pork)<ul>
<li>Aragorn
(Allow: Diplomacy)</li>
<li>Legolas</li>
<li>Gimli</li>
</ul>
</li>
<li>Wizards
(<strong>Allow</strong>: Salted Pork, Diplomacy, Ale)<ul>
<li>Gandalf</li>
</ul>
</li>
<li>Hobbits
(<strong>Allow</strong>: Ale)<ul>
<li>Frodo
(Allow: Ring)</li>
<li>Bilbo</li>
<li>Merry
(Deny: Ale)</li>
<li>Pippin
(Allow: Diplomacy)</li>
</ul>
</li>
<li>Visitors
(<strong>Allow</strong>: Salted Pork)<ul>
<li>Gollum</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>This approach allows us the ability to make both wide-reaching
permissions changes and fine-grained adjustments. This allows
us to say that all hobbits can have access to ale, with one
exception: Merry. To see whether Merry can access the Ale, we&#8217;d find his
path in the tree: Fellowship-&gt;Hobbits-&gt;Merry. Then we&#8217;d work our way down,
keeping track of ale-related permissions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="26%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ARO Node</th>
<th class="head">Permission Info</th>
<th class="head">Result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Fellowship of the Ring</td>
<td>Deny all</td>
<td>Denying access to ale.</td>
</tr>
<tr class="row-odd"><td>Hobbits</td>
<td>Allow &#8216;ale&#8217;</td>
<td>Allowing access to ale!</td>
</tr>
<tr class="row-even"><td>Merry</td>
<td>Deny Ale</td>
<td>Denying ale.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="defining-permissions-cakephp-s-ini-based-acl">
<h2>Defining Permissions: CakePHP&#8217;s INI-based ACL<a class="headerlink" href="#defining-permissions-cakephp-s-ini-based-acl" title="Permalink to this headline">¶</a></h2>
<p>CakePHP&#8217;s first ACL implementation was based on INI files stored in
the CakePHP installation. While it&#8217;s useful and stable, we recommend
that you use the database backed ACL solution, mostly because of
its ability to create new ACOs and AROs on the fly. We meant it for
usage in simple applications - and especially for those folks who
for some reason might not be using a database.</p>
<p>By default, CakePHP&#8217;s ACL is database-driven. To enable INI-based
ACL, you&#8217;ll need to tell CakePHP what system you&#8217;re using by
updating the following lines in app/Config/core.php:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Change these lines:</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;Acl.classname&#39;</span><span class="p">,</span> <span class="s1">&#39;DbAcl&#39;</span><span class="p">);</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;Acl.database&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">);</span>

<span class="c1">// to look like this:</span>
<span class="nx">Configure</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;Acl.classname&#39;</span><span class="p">,</span> <span class="s1">&#39;IniAcl&#39;</span><span class="p">);</span>
<span class="c1">//Configure::write(&#39;Acl.database&#39;, &#39;default&#39;);</span>
</pre></div>
</div>
<p>ARO/ACO permissions are specified in <strong>/app/Config/acl.ini.php</strong>.
The basic idea is that AROs are specified in an INI section that
has three properties: groups, allow, and deny.</p>
<ul class="simple">
<li>groups: names of ARO groups of which this ARO is a member</li>
<li>allow: names of ACOs to which this ARO has access</li>
<li>deny: names of ACOs to which this ARO should be denied access</li>
</ul>
<p>ACOs are specified in INI sections that only include the allow and
deny properties.</p>
<p>As an example, let&#8217;s see how the Fellowship ARO structure we&#8217;ve
been crafting would look in INI syntax:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="p">;</span><span class="o">-------------------------------------</span>
<span class="p">;</span> <span class="nx">AROs</span>
<span class="p">;</span><span class="o">-------------------------------------</span>
<span class="p">[</span><span class="nx">aragorn</span><span class="p">]</span>
<span class="nx">groups</span> <span class="o">=</span> <span class="nx">warriors</span>
<span class="nx">allow</span> <span class="o">=</span> <span class="nx">diplomacy</span>

<span class="p">[</span><span class="nx">legolas</span><span class="p">]</span>
<span class="nx">groups</span> <span class="o">=</span> <span class="nx">warriors</span>

<span class="p">[</span><span class="nx">gimli</span><span class="p">]</span>
<span class="nx">groups</span> <span class="o">=</span> <span class="nx">warriors</span>

<span class="p">[</span><span class="nx">gandalf</span><span class="p">]</span>
<span class="nx">groups</span> <span class="o">=</span> <span class="nx">wizards</span>

<span class="p">[</span><span class="nx">frodo</span><span class="p">]</span>
<span class="nx">groups</span> <span class="o">=</span> <span class="nx">hobbits</span>
<span class="nx">allow</span> <span class="o">=</span> <span class="nx">ring</span>

<span class="p">[</span><span class="nx">bilbo</span><span class="p">]</span>
<span class="nx">groups</span> <span class="o">=</span> <span class="nx">hobbits</span>

<span class="p">[</span><span class="nx">merry</span><span class="p">]</span>
<span class="nx">groups</span> <span class="o">=</span> <span class="nx">hobbits</span>
<span class="nx">deny</span> <span class="o">=</span> <span class="nx">ale</span>

<span class="p">[</span><span class="nx">pippin</span><span class="p">]</span>
<span class="nx">groups</span> <span class="o">=</span> <span class="nx">hobbits</span>

<span class="p">[</span><span class="nx">gollum</span><span class="p">]</span>
<span class="nx">groups</span> <span class="o">=</span> <span class="nx">visitors</span>

<span class="p">;</span><span class="o">-------------------------------------</span>
<span class="p">;</span> <span class="nx">ARO</span> <span class="nx">Groups</span>
<span class="p">;</span><span class="o">-------------------------------------</span>
<span class="p">[</span><span class="nx">warriors</span><span class="p">]</span>
<span class="nx">allow</span> <span class="o">=</span> <span class="nx">weapons</span><span class="p">,</span> <span class="nx">ale</span><span class="p">,</span> <span class="nx">salted_pork</span>

<span class="p">[</span><span class="nx">wizards</span><span class="p">]</span>
<span class="nx">allow</span> <span class="o">=</span> <span class="nx">salted_pork</span><span class="p">,</span> <span class="nx">diplomacy</span><span class="p">,</span> <span class="nx">ale</span>

<span class="p">[</span><span class="nx">hobbits</span><span class="p">]</span>
<span class="nx">allow</span> <span class="o">=</span> <span class="nx">ale</span>

<span class="p">[</span><span class="nx">visitors</span><span class="p">]</span>
<span class="nx">allow</span> <span class="o">=</span> <span class="nx">salted_pork</span>
</pre></div>
</div>
<p>Now that you&#8217;ve got your permissions defined via the INI mechanism,
you can skip to <a class="reference internal" href="#checking-permissions"><span class="std std-ref">the section on checking permissions</span></a>
using the ACL component. Alternatively, you can keep reading to see how
you would define the same permissions using a database ACL.</p>
</div>
<div class="section" id="defining-permissions-cakephp-s-database-acl">
<h2>Defining Permissions: CakePHP&#8217;s Database ACL<a class="headerlink" href="#defining-permissions-cakephp-s-database-acl" title="Permalink to this headline">¶</a></h2>
<p>Now that we&#8217;ve covered INI-based ACL permissions, let&#8217;s move on to
the (more commonly used) database ACL.</p>
<div class="section" id="getting-started">
<h3>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h3>
<p>The default ACL permissions implementation is powered by a database.
CakePHP&#8217;s database ACL consists of a set of core models and a console
application that comes with your CakePHP installation. The models are
used by CakePHP to interact with your database in order to store and
retrieve nodes in tree format. The console application is used to
initialize your database and interact with your ACO and ARO trees.</p>
<p>To get started, first you&#8217;ll need to make sure your
<code class="docutils literal"><span class="pre">/app/Config/database.php</span></code> is present and correctly configured.</p>
<p>Once you&#8217;ve done that, use the CakePHP console to create your ACL
database tables:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="nx">cake</span> <span class="nx">schema</span> <span class="nx">create</span> <span class="nx">DbAcl</span>
</pre></div>
</div>
<p>Running this command will drop and re-create the tables necessary
to store ACO and ARO information in tree format. The output of the
console application should look something like the following:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="o">---------------------------------------------------------------</span>
<span class="nx">Cake</span> <span class="nx">Schema</span> <span class="nx">Shell</span>
<span class="o">---------------------------------------------------------------</span>

<span class="nx">The</span> <span class="nx">following</span> <span class="nx">tables</span> <span class="nx">will</span> <span class="nx">be</span> <span class="nx">dropped</span><span class="o">.</span>
<span class="nb">acos</span>
<span class="nx">aros</span>
<span class="nx">aros_acos</span>

<span class="nx">Are</span> <span class="nx">you</span> <span class="nx">sure</span> <span class="nx">you</span> <span class="nx">want</span> <span class="nx">to</span> <span class="nx">drop</span> <span class="nx">the</span> <span class="nx">tables</span><span class="o">?</span> <span class="p">(</span><span class="nx">y</span><span class="o">/</span><span class="nx">n</span><span class="p">)</span>
<span class="p">[</span><span class="nx">n</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nx">y</span>
<span class="nx">Dropping</span> <span class="nx">tables</span><span class="o">.</span>
<span class="nb">acos</span> <span class="nx">updated</span><span class="o">.</span>
<span class="nx">aros</span> <span class="nx">updated</span><span class="o">.</span>
<span class="nx">aros_acos</span> <span class="nx">updated</span><span class="o">.</span>

<span class="nx">The</span> <span class="nx">following</span> <span class="nx">tables</span> <span class="nx">will</span> <span class="nx">be</span> <span class="nx">created</span><span class="o">.</span>
<span class="nb">acos</span>
<span class="nx">aros</span>
<span class="nx">aros_acos</span>

<span class="nx">Are</span> <span class="nx">you</span> <span class="nx">sure</span> <span class="nx">you</span> <span class="nx">want</span> <span class="nx">to</span> <span class="nx">create</span> <span class="nx">the</span> <span class="nx">tables</span><span class="o">?</span> <span class="p">(</span><span class="nx">y</span><span class="o">/</span><span class="nx">n</span><span class="p">)</span>
<span class="p">[</span><span class="nx">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nx">y</span>
<span class="nx">Creating</span> <span class="nx">tables</span><span class="o">.</span>
<span class="nb">acos</span> <span class="nx">updated</span><span class="o">.</span>
<span class="nx">aros</span> <span class="nx">updated</span><span class="o">.</span>
<span class="nx">aros_acos</span> <span class="nx">updated</span><span class="o">.</span>
<span class="nx">End</span> <span class="nx">create</span><span class="o">.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This replaces an older deprecated command, &#8220;initdb&#8221;.</p>
</div>
<p>You can also use the SQL file found in
<code class="docutils literal"><span class="pre">app/Config/Schema/db_acl.sql</span></code>, but that&#8217;s nowhere near as fun.</p>
<p>When finished, you should have three new database tables in your
system: acos, aros, and aros_acos (the join table to create
permissions information between the two trees).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you&#8217;re curious about how CakePHP stores tree information in these
tables, read up on modified database tree traversal. The ACL
component uses CakePHP&#8217;s <a class="reference internal" href="../behaviors/tree.html"><span class="doc">Tree</span></a>
to manage the trees&#8217; inheritances. The model class files for ACL
can be found in <code class="docutils literal"><span class="pre">lib/Cake/Model/</span></code>.</p>
</div>
<p>Now that we&#8217;re all set up, let&#8217;s work on creating some ARO and ACO
trees.</p>
</div>
<div class="section" id="creating-access-request-objects-aros-and-access-control-objects-acos">
<h3>Creating Access Request Objects (AROs) and Access Control Objects (ACOs)<a class="headerlink" href="#creating-access-request-objects-aros-and-access-control-objects-acos" title="Permalink to this headline">¶</a></h3>
<p>When creating new ACL objects (ACOs and AROs), realize that there are
two main ways to name and access nodes. The <em>first</em> method is to
link an ACL object directly to a record in your database by
specifying a model name and foreign key value. The <em>second</em>
can be used when an object has no direct relation to a record in
your database - you can provide a textual alias for the object.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In general, when you&#8217;re creating a group or higher-level object,
use an alias. If you&#8217;re managing access to a specific item or
record in the database, use the model/foreign key method.</p>
</div>
<p>You create new ACL objects using the core CakePHP ACL models. In
doing so, there are a number of fields you&#8217;ll want to use when
saving data: <code class="docutils literal"><span class="pre">model</span></code>, <code class="docutils literal"><span class="pre">foreign_key</span></code>, <code class="docutils literal"><span class="pre">alias</span></code>, and
<code class="docutils literal"><span class="pre">parent_id</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">model</span></code> and <code class="docutils literal"><span class="pre">foreign_key</span></code> fields for an ACL object allow
you to link the object to its corresponding model record (if
there is one). For example, many AROs will have corresponding User
records in the database. Setting an ARO&#8217;s <code class="docutils literal"><span class="pre">foreign_key</span></code> to the
User&#8217;s ID will allow you to link up ARO and User information with a
single User model find() call if you&#8217;ve set up the correct model
associations. Conversely, if you want to manage edit operation on a
specific blog post or recipe listing, you may choose to link an ACO
to that specific model record.</p>
<p>An <code class="docutils literal"><span class="pre">alias</span></code> is just a human-readable label you
can use to identify an ACL object that has no direct model record
correlation. Aliases are generally useful in naming user groups or
ACO collections.</p>
<p>The <code class="docutils literal"><span class="pre">parent_id</span></code> for an ACL object allows you to fill out the tree
structure. Supply the ID of the parent node in the tree to create a
new child.</p>
<p>Before we can create new ACL objects, we&#8217;ll need to load up their
respective classes. The easiest way to do this is to include CakePHP&#8217;s
ACL Component in your controller&#8217;s $components array:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Acl&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Once we&#8217;ve got that done, let&#8217;s see some examples of creating
these objects. The following code could be placed
in a controller action:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While the examples here focus on ARO creation, the same techniques
can be used to create an ACO tree.</p>
</div>
<p>Remaining with our Fellowship example, let&#8217;s first create our ARO
groups. Because they won&#8217;t have specific records tied
to them, we&#8217;ll use aliases to create the ACL objects. Here, we create them
via a controller action, but we could do it elsewhere.</p>
<p>Our approach shouldn&#8217;t be drastically new - we&#8217;re just using
models to save data like we always do:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">any_action</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$aro</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">Aro</span><span class="p">;</span>

    <span class="c1">// Here&#39;s all of our group info in an array we can iterate through</span>
    <span class="nv">$groups</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="mi">0</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;warriors&#39;</span>
        <span class="p">),</span>
        <span class="mi">1</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;wizards&#39;</span>
        <span class="p">),</span>
        <span class="mi">2</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;hobbits&#39;</span>
        <span class="p">),</span>
        <span class="mi">3</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;visitors&#39;</span>
        <span class="p">),</span>
    <span class="p">);</span>

    <span class="c1">// Iterate and create ARO groups</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$groups</span> <span class="k">as</span> <span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Remember to call create() when saving in loops...</span>
        <span class="nv">$aro</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">();</span>

        <span class="c1">// Save data</span>
        <span class="nv">$aro</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Other action logic goes here...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Once we&#8217;ve got the groups, we can use the ACL console
application to verify the tree structure:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="nx">cake</span> <span class="nx">acl</span> <span class="nx">view</span> <span class="nx">aro</span>

<span class="nx">Aro</span> <span class="nx">tree</span><span class="o">:</span>
<span class="o">---------------------------------------------------------------</span>
  <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="nx">warriors</span>

  <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="nx">wizards</span>

  <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="nx">hobbits</span>

  <span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="nx">visitors</span>

<span class="o">---------------------------------------------------------------</span>
</pre></div>
</div>
<p>The tree is still simple at this point, but at least we&#8217;ve
got some verification that we&#8217;ve got four top-level nodes. Let&#8217;s
add some children to those ARO nodes by putting our specific user
AROs under these groups. Every good citizen of Middle Earth has an
account in our new system, so we&#8217;ll tie these ARO records to
specific model records in our database.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When adding child nodes to a tree, make sure to use the ACL node
ID, rather than a foreign_key value.</p>
</div>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">any_action</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$aro</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Aro</span><span class="p">();</span>

    <span class="c1">// Here are our user records, ready to be linked to new ARO records.</span>
    <span class="c1">// This data could come from a model and be modified, but we&#39;re using static</span>
    <span class="c1">// arrays here for demonstration purposes.</span>

    <span class="nv">$users</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="mi">0</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Aragorn&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parent_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span>
            <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="mi">2356</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="mi">1</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Legolas&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parent_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span>
            <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="mi">6342</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="mi">2</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Gimli&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parent_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span>
            <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="mi">1564</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="mi">3</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Gandalf&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parent_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span>
            <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="mi">7419</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="mi">4</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Frodo&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parent_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span>
            <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="mi">7451</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="mi">5</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Bilbo&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parent_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span>
            <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="mi">5126</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="mi">6</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Merry&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parent_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span>
            <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="mi">5144</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="mi">7</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pippin&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parent_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span>
            <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="mi">1211</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="mi">8</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Gollum&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parent_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span>
            <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="mi">1337</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">);</span>

    <span class="c1">// Iterate and create AROs (as children)</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$users</span> <span class="k">as</span> <span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Remember to call create() when saving in loops...</span>
        <span class="nv">$aro</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">();</span>

        <span class="c1">//Save data</span>
        <span class="nv">$aro</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Other action logic goes here...</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Typically you won&#8217;t supply both an alias and a model/foreign_key,
but we&#8217;re using both here to make the structure of the tree easier
to read for demonstration purposes.</p>
</div>
<p>The output of that console application command should now be a
little more interesting. Let&#8217;s give it a try:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="nx">cake</span> <span class="nx">acl</span> <span class="nx">view</span> <span class="nx">aro</span>

<span class="nx">Aro</span> <span class="nx">tree</span><span class="o">:</span>
<span class="o">---------------------------------------------------------------</span>
  <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="nx">warriors</span>

    <span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="nx">Aragorn</span>

    <span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="nx">Legolas</span>

    <span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="nx">Gimli</span>

  <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="nx">wizards</span>

    <span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="nx">Gandalf</span>

  <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="nx">hobbits</span>

    <span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="nx">Frodo</span>

    <span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="nx">Bilbo</span>

    <span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="nx">Merry</span>

    <span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="nx">Pippin</span>

  <span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="nx">visitors</span>

    <span class="p">[</span><span class="mi">13</span><span class="p">]</span><span class="nx">Gollum</span>

<span class="o">---------------------------------------------------------------</span>
</pre></div>
</div>
<p>Now that we&#8217;ve got our ARO tree setup properly, let&#8217;s discuss a
possible approach for structuring an ACO tree. While we can
put together a more abstract representation of our ACO&#8217;s, it&#8217;s
often more practical to model an ACO tree after CakePHP&#8217;s
Controller/Action setup. We&#8217;ve got five main objects we&#8217;re handling
in this Fellowship scenario. The natural setup for this in a
CakePHP application consists of a group of models, and ultimately the
controllers that manipulate them. Beyond the controllers themselves,
we&#8217;ll want to control access to specific actions in those
controllers.</p>
<p>Let&#8217;s set up an ACO tree that will mimic a CakePHP
app setup. Since we have five ACOs, we&#8217;ll create an ACO tree that
should end up looking something like the following:</p>
<ul class="simple">
<li>Weapons</li>
<li>Rings</li>
<li>PorkChops</li>
<li>DiplomaticEfforts</li>
<li>Ales</li>
</ul>
<p>You can create children nodes under each of these five main ACOs,
but using CakePHP&#8217;s built-in action management covers basic CRUD
operations on a given object. Keeping this in mind will make your
ACO trees smaller and easier to maintain. We&#8217;ll see how these are
used later on when we discuss how to assign permissions.</p>
<p>Since you&#8217;re now a pro at adding AROs, use those same techniques to
create this ACO tree. Create these upper level groups using the
core Aco model.</p>
</div>
<div class="section" id="assigning-permissions">
<h3>Assigning Permissions<a class="headerlink" href="#assigning-permissions" title="Permalink to this headline">¶</a></h3>
<p>After creating our ACOs and AROs, we can finally assign permissions
between the two groups. This is done using CakePHP&#8217;s core Acl
component. Let&#8217;s continue with our example.</p>
<p>Here we&#8217;ll work with Acl permisions in the context of a controller
action. Let&#8217;s set up some basic permissions using the AclComponent in
an action inside our controller:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SomethingsController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="c1">// You might want to place this in the AppController</span>
    <span class="c1">// instead, but here works great too.</span>
    <span class="k">public</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Acl&#39;</span><span class="p">);</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Allow warriors complete access to weapons</span>
        <span class="c1">// Both these examples use the alias syntax</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">allow</span><span class="p">(</span><span class="s1">&#39;warriors&#39;</span><span class="p">,</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">);</span>

        <span class="c1">// Though the King may not want to let everyone</span>
        <span class="c1">// have unfettered access</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">deny</span><span class="p">(</span><span class="s1">&#39;warriors/Legolas&#39;</span><span class="p">,</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">deny</span><span class="p">(</span><span class="s1">&#39;warriors/Gimli&#39;</span><span class="p">,</span>   <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">);</span>

        <span class="k">die</span><span class="p">(</span><span class="nb">print_r</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The first call we make to the AclComponent allows any user under
the &#8216;warriors&#8217; ARO group full access to anything under the
&#8216;Weapons&#8217; ACO group. Here we&#8217;re just addressing ACOs and AROs by
their aliases.</p>
<p>Notice the usage of the third parameter? One nice thing about the CakePHP
ACL setup is that permissions contain four built-in properties related
to CRUD (create, read, update, and delete) actions for convenience. The
default options for that parameter are <code class="docutils literal"><span class="pre">create</span></code>, <code class="docutils literal"><span class="pre">read</span></code>, <code class="docutils literal"><span class="pre">update</span></code>,
and <code class="docutils literal"><span class="pre">delete</span></code> but you can add a column in the <code class="docutils literal"><span class="pre">aros_acos</span></code>
database table (prefixed with _ - for example <code class="docutils literal"><span class="pre">_admin</span></code>) and use
it alongside the defaults.</p>
<p>The second set of calls is an attempt to make a more fine-grained
permission decision. We want Aragorn to keep his full-access
privileges, but we want to deny other warriors in the group the ability to
delete Weapons records. We&#8217;re using the alias syntax to address the
AROs above, but you might want to use the model/foreign key syntax
yourself. What we have above is equivalent to this:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// 6342 = Legolas</span>
<span class="c1">// 1564 = Gimli</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">deny</span><span class="p">(</span>
  <span class="k">array</span><span class="p">(</span><span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span> <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="mi">6342</span><span class="p">),</span>
  <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span>
  <span class="s1">&#39;delete&#39;</span>
<span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">deny</span><span class="p">(</span>
  <span class="k">array</span><span class="p">(</span><span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span> <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="mi">1564</span><span class="p">),</span>
  <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span>
  <span class="s1">&#39;delete&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Addressing a node using the alias syntax uses a slash-delimited
string (&#8216;/users/employees/developers&#8217;). Addressing a node using
model/foreign key syntax uses an array with two parameters:
<code class="docutils literal"><span class="pre">array('model'</span> <span class="pre">=&gt;</span> <span class="pre">'User',</span> <span class="pre">'foreign_key'</span> <span class="pre">=&gt;</span> <span class="pre">8282)</span></code>.</p>
</div>
<p>The next section will help us validate our setup by using the
AclComponent to check the permissions we&#8217;ve just set up.</p>
</div>
<div class="section" id="checking-permissions-the-acl-component">
<span id="checking-permissions"></span><h3>Checking Permissions: The ACL Component<a class="headerlink" href="#checking-permissions-the-acl-component" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s use the AclComponent to make sure dwarves and elves can&#8217;t
remove things from the armory. At this point, we should be able to
use the AclComponent to make a check between the ACOs and AROs
we&#8217;ve created. The basic syntax for making a permissions check is:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">(</span><span class="nv">$aro</span><span class="p">,</span> <span class="nv">$aco</span><span class="p">,</span> <span class="nv">$action</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Let&#8217;s give it a try inside a controller action:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// These all return true:</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">(</span><span class="s1">&#39;warriors/Aragorn&#39;</span><span class="p">,</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">(</span><span class="s1">&#39;warriors/Aragorn&#39;</span><span class="p">,</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span> <span class="s1">&#39;create&#39;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">(</span><span class="s1">&#39;warriors/Aragorn&#39;</span><span class="p">,</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span> <span class="s1">&#39;read&#39;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">(</span><span class="s1">&#39;warriors/Aragorn&#39;</span><span class="p">,</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span> <span class="s1">&#39;update&#39;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">(</span><span class="s1">&#39;warriors/Aragorn&#39;</span><span class="p">,</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">);</span>

    <span class="c1">// Remember, we can use the model/id syntax</span>
    <span class="c1">// for our user AROs</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;User&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">2356</span><span class="p">)),</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">);</span>

    <span class="c1">// These also return true:</span>
    <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">(</span><span class="s1">&#39;warriors/Legolas&#39;</span><span class="p">,</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span> <span class="s1">&#39;create&#39;</span><span class="p">);</span>
    <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">(</span><span class="s1">&#39;warriors/Gimli&#39;</span><span class="p">,</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span> <span class="s1">&#39;read&#39;</span><span class="p">);</span>

    <span class="c1">// But these return false:</span>
    <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">(</span><span class="s1">&#39;warriors/Legolas&#39;</span><span class="p">,</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">);</span>
    <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Acl</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">(</span><span class="s1">&#39;warriors/Gimli&#39;</span><span class="p">,</span> <span class="s1">&#39;Weapons&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The usage here is for demonstration, but this type of checking
can be used to decide whether to allow an action,
show an error message, or redirect the user to
a login.</p>
</div>
</div>
</div>


			</div>
		</div>

		
		<div class="col-md-3 col-md-pull-9 pull-off hidden-xs hidden-sm" lang="en">
			<aside class="sidebar">
				<div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cakephp-overview.html">CakePHP Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../views.html">Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../models.html">Models</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../core-libraries.html">Core Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../toc-general-purpose.html">General Purpose</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc-behaviors.html">Behaviors</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../toc-components.html">Components</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pagination.html">Pagination</a></li>
<li class="toctree-l3"><a class="reference internal" href="flash.html">Flash</a></li>
<li class="toctree-l3"><a class="reference internal" href="sessions.html">Sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="security-component.html">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="request-handling.html">Request Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="cookie.html">Cookie</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Access Control Lists</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../toc-helpers.html">Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toc-utilities.html">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../console-and-shells.html">Shells, Tasks &amp; Console Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices.html">Appendices</a></li>
</ul>

</div>

				</div>
			</aside>
			<aside class="sidebar">
				<div class="mb30 row">
				</div>
			</aside>
		</div>
	</div>
</div>

<section id="socials" class="back-3">
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-4  social text-center">
				<div class="col-sm-3 col-xs-3">
					<div id="fb-root"></div>
						<script>(function(d, s, id) {
						  var js, fjs = d.getElementsByTagName(s)[0];
						  if (d.getElementById(id)) return;
						  js = d.createElement(s); js.id = id;
						  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
						  fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));
						</script>
						<div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
					<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
				</div>
			</div>

			<div class="col-xs-12 col-sm-12 col-md-8 social-footer text-center ">
				<a href="#">发现翻译错误? 请在下面留言</a>
				<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">我要加入翻译</a>
				<a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
				<a href="http://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
				<a href="http://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
				<a href="http://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
				<a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
				<a href="http://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
				<a href="http://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
				<a href="http://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
			</div>
		</div>
	</div>
</section>

<footer id="footer" class="footer-wrapper">
	<div class="container">

		<div class="row col-p30">
			<div class="col-sm-12 col-md-3">
				<div class="footer-widget t-footer">
					<div class="col-md-12">
						<a href="https://www.openhub.net/p/cakephp">
							<img src="../../_static/open-hub.png">
						</a>
						<div class="mt10">
							<a href="https://www.rackspace.com/">
								<img src="../../_static/rackspace.png">
							</a>
						</div>
					</div>
				</div>
			</div>

			<div class="col-sm-12 col-md-9">
				<div class="col-md-3 col-sm-6 business-solution">
					<ul class="footer-menu">
						<li class="menu-title">
	<a href="http://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
	<a href="http://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 text-center mt30">
				<p class="copyright">
							&copy; Copyright 2016, Cake Software Foundation, Inc.
						Last updated on Aug 02, 2016.
						Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
				</p>
			</div>
		</div>
	</div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-743287-3']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
  </body>
</html>