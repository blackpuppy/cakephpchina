
<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Scaffolding" lang="en" name="title" />
<meta content="database schemas,loose structure,scaffolding,scaffold,php class,database tables,web developer,downside,web application,logic,developers,cakephp,running,current,delete,database application" lang="en" name="keywords" />

    <title>Scaffolding &mdash; CakePHP Cookbook 2.x documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/app.js"></script>
    <script type="text/javascript" src="../_static/modernizr.foundation.js"></script>
    <script type="text/javascript" src="../_static/foundation.js"></script>
    <link rel="top" title="CakePHP Cookbook 2.x documentation" href="../index.html" />
    <link rel="up" title="Controllers" href="../controllers.html" />
    <link rel="next" title="The Pages Controller" href="pages-controller.html" />
    <link rel="prev" title="Request and Response objects" href="request-response.html" />
<link href="../_static/favicon.ico" type="image/x-icon" rel="icon" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="alternate" hreflang="pt" href="../../pt/controllers/scaffolding.html" /><link rel="alternate" hreflang="es" href="../../es/controllers/scaffolding.html" /><link rel="alternate" hreflang="ja" href="../../ja/controllers/scaffolding.html" /><link rel="alternate" hreflang="fr" href="../../fr/controllers/scaffolding.html" /><link rel="alternate" hreflang="zh_CN" href="../../zh/controllers/scaffolding.html" />

<link rel="search" type="application/opensearchdescription+xml" title="CakePHP Book 2.x Search" href="../_static/opensearchdescription-book-2-x.xml">
<script type="text/javascript">
window.lang = "en";
</script>

  </head>
  <body>

<div id="container">

<div id="cakephp-global-navigation">
	<ul>
		<li class="main"><a href="http://cakephp.org">CakePHP</a></li>
		<li class="primary"><a href="#" class="empty">Downloads</a>
			<ul class="second-level">
				<li><a href="https://github.com/cakephp/cakephp/tags">Releases</a></li>
				<li><a href="http://pear.cakephp.org">Pear channel</a></li>
			</ul>
		</li>
		<li class="primary"><a href="#" class="empty">Documentation</a>
			<ul class="second-level">
				<li><a href="http://api.cakephp.org">API</a></li>
				<li><a href="http://book.cakephp.org">Book</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://community.cakephp.org">Community</a>
			<ul class="second-level">
				<li><a href="http://webchat.freenode.net/?channels=cakephp&uio=MT1mYWxzZSY5PXRydWUmMTE9MjQ2b8">Help &amp; Support</a></li>
				<li><a href="https://github.com/cakephp/cakephp/issues">Issues</a></li>
				<li><a href="http://bakery.cakephp.org">The Bakery</a></li>
				<li><a href="http://stackoverflow.com/tags/cakephp">Stack Overflow</a></li>
				<li><a href="http://www.facebook.com/groups/cake.community">Facebook Group</a></li>
				<li><a href="http://goo.gl/mSC0s">Google+ Community</a></li>
				<li><a href="http://www.youtube.com/user/CakePHP">YouTube Channel</a></li>
				<li><a href="http://podcast.cakephp.org">CakePHP Podcast</a></li>
				<li><a href="http://twitter.com/CakePHP">Follow us on Twitter</a></li>
				<li><a href="http://groups.google.com/group/cake-php">Google Group</a></li>
				<li><a href="http://github.com/cakephp/cakephp/contributors">Contributors</a></li>
				<li><a href="http://plugins.cakephp.org">Plugins &amp; Packages</a></li>
				<li><a href="http://community.cakephp.org/get-involved">Get Involved</a></li>
				<li><a href="http://community.cakephp.org/guidelines">Guidelines</a></li>
				<li><a href="http://cakefest.org">CakeFest</a></li>
				<li><a href="http://cakephp.org/logos">Logo</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://cakephp.org/services">Services</a>
			<ul class="second-level">
				<li><a href="http://certification.cakephp.org">Certification</a></li>
				<li><a href="http://cakephp.org/services/consultation">Consultation</a></li>
				<li><a href="http://cakephp.org/services/support">Support</a></li>
				<li><a href="http://training.cakephp.org">Training</a></li>
			</ul>
		</li>
	</ul>
</div>

<div class="masthead">
	<div class="header-backing"></div>
	<div class="searchbar row">
		<div class="columns three phone-one">
			<a class="logo" href="../contents.html">
			<img src="../_static/cake-logo.png" alt="CakePHP" width="70" />
			</a>
		</div>
		
<div id="searchbox" class="columns nine phone-three">

	<form id="searchform" class="search" action="../search.html" method="get">
		<input class="search-input" autocomplete="off" type="search" name="q" size="18" />
		<input class="search-submit search-big button red" type="submit" value="Search" />
		<input type="hidden" name="check_keywords" value="yes" />
		<input type="hidden" name="area" value="default" />

		<a href="#" id="tablet-nav" class="show-on-phones pale button small">Nav</a>
	</form>

</div>
	</div>
</div>
<div class="breadcrumb-header">
	<div class="related row">
		<div class="columns three root-link">
			<a href="../contents.html">Cookbook 2.x</a>
		</div>
		<div class="columns nine">
			<ul class="inline breadcrumb">
			<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
				<a href="../controllers.html" accesskey="U" itemprop="url"><span itemprop="title">Controllers</span></a>
			</li>
			</ul>
			<div class="versions dropdown">
				<a href="#">2.x Book</a>
				<ul>
					<li><a href="http://book.cakephp.org/3.0/en">3.0 Book</a></li>
					<li><a href="http://book.cakephp.org/1.3/en/">1.3 Book</a></li>
					<li><a href="http://book.cakephp.org/1.2/en/">1.2 Book</a></li>
					<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
				</ul>
			</div>

			<div class="languages dropdown">
				<a href="#">en</a>

				<ul>
				
					<li></li>
				
					<li><a href="../../pt/controllers/scaffolding.html">pt</a></li>
				
					<li><a href="../../es/controllers/scaffolding.html">es</a></li>
				
					<li><a href="../../ja/controllers/scaffolding.html">ja</a></li>
				
					<li><a href="../../fr/controllers/scaffolding.html">fr</a></li>
				
					<li><a href="../../zh/controllers/scaffolding.html">zh_CN</a></li>
				
				</ul>
			</div>
		</div>
	</div>
</div>

<div class="content row">
	<div class="document columns nine push-three">
		<div class="body"><a class="button pale improve" href="https://github.com/cakephp/docs/edit/master/en/controllers/scaffolding.rst" target="_blank">Improve this Doc</a>
  <div class="section" id="scaffolding">
<h1>Scaffolding<a class="headerlink" href="#scaffolding" title="Permalink to this headline">¶</a></h1>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 2.5: </span>Dynamic scaffolding will be removed and replaced in 3.0</p>
</div>
<p>Application scaffolding is a technique that allows a developer to
define and create a basic application that can create, retrieve,
update and delete objects. Scaffolding in CakePHP also allows
developers to define how objects are related to each other, and to
create and break those links.</p>
<p>All that&#8217;s needed to create a scaffold is a model and its
controller. Once you set the $scaffold variable in the controller,
you&#8217;re up and running.</p>
<p>CakePHP&#8217;s scaffolding is pretty cool. It allows you to get a basic
CRUD application up and going in minutes. It&#8217;s so cool that you&#8217;ll want
to use it in production apps. Now, we think it&#8217;s cool too, but
please realize that scaffolding is... well... just scaffolding.
It&#8217;s a loose structure you throw up real quick during the beginning
of a project in order to get started. It isn&#8217;t meant to be
completely flexible, it&#8217;s meant as a temporary way to get up and
going. If you find yourself really wanting to customize your logic
and your views, it&#8217;s time to pull your scaffolding down in order to
write some code. CakePHP&#8217;s <a class="reference internal" href="../console-and-shells.html"><em>bake console</em></a>, covered in the next
section, is a great next step: it generates all the code that would
produce the same result as the most current scaffold.</p>
<p>Scaffolding is a great way of getting the early parts of developing
a web application started. Early database schemas are subject to
change, which is perfectly normal in the early part of the design
process. This has a downside: a web developer hates creating forms
that never will see real use. To reduce the strain on the
developer, scaffolding has been included in CakePHP. Scaffolding
analyzes your database tables and creates standard lists with add,
delete and edit buttons, standard forms for editing and standard
views for inspecting a single item in the database.</p>
<p>To add scaffolding to your application, in the controller, add the
<tt class="docutils literal"><span class="pre">$scaffold</span></tt> variable:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">CategoriesController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$scaffold</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Assuming you&#8217;ve created even the most basic Category model class
file (in <tt class="docutils literal"><span class="pre">app/Model/Category.php</span></tt>), you&#8217;re ready to go. Visit
<a class="reference external" href="http://example.com/categories">http://example.com/categories</a> to see your new scaffold.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Creating methods in controllers that are scaffolded can cause
unwanted results. For example, if you create an <tt class="docutils literal"><span class="pre">index()</span></tt> method in a
scaffolded controller, your index method will be rendered rather
than the scaffolding functionality.</p>
</div>
<p>Scaffolding is aware of model&#8217;s associations; so, if your
Category model <tt class="docutils literal"><span class="pre">belongsTo</span></tt> User, you&#8217;ll see related User IDs in the
Category listings. While scaffolding &#8220;knows&#8221; about model&#8217;s
associations, you will not see any related records in the scaffold
views until you manually add the association code to the model. For
example, if Group <tt class="docutils literal"><span class="pre">hasMany</span></tt> User and User <tt class="docutils literal"><span class="pre">belongsTo</span></tt> Group, you have
to manually add the following code to your User and Group models.
Before you do it, the view displays an empty
select input for Group in the New User form; after – populated with IDs
or names from the Group table in the New User form:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="c1">// In Group.php</span>
<span class="k">public</span> <span class="nv">$hasMany</span> <span class="o">=</span> <span class="s1">&#39;User&#39;</span><span class="p">;</span>
<span class="c1">// In User.php</span>
<span class="k">public</span> <span class="nv">$belongsTo</span> <span class="o">=</span> <span class="s1">&#39;Group&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>If you&#8217;d rather see something besides an ID (like the user&#8217;s first
name), you can set the <tt class="docutils literal"><span class="pre">$displayField</span></tt> variable in the model. Let&#8217;s
set the <tt class="docutils literal"><span class="pre">$displayField</span></tt> variable in our User class so that users
related to categories will be shown by first name rather than just
by ID in scaffolding. This feature makes scaffolding more readable
in many instances:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">AppModel</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$displayField</span> <span class="o">=</span> <span class="s1">&#39;first_name&#39;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="creating-a-simple-admin-interface-with-scaffolding">
<h2>Creating a simple admin interface with scaffolding<a class="headerlink" href="#creating-a-simple-admin-interface-with-scaffolding" title="Permalink to this headline">¶</a></h2>
<p>If you have enabled admin routing in your <tt class="docutils literal"><span class="pre">app/Config/core.php</span></tt> with
<tt class="docutils literal"><span class="pre">Configure::write('Routing.prefixes',</span> <span class="pre">array('admin'));</span></tt>, you can
use scaffolding to generate an admin interface.</p>
<p>Once you have enabled admin routing, assign your admin prefix to the
scaffolding variable:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="nv">$scaffold</span> <span class="o">=</span> <span class="s1">&#39;admin&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>You will now be able to access admin scaffolded actions:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nx">http</span><span class="o">://</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">admin</span><span class="o">/</span><span class="nx">controller</span><span class="o">/</span><span class="nx">index</span>
<span class="nx">http</span><span class="o">://</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">admin</span><span class="o">/</span><span class="nx">controller</span><span class="o">/</span><span class="nx">view</span>
<span class="nx">http</span><span class="o">://</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">admin</span><span class="o">/</span><span class="nx">controller</span><span class="o">/</span><span class="nx">edit</span>
<span class="nx">http</span><span class="o">://</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">admin</span><span class="o">/</span><span class="nx">controller</span><span class="o">/</span><span class="nx">add</span>
<span class="nx">http</span><span class="o">://</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">admin</span><span class="o">/</span><span class="nx">controller</span><span class="o">/</span><span class="nx">delete</span>
</pre></div>
</div>
<p>This is an easy way to create a simple backend interface quickly.
Keep in mind that you cannot have both admin and non-admin methods
scaffolded at the same time. As with normal scaffolding, you can
override individual methods and replace them with your own:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">admin_view</span><span class="p">(</span><span class="nv">$id</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// custom code here</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Once you have replaced a scaffolded action, you will need to create
a view file for the action as well.</p>
</div>
<div class="section" id="customizing-scaffold-views">
<h2>Customizing Scaffold Views<a class="headerlink" href="#customizing-scaffold-views" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;re looking for something a little different in your
scaffolded views, you can create templates. We still don&#8217;t
recommend using this technique for production applications, but
such a customization may be useful during prototyping iterations.</p>
<p>Custom scaffolding views for a specific controller
(PostsController in this example) should be placed like so:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nx">app</span><span class="o">/</span><span class="nx">View</span><span class="o">/</span><span class="nx">Posts</span><span class="o">/</span><span class="nx">scaffold</span><span class="o">.</span><span class="nx">index</span><span class="o">.</span><span class="nx">ctp</span>
<span class="nx">app</span><span class="o">/</span><span class="nx">View</span><span class="o">/</span><span class="nx">Posts</span><span class="o">/</span><span class="nx">scaffold</span><span class="o">.</span><span class="nx">form</span><span class="o">.</span><span class="nx">ctp</span>
<span class="nx">app</span><span class="o">/</span><span class="nx">View</span><span class="o">/</span><span class="nx">Posts</span><span class="o">/</span><span class="nx">scaffold</span><span class="o">.</span><span class="nx">view</span><span class="o">.</span><span class="nx">ctp</span>
</pre></div>
</div>
<p>Custom scaffolding views for all controllers should be placed like so:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span class="nx">app</span><span class="o">/</span><span class="nx">View</span><span class="o">/</span><span class="nx">Scaffolds</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">ctp</span>
<span class="nx">app</span><span class="o">/</span><span class="nx">View</span><span class="o">/</span><span class="nx">Scaffolds</span><span class="o">/</span><span class="nx">form</span><span class="o">.</span><span class="nx">ctp</span>
<span class="nx">app</span><span class="o">/</span><span class="nx">View</span><span class="o">/</span><span class="nx">Scaffolds</span><span class="o">/</span><span class="nx">view</span><span class="o">.</span><span class="nx">ctp</span>
</pre></div>
</div>
</div>
</div>


		</div>
	</div>

	<div class="sidebar columns three pull-nine">
<div id="sidebar-navigation" class="hide-on-phones">
	<h2 class="hide-on-desktops">Table of Contents</h2>
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cakephp-overview.html">CakePHP Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../controllers.html">Controllers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="request-response.html">Request and Response objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="request-response.html#cakerequest">CakeRequest</a></li>
<li class="toctree-l2"><a class="reference internal" href="request-response.html#cakeresponse">CakeResponse</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Scaffolding</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pages-controller.html">The Pages Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html">Components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries.html">Core Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Console and Shells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Appendices</a></li>
</ul>

</div>

<div class="page-contents">
	<h3>Page contents</h3>
	<ul>
<li><a class="reference internal" href="#">Scaffolding</a><ul>
<li><a class="reference internal" href="#creating-a-simple-admin-interface-with-scaffolding">Creating a simple admin interface with scaffolding</a></li>
<li><a class="reference internal" href="#customizing-scaffold-views">Customizing Scaffold Views</a></li>
</ul>
</li>
</ul>

</div>
	</div>

</div>

<div class="content row">
	<ul class="related-pages inline">
	<li>
		<a href="../genindex.html" title="General Index" accesskey="I">index</a>
	</li>
	<li>
		<a href="pages-controller.html" title="The Pages Controller" accesskey="N">next</a>
	</li>
	<li>
		<a href="request-response.html" title="Request and Response objects" accesskey="P">previous</a>
	</li>
	</ul>
</div>

	<div class="footer-push"> </div>
</div>






<div class="footer">
	<div class="row">
		<div class="columns six offset-by-three contribute">
			<strong>发现翻译错误?</strong>
			请在下面留言<br />
			<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">[ 我要加入翻译 ]</a>
		</div>
	</div>
	
	<div class="row">
		<div class="columns nine offset-by-three copyright">
					&copy; Copyright 2014, Cake Software Foundation, Inc.
				Last updated on Nov 19, 2015.
				Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
		</div>
	</div>
</div>

<div id="nav-modal" class="reveal-modal"> </div>
<div id="inline-search-results"></div>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F201cbc61deaf9f7ffb521fb23e83db40' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cakephpchina"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->

<!-- Grunt Live Reload -->
<script src="http://192.168.56.113:35729/livereload.js"></script>
  </body>
</html>