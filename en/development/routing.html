

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Routing" lang="en" name="title" />
<meta content="controller actions,default routes,mod rewrite,code index,string url,php class,incoming requests,dispatcher,url url,meth,maps,match,parameters,array,config,cakephp,apache,router" lang="en" name="keywords" />

    <title>Routing</title>
    <link href="../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../_static/app.js"></script>

    <link rel="alternate" hreflang="pt" href="../../pt/development/routing.html" /><link rel="alternate" hreflang="es" href="../../es/development/routing.html" /><link rel="alternate" hreflang="ja" href="../../ja/development/routing.html" /><link rel="alternate" hreflang="fr" href="../../fr/development/routing.html" /><link rel="alternate" hreflang="zh" href="../../zh/development/routing.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 2.x documentation" href="../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 2.x documentation" href="../index.html" />
    <link rel="up" title="Development" href="../development.html" />
    <link rel="next" title="Sessions" href="sessions.html" />
    <link rel="prev" title="Configuration" href="configuration.html" />

    <script type="text/javascript">
    window.lang = "en";
    </script>
  </head>
  <body>

<div id="container">
	
	<header class="nav-down">
		<div class="container-fluid hidden-xs hidden-sm">
			<div class="row">
				<div class="col-sm-3 col-md-3">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-9 col-md-9">
					<nav class="navbar-right">
						<ul class="menu">
							<li class="first">
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
								<ul class="submenu">
									
<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
								</ul>
							</li>

							<li><a href="http://cakephp.org/business-solutions">Business Solutions</a></li>
							<li><a href="http://cakephp.org/showcase">Showcase</a></li>

							<li>
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
								<div class="megamenu full">
									<div class="row">
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
											</ul>
										</div>
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
											</ul>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>

		
		<div class="container-fluid hidden-md hidden-lg">
			<div class="row">
				<div class="col-sm-6 col-xs-6">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-6 col-xs-6">
					<div class="navbar-right">
						<button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
							<i class="fa fa-bars toggle-modal"></i>
						</button>
					</div>
					<div id="wrap">
						<form class="search" action="../search.html" method="get">
							<input name="q" type="search" placeholder="What are you looking for?">
							<input id="search_submit" value="Search" type="submit">
						</form>
					</div>
				</div>
			</div>
		</div>

		
		<section id="nav-cook" class="hidden-xs hidden-sm">
			<div class="container-fluid ">
				<div class="row ">
					<div class="col-md-12 back-book">
						<div class="col-md-4 col-md-offset-1 text-center t-cook-nav p0 hidden-sm hidden-xs">
							<h2>
								<a href="../contents.html">
									<span class="glyph_range icon-submenu icon-submenu-cook">B</span>
									CakePHP 2.x <strong>Cookbook</strong>
								</a>
							</h2>
						</div>

						<div class="col-md-4 hidden-sm">
							<form class="search" action="../search.html" method="get">
								<input type="hidden" name="check_keywords" value="yes" />
								<input type="hidden" name="area" value="default" />

								<div class="col-md-10 p0">
									<input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
								</div>
								<div class="col-md-2 p0 search-cook">
									<button type="submit">
										<span class="glyph_range icon-submenu icon-submenu-cook">A</span>
									</button>
								</div>
							</form>
						</div>

						
						<div class="col-md-3">
							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Language:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
													role="button" aria-haspopup="true" aria-expanded="false" href="#">
														en
														<i class="fa fa-menu-en fa-chevron-down"></i>
													</a>
											<ul class="dropdown-menu">
											
												<li></li>
											
												<li><a href="../../pt/development/routing.html">pt</a></li>
											
												<li><a href="../../es/development/routing.html">es</a></li>
											
												<li><a href="../../ja/development/routing.html">ja</a></li>
											
												<li><a href="../../fr/development/routing.html">fr</a></li>
											
												<li><a href="../../zh/development/routing.html">zh</a></li>
											
											</ul>
										</li>
									</ul>
								</div>
							</div>

							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Version:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">2.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
											<ul class="dropdown-menu">
												<li><a href="http://book.cakephp.org/3.0/en">3.x Book</a></li>
												<li><a href="http://book.cakephp.org/2.0/en">2.x Book</a></li>
												<li><a href="http://book.cakephp.org/1.3/en/">1.3 Book</a></li>
												<li><a href="http://book.cakephp.org/1.2/en/">1.2 Book</a></li>
												<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
											</ul>
										</li>
									</ul>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</section>
	</header>

	
	<section class="nav-btn visible-sm visible-xs">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
				</div>

				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
				</div>
			</div>
		</div>
	</section>

	
	<div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title-cookbook" id="modal-header"></h4>
				</div>
				<div class="modal-body"></div>
			</div>
		</div>
	</div>

<div class="container page-container"><div id="improve-slideout">
		<i class="fa fa-pencil icon-improve"></i>
		<a href="https://github.com/cakephp/docs/edit/master/en/development/routing.rst" target="_blank">
			<div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
		</a>
	</div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

	
	<div class="row">
		<div class="col-sm-12 col-md-9 col-md-push-3 space-left push-off"><div class="page-contents col-sm-5">
				<h3>Page Contents</h3>
				<ul>
<li><a class="reference internal" href="#">Routing</a><ul>
<li><a class="reference internal" href="#routes-configuration">Routes Configuration</a></li>
<li><a class="reference internal" href="#default-routing">Default Routing</a></li>
<li><a class="reference internal" href="#connecting-routes">Connecting Routes</a><ul>
<li><a class="reference internal" href="#route-elements">Route Elements</a></li>
<li><a class="reference internal" href="#passing-parameters-to-action">Passing Parameters to Action</a></li>
<li><a class="reference internal" href="#per-route-named-parameters">Per-Route Named Parameters</a></li>
<li><a class="reference internal" href="#prefix-routing">Prefix Routing</a></li>
<li><a class="reference internal" href="#plugin-routing">Plugin Routing</a></li>
<li><a class="reference internal" href="#file-extensions">File Extensions</a></li>
<li><a class="reference internal" href="#using-additional-conditions-when-matching-routes">Using Additional Conditions When Matching Routes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#passed-arguments">Passed Arguments</a></li>
<li><a class="reference internal" href="#named-parameters">Named Parameters</a><ul>
<li><a class="reference internal" href="#controlling-named-parameters">Controlling Named Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reverse-routing">Reverse Routing</a></li>
<li><a class="reference internal" href="#redirect-routing">Redirect Routing</a></li>
<li><a class="reference internal" href="#disabling-the-default-routes">Disabling the Default Routes</a></li>
<li><a class="reference internal" href="#custom-route-classes">Custom Route Classes</a></li>
<li><a class="reference internal" href="#router-api">Router API</a></li>
</ul>
</li>
</ul>

			</div><div class="document-body">
			
  <div class="section" id="routing">
<h1>Routing<a class="headerlink" href="#routing" title="Permalink to this headline">¶</a></h1>
<p>Routing is a feature that maps URLs to controller actions. It was
added to CakePHP to make pretty URLs more configurable and
flexible. Using Apache&#8217;s mod_rewrite is not required for using
routes, but it will make your address bar look much more tidy.</p>
<p>Routing in CakePHP also encompasses the idea of reverse routing,
where an array of parameters can be reversed into a string URL.
By using reverse routing, you can easily re-factor your application&#8217;s
URL structure without having to update all your code.</p>
<div class="section" id="routes-configuration">
<span id="index-0"></span><span id="id1"></span><h2>Routes Configuration<a class="headerlink" href="#routes-configuration" title="Permalink to this headline">¶</a></h2>
<p>Routes in an application are configured in <code class="docutils literal"><span class="pre">app/Config/routes.php</span></code>.
This file is included by the <code class="xref php php-class docutils literal"><span class="pre">Dispatcher</span></code> when handling routes
and allows you to define application specific routes you want used. Routes
declared in this file are processed top to bottom when incoming requests
are matched. This means that the order you place routes can affect how
routes are parsed. It&#8217;s generally a good idea to place most frequently
visited routes at the top of the routes file if possible. This will
save having to check a number of routes that won&#8217;t match on each request.</p>
<p>Routes are parsed and matched, in the order they are connected in.
If you define two similar routes, the first defined route will
have higher priority over the one defined latter. After connecting routes you
can manipulate the order of routes using <a class="reference internal" href="#Router::promote" title="Router::promote"><code class="xref php php-meth docutils literal"><span class="pre">Router::promote()</span></code></a>.</p>
<p>CakePHP also comes with a few default routes to get you started. These
can be disabled later on once you are sure you don&#8217;t need them.
See <a class="reference internal" href="#disabling-default-routes"><span class="std std-ref">Disabling the Default Routes</span></a> on how to disable the default routing.</p>
</div>
<div class="section" id="default-routing">
<h2>Default Routing<a class="headerlink" href="#default-routing" title="Permalink to this headline">¶</a></h2>
<p>Before you learn about configuring your own routes, you should know
that CakePHP comes configured with a default set of routes.
CakePHP&#8217;s default routing will get you pretty far in any
application. You can access an action directly via the URL by
putting its name in the request. You can also pass parameters to
your controller actions using the URL.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// URL pattern default routes:</span>
<span class="nx">http</span><span class="o">://</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">controller</span><span class="o">/</span><span class="nx">action</span><span class="o">/</span><span class="nx">param1</span><span class="o">/</span><span class="nx">param2</span><span class="o">/</span><span class="nx">param3</span>
</pre></div>
</div>
<p>The URL /posts/view maps to the view() action of the
PostsController, and /products/view_clearance maps to the
view_clearance() action of the ProductsController. If no action is
specified in the URL, the index() method is assumed.</p>
<p>The default routing setup also allows you to pass parameters to
your actions using the URL. A request for /posts/view/25 would be
equivalent to calling view(25) on the PostsController, for
example. The default routing also provides routes for plugins,
and prefix routes should you choose to use those features.</p>
<p>The built-in routes live in <code class="docutils literal"><span class="pre">Cake/Config/routes.php</span></code>. You can
disable the default routing by removing them from your application&#8217;s
<a class="reference internal" href="../appendices/glossary.html#term-routes-php"><span class="xref std std-term">routes.php</span></a> file.</p>
</div>
<div class="section" id="connecting-routes">
<span id="index-1"></span><span id="id2"></span><h2>Connecting Routes<a class="headerlink" href="#connecting-routes" title="Permalink to this headline">¶</a></h2>
<p>Defining your own routes allows you to define how your application
will respond to a given URL. Define your own routes in the
<code class="docutils literal"><span class="pre">app/Config/routes.php</span></code> file using the <a class="reference internal" href="#Router::connect" title="Router::connect"><code class="xref php php-meth docutils literal"><span class="pre">Router::connect()</span></code></a>
method.</p>
<p>The <code class="docutils literal"><span class="pre">connect()</span></code> method takes up to three parameters: the URL you
wish to match, the default values for your route elements, and
regular expression rules to help the router match elements in the
URL.</p>
<p>The basic format for a route definition is:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;URL&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;defaultValue&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;option&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;matchingRegex&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The first parameter is used to tell the router what sort of URL
you&#8217;re trying to control. The URL is a normal slash delimited
string, but can also contain a wildcard (*) or <a class="reference internal" href="#route-elements"><span class="std std-ref">Route Elements</span></a>.
Using a wildcard tells the router that you are willing to accept
any additional arguments supplied. Routes without a * only match
the exact template pattern supplied.</p>
<p>Once you&#8217;ve specified a URL, you use the last two parameters of
<code class="docutils literal"><span class="pre">connect()</span></code> to tell CakePHP what to do with a request once it has
been matched. The second parameter is an associative array. The
keys of the array should be named after the route elements in the
URL, or the default elements: <code class="docutils literal"><span class="pre">:controller</span></code>, <code class="docutils literal"><span class="pre">:action</span></code>, and <code class="docutils literal"><span class="pre">:plugin</span></code>.
The values in the array are the default values for those keys.
Let&#8217;s look at some basic examples before we start using the third
parameter of connect():</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/pages/*&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;display&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This route is found in the routes.php file distributed with CakePHP.
This route matches any URL starting with <code class="docutils literal"><span class="pre">/pages/</span></code> and
hands it to the <code class="docutils literal"><span class="pre">display()</span></code> action of the <code class="docutils literal"><span class="pre">PagesController();</span></code>
The request /pages/products would be mapped to
<code class="docutils literal"><span class="pre">PagesController-&gt;display('products')</span></code>.</p>
<p>In addition to the greedy star <code class="docutils literal"><span class="pre">/*</span></code> there is also the <code class="docutils literal"><span class="pre">/**</span></code> trailing star
syntax. Using a trailing double star, will capture the remainder of a URL as a
single passed argument. This is useful when you want to use an argument that
included a <code class="docutils literal"><span class="pre">/</span></code> in it:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/pages/**&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;show&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The incoming URL of <code class="docutils literal"><span class="pre">/pages/the-example-/-and-proof</span></code> would result in a single
passed argument of <code class="docutils literal"><span class="pre">the-example-/-and-proof</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1: </span>The trailing double star was added in 2.1.</p>
</div>
<p>You can use the second parameter of <a class="reference internal" href="#Router::connect" title="Router::connect"><code class="xref php php-meth docutils literal"><span class="pre">Router::connect()</span></code></a>
to provide any routing parameters that are composed of the default values
of the route:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/government&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This example shows how you can use the second parameter of
<code class="docutils literal"><span class="pre">connect()</span></code> to define default parameters. If you built a site
that features products for different categories of customers, you
might consider creating a route. This allows you link to
<code class="docutils literal"><span class="pre">/government</span></code> rather than <code class="docutils literal"><span class="pre">/pages/display/5</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Although you can connect alternate routes, the default routes
will continue to work. In this setting, you can access a single piece of
content from 2 different URLs. See <a class="reference internal" href="#disabling-default-routes"><span class="std std-ref">Disabling the Default Routes</span></a> to
disable default routes, and only provide the URLs you define.</p>
</div>
<p>Another common use for the Router is to define an &#8220;alias&#8221; for a
controller. Let&#8217;s say that instead of accessing our regular URL at
<code class="docutils literal"><span class="pre">/users/some_action/5</span></code>, we&#8217;d like to be able to access it by
<code class="docutils literal"><span class="pre">/cooks/some_action/5</span></code>. The following route easily takes care of
that:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/cooks/:action/*&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;users&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This is telling the Router that any url beginning with <code class="docutils literal"><span class="pre">/cooks/</span></code>
should be sent to the users controller. The action called will
depend on the value of the <code class="docutils literal"><span class="pre">:action</span></code> parameter. By using
<a class="reference internal" href="#route-elements"><span class="std std-ref">Route Elements</span></a>, you can create variable routes, that accept
user input or variables. The above route also uses the greedy star.
The greedy star indicates to <a class="reference internal" href="#Router" title="Router"><code class="xref php php-class docutils literal"><span class="pre">Router</span></code></a> that this route
should accept any additional positional arguments given. These
arguments will be made available in the <a class="reference internal" href="#passed-arguments"><span class="std std-ref">Passed Arguments</span></a>
array.</p>
<p>When generating URLs, routes are used too. Using
<code class="docutils literal"><span class="pre">array('controller'</span> <span class="pre">=&gt;</span> <span class="pre">'users',</span> <span class="pre">'action'</span> <span class="pre">=&gt;</span> <span class="pre">'some_action',</span> <span class="pre">5)</span></code> as
a url will output /cooks/some_action/5 if the above route is the
first match found.</p>
<p>By default all named and passed arguments are extracted from URLs matching
greedy templates. However, you can configure how and which named arguments are
parsed using <a class="reference internal" href="#Router::connectNamed" title="Router::connectNamed"><code class="xref php php-meth docutils literal"><span class="pre">Router::connectNamed()</span></code></a> if you need to.</p>
<div class="section" id="route-elements">
<span id="id3"></span><h3>Route Elements<a class="headerlink" href="#route-elements" title="Permalink to this headline">¶</a></h3>
<p>You can specify your own route elements and doing so gives you the
power to define places in the URL where parameters for controller
actions should lie. When a request is made, the values for these
route elements are found in <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;params</span></code> on the controller.
This is different than how named parameters are handled, so note the
difference: named parameters (/controller/action/name:value) are
found in <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;params['named']</span></code>, whereas custom route
element data is found in <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;params</span></code>. When you define
a custom route element, you can optionally specify a regular
expression - this tells CakePHP how to know if the URL is correctly formed or not.
If you choose to not provide a regular expression, any non <code class="docutils literal"><span class="pre">/</span></code> will be
treated as part of the parameter:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/:controller/:id&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[0-9]+&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This simple example illustrates how to create a quick way to view
models from any controller by crafting a URL that looks like
<code class="docutils literal"><span class="pre">/controllername/:id</span></code>. The URL provided to connect() specifies two
route elements: <code class="docutils literal"><span class="pre">:controller</span></code> and <code class="docutils literal"><span class="pre">:id</span></code>. The <code class="docutils literal"><span class="pre">:controller</span></code> element
is a CakePHP default route element, so the router knows how to match and
identify controller names in URLs. The <code class="docutils literal"><span class="pre">:id</span></code> element is a custom
route element, and must be further clarified by specifying a
matching regular expression in the third parameter of connect().</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Patterns used for route elements must not contain any capturing
groups. If they do, Router will not function correctly.</p>
</div>
<p>Once this route has been defined, requesting <code class="docutils literal"><span class="pre">/apples/5</span></code> is the same
as requesting <code class="docutils literal"><span class="pre">/apples/view/5</span></code>. Both would call the view() method of
the ApplesController. Inside the view() method, you would need to
access the passed ID at <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;params['id']</span></code>.</p>
<p>If you have a single controller in your application and you do not want
the controller name to appear in the URL, you can map all URLs to actions
in your controller. For example, to map all URLs to actions of the
<code class="docutils literal"><span class="pre">home</span></code> controller, e.g have URLs like <code class="docutils literal"><span class="pre">/demo</span></code> instead of
<code class="docutils literal"><span class="pre">/home/demo</span></code>, you can do the following:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:action&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;home&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>If you would like to provide a case insensitive URL, you can use regular
expression inline modifiers:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/:userShortcut&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;teachers&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;userShortcut&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;(?i:principal)&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>One more example, and you&#8217;ll be a routing pro:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/:controller/:year/:month/:day&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;year&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[12][0-9]{3}&#39;</span><span class="p">,</span>
        <span class="s1">&#39;month&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;0[1-9]|1[012]&#39;</span><span class="p">,</span>
        <span class="s1">&#39;day&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;0[1-9]|[12][0-9]|3[01]&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This is rather involved, but shows how powerful routes can really
become. The URL supplied has four route elements. The first is
familiar to us: it&#8217;s a default route element that tells CakePHP to
expect a controller name.</p>
<p>Next, we specify some default values. Regardless of the controller,
we want the index() action to be called.</p>
<p>Finally, we specify some regular expressions that will match years,
months and days in numerical form. Note that parenthesis (grouping)
are not supported in the regular expressions. You can still specify
alternates, as above, but not grouped with parenthesis.</p>
<p>Once defined, this route will match <code class="docutils literal"><span class="pre">/articles/2007/02/01</span></code>,
<code class="docutils literal"><span class="pre">/posts/2004/11/16</span></code>, handing the requests to
the index() actions of their respective controllers, with the date
parameters in <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;params</span></code>.</p>
<p>There are several route elements that have special meaning in
CakePHP, and should not be used unless you want the special meaning</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">controller</span></code> Used to name the controller for a route.</li>
<li><code class="docutils literal"><span class="pre">action</span></code> Used to name the controller action for a route.</li>
<li><code class="docutils literal"><span class="pre">plugin</span></code> Used to name the plugin a controller is located in.</li>
<li><code class="docutils literal"><span class="pre">prefix</span></code> Used for <a class="reference internal" href="#prefix-routing"><span class="std std-ref">Prefix Routing</span></a></li>
<li><code class="docutils literal"><span class="pre">ext</span></code> Used for <a class="reference internal" href="#file-extensions"><span class="std std-ref">File Extensions</span></a> routing.</li>
</ul>
</div>
<div class="section" id="passing-parameters-to-action">
<h3>Passing Parameters to Action<a class="headerlink" href="#passing-parameters-to-action" title="Permalink to this headline">¶</a></h3>
<p>When connecting routes using <a class="reference internal" href="#route-elements"><span class="std std-ref">Route Elements</span></a> you may want
to have routed elements be passed arguments instead. By using the 3rd
argument of <a class="reference internal" href="#Router::connect" title="Router::connect"><code class="xref php php-meth docutils literal"><span class="pre">Router::connect()</span></code></a> you can define which route
elements should also be made available as passed arguments:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// SomeController.php</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">view</span><span class="p">(</span><span class="nv">$articleId</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$slug</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// some code here...</span>
<span class="p">}</span>

<span class="c1">// routes.php</span>
<span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/blog/:id-:slug&#39;</span><span class="p">,</span> <span class="c1">// E.g. /blog/3-CakePHP_Rocks</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="c1">// order matters since this will simply map &quot;:id&quot; to</span>
        <span class="c1">// $articleId in your action</span>
        <span class="s1">&#39;pass&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;slug&#39;</span><span class="p">),</span>
        <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[0-9]+&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>And now, thanks to the reverse routing capabilities, you can pass
in the url array like below and CakePHP will know how to form the URL
as defined in the routes:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// view.ctp</span>
<span class="c1">// this will return a link to /blog/3-CakePHP_Rocks</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="s1">&#39;CakePHP Rocks&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;blog&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span>
    <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;CakePHP_Rocks&#39;</span>
<span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="per-route-named-parameters">
<h3>Per-Route Named Parameters<a class="headerlink" href="#per-route-named-parameters" title="Permalink to this headline">¶</a></h3>
<p>While you can control named parameters on a global scale using
<a class="reference internal" href="#Router::connectNamed" title="Router::connectNamed"><code class="xref php php-meth docutils literal"><span class="pre">Router::connectNamed()</span></code></a> you can also control named parameter
behavior at the route level using the 3rd argument of <code class="docutils literal"><span class="pre">Router::connect()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/:controller/:action/*&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(),</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;named&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;wibble&#39;</span><span class="p">,</span>
            <span class="s1">&#39;fish&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">),</span>
            <span class="s1">&#39;fizz&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;comments&#39;</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">)),</span>
            <span class="s1">&#39;buzz&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;val-[\d]+&#39;</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The above route definition uses the <code class="docutils literal"><span class="pre">named</span></code> key to define how several named
parameters should be treated. Lets go through each of the various rules
one-by-one:</p>
<ul class="simple">
<li>&#8216;wibble&#8217; has no additional information. This means it will always parse if
found in a URL matching this route.</li>
<li>&#8216;fish&#8217; has an array of conditions, containing the &#8216;action&#8217; key. This means
that fish will only be parsed as a named parameter if the action is also index.</li>
<li>&#8216;fizz&#8217; also has an array of conditions. However, it contains two controllers,
this means that &#8216;fizz&#8217; will only be parsed if the controller matches one of the
names in the array.</li>
<li>&#8216;buzz&#8217; has a string condition. String conditions are treated as
regular expression fragments. Only values for buzz matching the pattern will
be parsed.</li>
</ul>
<p>If a named parameter is used and it does not match the provided criteria, it will
be treated as a passed argument instead of a named parameter.</p>
</div>
<div class="section" id="prefix-routing">
<span id="index-2"></span><span id="id4"></span><h3>Prefix Routing<a class="headerlink" href="#prefix-routing" title="Permalink to this headline">¶</a></h3>
<p>Many applications require an administration section where
privileged users can make changes. This is often done through a
special URL such as <code class="docutils literal"><span class="pre">/admin/users/edit/5</span></code>. In CakePHP, prefix routing
can be enabled from within the core configuration file by setting
the prefixes with Routing.prefixes. Note that prefixes, although
related to the router, are to be configured in
<code class="docutils literal"><span class="pre">app/Config/core.php</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Configure</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;Routing.prefixes&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>In your controller, any action with an <code class="docutils literal"><span class="pre">admin_</span></code> prefix will be
called. Using our users example, accessing the URL
<code class="docutils literal"><span class="pre">/admin/users/edit/5</span></code> would call the method <code class="docutils literal"><span class="pre">admin_edit</span></code> of our
<code class="docutils literal"><span class="pre">UsersController</span></code> passing 5 as the first parameter. The view file
used would be <code class="docutils literal"><span class="pre">app/View/Users/admin_edit.ctp</span></code></p>
<p>You can map the URL /admin to your <code class="docutils literal"><span class="pre">admin_index</span></code> action of pages
controller using following route:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/admin&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;admin&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>You can configure the Router to use multiple prefixes too. By
adding additional values to <code class="docutils literal"><span class="pre">Routing.prefixes</span></code>. If you set:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Configure</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;Routing.prefixes&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;manager&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>CakePHP will automatically generate routes for both the admin and
manager prefixes. Each configured prefix will have the following
routes generated for it:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{</span><span class="nv">$prefix</span><span class="si">}</span><span class="s2">/:plugin/:controller&quot;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;prefix&#39;</span> <span class="o">=&gt;</span> <span class="nv">$prefix</span><span class="p">,</span> <span class="nv">$prefix</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">)</span>
<span class="p">);</span>
<span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{</span><span class="nv">$prefix</span><span class="si">}</span><span class="s2">/:plugin/:controller/:action/*&quot;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;prefix&#39;</span> <span class="o">=&gt;</span> <span class="nv">$prefix</span><span class="p">,</span> <span class="nv">$prefix</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">)</span>
<span class="p">);</span>
<span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{</span><span class="nv">$prefix</span><span class="si">}</span><span class="s2">/:controller&quot;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;prefix&#39;</span> <span class="o">=&gt;</span> <span class="nv">$prefix</span><span class="p">,</span> <span class="nv">$prefix</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">)</span>
<span class="p">);</span>
<span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s2">&quot;/</span><span class="si">{</span><span class="nv">$prefix</span><span class="si">}</span><span class="s2">/:controller/:action/*&quot;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;prefix&#39;</span> <span class="o">=&gt;</span> <span class="nv">$prefix</span><span class="p">,</span> <span class="nv">$prefix</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Much like admin routing all prefix actions should be prefixed with
the prefix name. So <code class="docutils literal"><span class="pre">/manager/posts/add</span></code> would map to
<code class="docutils literal"><span class="pre">PostsController::manager_add()</span></code>.</p>
<p>Additionally, the current prefix will be available from the controller methods through <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;prefix</span></code></p>
<p>When using prefix routes it&#8217;s important to remember, using the HTML
helper to build your links will help maintain the prefix calls.
Here&#8217;s how to build this link using the HTML helper:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Go into a prefixed route.</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;Manage posts&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;manager&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span> <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;add&#39;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// leave a prefix</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;View Post&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;manager&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span> <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="plugin-routing">
<span id="index-3"></span><h3>Plugin Routing<a class="headerlink" href="#plugin-routing" title="Permalink to this headline">¶</a></h3>
<p>Plugin routing uses the <strong>plugin</strong> key. You can create links that
point to a plugin, but adding the plugin key to your URL array:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;New todo&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;plugin&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;todo&#39;</span><span class="p">,</span> <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;todo_items&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;create&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Conversely if the active request is a plugin request and you want
to create a link that has no plugin you can do the following:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;New todo&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;plugin&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span> <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;profile&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>By setting <code class="docutils literal"><span class="pre">plugin</span> <span class="pre">=&gt;</span> <span class="pre">null</span></code> you tell the Router that you want to
create a link that is not part of a plugin.</p>
</div>
<div class="section" id="file-extensions">
<span id="index-4"></span><span id="id5"></span><h3>File Extensions<a class="headerlink" href="#file-extensions" title="Permalink to this headline">¶</a></h3>
<p>To handle different file extensions with your routes, you need one
extra line in your routes config file:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">parseExtensions</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="s1">&#39;rss&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>This will tell the router to remove any matching file extensions,
and then parse what remains.</p>
<p>If you want to create a URL such as /page/title-of-page.html you
would create your route as illustrated below:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/page/:title&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;pass&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Then to create links which map back to the routes simply use:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;Link title&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages&#39;</span><span class="p">,</span>
        <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;super-article&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ext&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;html&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>File extensions are used by <a class="reference internal" href="../core-libraries/components/request-handling.html#RequestHandlerComponent" title="RequestHandlerComponent"><code class="xref php php-class docutils literal"><span class="pre">RequestHandlerComponent</span></code></a> to do automatic
view switching based on content types. See the RequestHandlerComponent for
more information.</p>
</div>
<div class="section" id="using-additional-conditions-when-matching-routes">
<span id="route-conditions"></span><h3>Using Additional Conditions When Matching Routes<a class="headerlink" href="#using-additional-conditions-when-matching-routes" title="Permalink to this headline">¶</a></h3>
<p>When creating routes you might want to restrict certain URL&#8217;s based on specific
request/environment settings. A good example of this is <a class="reference internal" href="rest.html"><span class="doc">REST</span></a>
routing. You can specify additional conditions in the <code class="docutils literal"><span class="pre">$defaults</span></code> argument for
<a class="reference internal" href="#Router::connect" title="Router::connect"><code class="xref php php-meth docutils literal"><span class="pre">Router::connect()</span></code></a>. By default CakePHP exposes 3 environment
conditions, but you can add more using <a class="reference internal" href="#custom-route-classes"><span class="std std-ref">Custom Route Classes</span></a>. The built-in
options are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">[type]</span></code> Only match requests for specific content types.</li>
<li><code class="docutils literal"><span class="pre">[method]</span></code> Only match requests with specific HTTP verbs.</li>
<li><code class="docutils literal"><span class="pre">[server]</span></code> Only match when $_SERVER[&#8216;SERVER_NAME&#8217;] matches the given value.</li>
</ul>
<p>We&#8217;ll provide a simple example here of how you can use the <code class="docutils literal"><span class="pre">[method]</span></code>
option to create a custom RESTful route:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s2">&quot;/:controller/:id&quot;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&quot;action&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;edit&quot;</span><span class="p">,</span> <span class="s2">&quot;[method]&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;PUT&quot;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">&quot;id&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;[0-9]+&quot;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The above route will only match for <code class="docutils literal"><span class="pre">PUT</span></code> requests. Using these conditions,
you can create custom REST routing, or other request data dependent information.</p>
</div>
</div>
<div class="section" id="passed-arguments">
<span id="index-5"></span><span id="id6"></span><h2>Passed Arguments<a class="headerlink" href="#passed-arguments" title="Permalink to this headline">¶</a></h2>
<p>Passed arguments are additional arguments or path segments that are
used when making a request. They are often used to pass parameters
to your controller methods.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">http</span><span class="o">://</span><span class="nx">localhost</span><span class="o">/</span><span class="nx">calendars</span><span class="o">/</span><span class="nx">view</span><span class="o">/</span><span class="nx">recent</span><span class="o">/</span><span class="nx">mark</span>
</pre></div>
</div>
<p>In the above example, both <code class="docutils literal"><span class="pre">recent</span></code> and <code class="docutils literal"><span class="pre">mark</span></code> are passed
arguments to <code class="docutils literal"><span class="pre">CalendarsController::view()</span></code>. Passed arguments are
given to your controllers in three ways. First as arguments to the
action method called, and secondly they are available in
<code class="docutils literal"><span class="pre">$this-&gt;request-&gt;params['pass']</span></code> as a numerically indexed array. Lastly
there is <code class="docutils literal"><span class="pre">$this-&gt;passedArgs</span></code> available in the same way as the
second one. When using custom routes you can force particular
parameters to go into the passed arguments as well.</p>
<p>If you were to visit the previously mentioned URL, and you
had a controller action that looked like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">CalendarsController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">view</span><span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">debug</span><span class="p">(</span><span class="nb">func_get_args</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You would get the following output:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">Array</span>
<span class="p">(</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">recent</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">mark</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This same data is also available at <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;params['pass']</span></code>
and <code class="docutils literal"><span class="pre">$this-&gt;passedArgs</span></code> in your controllers, views, and helpers.
The values in the pass array are numerically indexed based on the
order they appear in the called URL:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">debug</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;pass&#39;</span><span class="p">]);</span>
<span class="nx">debug</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">passedArgs</span><span class="p">);</span>
</pre></div>
</div>
<p>Either of the above would output:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">Array</span>
<span class="p">(</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">recent</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">mark</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">$this-&gt;passedArgs may also contain named parameters as a named
array mixed with Passed arguments.</p>
</div>
<p>When generating URLs, using a <a class="reference internal" href="../appendices/glossary.html#term-routing-array"><span class="xref std std-term">routing array</span></a> you add passed
arguments as values without string keys in the array:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>Since <code class="docutils literal"><span class="pre">5</span></code> has a numeric key, it is treated as a passed argument.</p>
</div>
<div class="section" id="named-parameters">
<span id="index-6"></span><span id="id7"></span><h2>Named Parameters<a class="headerlink" href="#named-parameters" title="Permalink to this headline">¶</a></h2>
<p>You can name parameters and send their values using the URL. A
request for <code class="docutils literal"><span class="pre">/posts/view/title:first/category:general</span></code> would result
in a call to the view() action of the PostsController. In that
action, you&#8217;d find the values of the title and category parameters
inside <code class="docutils literal"><span class="pre">$this-&gt;params['named']</span></code>. They are also available inside
<code class="docutils literal"><span class="pre">$this-&gt;passedArgs</span></code>. In both cases you can access named parameters using their
name as an index. If named parameters are omitted, they will not be set.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">What is parsed as a named parameter is controlled by
<a class="reference internal" href="#Router::connectNamed" title="Router::connectNamed"><code class="xref php php-meth docutils literal"><span class="pre">Router::connectNamed()</span></code></a>. If your named parameters are not
reverse routing, or parsing correctly, you will need to inform
<a class="reference internal" href="#Router" title="Router"><code class="xref php php-class docutils literal"><span class="pre">Router</span></code></a> about them.</p>
</div>
<p>Some summarizing examples for default routes might prove helpful:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">URL</span> <span class="nx">to</span> <span class="nx">controller</span> <span class="nx">action</span> <span class="nx">mapping</span> <span class="nx">using</span> <span class="k">default</span> <span class="nx">routes</span><span class="o">:</span>

<span class="nx">URL</span><span class="o">:</span> <span class="o">/</span><span class="nx">monkeys</span><span class="o">/</span><span class="nx">jump</span>
<span class="nx">Mapping</span><span class="o">:</span> <span class="nx">MonkeysController</span><span class="o">-&gt;</span><span class="na">jump</span><span class="p">();</span>

<span class="nx">URL</span><span class="o">:</span> <span class="o">/</span><span class="nx">products</span>
<span class="nx">Mapping</span><span class="o">:</span> <span class="nx">ProductsController</span><span class="o">-&gt;</span><span class="na">index</span><span class="p">();</span>

<span class="nx">URL</span><span class="o">:</span> <span class="o">/</span><span class="nx">tasks</span><span class="o">/</span><span class="nx">view</span><span class="o">/</span><span class="mi">45</span>
<span class="nx">Mapping</span><span class="o">:</span> <span class="nx">TasksController</span><span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="mi">45</span><span class="p">);</span>

<span class="nx">URL</span><span class="o">:</span> <span class="o">/</span><span class="nx">donations</span><span class="o">/</span><span class="nx">view</span><span class="o">/</span><span class="nx">recent</span><span class="o">/</span><span class="mi">2001</span>
<span class="nx">Mapping</span><span class="o">:</span> <span class="nx">DonationsController</span><span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;recent&#39;</span><span class="p">,</span> <span class="s1">&#39;2001&#39;</span><span class="p">);</span>

<span class="nx">URL</span><span class="o">:</span> <span class="o">/</span><span class="nx">contents</span><span class="o">/</span><span class="nx">view</span><span class="o">/</span><span class="nx">chapter</span><span class="o">:</span><span class="nx">models</span><span class="o">/</span><span class="nx">section</span><span class="o">:</span><span class="nx">associations</span>
<span class="nx">Mapping</span><span class="o">:</span> <span class="nx">ContentsController</span><span class="o">-&gt;</span><span class="na">view</span><span class="p">();</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">passedArgs</span><span class="p">[</span><span class="s1">&#39;chapter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;models&#39;</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">passedArgs</span><span class="p">[</span><span class="s1">&#39;section&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;associations&#39;</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;named&#39;</span><span class="p">][</span><span class="s1">&#39;chapter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;models&#39;</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;named&#39;</span><span class="p">][</span><span class="s1">&#39;section&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;associations&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>When making custom routes, a common pitfall is that using named
parameters will break your custom routes. In order to solve this
you should inform the Router about which parameters are intended to
be named parameters. Without this knowledge the Router is unable to
determine whether named parameters are intended to actually be
named parameters or routed parameters, and defaults to assuming you
intended them to be routed parameters. To connect named parameters
in the router use <a class="reference internal" href="#Router::connectNamed" title="Router::connectNamed"><code class="xref php php-meth docutils literal"><span class="pre">Router::connectNamed()</span></code></a>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connectNamed</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;chapter&#39;</span><span class="p">,</span> <span class="s1">&#39;section&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>Will ensure that your chapter and section parameters reverse route
correctly.</p>
<p>When generating URLs, using a <a class="reference internal" href="../appendices/glossary.html#term-routing-array"><span class="xref std std-term">routing array</span></a> you add named
parameters as values with string keys matching the name:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="s1">&#39;chapter&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;association&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Since &#8216;chapter&#8217; doesn&#8217;t match any defined route elements, it&#8217;s treated
as a named parameter.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Both named parameters and route elements share the same key-space.
It&#8217;s best to avoid re-using a key for both a route element and a named
parameter.</p>
</div>
<p>Named parameters also support using arrays to generate and parse
URLs. The syntax works very similar to the array syntax used
for GET parameters. When generating URLs you can use the following
syntax:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$url</span> <span class="o">=</span> <span class="nx">Router</span><span class="o">::</span><span class="na">url</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
    <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;published&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;frontpage&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span>
    <span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>The above would generate the URL <code class="docutils literal"><span class="pre">/posts/index/filter[published]:1/filter[frontpage]:1</span></code>.
The parameters are then parsed and stored in your controller&#8217;s passedArgs variable
as an array, just as you sent them to <a class="reference internal" href="#Router::url" title="Router::url"><code class="xref php php-meth docutils literal"><span class="pre">Router::url</span></code></a>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">passedArgs</span><span class="p">[</span><span class="s1">&#39;filter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;published&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;frontpage&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Arrays can be deeply nested as well, allowing you even more flexibility in
passing arguments:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$url</span> <span class="o">=</span> <span class="nx">Router</span><span class="o">::</span><span class="na">url</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;search&#39;</span><span class="p">,</span>
    <span class="s1">&#39;models&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;post&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;asc&#39;</span><span class="p">,</span>
            <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;published&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span>
            <span class="p">)</span>
        <span class="p">),</span>
        <span class="s1">&#39;comment&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;desc&#39;</span><span class="p">,</span>
            <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;spam&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span>
            <span class="p">)</span>
        <span class="p">),</span>
    <span class="p">),</span>
    <span class="s1">&#39;users&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<p>You would end up with a pretty long url like this (wrapped for easy reading):</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">posts</span><span class="o">/</span><span class="nx">search</span>
  <span class="o">/</span><span class="nx">models</span><span class="p">[</span><span class="nx">post</span><span class="p">][</span><span class="nx">order</span><span class="p">]</span><span class="o">:</span><span class="nx">asc</span><span class="o">/</span><span class="nx">models</span><span class="p">[</span><span class="nx">post</span><span class="p">][</span><span class="nx">filter</span><span class="p">][</span><span class="nx">published</span><span class="p">]</span><span class="o">:</span><span class="mi">1</span>
  <span class="o">/</span><span class="nx">models</span><span class="p">[</span><span class="nx">comment</span><span class="p">][</span><span class="nx">order</span><span class="p">]</span><span class="o">:</span><span class="nx">desc</span><span class="o">/</span><span class="nx">models</span><span class="p">[</span><span class="nx">comment</span><span class="p">][</span><span class="nx">filter</span><span class="p">][</span><span class="nx">spam</span><span class="p">]</span><span class="o">:</span><span class="mi">0</span>
  <span class="o">/</span><span class="nx">users</span><span class="p">[]</span><span class="o">:</span><span class="mi">1</span><span class="o">/</span><span class="nx">users</span><span class="p">[]</span><span class="o">:</span><span class="mi">2</span><span class="o">/</span><span class="nx">users</span><span class="p">[]</span><span class="o">:</span><span class="mi">3</span>
</pre></div>
</div>
<p>And the resulting array that would be passed to the controller would match that
which you passed to the router:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">passedArgs</span><span class="p">[</span><span class="s1">&#39;models&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;post&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;asc&#39;</span><span class="p">,</span>
        <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;published&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span>
        <span class="p">)</span>
    <span class="p">),</span>
    <span class="s1">&#39;comment&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;desc&#39;</span><span class="p">,</span>
        <span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;spam&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span>
        <span class="p">)</span>
    <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
<div class="section" id="controlling-named-parameters">
<span id="id8"></span><h3>Controlling Named Parameters<a class="headerlink" href="#controlling-named-parameters" title="Permalink to this headline">¶</a></h3>
<p>You can control named parameter configuration at the per-route-level
or control them globally. Global control is done through <code class="docutils literal"><span class="pre">Router::connectNamed()</span></code>
The following gives some examples of how you can control named parameter parsing
with connectNamed().</p>
<p>Do not parse any named parameters:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connectNamed</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</pre></div>
</div>
<p>Parse only default parameters used for CakePHP&#8217;s pagination:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connectNamed</span><span class="p">(</span><span class="k">false</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">));</span>
</pre></div>
</div>
<p>Parse only the page parameter if its value is a number:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connectNamed</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[\d]+&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span> <span class="s1">&#39;greedy&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Parse only the page parameter no matter what:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connectNamed</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span> <span class="s1">&#39;greedy&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Parse only the page parameter if the current action is &#8216;index&#8217;:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connectNamed</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">)),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span> <span class="s1">&#39;greedy&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Parse only the page parameter if the current action is &#8216;index&#8217; and the controller is &#8216;pages&#8217;:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connectNamed</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages&#39;</span><span class="p">)),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span> <span class="s1">&#39;greedy&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>connectNamed() supports a number of options:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">greedy</span></code> Setting this to true will make Router parse all named params.
Setting it to false will parse only the connected named params.</li>
<li><code class="docutils literal"><span class="pre">default</span></code> Set this to true to merge in the default set of named parameters.</li>
<li><code class="docutils literal"><span class="pre">reset</span></code> Set to true to clear existing rules and start fresh.</li>
<li><code class="docutils literal"><span class="pre">separator</span></code> Change the string used to separate the key &amp; value in a named
parameter. Defaults to <cite>:</cite></li>
</ul>
</div>
</div>
<div class="section" id="reverse-routing">
<h2>Reverse Routing<a class="headerlink" href="#reverse-routing" title="Permalink to this headline">¶</a></h2>
<p>Reverse routing is a feature in CakePHP that is used to allow you to
easily change your URL structure without having to modify all your code.
By using <a class="reference internal" href="../appendices/glossary.html#term-routing-array"><span class="xref std std-term">routing arrays</span></a> to define your URLs, you can
later configure routes and the generated URLs will automatically update.</p>
<p>If you create URLs using strings like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="s1">&#39;View&#39;</span><span class="p">,</span> <span class="s1">&#39;/posts/view/&#39;</span> <span class="o">.</span> <span class="nv">$id</span><span class="p">);</span>
</pre></div>
</div>
<p>And then later decide that <code class="docutils literal"><span class="pre">/posts</span></code> should really be called
&#8216;articles&#8217; instead, you would have to go through your entire
application renaming URLs. However, if you defined your link like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;View&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Then when you decided to change your URLs, you could do so by defining a
route. This would change both the incoming URL mapping, as well as the
generated URLs.</p>
<p>When using array URLs, you can define both query string parameters and
document fragments using special keys:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">url</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
    <span class="s1">&#39;?&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">),</span>
    <span class="s1">&#39;#&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;top&#39;</span>
<span class="p">));</span>

<span class="c1">// will generate a URL like.</span>
<span class="o">/</span><span class="nx">posts</span><span class="o">/</span><span class="nx">index</span><span class="o">?</span><span class="nx">page</span><span class="o">=</span><span class="mi">1</span><span class="c1">#top</span>
</pre></div>
</div>
</div>
<div class="section" id="redirect-routing">
<span id="id9"></span><h2>Redirect Routing<a class="headerlink" href="#redirect-routing" title="Permalink to this headline">¶</a></h2>
<p>Redirect routing allows you to issue HTTP status 30x redirects for
incoming routes, and point them at different URLs. This is useful
when you want to inform client applications that a resource has moved
and you don&#8217;t want to expose two URLs for the same content</p>
<p>Redirection routes are different from normal routes as they perform an actual
header redirection if a match is found. The redirection can occur to
a destination within your application or an outside location:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">redirect</span><span class="p">(</span>
    <span class="s1">&#39;/home/*&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
    <span class="c1">// or array(&#39;persist&#39;=&gt;array(&#39;id&#39;)) for default routing where the</span>
    <span class="c1">// view action expects $id as an argument</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;persist&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Redirects <code class="docutils literal"><span class="pre">/home/*</span></code> to <code class="docutils literal"><span class="pre">/posts/view</span></code> and passes the parameters to
<code class="docutils literal"><span class="pre">/posts/view</span></code>. Using an array as the redirect destination allows
you to use other routes to define where a URL string should be
redirected to. You can redirect to external locations using
string URLs as the destination:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">redirect</span><span class="p">(</span><span class="s1">&#39;/posts/*&#39;</span><span class="p">,</span> <span class="s1">&#39;http://google.com&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;status&#39;</span> <span class="o">=&gt;</span> <span class="mi">302</span><span class="p">));</span>
</pre></div>
</div>
<p>This would redirect <code class="docutils literal"><span class="pre">/posts/*</span></code> to <code class="docutils literal"><span class="pre">http://google.com</span></code> with a
HTTP status of 302.</p>
</div>
<div class="section" id="disabling-the-default-routes">
<span id="disabling-default-routes"></span><h2>Disabling the Default Routes<a class="headerlink" href="#disabling-the-default-routes" title="Permalink to this headline">¶</a></h2>
<p>If you have fully customized all your routes, and want to avoid any
possible duplicate content penalties from search engines, you can
remove the default routes that CakePHP offers by deleting them from your
application&#8217;s routes.php file.</p>
<p>This will cause CakePHP to serve errors, when users try to visit
URLs that would normally be provided by CakePHP but have not
been connected explicitly.</p>
</div>
<div class="section" id="custom-route-classes">
<span id="id10"></span><h2>Custom Route Classes<a class="headerlink" href="#custom-route-classes" title="Permalink to this headline">¶</a></h2>
<p>Custom route classes allow you to extend and change how individual
routes parse requests and handle reverse routing. A custom route class
should be created in <code class="docutils literal"><span class="pre">app/Routing/Route</span></code> and should extend
<a class="reference internal" href="#CakeRoute" title="CakeRoute"><code class="xref php php-class docutils literal"><span class="pre">CakeRoute</span></code></a> and implement one or both of <code class="docutils literal"><span class="pre">match()</span></code>
and/or <code class="docutils literal"><span class="pre">parse()</span></code>. <code class="docutils literal"><span class="pre">parse()</span></code> is used to parse requests and
<code class="docutils literal"><span class="pre">match()</span></code> is used to handle reverse routing.</p>
<p>You can use a custom route class when making a route by using the
<code class="docutils literal"><span class="pre">routeClass</span></code> option, and loading the file containing your route
before trying to use it:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;SlugRoute&#39;</span><span class="p">,</span> <span class="s1">&#39;Routing/Route&#39;</span><span class="p">);</span>

<span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
     <span class="s1">&#39;/:slug&#39;</span><span class="p">,</span>
     <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
     <span class="k">array</span><span class="p">(</span><span class="s1">&#39;routeClass&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;SlugRoute&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This route would create an instance of <code class="docutils literal"><span class="pre">SlugRoute</span></code> and allow you
to implement custom parameter handling.</p>
</div>
<div class="section" id="router-api">
<h2>Router API<a class="headerlink" href="#router-api" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="Router">
<em class="property">class </em><code class="descname">Router</code><a class="headerlink" href="#Router" title="Permalink to this definition">¶</a></dt>
<dd><p>Router manages generation of outgoing URLs, and parsing of incoming
request uri&#8217;s into parameter sets that CakePHP can dispatch.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Router::connect">
<em class="property">static </em><code class="descclassname">Router::</code><code class="descname">connect</code><span class="sig-paren">(</span><em>$route</em>, <em>$defaults = array()</em>, <em>$options = array()</em><span class="sig-paren">)</span><a class="headerlink" href="#Router::connect" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$route</strong> (<em>string</em>) &#8211; A string describing the template of the route</li>
<li><strong>$defaults</strong> (<em>array</em>) &#8211; An array describing the default route parameters.
These parameters will be used by default
and can supply routing parameters that are not dynamic.</li>
<li><strong>$options</strong> (<em>array</em>) &#8211; An array matching the named elements in the route
to regular expressions which that element should match. Also contains
additional parameters such as which routed parameters should be
shifted into the passed arguments, supplying patterns for routing
parameters and supplying the name of a custom routing class.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Routes are a way of connecting request URLs to objects in your application.
At their core routes are a set of regular expressions that are used to
match requests to destinations.</p>
<p>Examples:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:controller/:action/*&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>The first parameter will be used as a controller name while the second is
used as the action name. The &#8216;/*&#8217; syntax makes this route greedy in that
it will match requests like <code class="docutils literal"><span class="pre">/posts/index</span></code> as well as requests like
<code class="docutils literal"><span class="pre">/posts/edit/1/foo/bar</span></code> .</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/home-page&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="s1">&#39;home&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The above shows the use of route parameter defaults. And providing routing
parameters for a static route.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/:lang/:controller/:action/:id&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[0-9]+&#39;</span><span class="p">,</span> <span class="s1">&#39;lang&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[a-z]{3}&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Shows connecting a route with custom route parameters as well as providing
patterns for those parameters. Patterns for routing parameters do not need
capturing groups, as one will be added for each route params.</p>
<p>$options offers three &#8216;special&#8217; keys. <code class="docutils literal"><span class="pre">pass</span></code>, <code class="docutils literal"><span class="pre">persist</span></code> and <code class="docutils literal"><span class="pre">routeClass</span></code>
have special meaning in the $options array.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">pass</span></code> is used to define which of the routed parameters should be
shifted into the pass array. Adding a parameter to pass will remove
it from the regular route array. Ex. <code class="docutils literal"><span class="pre">'pass'</span> <span class="pre">=&gt;</span> <span class="pre">array('slug')</span></code></li>
<li><code class="docutils literal"><span class="pre">persist</span></code> is used to define which route parameters should be automatically
included when generating new URLs. You can override persistent parameters
by redefining them in a URL or remove them by setting the parameter to
<code class="docutils literal"><span class="pre">false</span></code>. Ex. <code class="docutils literal"><span class="pre">'persist'</span> <span class="pre">=&gt;</span> <span class="pre">array('lang')</span></code></li>
<li><code class="docutils literal"><span class="pre">routeClass</span></code> is used to extend and change how individual routes parse
requests and handle reverse routing, via a custom routing class.
Ex. <code class="docutils literal"><span class="pre">'routeClass'</span> <span class="pre">=&gt;</span> <span class="pre">'SlugRoute'</span></code></li>
<li><code class="docutils literal"><span class="pre">named</span></code> is used to configure named parameters at the route level.
This key uses the same options as <a class="reference internal" href="#Router::connectNamed" title="Router::connectNamed"><code class="xref php php-meth docutils literal"><span class="pre">Router::connectNamed()</span></code></a></li>
</ul>
</dd></dl>

<dl class="staticmethod">
<dt id="Router::redirect">
<em class="property">static </em><code class="descclassname">Router::</code><code class="descname">redirect</code><span class="sig-paren">(</span><em>$route</em>, <em>$url</em>, <em>$options = array()</em><span class="sig-paren">)</span><a class="headerlink" href="#Router::redirect" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$route</strong> (<em>string</em>) &#8211; A route template that dictates which URLs should
be redirected.</li>
<li><strong>$url</strong> (<em>mixed</em>) &#8211; Either a <a class="reference internal" href="../appendices/glossary.html#term-routing-array"><span class="xref std std-term">routing array</span></a> or a string url
for the destination of the redirect.</li>
<li><strong>$options</strong> (<em>array</em>) &#8211; An array of options for the redirect.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Connects a new redirection Route in the router.
See <a class="reference internal" href="#redirect-routing"><span class="std std-ref">Redirect Routing</span></a> for more information.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Router::connectNamed">
<em class="property">static </em><code class="descclassname">Router::</code><code class="descname">connectNamed</code><span class="sig-paren">(</span><em>$named</em>, <em>$options = array()</em><span class="sig-paren">)</span><a class="headerlink" href="#Router::connectNamed" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$named</strong> (<em>array</em>) &#8211; A list of named parameters. Key value pairs are accepted where
values are either regex strings to match, or arrays.</li>
<li><strong>$options</strong> (<em>array</em>) &#8211; Allows control of all settings:
separator, greedy, reset, default</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Specifies what named parameters CakePHP should be parsing out of
incoming URLs. By default CakePHP will parse every named parameter
out of incoming URLs. See <a class="reference internal" href="#controlling-named-parameters"><span class="std std-ref">Controlling Named Parameters</span></a> for
more information.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Router::promote">
<em class="property">static </em><code class="descclassname">Router::</code><code class="descname">promote</code><span class="sig-paren">(</span><em>$which = null</em><span class="sig-paren">)</span><a class="headerlink" href="#Router::promote" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$which</strong> (<em>integer</em>) &#8211; A zero-based array index representing the route to move.
For example, if 3 routes have been added, the last route would be 2.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Promote a route (by default, the last one added) to the beginning of the list.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Router::url">
<em class="property">static </em><code class="descclassname">Router::</code><code class="descname">url</code><span class="sig-paren">(</span><em>$url = null</em>, <em>$full = false</em><span class="sig-paren">)</span><a class="headerlink" href="#Router::url" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$url</strong> (<em>mixed</em>) &#8211; Cake-relative URL, like &#8220;/products/edit/92&#8221; or
&#8220;/presidents/elect/4&#8221; or a <a class="reference internal" href="../appendices/glossary.html#term-routing-array"><span class="xref std std-term">routing array</span></a></li>
<li><strong>$full</strong> (<em>mixed</em>) &#8211; <p>If (boolean) true, the full base URL will be prepended
to the result. If an array accepts the following keys</p>
<blockquote>
<div><ul>
<li>escape - used when making URLs embedded in HTML escapes query
string &#8216;&amp;&#8217;</li>
<li>full - if true the full base URL will be prepended.</li>
</ul>
</div></blockquote>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Generate a URL for the specified action. Returns a URL pointing
to a combination of controller and action. $url can be:</p>
<ul class="simple">
<li>Empty - the method will find the address to the actual controller/action.</li>
<li>&#8216;/&#8217; - the method will find the base URL of application.</li>
<li>A combination of controller/action - the method will find the URL for it.</li>
</ul>
<p>There are a few &#8216;special&#8217; parameters that can change the final URL string that is generated:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">base</span></code> - Set to false to remove the base path from the generated URL.
If your application is not in the root directory, this can be used to
generate URLs that are &#8216;CakePHP relative&#8217;. CakePHP relative URLs are
required when using requestAction.</li>
<li><code class="docutils literal"><span class="pre">?</span></code> - Takes an array of query string parameters</li>
<li><code class="docutils literal"><span class="pre">#</span></code> - Allows you to set URL hash fragments.</li>
<li><code class="docutils literal"><span class="pre">full_base</span></code> - If true the value of <a class="reference internal" href="#Router::fullBaseUrl" title="Router::fullBaseUrl"><code class="xref php php-meth docutils literal"><span class="pre">Router::fullBaseUrl()</span></code></a> will
be prepended to generated URLs.</li>
</ul>
</dd></dl>

<dl class="staticmethod">
<dt id="Router::mapResources">
<em class="property">static </em><code class="descclassname">Router::</code><code class="descname">mapResources</code><span class="sig-paren">(</span><em>$controller</em>, <em>$options = array()</em><span class="sig-paren">)</span><a class="headerlink" href="#Router::mapResources" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates REST resource routes for the given controller(s). See
the <a class="reference internal" href="rest.html"><span class="doc">REST</span></a> section for more information.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Router::parseExtensions">
<em class="property">static </em><code class="descclassname">Router::</code><code class="descname">parseExtensions</code><span class="sig-paren">(</span><em>$types</em><span class="sig-paren">)</span><a class="headerlink" href="#Router::parseExtensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Used in routes.php to declare which <a class="reference internal" href="#file-extensions"><span class="std std-ref">File Extensions</span></a> your application
supports. By providing no arguments, all file extensions will be supported.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Router::setExtensions">
<em class="property">static </em><code class="descclassname">Router::</code><code class="descname">setExtensions</code><span class="sig-paren">(</span><em>$extensions</em>, <em>$merge = true</em><span class="sig-paren">)</span><a class="headerlink" href="#Router::setExtensions" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<p>Set or add valid extensions. To have the extensions parsed, you are still
required to call <a class="reference internal" href="#Router::parseExtensions" title="Router::parseExtensions"><code class="xref php php-meth docutils literal"><span class="pre">Router::parseExtensions()</span></code></a>.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Router::defaultRouteClass">
<em class="property">static </em><code class="descclassname">Router::</code><code class="descname">defaultRouteClass</code><span class="sig-paren">(</span><em>$classname</em><span class="sig-paren">)</span><a class="headerlink" href="#Router::defaultRouteClass" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 2.1.</span></p>
</div>
<p>Set the default route to be used when connecting routes in the future.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="Router::fullBaseUrl">
<em class="property">static </em><code class="descclassname">Router::</code><code class="descname">fullBaseUrl</code><span class="sig-paren">(</span><em>$url = null</em><span class="sig-paren">)</span><a class="headerlink" href="#Router::fullBaseUrl" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified">New in version 2.4.</span></p>
</div>
<p>Get or set the baseURL used for generating URL&#8217;s. When setting this value
you should be sure to include the fully qualified domain name including
protocol.</p>
<p>Setting values with this method will also update <code class="docutils literal"><span class="pre">App.fullBaseUrl</span></code> in
<a class="reference internal" href="configuration.html#Configure" title="Configure"><code class="xref php php-class docutils literal"><span class="pre">Configure</span></code></a>.</p>
</dd></dl>

<dl class="class">
<dt id="CakeRoute">
<em class="property">class </em><code class="descname">CakeRoute</code><a class="headerlink" href="#CakeRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class for custom routes to be based on.</p>
</dd></dl>

<dl class="method">
<dt id="CakeRoute::parse">
<code class="descclassname">CakeRoute::</code><code class="descname">parse</code><span class="sig-paren">(</span><em>$url</em><span class="sig-paren">)</span><a class="headerlink" href="#CakeRoute::parse" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$url</strong> (<em>string</em>) &#8211; The string URL to parse.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Parses an incoming URL, and generates an array of request parameters
that Dispatcher can act upon. Extending this method allows you to customize
how incoming URLs are converted into an array. Return <code class="docutils literal"><span class="pre">false</span></code> from
URL to indicate a match failure.</p>
</dd></dl>

<dl class="method">
<dt id="CakeRoute::match">
<code class="descclassname">CakeRoute::</code><code class="descname">match</code><span class="sig-paren">(</span><em>$url</em><span class="sig-paren">)</span><a class="headerlink" href="#CakeRoute::match" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$url</strong> (<em>array</em>) &#8211; The routing array to convert into a string URL.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Attempt to match a URL array. If the URL matches the route parameters
and settings, then return a generated string URL. If the URL doesn&#8217;t
match the route parameters, false will be returned. This method handles
the reverse routing or conversion of URL arrays into string URLs.</p>
</dd></dl>

<dl class="method">
<dt id="CakeRoute::compile">
<code class="descclassname">CakeRoute::</code><code class="descname">compile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#CakeRoute::compile" title="Permalink to this definition">¶</a></dt>
<dd><p>Force a route to compile its regular expression.</p>
</dd></dl>

</div>
</div>


			</div>
		</div>

		
		<div class="col-md-3 col-md-pull-9 pull-off hidden-xs hidden-sm" lang="en">
			<aside class="sidebar">
				<div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cakephp-overview.html">CakePHP Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries.html">Core Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Shells, Tasks &amp; Console Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../development.html">Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="sessions.html">Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="errors.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest.html">REST</a></li>
<li class="toctree-l2"><a class="reference internal" href="dispatch-filters.html">Dispatcher Filters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Appendices</a></li>
</ul>

</div>

				</div>
			</aside>
			<aside class="sidebar">
				<div class="mb30 row">
				</div>
			</aside>
		</div>
	</div>
</div>

<section id="socials" class="back-3">
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-4  social text-center">
				<div class="col-sm-3 col-xs-3">
					<div id="fb-root"></div>
						<script>(function(d, s, id) {
						  var js, fjs = d.getElementsByTagName(s)[0];
						  if (d.getElementById(id)) return;
						  js = d.createElement(s); js.id = id;
						  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
						  fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));
						</script>
						<div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
					<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
				</div>
			</div>

			<div class="col-xs-12 col-sm-12 col-md-8 social-footer text-center ">
				<a href="#">发现翻译错误? 请在下面留言</a>
				<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">我要加入翻译</a>
				<a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
				<a href="http://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
				<a href="http://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
				<a href="http://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
				<a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
				<a href="http://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
				<a href="http://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
				<a href="http://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
			</div>
		</div>
	</div>
</section>

<footer id="footer" class="footer-wrapper">
	<div class="container">

		<div class="row col-p30">
			<div class="col-sm-12 col-md-3">
				<div class="footer-widget t-footer">
					<div class="col-md-12">
						<a href="https://www.openhub.net/p/cakephp">
							<img src="../_static/open-hub.png">
						</a>
						<div class="mt10">
							<a href="https://www.rackspace.com/">
								<img src="../_static/rackspace.png">
							</a>
						</div>
					</div>
				</div>
			</div>

			<div class="col-sm-12 col-md-9">
				<div class="col-md-3 col-sm-6 business-solution">
					<ul class="footer-menu">
						<li class="menu-title">
	<a href="http://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
	<a href="http://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 text-center mt30">
				<p class="copyright">
							&copy; Copyright 2016, Cake Software Foundation, Inc.
						Last updated on Aug 12, 2016.
						Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
				</p>
			</div>
		</div>
	</div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-743287-3']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>

<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F201cbc61deaf9f7ffb521fb23e83db40' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cakephpchina"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
  </body>
</html>