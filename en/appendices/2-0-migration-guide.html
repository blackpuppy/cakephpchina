
<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="2.0 Migration Guide" lang="en" name="title" />
<meta content="This page summarizes the changes from CakePHP 1.3 that will assist in a project migration to 2.0, as well as for a developer reference to get up to date with the changes made to the core since the CakePHP 1.3 branch." lang="en" name="description" />
<meta content="cakephp upgrade,cakephp migration,migration guide,1.3 to 2.0,update cakephp,backwards compatibility,api changes,x versions,directory structure,new features" lang="en" name="keywords" />

    <title>2.0 Migration Guide &mdash; CakePHP Cookbook 2.x documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/app.js"></script>
    <script type="text/javascript" src="../_static/modernizr.foundation.js"></script>
    <script type="text/javascript" src="../_static/foundation.js"></script>
    <link rel="top" title="CakePHP Cookbook 2.x documentation" href="../index.html" />
    <link rel="up" title="Appendices" href="../appendices.html" />
    <link rel="next" title="New Features in CakePHP 2.0" href="new-features-in-cakephp-2-0.html" />
    <link rel="prev" title="New Features in CakePHP 2.1" href="new-features-in-cakephp-2-1.html" />
<link href="../_static/favicon.ico" type="image/x-icon" rel="icon" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="alternate" hreflang="pt" href="../../pt/appendices/2-0-migration-guide.html" /><link rel="alternate" hreflang="es" href="../../es/appendices/2-0-migration-guide.html" /><link rel="alternate" hreflang="ja" href="../../ja/appendices/2-0-migration-guide.html" /><link rel="alternate" hreflang="fr" href="../../fr/appendices/2-0-migration-guide.html" /><link rel="alternate" hreflang="zh_CN" href="../../zh/appendices/2-0-migration-guide.html" />

<link rel="search" type="application/opensearchdescription+xml" title="CakePHP Book 2.x Search" href="../_static/opensearchdescription-book-2-x.xml">
<script type="text/javascript">
window.lang = "en";
</script>

  </head>
  <body>

<div id="container">

<div id="cakephp-global-navigation">
	<ul>
		<li class="main"><a href="http://cakephp.org">CakePHP</a></li>
		<li class="primary"><a href="#" class="empty">Downloads</a>
			<ul class="second-level">
				<li><a href="https://github.com/cakephp/cakephp/tags">Releases</a></li>
				<li><a href="http://pear.cakephp.org">Pear channel</a></li>
			</ul>
		</li>
		<li class="primary"><a href="#" class="empty">Documentation</a>
			<ul class="second-level">
				<li><a href="http://api.cakephp.org">API</a></li>
				<li><a href="http://book.cakephp.org">Book</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://community.cakephp.org">Community</a>
			<ul class="second-level">
				<li><a href="http://webchat.freenode.net/?channels=cakephp&uio=MT1mYWxzZSY5PXRydWUmMTE9MjQ2b8">Help &amp; Support</a></li>
				<li><a href="https://github.com/cakephp/cakephp/issues">Issues</a></li>
				<li><a href="http://bakery.cakephp.org">The Bakery</a></li>
				<li><a href="http://stackoverflow.com/tags/cakephp">Stack Overflow</a></li>
				<li><a href="http://www.facebook.com/groups/cake.community">Facebook Group</a></li>
				<li><a href="http://goo.gl/mSC0s">Google+ Community</a></li>
				<li><a href="http://www.youtube.com/user/CakePHP">YouTube Channel</a></li>
				<li><a href="http://podcast.cakephp.org">CakePHP Podcast</a></li>
				<li><a href="http://twitter.com/CakePHP">Follow us on Twitter</a></li>
				<li><a href="http://groups.google.com/group/cake-php">Google Group</a></li>
				<li><a href="http://github.com/cakephp/cakephp/contributors">Contributors</a></li>
				<li><a href="http://plugins.cakephp.org">Plugins &amp; Packages</a></li>
				<li><a href="http://community.cakephp.org/get-involved">Get Involved</a></li>
				<li><a href="http://community.cakephp.org/guidelines">Guidelines</a></li>
				<li><a href="http://cakefest.org">CakeFest</a></li>
				<li><a href="http://cakephp.org/logos">Logo</a></li>
			</ul>
		</li>
		<li class="primary"><a href="http://cakephp.org/services">Services</a>
			<ul class="second-level">
				<li><a href="http://certification.cakephp.org">Certification</a></li>
				<li><a href="http://cakephp.org/services/consultation">Consultation</a></li>
				<li><a href="http://cakephp.org/services/support">Support</a></li>
				<li><a href="http://training.cakephp.org">Training</a></li>
			</ul>
		</li>
	</ul>
</div>

<div class="masthead">
	<div class="header-backing"></div>
	<div class="searchbar row">
		<div class="columns three phone-one">
			<a class="logo" href="../contents.html">
			<img src="../_static/cake-logo.png" alt="CakePHP" width="70" />
			</a>
		</div>
		
<div id="searchbox" class="columns nine phone-three">

	<form id="searchform" class="search" action="../search.html" method="get">
		<input class="search-input" autocomplete="off" type="search" name="q" size="18" />
		<input class="search-submit search-big button red" type="submit" value="Search" />
		<input type="hidden" name="check_keywords" value="yes" />
		<input type="hidden" name="area" value="default" />

		<a href="#" id="tablet-nav" class="show-on-phones pale button small">Nav</a>
	</form>

</div>
	</div>
</div>
<div class="breadcrumb-header">
	<div class="related row">
		<div class="columns three root-link">
			<a href="../contents.html">Cookbook 2.x</a>
		</div>
		<div class="columns nine">
			<ul class="inline breadcrumb">
			<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
				<a href="../appendices.html" accesskey="U" itemprop="url"><span itemprop="title">Appendices</span></a>
			</li>
			</ul>
			<div class="versions dropdown">
				<a href="#">2.x Book</a>
				<ul>
					<li><a href="http://book.cakephp.org/3.0/en">3.0 Book</a></li>
					<li><a href="http://book.cakephp.org/1.3/en/">1.3 Book</a></li>
					<li><a href="http://book.cakephp.org/1.2/en/">1.2 Book</a></li>
					<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
				</ul>
			</div>

			<div class="languages dropdown">
				<a href="#">en</a>

				<ul>
				
					<li></li>
				
					<li><a href="../../pt/appendices/2-0-migration-guide.html">pt</a></li>
				
					<li><a href="../../es/appendices/2-0-migration-guide.html">es</a></li>
				
					<li><a href="../../ja/appendices/2-0-migration-guide.html">ja</a></li>
				
					<li><a href="../../fr/appendices/2-0-migration-guide.html">fr</a></li>
				
					<li><a href="../../zh/appendices/2-0-migration-guide.html">zh_CN</a></li>
				
				</ul>
			</div>
		</div>
	</div>
</div>

<div class="content row">
	<div class="document columns nine push-three">
		<div class="body"><a class="button pale improve" href="https://github.com/cakephp/docs/edit/master/en/appendices/2-0-migration-guide.rst" target="_blank">Improve this Doc</a>
  <div class="section" id="migration-guide">
<h1>2.0 Migration Guide<a class="headerlink" href="#migration-guide" title="Permalink to this headline">¶</a></h1>
<p>This page summarizes the changes from CakePHP 1.3 that will assist in a project
migration to 2.0, as well as for a developer reference to get up to date with
the changes made to the core since the CakePHP 1.3 branch. Be sure to read the
other pages in this guide for all the new features and API changes.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Be sure to checkout the <a class="reference internal" href="../console-and-shells/upgrade-shell.html#upgrade-shell"><em>Upgrade shell</em></a> included in the 2.0 core to help you
migrate your 1.3 code to 2.0.</p>
</div>
<div class="section" id="php-version-support">
<h2>PHP Version Support<a class="headerlink" href="#php-version-support" title="Permalink to this headline">¶</a></h2>
<p>CakePHP 2.x supports PHP Version 5.2.8 and above. PHP4 support has been dropped.
For developers that are still working with production PHP4 environments, the
CakePHP 1.x versions continue to support PHP4 for the lifetime of their
development and support lifetime.</p>
<p>The move to PHP 5 means all methods and properties have been updated with
visibility keywords. If your code is attempting access to private or protected
methods from a public scope, you will encounter errors.</p>
<p>While this does not really constitute a large framework change, it means that
access to tighter visibility methods and variables is now not possible.</p>
</div>
<div class="section" id="file-and-folder-naming">
<h2>File and Folder naming<a class="headerlink" href="#file-and-folder-naming" title="Permalink to this headline">¶</a></h2>
<p>In CakePHP 2.0 we rethought the way we are structuring our files and folders.
Given that PHP 5.3 is supporting namespaces we decided to prepare our code base
for adopting in a near future this PHP version, so we adopted the
<a class="reference external" href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md</a>. At first
we glanced at the internal structure of CakePHP 1.3 and realized that after all
these years there was no clear organization in the files, nor did the directory
structure really hint where each file should be located. With this change we
would be allowed to experiment a little with (almost) automatic class loading
for increasing the overall framework performance.</p>
<p>Biggest roadblock for achieving this was maintaining some sort of backwards
compatibility in the way the classes are loaded right now, and we definitely did
not want to become a framework of huge class prefixes, having class names like
<tt class="docutils literal"><span class="pre">My_Huge_Class_Name_In_Package</span></tt>. We decided adopting a strategy of keeping simple
class names while offering a very intuitive way of declaring class locations and
clear migration path for future PHP 5.3 version of CakePHP. First let&#8217;s
highlight the main changes in file naming standard we adopted:</p>
<div class="section" id="file-names">
<h3>File names<a class="headerlink" href="#file-names" title="Permalink to this headline">¶</a></h3>
<p>All files containing classes should be named after the class it contains. No
file should contain more than one class. So, no more lowercasing and
underscoring your file names. Here are some examples:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">my_things_controller.php</span></tt> becomes <tt class="docutils literal"><span class="pre">MyThingsController.php</span></tt></li>
<li><tt class="docutils literal"><span class="pre">form.php</span></tt> (a Helper) becomes <tt class="docutils literal"><span class="pre">FormHelper.php</span></tt></li>
<li><tt class="docutils literal"><span class="pre">session.php</span></tt> (a Component) becomes <tt class="docutils literal"><span class="pre">SessionComponent.php</span></tt></li>
</ul>
<p>This makes file naming a lot more clear and consistent across applications,
and also avoids a few edge cases where the file loader would get confused in the
past and load files it should not.</p>
</div>
<div class="section" id="folder-names">
<h3>Folder Names<a class="headerlink" href="#folder-names" title="Permalink to this headline">¶</a></h3>
<p>Most folders should be also CamelCased, especially when containing classes.
Think of namespaces, each folder represents a level in the namespacing
hierarchy, folders that do not contain classes, or do not constitute a
namespace on themselves, should be lowercased.</p>
<p>CamelCased Folders:</p>
<ul class="simple">
<li>Config</li>
<li>Console</li>
<li>Controller</li>
<li>Controller/Component</li>
<li>Lib</li>
<li>Locale</li>
<li>Model</li>
<li>Model/Behavior</li>
<li>Plugin</li>
<li>Test</li>
<li>Vendor</li>
<li>View</li>
<li>View/Helper</li>
</ul>
<p>lowercased Folders:</p>
<ul class="simple">
<li>tmp</li>
<li>webroot</li>
</ul>
</div>
</div>
<div class="section" id="htaccess-url-rewriting">
<h2>htaccess (URL Rewriting)<a class="headerlink" href="#htaccess-url-rewriting" title="Permalink to this headline">¶</a></h2>
<p>In your <tt class="docutils literal"><span class="pre">app/webroot/.htaccess</span></tt> replace line <tt class="docutils literal"><span class="pre">RewriteRule</span> <span class="pre">^(.*)$</span> <span class="pre">index.php?url=$1</span> <span class="pre">[QSA,L]</span></tt> with <tt class="docutils literal"><span class="pre">RewriteRule</span> <span class="pre">^(.*)$</span> <span class="pre">index.php</span> <span class="pre">[QSA,L]</span></tt></p>
</div>
<div class="section" id="appcontroller-appmodel-apphelper-appshell">
<h2>AppController / AppModel / AppHelper / AppShell<a class="headerlink" href="#appcontroller-appmodel-apphelper-appshell" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">app/app_controller.php</span></tt>, <tt class="docutils literal"><span class="pre">app/app_model.php</span></tt>, <tt class="docutils literal"><span class="pre">app/app_helper.php</span></tt> are now located and
named as <tt class="docutils literal"><span class="pre">app/Controller/AppController.php</span></tt>, <tt class="docutils literal"><span class="pre">app/Model/AppModel.php</span></tt> and <tt class="docutils literal"><span class="pre">app/View/Helper/AppHelper.php</span></tt> respectively.</p>
<p>Also all shell/task now extend AppShell. You can have your custom AppShell.php at <tt class="docutils literal"><span class="pre">app/Console/Command/AppShell.php</span></tt></p>
</div>
<div class="section" id="internationalization-localization">
<h2>Internationalization / Localization<a class="headerlink" href="#internationalization-localization" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../core-libraries/global-constants-and-functions.html#__" title="__"><tt class="xref php php-func docutils literal"><span class="pre">__()</span></tt></a> (Double underscore shortcut function) always returns the translation
(not echo anymore).</p>
<p>If you want to echo the result of the translation, use:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nx">__</span><span class="p">(</span><span class="s1">&#39;My Message&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>This change includes all shortcut translation methods:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">__</span><span class="p">()</span>
<span class="nx">__n</span><span class="p">()</span>
<span class="nx">__d</span><span class="p">()</span>
<span class="nx">__dn</span><span class="p">()</span>
<span class="nx">__dc</span><span class="p">()</span>
<span class="nx">__dcn</span><span class="p">()</span>
<span class="nx">__c</span><span class="p">()</span>
</pre></div>
</div>
<p>Alongside this, if you pass additional parameters, the translation will call
<a class="reference external" href="http://php.net/manual/en/function.sprintf.php">sprintf</a>  with these
parameters before returning. For example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Will return something like &quot;Called: MyClass:myMethod&quot;</span>
<span class="k">echo</span> <span class="nx">__</span><span class="p">(</span><span class="s1">&#39;Called: %s:%s&#39;</span><span class="p">,</span> <span class="nv">$className</span><span class="p">,</span> <span class="nv">$methodName</span><span class="p">);</span>
</pre></div>
</div>
<p>It is valid for all shortcut translation methods.</p>
<p>More information about the specifiers, you can see in
<a class="reference external" href="http://php.net/manual/en/function.sprintf.php">sprintf</a> function.</p>
</div>
<div class="section" id="class-location-and-constants-changed">
<h2>Class location and constants changed<a class="headerlink" href="#class-location-and-constants-changed" title="Permalink to this headline">¶</a></h2>
<p>The constants <tt class="docutils literal"><span class="pre">APP</span></tt> and <tt class="docutils literal"><span class="pre">CORE_PATH</span></tt>
have consistent values between the web and console environments. In previous
versions of CakePHP these values changed depending on your environment.</p>
</div>
<div class="section" id="basics-php">
<h2>Basics.php<a class="headerlink" href="#basics-php" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">getMicrotime()</span></tt> has been removed. Use the native <tt class="docutils literal"><span class="pre">microtime(true)</span></tt>
instead.</li>
<li><tt class="docutils literal"><span class="pre">e()</span></tt> was removed. Use <tt class="docutils literal"><span class="pre">echo</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">r()</span></tt> was removed. Use <tt class="docutils literal"><span class="pre">str_replace</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">a()</span></tt> was removed. <tt class="docutils literal"><span class="pre">Use</span> <span class="pre">array()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">aa()</span></tt> was removed. Use <tt class="docutils literal"><span class="pre">array()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">up()</span></tt> was removed. Use <tt class="docutils literal"><span class="pre">strtoupper()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">low()</span></tt> was removed. Use <tt class="docutils literal"><span class="pre">strtolower()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">params()</span></tt> was removed. It was not used anywhere in CakePHP.</li>
<li><tt class="docutils literal"><span class="pre">ife()</span></tt> was removed. Use a ternary operator.</li>
<li><tt class="docutils literal"><span class="pre">uses()</span></tt> was removed. Use <tt class="docutils literal"><span class="pre">App::import()</span></tt> instead.</li>
<li>Compatibility functions for PHP4 have been removed.</li>
<li>PHP5 constant has been removed.</li>
<li>Global var called <tt class="docutils literal"><span class="pre">$TIME_START</span></tt> was removed use the constant
<tt class="docutils literal"><span class="pre">TIME_START</span></tt> or <tt class="docutils literal"><span class="pre">$_SERVER['REQUEST_TIME']</span></tt> instead.</li>
</ul>
<div class="section" id="removed-constants">
<h3>Removed Constants<a class="headerlink" href="#removed-constants" title="Permalink to this headline">¶</a></h3>
<p>A number of constants were removed, as they were no longer accurate, or
duplicated.</p>
<ul class="simple">
<li>APP_PATH</li>
<li>BEHAVIORS</li>
<li>COMPONENTS</li>
<li>CONFIGS</li>
<li>CONSOLE_LIBS</li>
<li>CONTROLLERS</li>
<li>CONTROLLER_TESTS</li>
<li>ELEMENTS</li>
<li>HELPERS</li>
<li>HELPER_TESTS</li>
<li>LAYOUTS</li>
<li>LIB_TESTS</li>
<li>LIBS</li>
<li>MODELS</li>
<li>MODEL_TESTS</li>
<li>SCRIPTS</li>
<li>VIEWS</li>
</ul>
</div>
</div>
<div class="section" id="cakerequest">
<h2>CakeRequest<a class="headerlink" href="#cakerequest" title="Permalink to this headline">¶</a></h2>
<p>This new class encapsulates the parameters and functions related to an incoming
request. It replaces many features inside <tt class="docutils literal"><span class="pre">Dispatcher</span></tt>,
<tt class="docutils literal"><span class="pre">RequestHandlerComponent</span></tt> and Controller. It also replaces
<tt class="docutils literal"><span class="pre">$this-&gt;params</span></tt> array in all places. <tt class="docutils literal"><span class="pre">CakeRequest</span></tt> implements
<tt class="docutils literal"><span class="pre">ArrayAccess</span></tt> so many interactions with the old params array do not need to
change. See the CakeRequest new features for more information.</p>
</div>
<div class="section" id="request-handling-get-url-and-htaccess-files">
<h2>Request handling, $_GET[&#8216;url&#8217;] and .htaccess files<a class="headerlink" href="#request-handling-get-url-and-htaccess-files" title="Permalink to this headline">¶</a></h2>
<p>CakePHP no longer uses <tt class="docutils literal"><span class="pre">$_GET['url']</span></tt> for handling application request paths.
Instead it uses <tt class="docutils literal"><span class="pre">$_SERVER['PATH_INFO']</span></tt>. This provides a more uniform way of
handling requests between servers with URL rewriting and those without. Because
of these changes, you&#8217;ll need to update your .htaccess files and
<tt class="docutils literal"><span class="pre">app/webroot/index.php</span></tt>, as these files were changed to accommodate the
changes. Additionally <tt class="docutils literal"><span class="pre">$this-&gt;params['url']['url']</span></tt> no longer exists. Instead
you should be using $this-&gt;request-&gt;url to access the same value.
This attribute now contains the url without the leading slash <tt class="docutils literal"><span class="pre">/</span></tt> prepended.</p>
<p>Note: For the homepage itself (<tt class="docutils literal"><span class="pre">http://domain/</span></tt>) $this-&gt;request-&gt;url now returns
boolean <tt class="docutils literal"><span class="pre">false</span></tt> instead of <tt class="docutils literal"><span class="pre">/</span></tt>. Make sure you check on that accordingly:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// instead of $this-&gt;request-&gt;url === &#39;/&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="components">
<h2>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h2>
<p>Component is now the required base class for all components. You should update
your components and their constructors, as both have changed:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PrgComponent</span> <span class="k">extends</span> <span class="nx">Component</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nx">ComponentCollection</span> <span class="nv">$collection</span><span class="p">,</span>
      <span class="nv">$settings</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nv">$collection</span><span class="p">,</span> <span class="nv">$settings</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As with helpers it is important to call <tt class="docutils literal"><span class="pre">parent::__construct()</span></tt> in components with
overridden constructors. Settings for a component are also passed into the
constructor now, and not the <tt class="docutils literal"><span class="pre">initialize()</span></tt> callback. This makes getting well
constructed objects easier, and allows the base class to handle setting the
properties up.</p>
<p>Since settings have been moved to the component constructor, the
<tt class="docutils literal"><span class="pre">initialize()</span></tt> callback no longer receives <tt class="docutils literal"><span class="pre">$settings</span></tt> as its 2nd parameter.
You should update your components to use the following method signature:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="nx">Controller</span> <span class="nv">$controller</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<p>Additionally, the initialize() method is only called on components that are
enabled. This usually means components that are directly attached to the
controller object.</p>
<div class="section" id="deprecated-callbacks-removed">
<h3>Deprecated callbacks removed<a class="headerlink" href="#deprecated-callbacks-removed" title="Permalink to this headline">¶</a></h3>
<p>All the deprecated callbacks in Component have not been transferred to
ComponentCollection. Instead you should use the <cite>trigger()</cite> method to interact
with callbacks. If you need to trigger a callback you could do so by calling:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Components</span><span class="o">-&gt;</span><span class="na">trigger</span><span class="p">(</span><span class="s1">&#39;someCallback&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$this</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="changes-in-disabling-components">
<h3>Changes in disabling components<a class="headerlink" href="#changes-in-disabling-components" title="Permalink to this headline">¶</a></h3>
<p>In the past you were able to disable components via <cite>$this-&gt;Auth-&gt;enabled =
false;</cite> for example. In CakePHP 2.0 you should use the ComponentCollection&#8217;s
disable method, <cite>$this-&gt;Components-&gt;disable(&#8216;Auth&#8217;);</cite>. Using the enabled
property will not work.</p>
</div>
<div class="section" id="aclcomponent">
<h3>AclComponent<a class="headerlink" href="#aclcomponent" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">AclComponent</span></tt> implementations are now required to implement
<tt class="docutils literal"><span class="pre">AclInterface</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">AclComponent::adapter()</span></tt> has been added to allow runtime modification of
the <tt class="docutils literal"><span class="pre">ACL</span></tt> implementation the component uses.</li>
<li><tt class="docutils literal"><span class="pre">AclComponent::grant()</span></tt> has been deprecated, it will be removed in a future
version. Use <tt class="docutils literal"><span class="pre">AclComponent::allow()</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">AclComponent::revoke()</span></tt> has been deprecated, it will be removed in a
future version. Use AclComponent::deny() instead.</li>
</ul>
</div>
<div class="section" id="requesthandlercomponent">
<h3>RequestHandlerComponent<a class="headerlink" href="#requesthandlercomponent" title="Permalink to this headline">¶</a></h3>
<p>Many of RequestHandlerComponent&#8217;s methods are just proxies for <tt class="docutils literal"><span class="pre">CakeRequest</span></tt>
methods. The following methods have been deprecated and will be removed in
future versions:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">isSsl()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">isAjax()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">isPost()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">isPut()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">isFlash()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">isDelete()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">getReferer()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">getClientIp()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">accepts()</span></tt>, <tt class="docutils literal"><span class="pre">prefers()</span></tt>, <tt class="docutils literal"><span class="pre">requestedWith()</span></tt> All deal in mapped content
types now. They no longer work with mime-types. You can use
<tt class="docutils literal"><span class="pre">RequestHandler::setContent()</span></tt> to create new content types.</li>
<li><tt class="docutils literal"><span class="pre">RequestHandler::setContent()</span></tt> no longer accepts an array as a single
argument, you must supply both arguments.</li>
</ul>
</div>
<div class="section" id="securitycomponent">
<h3>SecurityComponent<a class="headerlink" href="#securitycomponent" title="Permalink to this headline">¶</a></h3>
<p>SecurityComponent no longer handles Basic and Digest Authentication. These are
both handled by the new AuthComponent. The following methods have been removed
from SecurityComponent:</p>
<ul class="simple">
<li>requireLogin()</li>
<li>generateDigestResponseHash()</li>
<li>loginCredentials()</li>
<li>loginRequest()</li>
<li>parseDigestAuthData()</li>
</ul>
<p>In addition the following properties were removed:</p>
<ul class="simple">
<li>$loginUsers</li>
<li>$requireLogin</li>
</ul>
<p>Moving these features to AuthComponent was done to provide a single place for
all types of authentication and to streamline the roles of each component.</p>
</div>
<div class="section" id="authcomponent">
<h3>AuthComponent<a class="headerlink" href="#authcomponent" title="Permalink to this headline">¶</a></h3>
<p>The AuthComponent was entirely re-factored for 2.0, this was done to help reduce
developer confusion and frustration. In addition, AuthComponent was made more
flexible and extensible. You can find out more in
the <a class="reference internal" href="../core-libraries/components/authentication.html"><em>Authentication</em></a> guide.</p>
</div>
<div class="section" id="emailcomponent">
<h3>EmailComponent<a class="headerlink" href="#emailcomponent" title="Permalink to this headline">¶</a></h3>
<p>The EmailComponent has been deprecated and has created a new library class to
send e-mails. See <a class="reference internal" href="../core-utility-libraries/email.html"><em>CakeEmail</em></a> Email changes for more details.</p>
</div>
<div class="section" id="sessioncomponent">
<h3>SessionComponent<a class="headerlink" href="#sessioncomponent" title="Permalink to this headline">¶</a></h3>
<p>Session component has lost the following methods.</p>
<ul class="simple">
<li>activate()</li>
<li>active()</li>
<li>__start()</li>
</ul>
</div>
</div>
<div class="section" id="cakeerror-removed">
<h2>cakeError removed<a class="headerlink" href="#cakeerror-removed" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">cakeError()</span></tt> method has been removed. It&#8217;s recommended that you switch all
uses of <tt class="docutils literal"><span class="pre">cakeError</span></tt> to use exceptions. <tt class="docutils literal"><span class="pre">cakeError</span></tt> was removed because it
was simulating exceptions. Instead of simulation, real exceptions are used in
CakePHP 2.0.</p>
</div>
<div class="section" id="error-handling">
<h2>Error handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h2>
<p>The error handling implementation has dramatically changed in 2.0. Exceptions
have been introduced throughout the framework, and error handling has been
updated to offer more control and flexibility. You can read more in the
<a class="reference internal" href="../development/exceptions.html"><em>Exceptions</em></a> and <a class="reference internal" href="../development/errors.html"><em>Error Handling</em></a> section.</p>
</div>
<div class="section" id="lib-classes">
<h2>Lib classes<a class="headerlink" href="#lib-classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="app">
<h3>App<a class="headerlink" href="#app" title="Permalink to this headline">¶</a></h3>
<p>The API for <tt class="docutils literal"><span class="pre">App::build()</span></tt> has changed to <tt class="docutils literal"><span class="pre">App::build($paths,</span> <span class="pre">$mode).</span></tt> It
now allows you to either append, prepend or reset/replace existing paths. The
$mode param can take any of the following 3 values: App::APPEND,
App::PREPEND, <tt class="docutils literal"><span class="pre">App::RESET</span></tt>. The default behavior of the function remains the
same (ie. Prepending new paths to existing list).</p>
<div class="section" id="app-path">
<h4>App::path()<a class="headerlink" href="#app-path" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Now supports plugins, App::path(&#8216;Controller&#8217;, &#8216;Users&#8217;) will return the folder
location of the controllers in the Users plugin.</li>
<li>Won&#8217;t merge core paths anymore, it will
only return paths defined in App::build() or default ones in app (or
corresponding plugin).</li>
</ul>
</div>
<div class="section" id="app-build">
<h4>App::build()<a class="headerlink" href="#app-build" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Will not merge app path with core paths anymore.</li>
</ul>
</div>
<div class="section" id="app-objects">
<h4>App::objects()<a class="headerlink" href="#app-objects" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Now supports plugins, App::objects(&#8216;Users.Model&#8217;) will return the models in
plugin Users.</li>
<li>Returns array() instead of false for empty results or invalid types.</li>
<li>Does not return core objects anymore, App::objects(&#8216;core&#8217;) will return array().</li>
<li>Returns the complete class name.</li>
</ul>
<p>App class lost the following properties, use method App::path() to access their value</p>
<ul class="simple">
<li>App::$models</li>
<li>App::$behaviors</li>
<li>App::$controllers</li>
<li>App::$components</li>
<li>App::$datasources</li>
<li>App::$libs</li>
<li>App::$views</li>
<li>App::$helpers</li>
<li>App::$plugins</li>
<li>App::$vendors</li>
<li>App::$locales</li>
<li>App::$shells</li>
</ul>
</div>
<div class="section" id="app-import">
<h4>App::import()<a class="headerlink" href="#app-import" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>No longer looks for classes recursively, it strictly uses the values for the
paths defined in App::build().</li>
<li>Will not be able to load App::import(&#8216;Component&#8217;, &#8216;Component&#8217;) use
App::uses(&#8216;Component&#8217;, &#8216;Controller&#8217;);</li>
<li>Using App::import(&#8216;Lib&#8217;, &#8216;CoreClass&#8217;) to load core classes is no longer
possible.</li>
<li>Importing a non-existent file, supplying a wrong type or package name, or null
values for $name and $file parameters will result in a false return value.</li>
<li>App::import(&#8216;Core&#8217;, &#8216;CoreClass&#8217;) is no longer supported, use App::uses()
instead and let the class autoloading do the rest.</li>
<li>Loading Vendor files does not look recursively in the vendors folder, it will
also no longer convert the file to underscored as it did in the past.</li>
</ul>
</div>
<div class="section" id="app-core">
<h4>App::core()<a class="headerlink" href="#app-core" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>First parameter is no longer optional, it will always return one path</li>
<li>It can&#8217;t be used anymore to get the vendors paths</li>
<li>It will only accept new style package names</li>
</ul>
</div>
<div class="section" id="class-loading-with-app-uses">
<h4>Class loading with App::uses()<a class="headerlink" href="#class-loading-with-app-uses" title="Permalink to this headline">¶</a></h4>
<p>Although there has been a huge refactoring in how the classes are loaded, in very
few occasions you will need to change your application code to respect the way you were
used to doing it. The biggest change is the introduction of a new method:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;AuthComponent&#39;</span><span class="p">,</span> <span class="s1">&#39;Controller/Component&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>We decided the function name should emulate PHP 5.3&#8217;s <tt class="docutils literal"><span class="pre">use</span></tt> keyword, just as a way
of declaring where a class name should be located. The first parameter of
<a class="reference internal" href="../core-utility-libraries/app.html#App::uses" title="App::uses"><tt class="xref php php-meth docutils literal"><span class="pre">App::uses()</span></tt></a> is the complete name of the class you intend to load,
and the second one, the package name (or namespace) where it belongs to. The
main difference with CakePHP 1.3&#8217;s <a class="reference internal" href="../core-utility-libraries/app.html#App::import" title="App::import"><tt class="xref php php-meth docutils literal"><span class="pre">App::import()</span></tt></a> is that the former
won&#8217;t actually import the class, it will just setup the system so when the class
is used for the first time it will be located.</p>
<p>Some examples on using <a class="reference internal" href="../core-utility-libraries/app.html#App::uses" title="App::uses"><tt class="xref php php-meth docutils literal"><span class="pre">App::uses()</span></tt></a> when migrating from
<a class="reference internal" href="../core-utility-libraries/app.html#App::import" title="App::import"><tt class="xref php php-meth docutils literal"><span class="pre">App::import()</span></tt></a>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;Controller&#39;</span><span class="p">,</span> <span class="s1">&#39;Pages&#39;</span><span class="p">);</span>
<span class="c1">// becomes</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;PagesController&#39;</span><span class="p">,</span> <span class="s1">&#39;Controller&#39;</span><span class="p">);</span>

<span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;Component&#39;</span><span class="p">,</span> <span class="s1">&#39;Auth&#39;</span><span class="p">);</span>
<span class="c1">// becomes</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;AuthComponent&#39;</span><span class="p">,</span> <span class="s1">&#39;Controller/Component&#39;</span><span class="p">);</span>

<span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;View&#39;</span><span class="p">,</span> <span class="s1">&#39;Media&#39;</span><span class="p">);</span>
<span class="c1">// becomes</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;MediaView&#39;</span><span class="p">,</span> <span class="s1">&#39;View&#39;</span><span class="p">);</span>

<span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;Core&#39;</span><span class="p">,</span> <span class="s1">&#39;Xml&#39;</span><span class="p">);</span>
<span class="c1">// becomes</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;Xml&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>

<span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;Datasource&#39;</span><span class="p">,</span> <span class="s1">&#39;MongoDb.MongoDbSource&#39;</span><span class="p">);</span>
<span class="c1">// becomes</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;MongoDbSource&#39;</span><span class="p">,</span> <span class="s1">&#39;MongoDb.Model/Datasource&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>All classes that were loaded in the past using <tt class="docutils literal"><span class="pre">App::import('Core',</span> <span class="pre">$class);</span></tt>
will need to be loaded using <tt class="docutils literal"><span class="pre">App::uses()</span></tt> referring to the correct package.
See the API to locate the classes in their new folders. Some examples:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;Core&#39;</span><span class="p">,</span> <span class="s1">&#39;CakeRoute&#39;</span><span class="p">);</span>
<span class="c1">// becomes</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;CakeRoute&#39;</span><span class="p">,</span> <span class="s1">&#39;Routing/Route&#39;</span><span class="p">);</span>

<span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;Core&#39;</span><span class="p">,</span> <span class="s1">&#39;Sanitize&#39;</span><span class="p">);</span>
<span class="c1">// becomes</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;Sanitize&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>

<span class="nx">App</span><span class="o">::</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;Core&#39;</span><span class="p">,</span> <span class="s1">&#39;HttpSocket&#39;</span><span class="p">);</span>
<span class="c1">// becomes</span>
<span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;HttpSocket&#39;</span><span class="p">,</span> <span class="s1">&#39;Network/Http&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>In contrast to how <a class="reference internal" href="../core-utility-libraries/app.html#App::import" title="App::import"><tt class="xref php php-meth docutils literal"><span class="pre">App::import()</span></tt></a> worked in the past, the new class
loader will not locate classes recursively. This led to an impressive
performance gain even on develop mode, at the cost of some seldom used features
that always caused side effects. To be clear again, the class loader will only
fetch the class in the exact package in which you told it to find it.</p>
</div>
<div class="section" id="app-build-and-core-paths">
<h4>App::build() and core paths<a class="headerlink" href="#app-build-and-core-paths" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="../core-utility-libraries/app.html#App::build" title="App::build"><tt class="xref php php-meth docutils literal"><span class="pre">App::build()</span></tt></a> will not merge app paths with core paths anymore.</p>
<p>Examples:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">App</span><span class="o">::</span><span class="na">build</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;controllers&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;/full/path/to/controllers&#39;</span><span class="p">)));</span>
<span class="c1">//becomes</span>
<span class="nx">App</span><span class="o">::</span><span class="na">build</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;Controller&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;/full/path/to/Controller&#39;</span><span class="p">)));</span>

<span class="nx">App</span><span class="o">::</span><span class="na">build</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;helpers&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;/full/path/to/controllers&#39;</span><span class="p">)));</span>
<span class="c1">//becomes</span>
<span class="nx">App</span><span class="o">::</span><span class="na">build</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;View/Helper&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;/full/path/to/View/Helper&#39;</span><span class="p">)));</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="cakelog">
<h3>CakeLog<a class="headerlink" href="#cakelog" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Log streams now need to implement <tt class="xref php php-class docutils literal"><span class="pre">CakeLogInterface</span></tt>. Exceptions will be raised
if a configured logger does not.</li>
</ul>
</div>
<div class="section" id="cache">
<h3>Cache<a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../core-libraries/caching.html#Cache" title="Cache"><tt class="xref php php-class docutils literal"><span class="pre">Cache</span></tt></a> is now a static class, it no longer has a getInstance() method.</li>
<li>CacheEngine is now an abstract class. You cannot directly create instances of
it anymore.</li>
<li>CacheEngine implementations must extend CacheEngine, exceptions will be
raised if a configured class does not.</li>
<li>FileCache now requires trailing slashes to be added to the path setting when
you are modifying a cache configuration.</li>
<li>Cache no longer retains the name of the last configured cache engine. This
means that operations you want to occur on a specific engine need to have the
$config parameter equal to the config name you want the operation to occur
on.</li>
</ul>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Cache</span><span class="o">::</span><span class="na">config</span><span class="p">(</span><span class="s1">&#39;something&#39;</span><span class="p">);</span>
<span class="nx">Cache</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="nv">$value</span><span class="p">);</span>

<span class="c1">// would become</span>
<span class="nx">Cache</span><span class="o">::</span><span class="na">write</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="nv">$value</span><span class="p">,</span> <span class="s1">&#39;something&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="router">
<h3>Router<a class="headerlink" href="#router" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">You can no longer modify named parameter settings with
<tt class="docutils literal"><span class="pre">Router::setRequestInfo()</span></tt>. You should use <tt class="docutils literal"><span class="pre">Router::connectNamed()</span></tt> to
configure how named parameters are handled.</p>
</li>
<li><p class="first">Router no longer has a <tt class="docutils literal"><span class="pre">getInstance()</span></tt> method. It is a static class, call
its methods and properties statically.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">Router::getNamedExpressions()</span></tt> is deprecated. Use the new router
constants. <tt class="docutils literal"><span class="pre">Router::ACTION</span></tt>, <tt class="docutils literal"><span class="pre">Router::YEAR</span></tt>, <tt class="docutils literal"><span class="pre">Router::MONTH</span></tt>,
<tt class="docutils literal"><span class="pre">Router::DAY</span></tt>, <tt class="docutils literal"><span class="pre">Router::ID</span></tt>, and <tt class="docutils literal"><span class="pre">Router::UUID</span></tt> instead.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">Router::defaults()</span></tt> has been removed. Delete the core routes file
inclusion from your applications routes.php file to disable default routing.
Conversely if you want default routing, you will have to add an include to
<tt class="docutils literal"><span class="pre">Cake/Config/routes.php</span></tt> in your routes file.</p>
</li>
<li><p class="first">When using Router::parseExtensions() the extension parameter is no longer
under <tt class="docutils literal"><span class="pre">$this-&gt;params['url']['ext']</span></tt>. Instead it is available at
<tt class="docutils literal"><span class="pre">$this-&gt;request-&gt;params['ext']</span></tt>.</p>
</li>
<li><p class="first">Default plugin routes have changed. Plugin short routes are no longer built
in for any actions other than index. Previously <tt class="docutils literal"><span class="pre">/users</span></tt> and <tt class="docutils literal"><span class="pre">/users/add</span></tt>
would map to the UsersController in the Users plugin. In 2.0, only the
<tt class="docutils literal"><span class="pre">index</span></tt> action is given a short route. If you wish to continue using short
routes, you can add a route like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span>
  <span class="s1">&#39;/users/:action&#39;</span><span class="p">,</span>
  <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;plugin&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;users&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>To your routes file for each plugin you need short routes on.</p>
</li>
</ul>
<p>Your app/Config/routes.php file needs to be updated adding this line at the bottom of the file:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">require</span> <span class="nx">CAKE</span> <span class="o">.</span> <span class="s1">&#39;Config&#39;</span> <span class="o">.</span> <span class="nx">DS</span> <span class="o">.</span> <span class="s1">&#39;routes.php&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>This is needed in order to generate the default routes for your application. If you do not wish to have such routes,
or want to implement your own standard you can include your own file with custom router rules.</p>
</div>
<div class="section" id="dispatcher">
<h3>Dispatcher<a class="headerlink" href="#dispatcher" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Dispatcher has been moved inside of cake/libs, you will have to update your
<tt class="docutils literal"><span class="pre">app/webroot/index.php</span></tt> file.</li>
<li><tt class="docutils literal"><span class="pre">Dispatcher::dispatch()</span></tt> now takes two parameters. The request and
response objects. These should be instances of <tt class="docutils literal"><span class="pre">CakeRequest</span></tt> &amp;
<tt class="docutils literal"><span class="pre">CakeResponse</span></tt> or a subclass thereof.</li>
<li><tt class="docutils literal"><span class="pre">Dispatcher::parseParams()</span></tt> now only accepts a <tt class="docutils literal"><span class="pre">CakeRequest</span></tt> object.</li>
<li><tt class="docutils literal"><span class="pre">Dispatcher::baseUrl()</span></tt> has been removed.</li>
<li><tt class="docutils literal"><span class="pre">Dispatcher::getUrl()</span></tt> has been removed.</li>
<li><tt class="docutils literal"><span class="pre">Dispatcher::uri()</span></tt> has been removed.</li>
<li><tt class="docutils literal"><span class="pre">Dispatcher::$here</span></tt> has been removed.</li>
</ul>
</div>
<div class="section" id="configure">
<h3>Configure<a class="headerlink" href="#configure" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Configure::read()</span></tt> with no parameter no longer returns the value of
&#8216;debug&#8217; instead it returns all values in Configure. Use
<tt class="docutils literal"><span class="pre">Configure::read('debug');</span></tt> if you want the value of debug.</li>
<li><tt class="docutils literal"><span class="pre">Configure::load()</span></tt> now requires a ConfigReader to be setup. Read
<a class="reference internal" href="../development/configuration.html#loading-configuration-files"><em>Loading configuration files</em></a> for more information.</li>
<li><tt class="docutils literal"><span class="pre">Configure::store()</span></tt> now writes values to a given Cache configuration. Read
<a class="reference internal" href="../development/configuration.html#loading-configuration-files"><em>Loading configuration files</em></a> for more information.</li>
</ul>
</div>
<div class="section" id="scaffold">
<h3>Scaffold<a class="headerlink" href="#scaffold" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Scaffold &#8216;edit&#8217; views should be renamed to &#8216;form&#8217;. This was done to make
scaffold and bake templates consistent.<ul>
<li><tt class="docutils literal"><span class="pre">views/scaffolds/edit.ctp</span></tt> -&gt; <tt class="docutils literal"><span class="pre">View/Scaffolds/form.ctp</span></tt></li>
<li><tt class="docutils literal"><span class="pre">views/posts/scaffold.edit.ctp</span></tt> -&gt; <tt class="docutils literal"><span class="pre">View/Posts/scaffold.form.ctp</span></tt></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="xml">
<h3>Xml<a class="headerlink" href="#xml" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The class Xml was completely re-factored. Now this class does not manipulate
data anymore, and it is a wrapper to SimpleXMLElement. You can use the following
methods:<ul>
<li><tt class="docutils literal"><span class="pre">Xml::build()</span></tt>: static method that you can pass an xml string, array, path
to file or url. The result will be a SimpleXMLElement instance or an
exception will be thrown in case of error.</li>
<li><tt class="docutils literal"><span class="pre">Xml::fromArray():</span></tt> static method that returns a SimpleXMLElement from an
array.</li>
<li><tt class="docutils literal"><span class="pre">Xml::toArray()</span></tt>: static method that returns an array from
SimpleXMLElement.</li>
</ul>
</li>
</ul>
<p>You should see the <a class="reference internal" href="../core-utility-libraries/xml.html#Xml" title="Xml"><tt class="xref php php-class docutils literal"><span class="pre">Xml</span></tt></a> documentation for more information on the changes made to
the Xml class.</p>
</div>
<div class="section" id="inflector">
<h3>Inflector<a class="headerlink" href="#inflector" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Inflector no longer has a <tt class="docutils literal"><span class="pre">getInstance()</span></tt> method.</li>
<li><tt class="docutils literal"><span class="pre">Inflector::slug()</span></tt> no longer supports the $map argument. Use
<tt class="docutils literal"><span class="pre">Inflector::rules()</span></tt> to define transliteration rules.</li>
</ul>
</div>
<div class="section" id="cakesession">
<h3>CakeSession<a class="headerlink" href="#cakesession" title="Permalink to this headline">¶</a></h3>
<p>CakeSession is now a fully static class, both <tt class="docutils literal"><span class="pre">SessionHelper</span></tt> and
<tt class="docutils literal"><span class="pre">SessionComponent</span></tt> are wrappers and sugar for it. It can now easily be used
in models or other contexts. All of its methods are called statically.</p>
<p>Session configuration has also changed <a class="reference internal" href="../development/sessions.html"><em>see the session section for more
information</em></a></p>
</div>
<div class="section" id="httpsocket">
<h3>HttpSocket<a class="headerlink" href="#httpsocket" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>HttpSocket doesn&#8217;t change the header keys. Following other places in core,
the HttpSocket does not change the headers. <span class="target" id="index-0"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc2616.html"><strong>RFC 2616</strong></a> says that headers are case
insensitive, and HttpSocket preserves the values the remote host sends.</li>
<li>HttpSocket returns responses as objects now. Instead of arrays, HttpSocket
returns instances of HttpResponse. See the <a class="reference internal" href="../core-utility-libraries/httpsocket.html#HttpSocket" title="HttpSocket"><tt class="xref php php-class docutils literal"><span class="pre">HttpSocket</span></tt></a>
documentation for more information.</li>
<li>Cookies are stored internally by host, not per instance. This means that, if
you make two requests to different servers, cookies from domain1 won&#8217;t be sent
to domain2. This was done to avoid possible security problems.</li>
</ul>
</div>
</div>
<div class="section" id="helpers">
<h2>Helpers<a class="headerlink" href="#helpers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="constructor-changed">
<h3>Constructor changed<a class="headerlink" href="#constructor-changed" title="Permalink to this headline">¶</a></h3>
<p>In order to accommodate View being removed from the ClassRegistry, the signature
of Helper::__construct() was changed. You should update any subclasses to use
the following:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nx">View</span> <span class="nv">$View</span><span class="p">,</span> <span class="nv">$settings</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span>
</pre></div>
</div>
<p>When overriding the constructor you should always call <cite>parent::__construct</cite> as
well. <cite>Helper::__construct</cite> stores the view instance at <cite>$this-&gt;_View</cite> for
later reference. The settings are not handled by the parent constructor.</p>
</div>
<div class="section" id="helpercollection-added">
<h3>HelperCollection added<a class="headerlink" href="#helpercollection-added" title="Permalink to this headline">¶</a></h3>
<p>After examining the responsibilities of each class involved in the View layer,
it became clear that View was handling much more than a single task. The
responsibility of creating helpers is not central to what View does, and was
moved into HelperCollection. HelperCollection is responsible for loading and
constructing helpers, as well as triggering callbacks on helpers. By default,
View creates a HelperCollection in its constructor, and uses it for subsequent
operations. The HelperCollection for a view can be found at <cite>$this-&gt;Helpers</cite></p>
<p>The motivations for refactoring this functionality came from a few issues.</p>
<ul class="simple">
<li>View being registered in ClassRegistry could cause registry poisoning issues
when requestAction or the EmailComponent were used.</li>
<li>View being accessible as a global symbol invited abuse.</li>
<li>Helpers were not self contained. After constructing a helper, you had to
manually construct several other objects in order to get a functioning object.</li>
</ul>
<p>You can read more about HelperCollection in the
<a class="reference internal" href="../core-libraries/collections.html"><em>Collections</em></a> documentation.</p>
</div>
<div class="section" id="deprecated-properties">
<h3>Deprecated properties<a class="headerlink" href="#deprecated-properties" title="Permalink to this headline">¶</a></h3>
<p>The following properties on helpers are deprecated, you should use the request
object properties or Helper methods instead of directly accessing these
properties as they will be removed in a future release.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Helper::$webroot</span></tt> is deprecated, use the request object&#8217;s webroot
property.</li>
<li><tt class="docutils literal"><span class="pre">Helper::$base</span></tt> is deprecated, use the request object&#8217;s base property.</li>
<li><tt class="docutils literal"><span class="pre">Helper::$here</span></tt> is deprecated, use the request object&#8217;s here property.</li>
<li><tt class="docutils literal"><span class="pre">Helper::$data</span></tt> is deprecated, use the request object&#8217;s data property.</li>
<li><tt class="docutils literal"><span class="pre">Helper::$params</span></tt> is deprecated, use the <tt class="docutils literal"><span class="pre">$this-&gt;request</span></tt> instead.</li>
</ul>
</div>
<div class="section" id="xmlhelper-ajaxhelper-and-javascripthelper-removed">
<h3>XmlHelper, AjaxHelper and JavascriptHelper removed<a class="headerlink" href="#xmlhelper-ajaxhelper-and-javascripthelper-removed" title="Permalink to this headline">¶</a></h3>
<p>The AjaxHelper and JavascriptHelper have been removed as they were deprecated in
version 1.3. The XmlHelper was removed, as it was made obsolete and redundant
with the improvements to <a class="reference internal" href="../core-utility-libraries/xml.html#Xml" title="Xml"><tt class="xref php php-class docutils literal"><span class="pre">Xml</span></tt></a>. The <tt class="docutils literal"><span class="pre">Xml</span></tt> class should be used to
replace previous usage of XmlHelper.</p>
<p>The AjaxHelper, and JavascriptHelper are replaced with the JsHelper and HtmlHelper.</p>
</div>
<div class="section" id="jshelper">
<h3>JsHelper<a class="headerlink" href="#jshelper" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">JsBaseEngineHelper</span></tt> is now abstract, you will need to implement all the
methods that previously generated errors.</li>
</ul>
</div>
<div class="section" id="paginatorhelper">
<h3>PaginatorHelper<a class="headerlink" href="#paginatorhelper" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">PaginatorHelper::sort()</span></tt> now takes the title and key arguments in the
reverse order. $key will always be first now. This was done to prevent
needing to swap arguments when adding a second one.</li>
<li>PaginatorHelper had a number of changes to the paging params used internally.
The default key has been removed.</li>
<li>PaginatorHelper now supports generating links with paging parameters in the
querystring.</li>
</ul>
<p>There have been a few improvements to pagination in general. For more
information on that you should read the new pagination features page.</p>
</div>
<div class="section" id="formhelper">
<h3>FormHelper<a class="headerlink" href="#formhelper" title="Permalink to this headline">¶</a></h3>
<div class="section" id="selected-parameter-removed">
<h4>$selected parameter removed<a class="headerlink" href="#selected-parameter-removed" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">$selected</span></tt> parameter was removed from several methods in <tt class="docutils literal"><span class="pre">FormHelper</span></tt>.
All methods now support a <tt class="docutils literal"><span class="pre">$attributes['value']</span></tt> key now which should be used
in place of <tt class="docutils literal"><span class="pre">$selected</span></tt>. This change simplifies the <tt class="docutils literal"><span class="pre">FormHelper</span></tt> methods,
reducing the number of arguments, and reduces the duplication that <tt class="docutils literal"><span class="pre">$selected</span></tt>
created. The effected methods are:</p>
<ul class="simple">
<li>FormHelper::select()</li>
<li>FormHelper::dateTime()</li>
<li>FormHelper::year()</li>
<li>FormHelper::month()</li>
<li>FormHelper::day()</li>
<li>FormHelper::hour()</li>
<li>FormHelper::minute()</li>
<li>FormHelper::meridian()</li>
</ul>
</div>
<div class="section" id="default-urls-on-forms-is-the-current-action">
<h4>Default URLs on forms is the current action<a class="headerlink" href="#default-urls-on-forms-is-the-current-action" title="Permalink to this headline">¶</a></h4>
<p>The default url for all forms, is now the current url including passed, named,
and querystring parameters. You can override this default by supplying
<tt class="docutils literal"><span class="pre">$options['url']</span></tt> in the second parameter of <tt class="docutils literal"><span class="pre">$this-&gt;Form-&gt;create()</span></tt>.</p>
</div>
<div class="section" id="formhelper-hidden">
<h4>FormHelper::hidden()<a class="headerlink" href="#formhelper-hidden" title="Permalink to this headline">¶</a></h4>
<p>Hidden fields no longer remove the class attribute. This means that if there are
validation errors on hidden fields, the <tt class="docutils literal"><span class="pre">error-field</span></tt> class name will be
applied.</p>
</div>
</div>
<div class="section" id="cachehelper">
<h3>CacheHelper<a class="headerlink" href="#cachehelper" title="Permalink to this headline">¶</a></h3>
<p>CacheHelper has been fully decoupled from View, and uses helper callbacks to
generate caches. You should remember to place CacheHelper after other helpers
that modify content in their <tt class="docutils literal"><span class="pre">afterRender</span></tt> and <tt class="docutils literal"><span class="pre">afterLayout</span></tt> callbacks. If
you don&#8217;t some changes will not be part of the cached content.</p>
<p>CacheHelper also no longer uses <tt class="docutils literal"><span class="pre">&lt;cake:nocache&gt;</span></tt> to indicate un-cached
regions. Instead it uses special HTML/XML comments. <tt class="docutils literal"><span class="pre">&lt;!--nocache--&gt;</span></tt> and
<tt class="docutils literal"><span class="pre">&lt;!--/nocache--&gt;</span></tt>. This helps CacheHelper generate valid markup and still
perform the same functions as before. You can read more CacheHelper and View
changes.</p>
</div>
<div class="section" id="helper-attribute-format-more-flexible">
<h3>Helper Attribute format more flexible<a class="headerlink" href="#helper-attribute-format-more-flexible" title="Permalink to this headline">¶</a></h3>
<p>The Helper class has more 3 protected attributes:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Helper::_minimizedAttributes</span></tt>: array with minimized attributes (ie:
<tt class="docutils literal"><span class="pre">array('checked',</span> <span class="pre">'selected',</span> <span class="pre">...)</span></tt>);</li>
<li><tt class="docutils literal"><span class="pre">Helper::_attributeFormat</span></tt>: how attributes will be generated (ie:
<tt class="docutils literal"><span class="pre">%s=&quot;%s&quot;</span></tt>);</li>
<li><tt class="docutils literal"><span class="pre">Helper::_minimizedAttributeFormat</span></tt>: how minimized attributes will be
generated: (ie <tt class="docutils literal"><span class="pre">%s=&quot;%s&quot;</span></tt>)</li>
</ul>
<p>By default the values used in CakePHP 1.3 were not changed. But now you can
use boolean attributes from HTML, like <tt class="docutils literal"><span class="pre">&lt;input</span> <span class="pre">type=&quot;checkbox&quot;</span> <span class="pre">checked</span> <span class="pre">/&gt;</span></tt>. To
this, just change <tt class="docutils literal"><span class="pre">$_minimizedAttributeFormat</span></tt> in your AppHelper to <tt class="docutils literal"><span class="pre">%s</span></tt>.</p>
<p>To use with Html/Form helpers and others, you can write:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Form</span><span class="o">-&gt;</span><span class="na">checkbox</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;checked&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;some_value&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>Other facility is that minimized attributes can be passed as item and not as
key. For example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Form</span><span class="o">-&gt;</span><span class="na">checkbox</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;checked&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;some_value&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>Note that <tt class="docutils literal"><span class="pre">checked</span></tt> have a numeric key.</p>
</div>
</div>
<div class="section" id="controller">
<h2>Controller<a class="headerlink" href="#controller" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Controller&#8217;s constructor now takes two parameters. A CakeRequest, and
CakeResponse objects. These objects are used to populate several deprecated
properties and will be set to $request and $response inside the controller.</li>
<li><tt class="docutils literal"><span class="pre">Controller::$webroot</span></tt> is deprecated, use the request object&#8217;s webroot
property.</li>
<li><tt class="docutils literal"><span class="pre">Controller::$base</span></tt> is deprecated, use the request object&#8217;s base property.</li>
<li><tt class="docutils literal"><span class="pre">Controller::$here</span></tt> is deprecated, use the request object&#8217;s here property.</li>
<li><tt class="docutils literal"><span class="pre">Controller::$data</span></tt> is deprecated, use the request object&#8217;s data property.</li>
<li><tt class="docutils literal"><span class="pre">Controller::$params</span></tt> is deprecated, use the <tt class="docutils literal"><span class="pre">$this-&gt;request</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">Controller::$Component</span></tt> has been moved to <tt class="docutils literal"><span class="pre">Controller::$Components</span></tt>. See
the <a class="reference internal" href="../core-libraries/collections.html"><em>Collections</em></a> documentation for more information.</li>
<li><tt class="docutils literal"><span class="pre">Controller::$view</span></tt> has been renamed to <tt class="docutils literal"><span class="pre">Controller::$viewClass</span></tt>.
<tt class="docutils literal"><span class="pre">Controller::$view</span></tt> is now used to change which view file is rendered.</li>
<li><tt class="docutils literal"><span class="pre">Controller::render()</span></tt> now returns a CakeResponse object.</li>
</ul>
<p>The deprecated properties on Controller will be accessible through a <tt class="docutils literal"><span class="pre">__get()</span></tt>
method. This method will be removed in future versions, so it&#8217;s recommended that
you update your application.</p>
<p>Controller now defines a maxLimit for pagination. This maximum limit is set to
100, but can be overridden in the $paginate options.</p>
<div class="section" id="pagination">
<h3>Pagination<a class="headerlink" href="#pagination" title="Permalink to this headline">¶</a></h3>
<p>Pagination has traditionally been a single method in Controller, this created a
number of problems though. Pagination was hard to extend, replace, or modify. For
2.0 pagination has been extracted into a component. <a class="reference internal" href="../controllers.html#Controller::paginate" title="Controller::paginate"><tt class="xref php php-meth docutils literal"><span class="pre">Controller::paginate()</span></tt></a> still
exists, and serves as a convenience method for loading and using the
<a class="reference internal" href="../core-libraries/components/pagination.html#PaginatorComponent" title="PaginatorComponent"><tt class="xref php php-class docutils literal"><span class="pre">PaginatorComponent</span></tt></a>.</p>
<p>For more information on the new features offered by pagination in 2.0, see the
<a class="reference internal" href="../core-libraries/components/pagination.html"><em>Pagination</em></a> documentation.</p>
</div>
</div>
<div class="section" id="view">
<h2>View<a class="headerlink" href="#view" title="Permalink to this headline">¶</a></h2>
<div class="section" id="view-no-longer-registered-in-classregistry">
<h3>View no longer registered in ClassRegistry<a class="headerlink" href="#view-no-longer-registered-in-classregistry" title="Permalink to this headline">¶</a></h3>
<p>The view being registered ClassRegistry invited abuse and affectively created a
global symbol. In 2.0 each Helper receives the current <cite>View</cite> instance in its
constructor. This allows helpers access to the view in a similar fashion as in
the past, without creating global symbols. You can access the view instance at
<cite>$this-&gt;_View</cite> in any helper.</p>
</div>
<div class="section" id="id2">
<h3>Deprecated properties<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">View::$webroot</span></tt> is deprecated, use the request object&#8217;s webroot property.</li>
<li><tt class="docutils literal"><span class="pre">View::$base</span></tt> is deprecated, use the request object&#8217;s base property.</li>
<li><tt class="docutils literal"><span class="pre">View::$here</span></tt> is deprecated, use the request object&#8217;s here property.</li>
<li><tt class="docutils literal"><span class="pre">View::$data</span></tt> is deprecated, use the request object&#8217;s data property.</li>
<li><tt class="docutils literal"><span class="pre">View::$params</span></tt> is deprecated, use the <tt class="docutils literal"><span class="pre">$this-&gt;request</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">View::$loaded</span></tt> has been removed. Use the <tt class="docutils literal"><span class="pre">HelperCollection</span></tt> to access
loaded helpers.</li>
<li><tt class="docutils literal"><span class="pre">View::$model</span></tt> has been removed. This behavior is now on <a class="reference internal" href="../views/helpers.html#Helper" title="Helper"><tt class="xref php php-class docutils literal"><span class="pre">Helper</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">View::$modelId</span></tt> has been removed. This behavior is now on
<a class="reference internal" href="../views/helpers.html#Helper" title="Helper"><tt class="xref php php-class docutils literal"><span class="pre">Helper</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">View::$association</span></tt> has been removed. This behavior is now on
<a class="reference internal" href="../views/helpers.html#Helper" title="Helper"><tt class="xref php php-class docutils literal"><span class="pre">Helper</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">View::$fieldSuffix</span></tt> has been removed. This behavior is now on
<a class="reference internal" href="../views/helpers.html#Helper" title="Helper"><tt class="xref php php-class docutils literal"><span class="pre">Helper</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">View::entity()</span></tt> has been removed. This behavior is now on
<a class="reference internal" href="../views/helpers.html#Helper" title="Helper"><tt class="xref php php-class docutils literal"><span class="pre">Helper</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">View::_loadHelpers()</span></tt> has been removed, used <tt class="docutils literal"><span class="pre">View::loadHelpers()</span></tt>
instead.</li>
<li>How <tt class="docutils literal"><span class="pre">View::element()</span></tt> uses caching has changed, see below for more
information.</li>
<li>View callbacks have been shifted around, see below for more information</li>
<li>API for <tt class="docutils literal"><span class="pre">View::element()</span></tt> has changed. Read here for more info.</li>
</ul>
<p>The deprecated properties on View will be accessible through a <tt class="docutils literal"><span class="pre">__get()</span></tt>
method. This method will be removed in future versions, so it&#8217;s recommended that
you update your application.</p>
</div>
<div class="section" id="removed-methods">
<h3>Removed methods<a class="headerlink" href="#removed-methods" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">View::_triggerHelpers()</span></tt> Use <tt class="docutils literal"><span class="pre">$this-&gt;Helpers-&gt;trigger()</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">View::_loadHelpers()</span></tt> Use <tt class="docutils literal"><span class="pre">$this-&gt;loadHelpers()</span></tt> instead. Helpers now lazy
load their own helpers.</li>
</ul>
</div>
<div class="section" id="added-methods">
<h3>Added methods<a class="headerlink" href="#added-methods" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">View::loadHelper($name,</span> <span class="pre">$settings</span> <span class="pre">=</span> <span class="pre">array());</span></tt> Load a single helper.</li>
<li><tt class="docutils literal"><span class="pre">View::loadHelpers()</span></tt> Loads all the helpers indicated in <tt class="docutils literal"><span class="pre">View::$helpers</span></tt>.</li>
</ul>
</div>
<div class="section" id="view-helpers">
<h3>View-&gt;Helpers<a class="headerlink" href="#view-helpers" title="Permalink to this headline">¶</a></h3>
<p>By default View objects contain a <tt class="xref php php-class docutils literal"><span class="pre">HelperCollection</span></tt> at <tt class="docutils literal"><span class="pre">$this-&gt;Helpers</span></tt>.</p>
</div>
<div class="section" id="themes">
<h3>Themes<a class="headerlink" href="#themes" title="Permalink to this headline">¶</a></h3>
<p>To use themes in your Controller you no longer set <tt class="docutils literal"><span class="pre">public</span> <span class="pre">$view</span> <span class="pre">=</span> <span class="pre">'Theme';</span></tt>.
Use <tt class="docutils literal"><span class="pre">public</span> <span class="pre">$viewClass</span> <span class="pre">=</span> <span class="pre">'Theme';</span></tt> instead.</p>
</div>
<div class="section" id="callback-positioning-changes">
<h3>Callback positioning changes<a class="headerlink" href="#callback-positioning-changes" title="Permalink to this headline">¶</a></h3>
<p>beforeLayout used to fire after scripts_for_layout and content_for_layout were
prepared. In 2.0, beforeLayout is fired before any of the special variables are
prepared, allowing you to manipulate them before they are passed to the layout.
The same was done for beforeRender. It is now fired well before any view
variables are manipulated. In addition to these changes, helper callbacks always
receive the name of the file about to be rendered. This combined with helpers
being able to access the view through <tt class="docutils literal"><span class="pre">$this-&gt;_View</span></tt> and the current view
content through <tt class="docutils literal"><span class="pre">$this-&gt;_View-&gt;output</span></tt> gives you more power than ever before.</p>
</div>
<div class="section" id="helper-callback-signature-changes">
<h3>Helper callback signature changes<a class="headerlink" href="#helper-callback-signature-changes" title="Permalink to this headline">¶</a></h3>
<p>Helper callbacks now always get one argument passed in. For beforeRender and
afterRender it is the view file being rendered. For beforeLayout and afterLayout
it is the layout file being rendered. Your helpers function signatures should
look like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">beforeRender</span><span class="p">(</span><span class="nv">$viewFile</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">afterRender</span><span class="p">(</span><span class="nv">$viewFile</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">beforeLayout</span><span class="p">(</span><span class="nv">$layoutFile</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">afterLayout</span><span class="p">(</span><span class="nv">$layoutFile</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Element caching, and view callbacks have been changed in 2.0 to help provide you
with more flexibility and consistency. <a class="reference internal" href="../views.html"><em>Read more about those
changes</em></a>.</p>
</div>
<div class="section" id="cachehelper-decoupled">
<h3>CacheHelper decoupled<a class="headerlink" href="#cachehelper-decoupled" title="Permalink to this headline">¶</a></h3>
<p>In previous versions there was a tight coupling between <a class="reference internal" href="../core-libraries/helpers/cache.html#CacheHelper" title="CacheHelper"><tt class="xref php php-class docutils literal"><span class="pre">CacheHelper</span></tt></a>
and <a class="reference internal" href="../views.html#View" title="View"><tt class="xref php php-class docutils literal"><span class="pre">View</span></tt></a>. For 2.0 this coupling has been removed and CacheHelper
just uses callbacks like other helpers to generate full page caches.</p>
</div>
<div class="section" id="cachehelper-cake-nocache-tags-changed">
<h3>CacheHelper <tt class="docutils literal"><span class="pre">&lt;cake:nocache&gt;</span></tt> tags changed<a class="headerlink" href="#cachehelper-cake-nocache-tags-changed" title="Permalink to this headline">¶</a></h3>
<p>In previous versions, CacheHelper used a special <tt class="docutils literal"><span class="pre">&lt;cake:nocache&gt;</span></tt> tag as
markers for output that should not be part of the full page cache. These tags
were not part of any XML schema, and were not possible to validate in HTML or
XML documents. For 2.0, these tags have been replaced with HTML/XML comments:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">cake</span><span class="o">:</span><span class="nx">nocache</span><span class="o">&gt;</span> <span class="nx">becomes</span> <span class="o">&lt;!--</span><span class="nx">nocache</span><span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="nx">cake</span><span class="o">:</span><span class="nx">nocache</span><span class="o">&gt;</span> <span class="nx">becomes</span> <span class="o">&lt;!--/</span><span class="nx">nocache</span><span class="o">--&gt;</span>
</pre></div>
</div>
<p>The internal code for full page view caches has also changed, so be sure to
clear out view cache files when updating.</p>
</div>
<div class="section" id="mediaview-changes">
<h3>MediaView changes<a class="headerlink" href="#mediaview-changes" title="Permalink to this headline">¶</a></h3>
<p><tt class="xref php php-func docutils literal"><span class="pre">MediaView::render()</span></tt> now forces download of unknown file types
instead of just returning false. If you want you provide an alternate download
filename you now specify the full name including extension using key &#8216;name&#8217; in
the array parameter passed to the function.</p>
</div>
</div>
<div class="section" id="phpunit-instead-of-simpletest">
<h2>PHPUnit instead of SimpleTest<a class="headerlink" href="#phpunit-instead-of-simpletest" title="Permalink to this headline">¶</a></h2>
<p>All of the core test cases and supporting infrastructure have been ported to use
PHPUnit 3.5. Of course you can continue to use SimpleTest in your application by
replacing the related files. No further support will be given for SimpleTest and
it is recommended that you migrate to PHPUnit as well. For some additional
information on how to migrate your tests see PHPUnit migration hints.</p>
<div class="section" id="no-more-group-tests">
<h3>No more group tests<a class="headerlink" href="#no-more-group-tests" title="Permalink to this headline">¶</a></h3>
<p>PHPUnit does not differentiate between group tests and single test cases in the
runner. Because of this, the group test options, and support for old style group
tests has been removed. It is recommended that GroupTests be ported to
<tt class="docutils literal"><span class="pre">PHPUnit_Framework_Testsuite</span></tt> subclasses. You can find several examples of this
in CakePHP&#8217;s test suite. Group test related methods on <tt class="docutils literal"><span class="pre">TestManager</span></tt> have also
been removed.</p>
</div>
<div class="section" id="testsuite-shell">
<h3>Testsuite shell<a class="headerlink" href="#testsuite-shell" title="Permalink to this headline">¶</a></h3>
<p>The testsuite shell has had its invocation simplified and expanded. You no
longer need to differentiate between <tt class="docutils literal"><span class="pre">case</span></tt> and <tt class="docutils literal"><span class="pre">group</span></tt>. It is assumed that
all tests are cases. In the past you would have done
<tt class="docutils literal"><span class="pre">cake</span> <span class="pre">testsuite</span> <span class="pre">app</span> <span class="pre">case</span> <span class="pre">models/post</span></tt> you can now do <tt class="docutils literal"><span class="pre">cake</span> <span class="pre">testsuite</span> <span class="pre">app</span>
<span class="pre">Model/Post</span></tt>.</p>
<p>The testsuite shell has been refactored to use the PHPUnit cli tool. It now
supports all the command line options supported by PHPUnit.
<tt class="docutils literal"><span class="pre">cake</span> <span class="pre">testsuite</span> <span class="pre">help</span></tt> will show you a list of all possible modifiers.</p>
</div>
</div>
<div class="section" id="model">
<h2>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h2>
<p>Model relationships are now lazy loaded. You can run into a situation where
assigning a value to a nonexistent model property will throw errors:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$Post</span><span class="o">-&gt;</span><span class="na">inexistentProperty</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>will throw the error &#8220;Notice: Indirect modification of overloaded property
$inexistentProperty has no effect&#8221;. Assigning an initial value to the property
solves the issue:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$Post</span><span class="o">-&gt;</span><span class="na">nonexistentProperty</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$Post</span><span class="o">-&gt;</span><span class="na">nonexistentProperty</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Or just declare the property in the model class:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Post</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$nonexistentProperty</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Either of these approaches will solve the notice errors.</p>
<p>The notation of <tt class="docutils literal"><span class="pre">find()</span></tt> in CakePHP 1.2 is no longer supported. Finds should use
notation <tt class="docutils literal"><span class="pre">$model-&gt;find('type',</span> <span class="pre">array(PARAMS))</span></tt> in CakePHP 1.3.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Model::$_findMethods</span></tt> is now <tt class="docutils literal"><span class="pre">Model::$findMethods</span></tt>. This property is now
public and can be modified by behaviors.</li>
</ul>
<div class="section" id="database-objects">
<h3>Database objects<a class="headerlink" href="#database-objects" title="Permalink to this headline">¶</a></h3>
<p>CakePHP 2.0 introduces some changes to Database objects that should not greatly
affect backwards compatibility. The biggest one is the adoption of PDO for
handling database connections. If you are using a vanilla installation of PHP 5
you will already have installed the needed extensions, but you may need to
activate individual extensions for each driver you wish to use.</p>
<p>Using PDO across all DBOs let us homogenize the code for each one and provide
more reliable and predictable behavior for all drivers. It also allowed us to
write more portable and accurate tests for database related code.</p>
<p>The first thing users will probably miss is the &#8220;affected rows&#8221; and &#8220;total rows&#8221;
statistics, as they are not reported due to the more performant and lazy design
of PDO, there are ways to overcome this issue but very specific to each
database. Those statistics are not gone, though, but could be missing or even
inaccurate for some drivers.</p>
<p>A nice feature added after the PDO adoption is the ability to use prepared
statements with query placeholders using the native driver if available.</p>
<div class="section" id="list-of-changes">
<h4>List of Changes<a class="headerlink" href="#list-of-changes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">DboMysqli was removed, we will support DboMysql only.</p>
</li>
<li><p class="first">API for DboSource::execute has changed, it will now take an array of query
values as second parameter:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nv">$sql</span><span class="p">,</span> <span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span><span class="p">(),</span> <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span>
</pre></div>
</div>
<p>became:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nv">$sql</span><span class="p">,</span> <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">(),</span> <span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span>
</pre></div>
</div>
<p>third parameter is meant to receive options for logging, currently it only
understands the &#8220;log&#8221; option.</p>
</li>
<li><p class="first">DboSource::value() looses its third parameter, it was not used anyways</p>
</li>
<li><p class="first">DboSource::fetchAll() now accepts an array as second parameter, to pass values
to be bound to the query, third parameter was dropped. Example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$db</span><span class="o">-&gt;</span><span class="na">fetchAll</span><span class="p">(</span>
  <span class="s1">&#39;SELECT</span>
<span class="s1">    * from users</span>
<span class="s1">  WHERE</span>
<span class="s1">    username = ?</span>
<span class="s1">  AND</span>
<span class="s1">    password = ?&#39;</span><span class="p">,</span>
  <span class="k">array</span><span class="p">(</span><span class="s1">&#39;jhon&#39;</span><span class="p">,</span> <span class="s1">&#39;12345&#39;</span><span class="p">)</span>
<span class="p">);</span>
<span class="nv">$db</span><span class="o">-&gt;</span><span class="na">fetchAll</span><span class="p">(</span>
  <span class="s1">&#39;SELECT</span>
<span class="s1">    * from users</span>
<span class="s1">  WHERE</span>
<span class="s1">      username = :username</span>
<span class="s1">  AND</span>
<span class="s1">    password = :password&#39;</span><span class="p">,</span>
  <span class="k">array</span><span class="p">(</span><span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;jhon&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;12345&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
<p>The PDO driver will automatically escape those values for you.</p>
<ul class="simple">
<li>Database statistics are collected only if the &#8220;fullDebug&#8221; property of the
corresponding DBO is set to true.</li>
<li>New method DboSource::getConnection() will return the PDO object in case you
need to talk to the driver directly.</li>
<li>Treatment of boolean values changed a bit to make it more cross-database
friendly, you may need to change your test cases.</li>
<li>PostgreSQL support was immensely improved, it now correctly creates schemas,
truncate tables, and is easier to write tests using it.</li>
<li>DboSource::insertMulti() will no longer accept sql string, just pass an array
of fields and a nested array of values to insert them all at once</li>
<li>TranslateBehavior was refactored to use model virtualFields, this makes the
implementation more portable.</li>
<li>All tests cases with MySQL related stuff were moved to the corresponding
driver test case. This left the DboSourceTest file a bit skinny.</li>
<li>Transaction nesting support. Now it is possible to start a transaction several
times. It will only be committed if the commit method is called the same
amount of times.</li>
<li>SQLite support was greatly improved. The major difference with cake 1.3 is
that it will only support SQLite 3.x . It is a great alternative for
development apps, and quick at running test cases.</li>
<li>Boolean column values will be casted to PHP native boolean type automatically,
so make sure you update your test cases and code if you were expecting the
returned value to be a string or an integer: If you had a &#8220;published&#8221; column in
the past using MySQL all values returned from a find would be numeric in the
past, now they are strict boolean values.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="behaviors">
<h2>Behaviors<a class="headerlink" href="#behaviors" title="Permalink to this headline">¶</a></h2>
<div class="section" id="behaviorcollection">
<h3>BehaviorCollection<a class="headerlink" href="#behaviorcollection" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">BehaviorCollection</span></tt> no longer <tt class="docutils literal"><span class="pre">strtolower()'s</span></tt> mappedMethods. Behavior
mappedMethods are now case sensitive.</li>
</ul>
</div>
<div class="section" id="aclbehavior-and-treebehavior">
<h3>AclBehavior and TreeBehavior<a class="headerlink" href="#aclbehavior-and-treebehavior" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">No longer supports strings as configuration. Example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$actsAs</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Acl&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Controlled&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Tree&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;nested&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
<p>became:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$actsAs</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Acl&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Controlled&#39;</span><span class="p">),</span>
    <span class="s1">&#39;Tree&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;nested&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="plugins">
<h2>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h2>
<p>Plugins no longer magically append their plugin prefix to components, helpers
and models used within them. You must be explicit with the components, models,
and helpers you wish to use. In the past:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Session&#39;</span><span class="p">,</span> <span class="s1">&#39;Comments&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Would look in the controller&#8217;s plugin before checking app/core components. It
will now only look in the app/core components. If you wish to use objects from a
plugin you must put the plugin name:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Session&#39;</span><span class="p">,</span> <span class="s1">&#39;Comment.Comments&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>This was done to reduce hard to debug issues caused by magic misfiring. It also
improves consistency in an application, as objects have one authoritative way to
reference them.</p>
<div class="section" id="plugin-app-controller-and-plugin-app-model">
<h3>Plugin App Controller and Plugin App Model<a class="headerlink" href="#plugin-app-controller-and-plugin-app-model" title="Permalink to this headline">¶</a></h3>
<p>The plugin AppController and AppModel are no longer located directly in the
plugin folder. They are now placed into the plugin&#8217;s Controller and Model
folders as such:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="o">/</span><span class="nx">app</span>
    <span class="o">/</span><span class="nx">Plugin</span>
        <span class="o">/</span><span class="nx">Comment</span>
            <span class="o">/</span><span class="nx">Controller</span>
                <span class="nx">CommentAppController</span><span class="o">.</span><span class="nx">php</span>
            <span class="o">/</span><span class="nx">Model</span>
                <span class="nx">CommentAppModel</span><span class="o">.</span><span class="nx">php</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="console">
<h2>Console<a class="headerlink" href="#console" title="Permalink to this headline">¶</a></h2>
<p>Much of the console framework was rebuilt for 2.0 to address many of the
following issues:</p>
<ul class="simple">
<li>Tightly coupled.</li>
<li>It was difficult to make help text for shells.</li>
<li>Parameters for shells were tedious to validate.</li>
<li>Plugin tasks were not reachable.</li>
<li>Objects with too many responsibilities.</li>
</ul>
<div class="section" id="backwards-incompatible-shell-api-changes">
<h3>Backwards incompatible Shell API changes<a class="headerlink" href="#backwards-incompatible-shell-api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Shell</span></tt> no longer has an <tt class="docutils literal"><span class="pre">AppModel</span></tt> instance. This <tt class="docutils literal"><span class="pre">AppModel</span></tt> instance
was not correctly built and was problematic.</li>
<li><tt class="docutils literal"><span class="pre">Shell::_loadDbConfig()</span></tt> has been removed. It was not generic enough to
stay in Shell. You can use the <tt class="docutils literal"><span class="pre">DbConfigTask</span></tt> if you need to ask the user
to create a db config.</li>
<li>Shells no longer use <tt class="docutils literal"><span class="pre">$this-&gt;Dispatcher</span></tt> to access stdin, stdout, and
stderr. They have <tt class="docutils literal"><span class="pre">ConsoleOutput</span></tt> and <tt class="docutils literal"><span class="pre">ConsoleInput</span></tt> objects to handle
that now.</li>
<li>Shells lazy load tasks, and use <tt class="docutils literal"><span class="pre">TaskCollection</span></tt> to provide an interface
similar to that used for Helpers, Components, and Behaviors for on the fly
loading of tasks.</li>
<li><tt class="docutils literal"><span class="pre">Shell::$shell</span></tt> has been removed.</li>
<li><tt class="docutils literal"><span class="pre">Shell::_checkArgs()</span></tt> has been removed. Configure a <tt class="docutils literal"><span class="pre">ConsoleOptionParser</span></tt></li>
<li>Shells no longer have direct access to <tt class="docutils literal"><span class="pre">ShellDispatcher</span></tt>. You should use
the <tt class="docutils literal"><span class="pre">ConsoleInput</span></tt>, and <tt class="docutils literal"><span class="pre">ConsoleOutput</span></tt> objects instead. If you need to
dispatch other shells, see the section on &#8216;Invoking other shells from your
shell&#8217;.</li>
</ul>
</div>
<div class="section" id="backwards-incompatible-shelldispatcher-api-changes">
<h3>Backwards incompatible ShellDispatcher API changes<a class="headerlink" href="#backwards-incompatible-shelldispatcher-api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">ShellDispatcher</span></tt> no longer has stdout, stdin, stderr file handles.</li>
<li><tt class="docutils literal"><span class="pre">ShellDispatcher::$shell</span></tt> has been removed.</li>
<li><tt class="docutils literal"><span class="pre">ShellDispatcher::$shellClass</span></tt> has been removed.</li>
<li><tt class="docutils literal"><span class="pre">ShellDispatcher::$shellName</span></tt> has been removed.</li>
<li><tt class="docutils literal"><span class="pre">ShellDispatcher::$shellCommand</span></tt> has been removed.</li>
<li><tt class="docutils literal"><span class="pre">ShellDispatcher::$shellPaths</span></tt> has been removed, use
<tt class="docutils literal"><span class="pre">App::path('shells');</span></tt> instead.</li>
<li><tt class="docutils literal"><span class="pre">ShellDispatcher</span></tt> no longer uses &#8216;help&#8217; as a magic method that has special
status. Instead use the <tt class="docutils literal"><span class="pre">--help/-h</span></tt> options, and an option parser.</li>
</ul>
</div>
<div class="section" id="backwards-incompatible-shell-changes">
<h3>Backwards incompatible Shell Changes<a class="headerlink" href="#backwards-incompatible-shell-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bake&#8217;s ControllerTask no longer takes <tt class="docutils literal"><span class="pre">public</span></tt> and <tt class="docutils literal"><span class="pre">admin</span></tt> as passed
arguments. They are now options, indicated like <tt class="docutils literal"><span class="pre">--admin</span></tt> and <tt class="docutils literal"><span class="pre">--public</span></tt>.</li>
</ul>
<p>It&#8217;s recommended that you use the help on shells you use to see what if any
parameters have changed. It&#8217;s also recommended that you read the console new
features for more information on new APIs that are available.</p>
</div>
</div>
<div class="section" id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">debug()</span></tt> function now defaults to outputting HTML safe strings. This is
disabled if being used in the console. The <tt class="docutils literal"><span class="pre">$showHtml</span></tt> option for <tt class="docutils literal"><span class="pre">debug()</span></tt>
can be set to false to disable HTML-safe output from debug.</p>
</div>
<div class="section" id="connectionmanager">
<h2>ConnectionManager<a class="headerlink" href="#connectionmanager" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">ConnectionManager::enumConnectionObjects()</span></tt> will now return the current
configuration for each connection created, instead of an array with filename,
class name and plugin, which wasn&#8217;t really useful.</p>
<p>When defining database connections you will need to make some changes to the way
configs were defined in the past. Basically in the database configuration class,
the key &#8220;driver&#8221; is not accepted anymore, only &#8220;datasource&#8221;, in order to make it
more consistent. Also, as the datasources have been moved to packages you will
need to pass the package they are located in. Example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$default</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;datasource&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Database/Mysql&#39;</span><span class="p">,</span>
    <span class="s1">&#39;persistent&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="s1">&#39;host&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
    <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
    <span class="s1">&#39;database&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;cake&#39;</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</div>


		</div>
	</div>

	<div class="sidebar columns three pull-nine">
<div id="sidebar-navigation" class="hide-on-phones">
	<h2 class="hide-on-desktops">Table of Contents</h2>
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cakephp-overview.html">CakePHP Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries.html">Core Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Console and Shells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../appendices.html">Appendices</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="2-7-migration-guide.html">2.7 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-6-migration-guide.html">2.6 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-5-migration-guide.html">2.5 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-4-migration-guide.html">2.4 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-3-migration-guide.html">2.3 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-2-migration-guide.html">2.2 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-1-migration-guide.html">2.1 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="new-features-in-cakephp-2-1.html">New Features in CakePHP 2.1</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">2.0 Migration Guide</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="new-features-in-cakephp-2-0.html">New Features in CakePHP 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="phpunit-migration-hints.html">PHPUnit Migration Hints</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-cakephp-1-2-to-1-3.html">Migrating from CakePHP 1.2 to 1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="new-features-in-cakephp-1-3.html">New features in CakePHP 1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
</li>
</ul>

</div>

<div class="page-contents">
	<h3>Page contents</h3>
	<ul>
<li><a class="reference internal" href="#">2.0 Migration Guide</a><ul>
<li><a class="reference internal" href="#php-version-support">PHP Version Support</a></li>
<li><a class="reference internal" href="#file-and-folder-naming">File and Folder naming</a><ul>
<li><a class="reference internal" href="#file-names">File names</a></li>
<li><a class="reference internal" href="#folder-names">Folder Names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#htaccess-url-rewriting">htaccess (URL Rewriting)</a></li>
<li><a class="reference internal" href="#appcontroller-appmodel-apphelper-appshell">AppController / AppModel / AppHelper / AppShell</a></li>
<li><a class="reference internal" href="#internationalization-localization">Internationalization / Localization</a></li>
<li><a class="reference internal" href="#class-location-and-constants-changed">Class location and constants changed</a></li>
<li><a class="reference internal" href="#basics-php">Basics.php</a><ul>
<li><a class="reference internal" href="#removed-constants">Removed Constants</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cakerequest">CakeRequest</a></li>
<li><a class="reference internal" href="#request-handling-get-url-and-htaccess-files">Request handling, $_GET[&#8216;url&#8217;] and .htaccess files</a></li>
<li><a class="reference internal" href="#components">Components</a><ul>
<li><a class="reference internal" href="#deprecated-callbacks-removed">Deprecated callbacks removed</a></li>
<li><a class="reference internal" href="#changes-in-disabling-components">Changes in disabling components</a></li>
<li><a class="reference internal" href="#aclcomponent">AclComponent</a></li>
<li><a class="reference internal" href="#requesthandlercomponent">RequestHandlerComponent</a></li>
<li><a class="reference internal" href="#securitycomponent">SecurityComponent</a></li>
<li><a class="reference internal" href="#authcomponent">AuthComponent</a></li>
<li><a class="reference internal" href="#emailcomponent">EmailComponent</a></li>
<li><a class="reference internal" href="#sessioncomponent">SessionComponent</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cakeerror-removed">cakeError removed</a></li>
<li><a class="reference internal" href="#error-handling">Error handling</a></li>
<li><a class="reference internal" href="#lib-classes">Lib classes</a><ul>
<li><a class="reference internal" href="#app">App</a><ul>
<li><a class="reference internal" href="#app-path">App::path()</a></li>
<li><a class="reference internal" href="#app-build">App::build()</a></li>
<li><a class="reference internal" href="#app-objects">App::objects()</a></li>
<li><a class="reference internal" href="#app-import">App::import()</a></li>
<li><a class="reference internal" href="#app-core">App::core()</a></li>
<li><a class="reference internal" href="#class-loading-with-app-uses">Class loading with App::uses()</a></li>
<li><a class="reference internal" href="#app-build-and-core-paths">App::build() and core paths</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cakelog">CakeLog</a></li>
<li><a class="reference internal" href="#cache">Cache</a></li>
<li><a class="reference internal" href="#router">Router</a></li>
<li><a class="reference internal" href="#dispatcher">Dispatcher</a></li>
<li><a class="reference internal" href="#configure">Configure</a></li>
<li><a class="reference internal" href="#scaffold">Scaffold</a></li>
<li><a class="reference internal" href="#xml">Xml</a></li>
<li><a class="reference internal" href="#inflector">Inflector</a></li>
<li><a class="reference internal" href="#cakesession">CakeSession</a></li>
<li><a class="reference internal" href="#httpsocket">HttpSocket</a></li>
</ul>
</li>
<li><a class="reference internal" href="#helpers">Helpers</a><ul>
<li><a class="reference internal" href="#constructor-changed">Constructor changed</a></li>
<li><a class="reference internal" href="#helpercollection-added">HelperCollection added</a></li>
<li><a class="reference internal" href="#deprecated-properties">Deprecated properties</a></li>
<li><a class="reference internal" href="#xmlhelper-ajaxhelper-and-javascripthelper-removed">XmlHelper, AjaxHelper and JavascriptHelper removed</a></li>
<li><a class="reference internal" href="#jshelper">JsHelper</a></li>
<li><a class="reference internal" href="#paginatorhelper">PaginatorHelper</a></li>
<li><a class="reference internal" href="#formhelper">FormHelper</a><ul>
<li><a class="reference internal" href="#selected-parameter-removed">$selected parameter removed</a></li>
<li><a class="reference internal" href="#default-urls-on-forms-is-the-current-action">Default URLs on forms is the current action</a></li>
<li><a class="reference internal" href="#formhelper-hidden">FormHelper::hidden()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cachehelper">CacheHelper</a></li>
<li><a class="reference internal" href="#helper-attribute-format-more-flexible">Helper Attribute format more flexible</a></li>
</ul>
</li>
<li><a class="reference internal" href="#controller">Controller</a><ul>
<li><a class="reference internal" href="#pagination">Pagination</a></li>
</ul>
</li>
<li><a class="reference internal" href="#view">View</a><ul>
<li><a class="reference internal" href="#view-no-longer-registered-in-classregistry">View no longer registered in ClassRegistry</a></li>
<li><a class="reference internal" href="#id2">Deprecated properties</a></li>
<li><a class="reference internal" href="#removed-methods">Removed methods</a></li>
<li><a class="reference internal" href="#added-methods">Added methods</a></li>
<li><a class="reference internal" href="#view-helpers">View-&gt;Helpers</a></li>
<li><a class="reference internal" href="#themes">Themes</a></li>
<li><a class="reference internal" href="#callback-positioning-changes">Callback positioning changes</a></li>
<li><a class="reference internal" href="#helper-callback-signature-changes">Helper callback signature changes</a></li>
<li><a class="reference internal" href="#cachehelper-decoupled">CacheHelper decoupled</a></li>
<li><a class="reference internal" href="#cachehelper-cake-nocache-tags-changed">CacheHelper <tt class="docutils literal"><span class="pre">&lt;cake:nocache&gt;</span></tt> tags changed</a></li>
<li><a class="reference internal" href="#mediaview-changes">MediaView changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#phpunit-instead-of-simpletest">PHPUnit instead of SimpleTest</a><ul>
<li><a class="reference internal" href="#no-more-group-tests">No more group tests</a></li>
<li><a class="reference internal" href="#testsuite-shell">Testsuite shell</a></li>
</ul>
</li>
<li><a class="reference internal" href="#model">Model</a><ul>
<li><a class="reference internal" href="#database-objects">Database objects</a><ul>
<li><a class="reference internal" href="#list-of-changes">List of Changes</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#behaviors">Behaviors</a><ul>
<li><a class="reference internal" href="#behaviorcollection">BehaviorCollection</a></li>
<li><a class="reference internal" href="#aclbehavior-and-treebehavior">AclBehavior and TreeBehavior</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plugins">Plugins</a><ul>
<li><a class="reference internal" href="#plugin-app-controller-and-plugin-app-model">Plugin App Controller and Plugin App Model</a></li>
</ul>
</li>
<li><a class="reference internal" href="#console">Console</a><ul>
<li><a class="reference internal" href="#backwards-incompatible-shell-api-changes">Backwards incompatible Shell API changes</a></li>
<li><a class="reference internal" href="#backwards-incompatible-shelldispatcher-api-changes">Backwards incompatible ShellDispatcher API changes</a></li>
<li><a class="reference internal" href="#backwards-incompatible-shell-changes">Backwards incompatible Shell Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
<li><a class="reference internal" href="#connectionmanager">ConnectionManager</a></li>
</ul>
</li>
</ul>

</div>
	</div>

</div>

<div class="content row">
	<ul class="related-pages inline">
	<li>
		<a href="../genindex.html" title="General Index" accesskey="I">index</a>
	</li>
	<li>
		<a href="new-features-in-cakephp-2-0.html" title="New Features in CakePHP 2.0" accesskey="N">next</a>
	</li>
	<li>
		<a href="new-features-in-cakephp-2-1.html" title="New Features in CakePHP 2.1" accesskey="P">previous</a>
	</li>
	</ul>
</div>

	<div class="footer-push"> </div>
</div>






<div class="footer">
	<div class="row">
		<div class="columns six offset-by-three contribute">
			<strong>发现翻译错误?</strong>
			请在下面留言<br />
			<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">[ 我要加入翻译 ]</a>
		</div>
	</div>
	
	<div class="row">
		<div class="columns nine offset-by-three copyright">
					&copy; Copyright 2014, Cake Software Foundation, Inc.
				Last updated on Jul 10, 2016.
				Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
		</div>
	</div>
</div>

<div id="nav-modal" class="reveal-modal"> </div>
<div id="inline-search-results"></div>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F201cbc61deaf9f7ffb521fb23e83db40' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cakephpchina"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->

<!-- Grunt Live Reload -->
<script src="http://192.168.56.113:35729/livereload.js"></script>
  </body>
</html>