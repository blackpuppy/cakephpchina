

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Controllers" lang="en" name="title" />
<meta content="correct models,controller class,controller controller,core library,single model,request data,middle man,bakery,mvc,attributes,logic,recipes" lang="en" name="keywords" />

    <title>Controllers</title>
    <link href="_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="_static/app.js"></script>

    <link rel="alternate" hreflang="pt" href="../pt/controllers.html" /><link rel="alternate" hreflang="es" href="../es/controllers.html" /><link rel="alternate" hreflang="ja" href="../ja/controllers.html" /><link rel="alternate" hreflang="fr" href="../fr/controllers.html" /><link rel="alternate" hreflang="zh" href="../zh/controllers.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 2.x documentation" href="_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 2.x documentation" href="index.html" />
    <link rel="next" title="Request and Response objects" href="controllers/request-response.html" />
    <link rel="prev" title="Where to Get Help" href="cakephp-overview/where-to-get-help.html" />

    <script type="text/javascript">
    window.lang = "en";
    </script>
  </head>
  <body>

<div id="container">
	
	<header class="nav-down">
		<div class="container-fluid hidden-xs hidden-sm">
			<div class="row">
				<div class="col-sm-3 col-md-3">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-9 col-md-9">
					<nav class="navbar-right">
						<ul class="menu">
							<li class="first">
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
								<ul class="submenu">
									
<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
								</ul>
							</li>

							<li><a href="http://cakephp.org/business-solutions">Business Solutions</a></li>
							<li><a href="http://cakephp.org/showcase">Showcase</a></li>

							<li>
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
								<div class="megamenu full">
									<div class="row">
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
											</ul>
										</div>
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
											</ul>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>

		
		<div class="container-fluid hidden-md hidden-lg">
			<div class="row">
				<div class="col-sm-6 col-xs-6">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-6 col-xs-6">
					<div class="navbar-right">
						<button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
							<i class="fa fa-bars toggle-modal"></i>
						</button>
					</div>
					<div id="wrap">
						<form class="search" action="search.html" method="get">
							<input name="q" type="search" placeholder="What are you looking for?">
							<input id="search_submit" value="Search" type="submit">
						</form>
					</div>
				</div>
			</div>
		</div>

		
		<section id="nav-cook" class="hidden-xs hidden-sm">
			<div class="container-fluid ">
				<div class="row ">
					<div class="col-md-12 back-book">
						<div class="col-md-4 col-md-offset-1 text-center t-cook-nav p0 hidden-sm hidden-xs">
							<h2>
								<a href="contents.html">
									<span class="glyph_range icon-submenu icon-submenu-cook">B</span>
									CakePHP 2.x <strong>Cookbook</strong>
								</a>
							</h2>
						</div>

						<div class="col-md-4 hidden-sm">
							<form class="search" action="search.html" method="get">
								<input type="hidden" name="check_keywords" value="yes" />
								<input type="hidden" name="area" value="default" />

								<div class="col-md-10 p0">
									<input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
								</div>
								<div class="col-md-2 p0 search-cook">
									<button type="submit">
										<span class="glyph_range icon-submenu icon-submenu-cook">A</span>
									</button>
								</div>
							</form>
						</div>

						
						<div class="col-md-3">
							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Language:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
													role="button" aria-haspopup="true" aria-expanded="false" href="#">
														en
														<i class="fa fa-menu-en fa-chevron-down"></i>
													</a>
											<ul class="dropdown-menu">
											
												<li></li>
											
												<li><a href="../pt/controllers.html">pt</a></li>
											
												<li><a href="../es/controllers.html">es</a></li>
											
												<li><a href="../ja/controllers.html">ja</a></li>
											
												<li><a href="../fr/controllers.html">fr</a></li>
											
												<li><a href="../zh/controllers.html">zh</a></li>
											
											</ul>
										</li>
									</ul>
								</div>
							</div>

							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Version:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">2.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
											<ul class="dropdown-menu">
												<li><a href="http://book.cakephp.org/3.0/en">3.x Book</a></li>
												<li><a href="http://book.cakephp.org/2.0/en">2.x Book</a></li>
												<li><a href="http://book.cakephp.org/1.3/en/">1.3 Book</a></li>
												<li><a href="http://book.cakephp.org/1.2/en/">1.2 Book</a></li>
												<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
											</ul>
										</li>
									</ul>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</section>
	</header>

	
	<section class="nav-btn visible-sm visible-xs">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
				</div>

				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
				</div>
			</div>
		</div>
	</section>

	
	<div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title-cookbook" id="modal-header"></h4>
				</div>
				<div class="modal-body"></div>
			</div>
		</div>
	</div>

<div class="container page-container"><div id="improve-slideout">
		<i class="fa fa-pencil icon-improve"></i>
		<a href="https://github.com/cakephp/docs/edit/master/en/controllers.rst" target="_blank">
			<div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
		</a>
	</div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

	
	<div class="row">
		<div class="col-sm-12 col-md-9 col-md-push-3 space-left push-off"><div class="page-contents col-sm-5">
				<h3>Page Contents</h3>
				<ul>
<li><a class="reference internal" href="#">Controllers</a><ul>
<li><a class="reference internal" href="#the-app-controller">The App Controller</a></li>
<li><a class="reference internal" href="#request-parameters">Request parameters</a></li>
<li><a class="reference internal" href="#controller-actions">Controller actions</a></li>
<li><a class="reference internal" href="#request-life-cycle-callbacks">Request Life-cycle callbacks</a></li>
<li><a class="reference internal" href="#controller-methods">Controller Methods</a><ul>
<li><a class="reference internal" href="#interacting-with-views">Interacting with Views</a><ul>
<li><a class="reference internal" href="#rendering-a-specific-view">Rendering a specific view</a></li>
</ul>
</li>
<li><a class="reference internal" href="#flow-control">Flow Control</a></li>
<li><a class="reference internal" href="#callbacks">Callbacks</a></li>
<li><a class="reference internal" href="#other-useful-methods">Other Useful Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#controller-attributes">Controller Attributes</a><ul>
<li><a class="reference internal" href="#components-helpers-and-uses">$components, $helpers and $uses</a></li>
<li><a class="reference internal" href="#other-attributes">Other Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#more-on-controllers">More on controllers</a></li>
</ul>
</li>
</ul>

			</div><div class="document-body">
			
  <div class="section" id="controllers">
<h1>Controllers<a class="headerlink" href="#controllers" title="Permalink to this headline">¶</a></h1>
<p>Controllers are the &#8216;C&#8217; in MVC. After routing has been applied and the correct
controller has been found, your controller&#8217;s action is called. Your controller
should handle interpreting the request data, making sure the correct models
are called, and the right response or view is rendered. Controllers can be
thought of as middle man between the Model and View. You want to keep your
controllers thin, and your models fat. This will help you more easily reuse
your code and makes your code easier to test.</p>
<p>Commonly, a controller is used to manage the logic around a single model. For
example, if you were building a site for an online bakery, you might have a
RecipesController managing your recipes and an IngredientsController managing your
ingredients. However, it&#8217;s also possible to have controllers work with more than
one model. In CakePHP, a controller is named after the primary model it
handles.</p>
<p>Your application&#8217;s controllers extend the <code class="docutils literal"><span class="pre">AppController</span></code> class, which in turn
extends the core <a class="reference internal" href="#Controller" title="Controller"><code class="xref php php-class docutils literal"><span class="pre">Controller</span></code></a> class. The <code class="docutils literal"><span class="pre">AppController</span></code>
class can be defined in <code class="docutils literal"><span class="pre">/app/Controller/AppController.php</span></code> and it should
contain methods that are shared between all of your application&#8217;s controllers.</p>
<p>Controllers provide a number of methods that handle requests. These are called
<em>actions</em>. By default, each public method in
a controller is an action, and is accessible from a URL. An action is responsible
for interpreting the request and creating the response. Usually responses are
in the form of a rendered view, but there are other ways to create responses as
well.</p>
<div class="section" id="the-app-controller">
<span id="app-controller"></span><h2>The App Controller<a class="headerlink" href="#the-app-controller" title="Permalink to this headline">¶</a></h2>
<p>As stated in the introduction, the <code class="docutils literal"><span class="pre">AppController</span></code> class is the
parent class to all of your application&#8217;s controllers.
<code class="docutils literal"><span class="pre">AppController</span></code> itself extends the <a class="reference internal" href="#Controller" title="Controller"><code class="xref php php-class docutils literal"><span class="pre">Controller</span></code></a> class included in the
CakePHP core library. <code class="docutils literal"><span class="pre">AppController</span></code> is defined in
<code class="docutils literal"><span class="pre">/app/Controller/AppController.php</span></code> as follows:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AppController</span> <span class="k">extends</span> <span class="nx">Controller</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Controller attributes and methods created in your <code class="docutils literal"><span class="pre">AppController</span></code>
will be available to all of your application&#8217;s controllers. Components
(which you&#8217;ll learn about later) are best
used for code that is used in many (but not necessarily all)
controllers.</p>
<p>While normal object-oriented inheritance rules apply, CakePHP
does a bit of extra work when it comes to special controller
attributes. The components and helpers used by a
controller are treated specially. In these cases, <code class="docutils literal"><span class="pre">AppController</span></code>
value arrays are merged with child controller class arrays. The values in the
child class will always override those in <code class="docutils literal"><span class="pre">AppController.</span></code></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>CakePHP merges the following variables from the <code class="docutils literal"><span class="pre">AppController</span></code> into
your application&#8217;s controllers:</p>
<ul class="last simple">
<li><a class="reference internal" href="#Controller::$components" title="Controller::$components"><code class="xref php php-attr docutils literal"><span class="pre">$components</span></code></a></li>
<li><a class="reference internal" href="#Controller::$helpers" title="Controller::$helpers"><code class="xref php php-attr docutils literal"><span class="pre">$helpers</span></code></a></li>
<li><a class="reference internal" href="#Controller::$uses" title="Controller::$uses"><code class="xref php php-attr docutils literal"><span class="pre">$uses</span></code></a></li>
</ul>
</div>
<p>Remember to add the default Html and Form helpers if you define
the <a class="reference internal" href="#Controller::$helpers" title="Controller::$helpers"><code class="xref php php-attr docutils literal"><span class="pre">$helpers</span></code></a> property in your <code class="docutils literal"><span class="pre">AppController</span></code>.</p>
<p>Also remember to call <code class="docutils literal"><span class="pre">AppController</span></code>&#8216;s callbacks within child
controller callbacks for best results:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">beforeFilter</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">parent</span><span class="o">::</span><span class="na">beforeFilter</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="request-parameters">
<h2>Request parameters<a class="headerlink" href="#request-parameters" title="Permalink to this headline">¶</a></h2>
<p>When a request is made to a CakePHP application, CakePHP&#8217;s <a class="reference internal" href="development/routing.html#Router" title="Router"><code class="xref php php-class docutils literal"><span class="pre">Router</span></code></a> and
<code class="xref php php-class docutils literal"><span class="pre">Dispatcher</span></code> classes use <a class="reference internal" href="development/routing.html#routes-configuration"><span class="std std-ref">Routes Configuration</span></a> to find and
create the correct controller. The request data is encapsulated in a request
object. CakePHP puts all of the important request information into the
<code class="docutils literal"><span class="pre">$this-&gt;request</span></code> property. See the section on
<a class="reference internal" href="controllers/request-response.html#cake-request"><span class="std std-ref">CakeRequest</span></a> for more information on the CakePHP request object.</p>
</div>
<div class="section" id="controller-actions">
<h2>Controller actions<a class="headerlink" href="#controller-actions" title="Permalink to this headline">¶</a></h2>
<p>Controller actions are responsible for converting the request parameters into a
response for the browser/user making the request. CakePHP uses conventions to
automate this process and remove some boilerplate code you would otherwise need
to write.</p>
<p>By convention, CakePHP renders a view with an inflected version of the action
name. Returning to our online bakery example, our RecipesController might contain the
<code class="docutils literal"><span class="pre">view()</span></code>, <code class="docutils literal"><span class="pre">share()</span></code>, and <code class="docutils literal"><span class="pre">search()</span></code> actions. The controller would be found
in <code class="docutils literal"><span class="pre">/app/Controller/RecipesController.php</span></code> and contain:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1"># /app/Controller/RecipesController.php</span>

<span class="k">class</span> <span class="nc">RecipesController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">view</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//action logic goes here..</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">share</span><span class="p">(</span><span class="nv">$customerId</span><span class="p">,</span> <span class="nv">$recipeId</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//action logic goes here..</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">search</span><span class="p">(</span><span class="nv">$query</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//action logic goes here..</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The view files for these actions would be <code class="docutils literal"><span class="pre">app/View/Recipes/view.ctp</span></code>,
<code class="docutils literal"><span class="pre">app/View/Recipes/share.ctp</span></code>, and <code class="docutils literal"><span class="pre">app/View/Recipes/search.ctp</span></code>. The
conventional view file name is the lowercased and underscored version of the
action name.</p>
<p>Controller actions generally use <a class="reference internal" href="#Controller::set" title="Controller::set"><code class="xref php php-meth docutils literal"><span class="pre">set()</span></code></a> to create a
context that <a class="reference internal" href="views.html#View" title="View"><code class="xref php php-class docutils literal"><span class="pre">View</span></code></a> uses to render the view. Because of the
conventions that CakePHP uses, you don&#8217;t need to create and render the view
manually. Instead, once a controller action has completed, CakePHP will handle
rendering and delivering the View.</p>
<p>If for some reason you&#8217;d like to skip the default behavior, both of the
following techniques will bypass the default view rendering behavior.</p>
<ul class="simple">
<li>If you return a string, or an object that can be converted to a string from
your controller action, it will be used as the response body.</li>
<li>You can return a <a class="reference internal" href="controllers/request-response.html#CakeResponse" title="CakeResponse"><code class="xref php php-class docutils literal"><span class="pre">CakeResponse</span></code></a> object with the completely created
response.</li>
</ul>
<p>When you use controller methods with <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a>,
you will often want to return data that isn&#8217;t a string. If you have controller
methods that are used for normal web requests + requestAction, you should check
the request type before returning:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RecipesController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">popular</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$popular</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Recipe</span><span class="o">-&gt;</span><span class="na">popular</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;requested&#39;</span><span class="p">]))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$popular</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;popular&#39;</span><span class="p">,</span> <span class="nv">$popular</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above controller action is an example of how a method can be used with
<a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> and normal requests. Returning array data to a
non-requestAction request will cause errors and should be avoided. See the
section on <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> for more tips on using
<a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a></p>
<p>In order for you to use a controller effectively in your own application, we&#8217;ll
cover some of the core attributes and methods provided by CakePHP&#8217;s controllers.</p>
</div>
<div class="section" id="request-life-cycle-callbacks">
<span id="controller-life-cycle"></span><h2>Request Life-cycle callbacks<a class="headerlink" href="#request-life-cycle-callbacks" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="Controller">
<em class="property">class </em><code class="descname">Controller</code><a class="headerlink" href="#Controller" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>CakePHP controllers come fitted with callbacks you can use to
insert logic around the request life-cycle:</p>
<dl class="method">
<dt id="Controller::beforeFilter">
<code class="descclassname">Controller::</code><code class="descname">beforeFilter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Controller::beforeFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is executed before every action in the controller.
It&#8217;s a handy place to check for an active session or inspect user
permissions.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The beforeFilter() method will be called for missing actions,
and scaffolded actions.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Controller::beforeRender">
<code class="descclassname">Controller::</code><code class="descname">beforeRender</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Controller::beforeRender" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after controller action logic, but before the view is
rendered. This callback is not used often, but may be needed if you
are calling <a class="reference internal" href="#Controller::render" title="Controller::render"><code class="xref php php-meth docutils literal"><span class="pre">render()</span></code></a> manually before the end of a given action.</p>
</dd></dl>

<dl class="method">
<dt id="Controller::afterFilter">
<code class="descclassname">Controller::</code><code class="descname">afterFilter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Controller::afterFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after every controller action, and after rendering is
complete. This is the last controller method to run.</p>
</dd></dl>

<p>In addition to controller life-cycle callbacks, <a class="reference internal" href="controllers/components.html"><span class="doc">Components</span></a>
also provide a similar set of callbacks.</p>
</div>
<div class="section" id="controller-methods">
<span id="id1"></span><h2>Controller Methods<a class="headerlink" href="#controller-methods" title="Permalink to this headline">¶</a></h2>
<p>For a complete list of controller methods and their descriptions
visit the <a class="reference external" href="http://api.cakephp.org/2.8/class-Controller.html">CakePHP API</a>.</p>
<div class="section" id="interacting-with-views">
<h3>Interacting with Views<a class="headerlink" href="#interacting-with-views" title="Permalink to this headline">¶</a></h3>
<p>Controllers interact with views in a number of ways. First, they
are able to pass data to the views, using <a class="reference internal" href="#Controller::set" title="Controller::set"><code class="xref php php-meth docutils literal"><span class="pre">set()</span></code></a>. You can also
decide which view class to use, and which view file should be
rendered from the controller.</p>
<dl class="method">
<dt id="Controller::set">
<code class="descclassname">Controller::</code><code class="descname">set</code><span class="sig-paren">(</span><em>string $var</em>, <em>mixed $value</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::set" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#Controller::set" title="Controller::set"><code class="xref php php-meth docutils literal"><span class="pre">set()</span></code></a> method is the main way to send data from your
controller to your view. Once you&#8217;ve used <a class="reference internal" href="#Controller::set" title="Controller::set"><code class="xref php php-meth docutils literal"><span class="pre">set()</span></code></a>, the variable
can be accessed in your view:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// First you pass data from the controller:</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;pink&#39;</span><span class="p">);</span>

<span class="c1">// Then, in the view, you can utilize the data:</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="x">You have selected </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$color</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"> icing for the cake.</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#Controller::set" title="Controller::set"><code class="xref php php-meth docutils literal"><span class="pre">set()</span></code></a> method also takes an associative array as its first
parameter. This can often be a quick way to assign a set of
information to the view:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pink&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;sugar&#39;</span><span class="p">,</span>
    <span class="s1">&#39;base_price&#39;</span> <span class="o">=&gt;</span> <span class="mf">23.95</span>
<span class="p">);</span>

<span class="c1">// make $color, $type, and $base_price</span>
<span class="c1">// available to the view:</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
</pre></div>
</div>
<p>The attribute <code class="docutils literal"><span class="pre">$pageTitle</span></code> no longer exists. Use <a class="reference internal" href="#Controller::set" title="Controller::set"><code class="xref php php-meth docutils literal"><span class="pre">set()</span></code></a> to set
the title:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;title_for_layout&#39;</span><span class="p">,</span> <span class="s1">&#39;This is the page title&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>As of 2.5 the variable $title_for_layout is deprecated, use view blocks instead.</p>
</dd></dl>

<dl class="method">
<dt id="Controller::render">
<code class="descclassname">Controller::</code><code class="descname">render</code><span class="sig-paren">(</span><em>string $view</em>, <em>string $layout</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::render" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#Controller::render" title="Controller::render"><code class="xref php php-meth docutils literal"><span class="pre">render()</span></code></a> method is automatically called at the end of each
requested controller action. This method performs all the view
logic (using the data you&#8217;ve submitted using the <a class="reference internal" href="#Controller::set" title="Controller::set"><code class="xref php php-meth docutils literal"><span class="pre">set()</span></code></a> method),
places the view inside its <a class="reference internal" href="views.html#View::$layout" title="View::$layout"><code class="xref php php-attr docutils literal"><span class="pre">$layout</span></code></a>, and serves it back to the end
user.</p>
<p>The default view file used by render is determined by convention.
If the <code class="docutils literal"><span class="pre">search()</span></code> action of the RecipesController is requested,
the view file in /app/View/Recipes/search.ctp will be rendered:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RecipesController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
<span class="c1">// ...</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">search</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Render the view in /View/Recipes/search.ctp</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">();</span>
    <span class="p">}</span>
<span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Although CakePHP will automatically call it after every action&#8217;s logic
(unless you&#8217;ve set <code class="docutils literal"><span class="pre">$this-&gt;autoRender</span></code> to false), you can
use it to specify an alternate view file by specifying a view
name in the controller using <code class="docutils literal"><span class="pre">$view</span></code>.</p>
<p>If <code class="docutils literal"><span class="pre">$view</span></code> starts with &#8216;/&#8217;, it is assumed to be a view or
element file relative to the <code class="docutils literal"><span class="pre">/app/View</span></code> folder. This allows
direct rendering of elements, very useful in AJAX calls.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Render the element in /View/Elements/ajaxreturn.ctp</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;/Elements/ajaxreturn&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="views.html#View::$layout" title="View::$layout"><code class="xref php php-attr docutils literal"><span class="pre">$layout</span></code></a> parameter allows you to specify the layout
with which the view is rendered.</p>
</dd></dl>

<div class="section" id="rendering-a-specific-view">
<h4>Rendering a specific view<a class="headerlink" href="#rendering-a-specific-view" title="Permalink to this headline">¶</a></h4>
<p>In your controller, you may want to render a different view than
the conventional one. You can do this by calling
<a class="reference internal" href="#Controller::render" title="Controller::render"><code class="xref php php-meth docutils literal"><span class="pre">render()</span></code></a> directly. Once you have called <a class="reference internal" href="#Controller::render" title="Controller::render"><code class="xref php php-meth docutils literal"><span class="pre">render()</span></code></a>, CakePHP
will not try to re-render the view:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">my_action</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;custom_file&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This would render <code class="docutils literal"><span class="pre">app/View/Posts/custom_file.ctp</span></code> instead of
<code class="docutils literal"><span class="pre">app/View/Posts/my_action.ctp</span></code></p>
<p>You can also render views inside plugins using the following syntax:
<code class="docutils literal"><span class="pre">$this-&gt;render('PluginName.PluginController/custom_file')</span></code>.
For example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">my_action</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;Users.UserDetails/custom_file&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This would render <code class="docutils literal"><span class="pre">app/Plugin/Users/View/UserDetails/custom_file.ctp</span></code></p>
</div>
</div>
<div class="section" id="flow-control">
<h3>Flow Control<a class="headerlink" href="#flow-control" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="Controller::redirect">
<code class="descclassname">Controller::</code><code class="descname">redirect</code><span class="sig-paren">(</span><em>mixed $url</em>, <em>integer $status</em>, <em>boolean $exit</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::redirect" title="Permalink to this definition">¶</a></dt>
<dd><p>The flow control method you&#8217;ll use most often is <a class="reference internal" href="#Controller::redirect" title="Controller::redirect"><code class="xref php php-meth docutils literal"><span class="pre">redirect()</span></code></a>.
This method takes its first parameter in the form of a
CakePHP-relative URL. When a user has successfully placed an order,
you might wish to redirect them to a receipt screen.</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">place_order</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Logic for finalizing order goes here</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$success</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span>
            <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orders&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;thanks&#39;</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span>
        <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orders&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;confirm&#39;</span><span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can also use a relative or absolute URL as the $url argument:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="s1">&#39;/orders/thanks&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="s1">&#39;http://www.example.com&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>You can also pass data to the action:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;edit&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">));</span>
</pre></div>
</div>
<p>The second parameter of <a class="reference internal" href="#Controller::redirect" title="Controller::redirect"><code class="xref php php-meth docutils literal"><span class="pre">redirect()</span></code></a> allows you to define an HTTP
status code to accompany the redirect. You may want to use 301
(moved permanently) or 303 (see other), depending on the nature of
the redirect.</p>
<p>The method will issue an <code class="docutils literal"><span class="pre">exit()</span></code> after the redirect unless you
set the third parameter to <code class="docutils literal"><span class="pre">false</span></code>.</p>
<p>If you need to redirect to the referer page you can use:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">referer</span><span class="p">());</span>
</pre></div>
</div>
<p>The method also supports name-based parameters. If you want to redirect
to a URL like: <code class="docutils literal"><span class="pre">http://www.example.com/orders/confirm/product:pizza/quantity:5</span></code>
you can use:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orders&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;confirm&#39;</span><span class="p">,</span>
    <span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pizza&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantity&#39;</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>An example using query strings and hash would look like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;orders&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;confirm&#39;</span><span class="p">,</span>
    <span class="s1">&#39;?&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;product&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pizza&#39;</span><span class="p">,</span>
        <span class="s1">&#39;quantity&#39;</span> <span class="o">=&gt;</span> <span class="mi">5</span>
    <span class="p">),</span>
    <span class="s1">&#39;#&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;top&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The generated URL would be:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">http</span><span class="o">://</span><span class="nx">www</span><span class="o">.</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">orders</span><span class="o">/</span><span class="nx">confirm</span><span class="o">?</span><span class="nx">product</span><span class="o">=</span><span class="nx">pizza</span><span class="o">&amp;</span><span class="nx">quantity</span><span class="o">=</span><span class="mi">5</span><span class="c1">#top</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Controller::flash">
<code class="descclassname">Controller::</code><code class="descname">flash</code><span class="sig-paren">(</span><em>string $message</em>, <em>string|array $url</em>, <em>integer $pause</em>, <em>string $layout</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::flash" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#Controller::redirect" title="Controller::redirect"><code class="xref php php-meth docutils literal"><span class="pre">redirect()</span></code></a>, the <a class="reference internal" href="#Controller::flash" title="Controller::flash"><code class="xref php php-meth docutils literal"><span class="pre">flash()</span></code></a>
method is used to direct a user to a new page after an operation. The
<a class="reference internal" href="#Controller::flash" title="Controller::flash"><code class="xref php php-meth docutils literal"><span class="pre">flash()</span></code></a> method is different in that it shows a
message before passing the user on to another URL.</p>
<p>The first parameter should hold the message to be displayed, and
the second parameter is a CakePHP-relative URL. CakePHP will
display the <code class="docutils literal"><span class="pre">$message</span></code> for <code class="docutils literal"><span class="pre">$pause</span></code> seconds before forwarding
the user on.</p>
<p>If there&#8217;s a particular template you&#8217;d like your flashed message to
use, you may specify the name of that layout in the <a class="reference internal" href="views.html#View::$layout" title="View::$layout"><code class="xref php php-attr docutils literal"><span class="pre">$layout</span></code></a>
parameter.</p>
<p>For in-page flash messages, be sure to check out
<a class="reference internal" href="core-libraries/components/sessions.html#SessionComponent::setFlash" title="SessionComponent::setFlash"><code class="xref php php-meth docutils literal"><span class="pre">SessionComponent::setFlash()</span></code></a> method.</p>
</dd></dl>

</div>
<div class="section" id="callbacks">
<h3>Callbacks<a class="headerlink" href="#callbacks" title="Permalink to this headline">¶</a></h3>
<p>In addition to the <a class="reference internal" href="#controller-life-cycle"><span class="std std-ref">Request Life-cycle callbacks</span></a>,
CakePHP also supports callbacks related to scaffolding.</p>
<dl class="method">
<dt id="Controller::beforeScaffold">
<code class="descclassname">Controller::</code><code class="descname">beforeScaffold</code><span class="sig-paren">(</span><em>$method</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::beforeScaffold" title="Permalink to this definition">¶</a></dt>
<dd><p>$method name of method called example index, edit, etc.</p>
</dd></dl>

<dl class="method">
<dt id="Controller::afterScaffoldSave">
<code class="descclassname">Controller::</code><code class="descname">afterScaffoldSave</code><span class="sig-paren">(</span><em>$method</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::afterScaffoldSave" title="Permalink to this definition">¶</a></dt>
<dd><p>$method name of method called either edit or update.</p>
</dd></dl>

<dl class="method">
<dt id="Controller::afterScaffoldSaveError">
<code class="descclassname">Controller::</code><code class="descname">afterScaffoldSaveError</code><span class="sig-paren">(</span><em>$method</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::afterScaffoldSaveError" title="Permalink to this definition">¶</a></dt>
<dd><p>$method name of method called either edit or update.</p>
</dd></dl>

<dl class="method">
<dt id="Controller::scaffoldError">
<code class="descclassname">Controller::</code><code class="descname">scaffoldError</code><span class="sig-paren">(</span><em>$method</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::scaffoldError" title="Permalink to this definition">¶</a></dt>
<dd><p>$method name of method called example index, edit, etc.</p>
</dd></dl>

</div>
<div class="section" id="other-useful-methods">
<h3>Other Useful Methods<a class="headerlink" href="#other-useful-methods" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="Controller::constructClasses">
<code class="descclassname">Controller::</code><code class="descname">constructClasses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Controller::constructClasses" title="Permalink to this definition">¶</a></dt>
<dd><p>This method loads the models required by the controller. This
loading process is done by CakePHP normally, but this method is
handy to have when accessing controllers from a different
perspective. If you need CakePHP in a command-line script or some
other outside use, <a class="reference internal" href="#Controller::constructClasses" title="Controller::constructClasses"><code class="xref php php-meth docutils literal"><span class="pre">constructClasses()</span></code></a> may come in handy.</p>
</dd></dl>

<dl class="method">
<dt id="Controller::referer">
<code class="descclassname">Controller::</code><code class="descname">referer</code><span class="sig-paren">(</span><em>mixed $default = null</em>, <em>boolean $local = false</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::referer" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the referring URL for the current request. Parameter
<code class="docutils literal"><span class="pre">$default</span></code> can be used to supply a default URL to use if
HTTP_REFERER cannot be read from headers. So, instead of doing
this:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">UserController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">delete</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// delete code goes here, and then...</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">referer</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">referer</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>you can do this:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">UserController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">delete</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// delete code goes here, and then...</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">referer</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">))</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">$default</span></code> is not set, the function defaults to the root of
your domain - &#8216;/&#8217;.</p>
<p>Parameter <code class="docutils literal"><span class="pre">$local</span></code> if set to <code class="docutils literal"><span class="pre">true</span></code>, restricts referring URLs
to local server.</p>
</dd></dl>

<dl class="method">
<dt id="Controller::disableCache">
<code class="descclassname">Controller::</code><code class="descname">disableCache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Controller::disableCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to tell the user&#8217;s <strong>browser</strong> not to cache the results of the
current request. This is different than view caching, covered in a
later chapter.</p>
<p>The headers sent to this effect are:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Expires</span><span class="o">:</span> <span class="nx">Mon</span><span class="p">,</span> <span class="mi">26</span> <span class="nx">Jul</span> <span class="mi">1997</span> <span class="mo">05</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span> <span class="nx">GMT</span>
<span class="nx">Last</span><span class="o">-</span><span class="nx">Modified</span><span class="o">:</span> <span class="p">[</span><span class="nb">current</span> <span class="nx">datetime</span><span class="p">]</span> <span class="nx">GMT</span>
<span class="nx">Cache</span><span class="o">-</span><span class="nx">Control</span><span class="o">:</span> <span class="nx">no</span><span class="o">-</span><span class="nx">store</span><span class="p">,</span> <span class="nx">no</span><span class="o">-</span><span class="nx">cache</span><span class="p">,</span> <span class="nx">must</span><span class="o">-</span><span class="nx">revalidate</span>
<span class="nx">Cache</span><span class="o">-</span><span class="nx">Control</span><span class="o">:</span> <span class="nx">post</span><span class="o">-</span><span class="nx">check</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">pre</span><span class="o">-</span><span class="nx">check</span><span class="o">=</span><span class="mi">0</span>
<span class="nx">Pragma</span><span class="o">:</span> <span class="nx">no</span><span class="o">-</span><span class="nx">cache</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Controller::postConditions">
<code class="descclassname">Controller::</code><code class="descname">postConditions</code><span class="sig-paren">(</span><em>array $data</em>, <em>mixed $op</em>, <em>string $bool</em>, <em>boolean $exclusive</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::postConditions" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this method to turn a set of POSTed model data (from
HtmlHelper-compatible inputs) into a set of find conditions for a
model. This function offers a quick shortcut on building search
logic. For example, an administrative user may want to be able to
search orders in order to know which items need to be shipped. You
can use CakePHP&#8217;s <a class="reference internal" href="core-libraries/helpers/form.html#FormHelper" title="FormHelper"><code class="xref php php-class docutils literal"><span class="pre">FormHelper</span></code></a> and <a class="reference internal" href="core-libraries/helpers/html.html#HtmlHelper" title="HtmlHelper"><code class="xref php php-class docutils literal"><span class="pre">HtmlHelper</span></code></a>
to create a quick form based on the Order model. Then a controller action
can use the data posted from that form to craft find conditions:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$conditions</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">postConditions</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">);</span>
    <span class="nv">$orders</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Order</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;conditions&#39;</span><span class="p">));</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;orders&#39;</span><span class="p">,</span> <span class="nv">$orders</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;data['Order']['destination']</span></code> equals &#8220;Old Towne Bakery&#8221;,
postConditions converts that condition to an array compatible for
use in a Model-&gt;find() method. In this case,
<code class="docutils literal"><span class="pre">array('Order.destination'</span> <span class="pre">=&gt;</span> <span class="pre">'Old</span> <span class="pre">Towne</span> <span class="pre">Bakery')</span></code>.</p>
<p>If you want to use a different SQL operator between terms, supply them
using the second parameter:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">Contents of $this-&gt;request-&gt;data</span>
<span class="cm">array(</span>
<span class="cm">    &#39;Order&#39; =&gt; array(</span>
<span class="cm">        &#39;num_items&#39; =&gt; &#39;4&#39;,</span>
<span class="cm">        &#39;referrer&#39; =&gt; &#39;Ye Olde&#39;</span>
<span class="cm">    )</span>
<span class="cm">)</span>
<span class="cm">*/</span>

<span class="c1">// Let&#39;s get orders that have at least 4 items and contain &#39;Ye Olde&#39;</span>
<span class="nv">$conditions</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">postConditions</span><span class="p">(</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;num_items&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span>
        <span class="s1">&#39;referrer&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;LIKE&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
<span class="nv">$orders</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Order</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;conditions&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>The third parameter allows you to tell CakePHP what SQL boolean
operator to use between the find conditions. Strings like &#8216;AND&#8217;,
&#8216;OR&#8217; and &#8216;XOR&#8217; are all valid values.</p>
<p>Finally, if the last parameter is set to true, and the $op
parameter is an array, fields not included in $op will not be
included in the returned conditions.</p>
</dd></dl>

<dl class="method">
<dt id="Controller::paginate">
<code class="descclassname">Controller::</code><code class="descname">paginate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Controller::paginate" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is used for paginating results fetched by your models.
You can specify page sizes, model find conditions and more. See the
<a class="reference internal" href="core-libraries/components/pagination.html"><span class="doc">pagination</span></a> section for more details on
how to use paginate.</p>
</dd></dl>

<dl class="method">
<dt id="Controller::requestAction">
<code class="descclassname">Controller::</code><code class="descname">requestAction</code><span class="sig-paren">(</span><em>string $url</em>, <em>array $options</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::requestAction" title="Permalink to this definition">¶</a></dt>
<dd><p>This function calls a controller&#8217;s action from any location and
returns data from the action. The <code class="docutils literal"><span class="pre">$url</span></code> passed is a
CakePHP-relative URL (/controllername/actionname/params). To pass
extra data to the receiving controller action add to the $options
array.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> to retrieve a fully rendered view
by passing &#8216;return&#8217; in the options:
<code class="docutils literal"><span class="pre">requestAction($url,</span> <span class="pre">array('return'));</span></code>. It is important to note
that making a <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> using <code class="docutils literal"><span class="pre">return</span></code> from a controller method
can cause script and CSS tags to not work correctly.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If used without caching <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> can lead to poor
performance. It is rarely appropriate to use in a controller or
model.</p>
</div>
<p><a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> is best used in conjunction with (cached)
elements – as a way to fetch data for an element before rendering.
Let&#8217;s use the example of putting a &#8220;latest comments&#8221; element in the
layout. First we need to create a controller function that will
return the data:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Controller/CommentsController.php</span>
<span class="k">class</span> <span class="nc">CommentsController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">latest</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;requested&#39;</span><span class="p">]))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">ForbiddenException</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Comment</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span>
            <span class="s1">&#39;all&#39;</span><span class="p">,</span>
            <span class="k">array</span><span class="p">(</span><span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Comment.created DESC&#39;</span><span class="p">,</span> <span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You should always include checks to make sure your <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> methods are
actually originating from <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a>. Failing to do so will allow
<a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> methods to be directly accessible from a URL, which is
generally undesirable.</p>
<p>If we now create a simple element to call that function:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// View/Elements/latest_comments.ctp</span>

<span class="nv">$comments</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">requestAction</span><span class="p">(</span><span class="s1">&#39;/comments/latest&#39;</span><span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$comments</span> <span class="k">as</span> <span class="nv">$comment</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$comment</span><span class="p">[</span><span class="s1">&#39;Comment&#39;</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We can then place that element anywhere to get the output
using:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;latest_comments&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Written in this way, whenever the element is rendered, a request
will be made to the controller to get the data, the data will be
processed, and returned. However in accordance with the warning
above it&#8217;s best to make use of element caching to prevent needless
processing. By modifying the call to element to look like this:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">element</span><span class="p">(</span><span class="s1">&#39;latest_comments&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(),</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;cache&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">));</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> call will not be made while the cached
element view file exists and is valid.</p>
<p>In addition, <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> now takes array based cake style URLs:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">requestAction</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;featured&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;return&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This allows the <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> call to bypass the usage of
<a class="reference internal" href="development/routing.html#Router::url" title="Router::url"><code class="xref php php-meth docutils literal"><span class="pre">Router::url()</span></code></a> which can increase performance. The url based arrays
are the same as the ones that <a class="reference internal" href="core-libraries/helpers/html.html#HtmlHelper::link" title="HtmlHelper::link"><code class="xref php php-meth docutils literal"><span class="pre">HtmlHelper::link()</span></code></a> uses with one
difference - if you are using named or passed parameters, you must put them
in a second array and wrap them with the correct key. This is because
<a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> merges the named args array (requestAction&#8217;s 2nd parameter)
with the <code class="docutils literal"><span class="pre">Controller::params</span></code> member array and does not explicitly place the
named args array into the key &#8216;named&#8217;; Additional members in the <code class="docutils literal"><span class="pre">$option</span></code>
array will also be made available in the requested action&#8217;s
<code class="docutils literal"><span class="pre">Controller::params</span></code> array:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">requestAction</span><span class="p">(</span><span class="s1">&#39;/articles/featured/limit:3&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">requestAction</span><span class="p">(</span><span class="s1">&#39;/articles/view/5&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>As an array in the <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> would then be:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">requestAction</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;featured&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;named&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">))</span>
<span class="p">);</span>

<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">requestAction</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unlike other places where array URLs are analogous to string URLs,
<a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> treats them differently.</p>
</div>
<p>When using an array url in conjunction with <a class="reference internal" href="#Controller::requestAction" title="Controller::requestAction"><code class="xref php php-meth docutils literal"><span class="pre">requestAction()</span></code></a> you
must specify <strong>all</strong> parameters that you will need in the requested
action. This includes parameters like <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;data</span></code>. In addition
to passing all required parameters, named and pass parameters must be done
in the second array as seen above.</p>
</dd></dl>

<dl class="method">
<dt id="Controller::loadModel">
<code class="descclassname">Controller::</code><code class="descname">loadModel</code><span class="sig-paren">(</span><em>string $modelClass</em>, <em>mixed $id</em><span class="sig-paren">)</span><a class="headerlink" href="#Controller::loadModel" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#Controller::loadModel" title="Controller::loadModel"><code class="xref php php-meth docutils literal"><span class="pre">loadModel()</span></code></a> function comes handy when you need to use a model
which is not the controller&#8217;s default model or its associated
model:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">loadModel</span><span class="p">(</span><span class="s1">&#39;Article&#39;</span><span class="p">);</span>
<span class="nv">$recentArticles</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Article</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span>
    <span class="s1">&#39;all&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Article.created DESC&#39;</span><span class="p">)</span>
<span class="p">);</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">loadModel</span><span class="p">(</span><span class="s1">&#39;User&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nv">$user</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">User</span><span class="o">-&gt;</span><span class="na">read</span><span class="p">();</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="controller-attributes">
<h2>Controller Attributes<a class="headerlink" href="#controller-attributes" title="Permalink to this headline">¶</a></h2>
<p>For a complete list of controller attributes and their descriptions
visit the <a class="reference external" href="http://api.cakephp.org/2.8/class-Controller.html">CakePHP API</a>.</p>
<dl class="attr">
<dt id="Controller::$name">
<em class="property">property </em><code class="descclassname">Controller::$</code><code class="descname">name</code><a class="headerlink" href="#Controller::$name" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#Controller::$name" title="Controller::$name"><code class="xref php php-attr docutils literal"><span class="pre">$name</span></code></a> attribute should be set to the
name of the controller. Usually this is just the plural form of the
primary model the controller uses. This property can be omitted,
but saves CakePHP from inflecting it:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// $name controller attribute usage example</span>
<span class="k">class</span> <span class="nc">RecipesController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
   <span class="k">public</span> <span class="nv">$name</span> <span class="o">=</span> <span class="s1">&#39;Recipes&#39;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<div class="section" id="components-helpers-and-uses">
<h3>$components, $helpers and $uses<a class="headerlink" href="#components-helpers-and-uses" title="Permalink to this headline">¶</a></h3>
<p>The next most often used controller attributes tell CakePHP what
<a class="reference internal" href="#Controller::$helpers" title="Controller::$helpers"><code class="xref php php-attr docutils literal"><span class="pre">$helpers</span></code></a>, <a class="reference internal" href="#Controller::$components" title="Controller::$components"><code class="xref php php-attr docutils literal"><span class="pre">$components</span></code></a>,
and <code class="docutils literal"><span class="pre">models</span></code> you&#8217;ll be using in conjunction with
the current controller. Using these attributes make MVC classes
given by <a class="reference internal" href="#Controller::$components" title="Controller::$components"><code class="xref php php-attr docutils literal"><span class="pre">$components</span></code></a> and <a class="reference internal" href="#Controller::$uses" title="Controller::$uses"><code class="xref php php-attr docutils literal"><span class="pre">$uses</span></code></a> available to the controller
as class variables (<code class="docutils literal"><span class="pre">$this-&gt;ModelName</span></code>, for example) and those
given by <a class="reference internal" href="#Controller::$helpers" title="Controller::$helpers"><code class="xref php php-attr docutils literal"><span class="pre">$helpers</span></code></a> to the view as an object reference variable
(<code class="docutils literal"><span class="pre">$this-&gt;{$helpername}</span></code>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Each controller has some of these classes available by default, so
you may not need to configure your controller at all.</p>
</div>
<dl class="attr">
<dt id="Controller::$uses">
<em class="property">property </em><code class="descclassname">Controller::$</code><code class="descname">uses</code><a class="headerlink" href="#Controller::$uses" title="Permalink to this definition">¶</a></dt>
<dd><p>Controllers have access to their primary model available by
default. Our RecipesController will have the Recipe model class
available at <code class="docutils literal"><span class="pre">$this-&gt;Recipe</span></code>, and our ProductsController also
features the Product model at <code class="docutils literal"><span class="pre">$this-&gt;Product</span></code>. However, when
allowing a controller to access additional models through the
<a class="reference internal" href="#Controller::$uses" title="Controller::$uses"><code class="xref php php-attr docutils literal"><span class="pre">$uses</span></code></a> variable, the name of the current controller&#8217;s model must
also be included. This is illustrated in the example below.</p>
<p>If you do not wish to use a Model in your controller, set
<code class="docutils literal"><span class="pre">public</span> <span class="pre">$uses</span> <span class="pre">=</span> <span class="pre">array()</span></code>. This will allow you to use a controller
without a need for a corresponding Model file. However, the models
defined in the <code class="docutils literal"><span class="pre">AppController</span></code> will still be loaded. You can also use
<code class="docutils literal"><span class="pre">false</span></code> to not load any models at all. Even those defined in the
<code class="docutils literal"><span class="pre">AppController</span></code>.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.1: </span><a class="reference internal" href="#Controller::$uses" title="Controller::$uses"><code class="xref php php-attr docutils literal"><span class="pre">$uses</span></code></a> now has a new default value, it also handles <code class="docutils literal"><span class="pre">false</span></code> differently.</p>
</div>
</dd></dl>

<dl class="attr">
<dt id="Controller::$helpers">
<em class="property">property </em><code class="descclassname">Controller::$</code><code class="descname">helpers</code><a class="headerlink" href="#Controller::$helpers" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="core-libraries/helpers/html.html#HtmlHelper" title="HtmlHelper"><code class="xref php php-class docutils literal"><span class="pre">HtmlHelper</span></code></a>, <a class="reference internal" href="core-libraries/helpers/form.html#FormHelper" title="FormHelper"><code class="xref php php-class docutils literal"><span class="pre">FormHelper</span></code></a>, and <a class="reference internal" href="core-libraries/helpers/session.html#SessionHelper" title="SessionHelper"><code class="xref php php-class docutils literal"><span class="pre">SessionHelper</span></code></a> are available by
default, as is the <a class="reference internal" href="core-libraries/components/sessions.html#SessionComponent" title="SessionComponent"><code class="xref php php-class docutils literal"><span class="pre">SessionComponent</span></code></a>. But if you choose to define
your own <a class="reference internal" href="#Controller::$helpers" title="Controller::$helpers"><code class="xref php php-attr docutils literal"><span class="pre">$helpers</span></code></a> array in <code class="docutils literal"><span class="pre">AppController</span></code>, make sure to include
<a class="reference internal" href="core-libraries/helpers/html.html#HtmlHelper" title="HtmlHelper"><code class="xref php php-class docutils literal"><span class="pre">HtmlHelper</span></code></a> and <a class="reference internal" href="core-libraries/helpers/form.html#FormHelper" title="FormHelper"><code class="xref php php-class docutils literal"><span class="pre">FormHelper</span></code></a> if you want them still available by default
in your Controllers. To learn more about these classes, be sure
to check out their respective sections later in this manual.</p>
<p>Let&#8217;s look at how to tell a CakePHP <a class="reference internal" href="#Controller" title="Controller"><code class="xref php php-class docutils literal"><span class="pre">Controller</span></code></a> that you plan to use
additional MVC classes:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RecipesController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$uses</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Recipe&#39;</span><span class="p">,</span> <span class="s1">&#39;User&#39;</span><span class="p">);</span>
    <span class="k">public</span> <span class="nv">$helpers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Js&#39;</span><span class="p">);</span>
    <span class="k">public</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;RequestHandler&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each of these variables are merged with their inherited values,
therefore it is not necessary (for example) to redeclare the
<a class="reference internal" href="core-libraries/helpers/form.html#FormHelper" title="FormHelper"><code class="xref php php-class docutils literal"><span class="pre">FormHelper</span></code></a>, or anything that is declared in your <code class="docutils literal"><span class="pre">AppController</span></code>.</p>
</dd></dl>

<dl class="attr">
<dt id="Controller::$components">
<em class="property">property </em><code class="descclassname">Controller::$</code><code class="descname">components</code><a class="headerlink" href="#Controller::$components" title="Permalink to this definition">¶</a></dt>
<dd><p>The components array allows you to set which <a class="reference internal" href="controllers/components.html"><span class="doc">Components</span></a>
a controller will use. Like <a class="reference internal" href="#Controller::$helpers" title="Controller::$helpers"><code class="xref php php-attr docutils literal"><span class="pre">$helpers</span></code></a> and
<a class="reference internal" href="#Controller::$uses" title="Controller::$uses"><code class="xref php php-attr docutils literal"><span class="pre">$uses</span></code></a> components in your controllers are
merged with those in <code class="docutils literal"><span class="pre">AppController</span></code>. As with
<a class="reference internal" href="#Controller::$helpers" title="Controller::$helpers"><code class="xref php php-attr docutils literal"><span class="pre">$helpers</span></code></a> you can pass settings
into <a class="reference internal" href="#Controller::$components" title="Controller::$components"><code class="xref php php-attr docutils literal"><span class="pre">$components</span></code></a>. See <a class="reference internal" href="controllers/components.html#configuring-components"><span class="std std-ref">Configuring Components</span></a> for more information.</p>
</dd></dl>

</div>
<div class="section" id="other-attributes">
<h3>Other Attributes<a class="headerlink" href="#other-attributes" title="Permalink to this headline">¶</a></h3>
<p>While you can check out the details for all controller attributes
in the <a class="reference external" href="http://api.cakephp.org">API</a>, there are other controller attributes that merit their
own sections in the manual.</p>
<dl class="attr">
<dt id="Controller::$cacheAction">
<em class="property">property </em><code class="descclassname">Controller::$</code><code class="descname">cacheAction</code><a class="headerlink" href="#Controller::$cacheAction" title="Permalink to this definition">¶</a></dt>
<dd><p>The cacheAction attribute is used to define the duration and other
information about full page caching. You can read more about
full page caching in the <a class="reference internal" href="core-libraries/helpers/cache.html#CacheHelper" title="CacheHelper"><code class="xref php php-class docutils literal"><span class="pre">CacheHelper</span></code></a> documentation.</p>
</dd></dl>

<dl class="attr">
<dt id="Controller::$paginate">
<em class="property">property </em><code class="descclassname">Controller::$</code><code class="descname">paginate</code><a class="headerlink" href="#Controller::$paginate" title="Permalink to this definition">¶</a></dt>
<dd><p>The paginate attribute is a deprecated compatibility property. Using it
loads and configures the <a class="reference internal" href="core-libraries/components/pagination.html#PaginatorComponent" title="PaginatorComponent"><code class="xref php php-class docutils literal"><span class="pre">PaginatorComponent</span></code></a>. It is recommended
that you update your code to use normal component settings:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="k">extends</span> <span class="nx">AppController</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$components</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;Paginator&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;Article&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;published&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="more-on-controllers">
<h2>More on controllers<a class="headerlink" href="#more-on-controllers" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="controllers/request-response.html">Request and Response objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers/request-response.html#cakerequest">CakeRequest</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers/request-response.html#cakeresponse">CakeResponse</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers/scaffolding.html">Scaffolding</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers/pages-controller.html">The Pages Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers/components.html">Components</a></li>
</ul>
</div>
</div>
</div>


			</div>
		</div>

		
		<div class="col-md-3 col-md-pull-9 pull-off hidden-xs hidden-sm" lang="en">
			<aside class="sidebar">
				<div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="cakephp-overview.html">CakePHP Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Controllers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="controllers/request-response.html">Request and Response objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="controllers/request-response.html#cakerequest">CakeRequest</a></li>
<li class="toctree-l2"><a class="reference internal" href="controllers/request-response.html#cakeresponse">CakeResponse</a></li>
<li class="toctree-l2"><a class="reference internal" href="controllers/scaffolding.html">Scaffolding</a></li>
<li class="toctree-l2"><a class="reference internal" href="controllers/pages-controller.html">The Pages Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="controllers/components.html">Components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views.html">Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries.html">Core Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="console-and-shells.html">Shells, Tasks &amp; Console Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices.html">Appendices</a></li>
</ul>

</div>

				</div>
			</aside>
			<aside class="sidebar">
				<div class="mb30 row">
				</div>
			</aside>
		</div>
	</div>
</div>

<section id="socials" class="back-3">
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-4  social text-center">
				<div class="col-sm-3 col-xs-3">
					<div id="fb-root"></div>
						<script>(function(d, s, id) {
						  var js, fjs = d.getElementsByTagName(s)[0];
						  if (d.getElementById(id)) return;
						  js = d.createElement(s); js.id = id;
						  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
						  fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));
						</script>
						<div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
					<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
				</div>
			</div>

			<div class="col-xs-12 col-sm-12 col-md-8 social-footer text-center ">
				<a href="#">发现翻译错误? 请在下面留言</a>
				<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">我要加入翻译</a>
				<a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
				<a href="http://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
				<a href="http://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
				<a href="http://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
				<a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
				<a href="http://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
				<a href="http://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
				<a href="http://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
			</div>
		</div>
	</div>
</section>

<footer id="footer" class="footer-wrapper">
	<div class="container">

		<div class="row col-p30">
			<div class="col-sm-12 col-md-3">
				<div class="footer-widget t-footer">
					<div class="col-md-12">
						<a href="https://www.openhub.net/p/cakephp">
							<img src="_static/open-hub.png">
						</a>
						<div class="mt10">
							<a href="https://www.rackspace.com/">
								<img src="_static/rackspace.png">
							</a>
						</div>
					</div>
				</div>
			</div>

			<div class="col-sm-12 col-md-9">
				<div class="col-md-3 col-sm-6 business-solution">
					<ul class="footer-menu">
						<li class="menu-title">
	<a href="http://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
	<a href="http://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 text-center mt30">
				<p class="copyright">
							&copy; Copyright 2016, Cake Software Foundation, Inc.
						Last updated on Aug 03, 2016.
						Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
				</p>
			</div>
		</div>
	</div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-743287-3']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
  </body>
</html>