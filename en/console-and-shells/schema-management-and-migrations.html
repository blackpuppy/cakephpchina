

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Schema management and migrations" lang="en" name="title" />
<meta content="schema files,schema management,schema objects,database schema,table statements,database changes,migrations,versioning,snapshots,sql,snapshot,shell,config,functionality,choices,models,php files,php file,directory,running" lang="en" name="keywords" />

    <title>Schema management and migrations</title>
    <link href="../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../_static/app.js"></script>

    <link rel="alternate" hreflang="pt" href="../../pt/console-and-shells/schema-management-and-migrations.html" /><link rel="alternate" hreflang="es" href="../../es/console-and-shells/schema-management-and-migrations.html" /><link rel="alternate" hreflang="ja" href="../../ja/console-and-shells/schema-management-and-migrations.html" /><link rel="alternate" hreflang="fr" href="../../fr/console-and-shells/schema-management-and-migrations.html" /><link rel="alternate" hreflang="zh" href="../../zh/console-and-shells/schema-management-and-migrations.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 2.x documentation" href="../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 2.x documentation" href="../index.html" />
    <link rel="up" title="Shells, Tasks &amp; Console Tools" href="../console-and-shells.html" />
    <link rel="next" title="I18N shell" href="i18n-shell.html" />
    <link rel="prev" title="Code Generation with Bake" href="code-generation-with-bake.html" />

    <script type="text/javascript">
    window.lang = "en";
    </script>
  </head>
  <body>

<div id="container">
	
	<header class="nav-down">
		<div class="container-fluid hidden-xs hidden-sm">
			<div class="row">
				<div class="col-sm-3 col-md-3">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-9 col-md-9">
					<nav class="navbar-right">
						<ul class="menu">
							<li class="first">
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
								<ul class="submenu">
									
<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
								</ul>
							</li>

							<li><a href="http://cakephp.org/business-solutions">Business Solutions</a></li>
							<li><a href="http://cakephp.org/showcase">Showcase</a></li>

							<li>
								<a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
								<div class="megamenu full">
									<div class="row">
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
											</ul>
										</div>
										<div class="col-6 pl30">
											<ul class="megamenu-list">
												
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
											</ul>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>

		
		<div class="container-fluid hidden-md hidden-lg">
			<div class="row">
				<div class="col-sm-6 col-xs-6">
					<a class="logo-cake" href="http://cakephp.org">
						<img src="../_static/logo-cake.png" alt="CakePHP" />
					</a>
				</div>

				<div class="col-sm-6 col-xs-6">
					<div class="navbar-right">
						<button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
							<i class="fa fa-bars toggle-modal"></i>
						</button>
					</div>
					<div id="wrap">
						<form class="search" action="../search.html" method="get">
							<input name="q" type="search" placeholder="What are you looking for?">
							<input id="search_submit" value="Search" type="submit">
						</form>
					</div>
				</div>
			</div>
		</div>

		
		<section id="nav-cook" class="hidden-xs hidden-sm">
			<div class="container-fluid ">
				<div class="row ">
					<div class="col-md-12 back-book">
						<div class="col-md-4 col-md-offset-1 text-center t-cook-nav p0 hidden-sm hidden-xs">
							<h2>
								<a href="../contents.html">
									<span class="glyph_range icon-submenu icon-submenu-cook">B</span>
									CakePHP 2.x <strong>Cookbook</strong>
								</a>
							</h2>
						</div>

						<div class="col-md-4 hidden-sm">
							<form class="search" action="../search.html" method="get">
								<input type="hidden" name="check_keywords" value="yes" />
								<input type="hidden" name="area" value="default" />

								<div class="col-md-10 p0">
									<input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
								</div>
								<div class="col-md-2 p0 search-cook">
									<button type="submit">
										<span class="glyph_range icon-submenu icon-submenu-cook">A</span>
									</button>
								</div>
							</form>
						</div>

						
						<div class="col-md-3">
							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Language:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
													role="button" aria-haspopup="true" aria-expanded="false" href="#">
														en
														<i class="fa fa-menu-en fa-chevron-down"></i>
													</a>
											<ul class="dropdown-menu">
											
												<li></li>
											
												<li><a href="../../pt/console-and-shells/schema-management-and-migrations.html">pt</a></li>
											
												<li><a href="../../es/console-and-shells/schema-management-and-migrations.html">es</a></li>
											
												<li><a href="../../ja/console-and-shells/schema-management-and-migrations.html">ja</a></li>
											
												<li><a href="../../fr/console-and-shells/schema-management-and-migrations.html">fr</a></li>
											
												<li><a href="../../zh/console-and-shells/schema-management-and-migrations.html">zh</a></li>
											
											</ul>
										</li>
									</ul>
								</div>
							</div>

							<div class="col-md-6 p0">
								<div class="col-md-7 t-language p0">
									<h6>Version:</h6>
								</div>
								<div class="col-md-5 p0">
									<ul class="nav navbar-nav">
										<li class="dropdown">
											<a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">2.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
											<ul class="dropdown-menu">
												<li><a href="http://book.cakephp.org/3.0/en">3.x Book</a></li>
												<li><a href="http://book.cakephp.org/2.0/en">2.x Book</a></li>
												<li><a href="http://book.cakephp.org/1.3/en/">1.3 Book</a></li>
												<li><a href="http://book.cakephp.org/1.2/en/">1.2 Book</a></li>
												<li><a href="http://book.cakephp.org/1.1/en">1.1 Book</a></li>
											</ul>
										</li>
									</ul>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</section>
	</header>

	
	<section class="nav-btn visible-sm visible-xs">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
				</div>

				<div class="col-sm-6 col-xs-6 text-center">
					<button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
				</div>
			</div>
		</div>
	</section>

	
	<div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title-cookbook" id="modal-header"></h4>
				</div>
				<div class="modal-body"></div>
			</div>
		</div>
	</div>

<div class="container page-container"><div id="improve-slideout">
		<i class="fa fa-pencil icon-improve"></i>
		<a href="https://github.com/cakephp/docs/edit/master/en/console-and-shells/schema-management-and-migrations.rst" target="_blank">
			<div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
		</a>
	</div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

	
	<div class="row">
		<div class="col-sm-12 col-md-9 col-md-push-3 space-left push-off"><div class="page-contents col-sm-5">
				<h3>Page Contents</h3>
				<ul>
<li><a class="reference internal" href="#">Schema management and migrations</a><ul>
<li><a class="reference internal" href="#generating-and-using-schema-files">Generating and using Schema files</a></li>
<li><a class="reference internal" href="#cakeschema-callbacks">CakeSchema callbacks</a></li>
<li><a class="reference internal" href="#writing-cakephp-schema-by-hand">Writing CakePHP Schema by Hand</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#columns">Columns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#table-key-indexes">Table key <cite>indexes</cite></a></li>
<li><a class="reference internal" href="#table-key-tableparameters">Table key <cite>tableParameters</cite></a></li>
<li><a class="reference internal" href="#migrations-with-cakephp-schema-shell">Migrations with CakePHP schema shell</a></li>
<li><a class="reference internal" href="#workflow-examples">Workflow examples</a><ul>
<li><a class="reference internal" href="#create-schema-and-commit">Create schema and commit</a></li>
<li><a class="reference internal" href="#getting-the-last-changes">Getting the last changes</a></li>
<li><a class="reference internal" href="#rolling-back">Rolling back</a></li>
</ul>
</li>
</ul>
</li>
</ul>

			</div><div class="document-body">
			
  <div class="section" id="schema-management-and-migrations">
<h1>Schema management and migrations<a class="headerlink" href="#schema-management-and-migrations" title="Permalink to this headline">¶</a></h1>
<p>The SchemaShell provides a functionality to create schema objects,
schema sql dumps as well as create snapshots and restore database
snapshots.</p>
<div class="section" id="generating-and-using-schema-files">
<h2>Generating and using Schema files<a class="headerlink" href="#generating-and-using-schema-files" title="Permalink to this headline">¶</a></h2>
<p>A generated schema file allows you to easily transport a database
agnostic schema. You can generate a schema file of your database
using:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="nx">Console</span><span class="o">/</span><span class="nx">cake</span> <span class="nx">schema</span> <span class="nx">generate</span>
</pre></div>
</div>
<p>This will generate a schema.php file in your <code class="docutils literal"><span class="pre">app/Config/Schema</span></code>
directory.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The schema shell will only process tables for which there are
models defined. To force the schema shell to process all the
tables, you must add the <code class="docutils literal"><span class="pre">-f</span></code> option in the command line.</p>
</div>
<p>To later rebuild the database schema from your previously made
schema.php file run:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="nx">Console</span><span class="o">/</span><span class="nx">cake</span> <span class="nx">schema</span> <span class="nx">create</span>
</pre></div>
</div>
<p>This will drop and create the tables based on the contents of the
schema.php.</p>
<p>Schema files can also be used to generate sql dump files. To
generate a sql file containing the <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> statements,
run:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="nx">Console</span><span class="o">/</span><span class="nx">cake</span> <span class="nx">schema</span> <span class="nx">dump</span> <span class="o">--</span><span class="nx">write</span> <span class="nx">filename</span><span class="o">.</span><span class="nx">sql</span>
</pre></div>
</div>
<p>Where filename.sql is the desired filename for the sql dump. If you
omit filename.sql the sql dump will be output to the console but
not written to a file.</p>
</div>
<div class="section" id="cakeschema-callbacks">
<h2>CakeSchema callbacks<a class="headerlink" href="#cakeschema-callbacks" title="Permalink to this headline">¶</a></h2>
<p>After generating a schema you might want to insert data on some
tables to get your app started. This can be achieved through
CakeSchema callbacks. Every schema file is generated with a
<code class="docutils literal"><span class="pre">before($event</span> <span class="pre">=</span> <span class="pre">array())</span></code> and a <code class="docutils literal"><span class="pre">after($event</span> <span class="pre">=</span> <span class="pre">array())</span></code> method.</p>
<p>The <code class="docutils literal"><span class="pre">$event</span></code> param holds an array with two keys. One to tell if a
table is being dropped or created and another for errors. Examples:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;drop&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="s1">&#39;errors&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">)</span>
<span class="k">array</span><span class="p">(</span><span class="s1">&#39;create&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">,</span> <span class="s1">&#39;errors&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">)</span>
</pre></div>
</div>
<p>Adding data to a posts table for example would like this:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;Post&#39;</span><span class="p">,</span> <span class="s1">&#39;Model&#39;</span><span class="p">);</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">after</span><span class="p">(</span><span class="nv">$event</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$event</span><span class="p">[</span><span class="s1">&#39;create&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nv">$event</span><span class="p">[</span><span class="s1">&#39;create&#39;</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">case</span> <span class="s1">&#39;posts&#39;</span><span class="o">:</span>
                <span class="nx">App</span><span class="o">::</span><span class="na">uses</span><span class="p">(</span><span class="s1">&#39;ClassRegistry&#39;</span><span class="p">,</span> <span class="s1">&#39;Utility&#39;</span><span class="p">);</span>
                <span class="nv">$post</span> <span class="o">=</span> <span class="nx">ClassRegistry</span><span class="o">::</span><span class="na">init</span><span class="p">(</span><span class="s1">&#39;Post&#39;</span><span class="p">);</span>
                <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">();</span>
                <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span>
                    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Post&#39;</span> <span class="o">=&gt;</span>
                        <span class="k">array</span><span class="p">(</span><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;CakePHP Schema Files&#39;</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">before()</span></code> and <code class="docutils literal"><span class="pre">after()</span></code> callbacks run each time a table is created
or dropped on the current schema.</p>
<p>When inserting data to more than one table you&#8217;ll need to flush the database
cache after each table is created. Cache can be disable by setting
<code class="docutils literal"><span class="pre">$db-&gt;cacheSources</span> <span class="pre">=</span> <span class="pre">false</span></code> in the before action().</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$connection</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">before</span><span class="p">(</span><span class="nv">$event</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span> <span class="p">{</span>
    <span class="nv">$db</span> <span class="o">=</span> <span class="nx">ConnectionManager</span><span class="o">::</span><span class="na">getDataSource</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">connection</span><span class="p">);</span>
    <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">cacheSources</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you use models in your callbacks make sure to initialize them with the
correct datasource, lest they fallback to their default datasources:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">before</span><span class="p">(</span><span class="nv">$event</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span> <span class="p">{</span>
    <span class="nv">$articles</span> <span class="o">=</span> <span class="nx">ClassRegistry</span><span class="o">::</span><span class="na">init</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;ds&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">connection</span>
    <span class="p">));</span>
    <span class="c1">// Do things with articles.</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-cakephp-schema-by-hand">
<h2>Writing CakePHP Schema by Hand<a class="headerlink" href="#writing-cakephp-schema-by-hand" title="Permalink to this headline">¶</a></h2>
<p>The CakeSchema class is the base class for all database schemas. Each schema
class is able to generate a set of tables.  The schema shell console class
<code class="docutils literal"><span class="pre">SchemaShell</span></code> in the <code class="docutils literal"><span class="pre">lib/Cake/Console/Command</span></code> directory interprets command
line, and base schema class can read from the database, or generate the database
table.</p>
<p>CakeSchema can now locate, read and write schema files to plugins. The
SchemaShell also exposes this functionality.</p>
<p>CakeSchema also supports <code class="docutils literal"><span class="pre">tableParameters</span></code>. Table Parameters are non column
specific table information such as collation, charset, comments, and table
engine type. Each Dbo implements the tableParameters they support.</p>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>Here is a full example from the acl class</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * ACO - Access Control Object - Something that is wanted</span>
<span class="sd"> */</span>
    <span class="k">public</span> <span class="nv">$acos</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>
            <span class="s1">&#39;null&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
            <span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span>
            <span class="s1">&#39;length&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s1">&#39;key&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;primary&#39;</span>
        <span class="p">),</span>
        <span class="s1">&#39;parent_id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>
            <span class="s1">&#39;null&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
            <span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span>
            <span class="s1">&#39;length&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span>
        <span class="p">),</span>
        <span class="s1">&#39;model&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;null&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">),</span>
        <span class="s1">&#39;foreign_key&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>
            <span class="s1">&#39;null&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
            <span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span>
            <span class="s1">&#39;length&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span>
        <span class="p">),</span>
        <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;null&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">),</span>
        <span class="s1">&#39;lft&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>
            <span class="s1">&#39;null&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
            <span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span>
            <span class="s1">&#39;length&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span>
        <span class="p">),</span>
        <span class="s1">&#39;rght&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>
            <span class="s1">&#39;null&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
            <span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span>
            <span class="s1">&#39;length&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span>
        <span class="p">),</span>
        <span class="s1">&#39;indexes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;PRIMARY&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;column&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;unique&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">))</span>
    <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="columns">
<h3>Columns<a class="headerlink" href="#columns" title="Permalink to this headline">¶</a></h3>
<p>Each column is encoded as a key value associative array.
The field name is the key of the field, the value is another array with some of
the following attributes.</p>
<p>Example column:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>
    <span class="s1">&#39;null&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span>
    <span class="s1">&#39;length&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s1">&#39;key&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;primary&#39;</span>
 <span class="p">),</span>
</pre></div>
</div>
<dl class="docutils">
<dt>key</dt>
<dd>The <code class="docutils literal"><span class="pre">primary</span></code> key defines the primary key index.</dd>
<dt>null</dt>
<dd>Is the field nullable?</dd>
<dt>default</dt>
<dd>What is the default value of the field?</dd>
<dt>limit</dt>
<dd>The limit of the type of the field.</dd>
<dt>length</dt>
<dd>What is the length of the field?</dd>
<dt>type</dt>
<dd><p class="first">One of the following types</p>
<ul class="last simple">
<li>integer</li>
<li>date</li>
<li>time</li>
<li>datetime</li>
<li>timestamp</li>
<li>boolean</li>
<li>biginteger</li>
<li>float</li>
<li>string</li>
<li>text</li>
<li>binary</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="table-key-indexes">
<h2>Table key <cite>indexes</cite><a class="headerlink" href="#table-key-indexes" title="Permalink to this headline">¶</a></h2>
<p>The key name <cite>indexes</cite> is put in the table array instead of a field name.</p>
<dl class="docutils">
<dt>column</dt>
<dd><p class="first">This is either a single column name or an array of columns.</p>
<p>e.g. Single</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="s1">&#39;indexes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;PRIMARY&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;column&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;unique&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>e.g. Multiple</p>
<div class="last highlight-phpinline"><div class="highlight"><pre><span></span><span class="s1">&#39;indexes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;AB_KEY&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;column&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;a_id&#39;</span><span class="p">,</span>
            <span class="s1">&#39;b_id&#39;</span>
        <span class="p">),</span>
        <span class="s1">&#39;unique&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>unique</dt>
<dd>If the index is unique, set this to 1, otherwise 0.</dd>
</dl>
</div>
<div class="section" id="table-key-tableparameters">
<h2>Table key <cite>tableParameters</cite><a class="headerlink" href="#table-key-tableparameters" title="Permalink to this headline">¶</a></h2>
<p>tableParameters are supported only in MySQL.</p>
<p>You can use tableParameters to set a variety of MySQL specific settings.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">engine</span></code> Control the storage engine used for your tables.</li>
<li><code class="docutils literal"><span class="pre">charset</span></code> Control the character set used for tables.</li>
<li><code class="docutils literal"><span class="pre">encoding</span></code> Control the encoding used for tables.</li>
</ul>
<p>In addition to tableParameters MySQL dbo&#8217;s implement
<code class="docutils literal"><span class="pre">fieldParameters</span></code>. <code class="docutils literal"><span class="pre">fieldParameters</span></code> allow you to control MySQL
specific settings per column.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">charset</span></code> Set the character set used for a column</li>
<li><code class="docutils literal"><span class="pre">encoding</span></code> Set the encoding used for a column</li>
</ul>
<p>See below for examples on how to use table and field parameters in
your schema files.</p>
<p><strong>Using tableParameters in schema files</strong></p>
<p>You use <code class="docutils literal"><span class="pre">tableParameters</span></code> just as you would any other key in a
schema file. Much like <code class="docutils literal"><span class="pre">indexes</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">var</span> <span class="nv">$comments</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>
        <span class="s1">&#39;null&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
        <span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;key&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;primary&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;post_id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;null&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">),</span>
    <span class="s1">&#39;comment&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;text&#39;</span><span class="p">),</span>
    <span class="s1">&#39;indexes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;PRIMARY&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;column&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;unique&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">),</span>
        <span class="s1">&#39;post_id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;column&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post_id&#39;</span><span class="p">),</span>
    <span class="p">),</span>
    <span class="s1">&#39;tableParameters&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;engine&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;InnoDB&#39;</span><span class="p">,</span>
        <span class="s1">&#39;charset&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;latin1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;collate&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;latin1_general_ci&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>is an example of a table using <code class="docutils literal"><span class="pre">tableParameters</span></code> to set some
database specific settings. If you use a schema file that contains
options and features your database does not implement, those
options will be ignored.</p>
</div>
<div class="section" id="migrations-with-cakephp-schema-shell">
<h2>Migrations with CakePHP schema shell<a class="headerlink" href="#migrations-with-cakephp-schema-shell" title="Permalink to this headline">¶</a></h2>
<p>Migrations allow for versioning of your database schema, so that as
you develop features you have an easy and database agnostic way to
distribute database changes. Migrations are achieved through either
SCM controlled schema files or schema snapshots. Versioning a
schema file with the schema shell is quite easy. If you already
have a schema file created running:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="nx">Console</span><span class="o">/</span><span class="nx">cake</span> <span class="nx">schema</span> <span class="nx">generate</span>
</pre></div>
</div>
<p>Will bring up the following choices:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Generating</span> <span class="nx">Schema</span><span class="o">...</span>
<span class="nx">Schema</span> <span class="nb">file</span> <span class="nx">exists</span><span class="o">.</span>
 <span class="p">[</span><span class="nx">O</span><span class="p">]</span><span class="nx">verwrite</span>
 <span class="p">[</span><span class="nx">S</span><span class="p">]</span><span class="nx">napshot</span>
 <span class="p">[</span><span class="nx">Q</span><span class="p">]</span><span class="nx">uit</span>
<span class="nx">Would</span> <span class="nx">you</span> <span class="nx">like</span> <span class="nx">to</span> <span class="k">do</span><span class="o">?</span> <span class="p">(</span><span class="nx">o</span><span class="o">/</span><span class="nx">s</span><span class="o">/</span><span class="nx">q</span><span class="p">)</span>
</pre></div>
</div>
<p>Choosing [s] (snapshot) will create an incremented schema.php. So
if you have schema.php, it will create schema_2.php and so on. You
can then restore to any of these schema files at any time by
running:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="nx">cake</span> <span class="nx">schema</span> <span class="nx">update</span> <span class="o">-</span><span class="nx">s</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Where 2 is the snapshot number you wish to run. The schema shell
will prompt you to confirm you wish to perform the <code class="docutils literal"><span class="pre">ALTER</span></code>
statements that represent the difference between the existing
database the currently executing schema file.</p>
<p>You can perform a dry run by adding a <code class="docutils literal"><span class="pre">--dry</span></code> to your command.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please note that schema generation in 2.x does not handle foreign key
constraints.</p>
</div>
</div>
<div class="section" id="workflow-examples">
<h2>Workflow examples<a class="headerlink" href="#workflow-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-schema-and-commit">
<h3>Create schema and commit<a class="headerlink" href="#create-schema-and-commit" title="Permalink to this headline">¶</a></h3>
<p>On a project which use versioning, the usage of cake schema
would follow these steps:</p>
<ol class="arabic">
<li><p class="first">Create or modify your database tables</p>
</li>
<li><p class="first">Execute cake schema to export a full description of your
database</p>
</li>
<li><p class="first">Commit the created or updated schema.php file:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="c1"># once your database has been updated</span>
<span class="err">$</span> <span class="nx">Console</span><span class="o">/</span><span class="nx">cake</span> <span class="nx">schema</span> <span class="nx">generate</span>
<span class="err">$</span> <span class="nx">git</span> <span class="nx">commit</span> <span class="o">-</span><span class="nx">a</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the project is not versioned, managing schemas would
be done through snapshots. (see previous section to
manage snapshots)</p>
</div>
</div>
<div class="section" id="getting-the-last-changes">
<h3>Getting the last changes<a class="headerlink" href="#getting-the-last-changes" title="Permalink to this headline">¶</a></h3>
<p>When you pull the last changes of your repository, and discover
changes in the structure of the database (possibly because
of an error message saying you are missing a table):</p>
<ol class="arabic">
<li><p class="first">Execute cake schema to update your database:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="nx">git</span> <span class="nx">pull</span>
<span class="err">$</span> <span class="nx">Console</span><span class="o">/</span><span class="nx">cake</span> <span class="nx">schema</span> <span class="nx">create</span>
<span class="err">$</span> <span class="nx">Console</span><span class="o">/</span><span class="nx">cake</span> <span class="nx">schema</span> <span class="nx">update</span>
</pre></div>
</div>
</li>
</ol>
<p>All these operations can be done in dry-run mode.</p>
</div>
<div class="section" id="rolling-back">
<h3>Rolling back<a class="headerlink" href="#rolling-back" title="Permalink to this headline">¶</a></h3>
<p>If at some point you need to revert and get back to the state in which you were
before updating your database, you should be informed that this is currently not
supported by cake schema.</p>
<p>More specifically, you can&#8217;t automatically drop your tables once they have
been created.</p>
<p>Using <code class="docutils literal"><span class="pre">update</span></code> will, on the contrary, drop any field which differ from the
schema file:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="err">$</span> <span class="nx">git</span> <span class="nx">revert</span> <span class="nx">HEAD</span>
<span class="err">$</span> <span class="nx">Console</span><span class="o">/</span><span class="nx">cake</span> <span class="nx">schema</span> <span class="nx">update</span>
</pre></div>
</div>
<p>Will bring up the following choices:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">The</span> <span class="nx">following</span> <span class="nx">statements</span> <span class="nx">will</span> <span class="nx">run</span><span class="o">.</span>
<span class="nx">ALTER</span> <span class="nx">TABLE</span> <span class="sb">`roles`</span>
<span class="nx">DROP</span> <span class="sb">`position`</span><span class="p">;</span>
<span class="nx">Are</span> <span class="nx">you</span> <span class="nx">sure</span> <span class="nx">you</span> <span class="nx">want</span> <span class="nx">to</span> <span class="nx">alter</span> <span class="nx">the</span> <span class="nx">tables</span><span class="o">?</span> <span class="p">(</span><span class="nx">y</span><span class="o">/</span><span class="nx">n</span><span class="p">)</span>
<span class="p">[</span><span class="nx">n</span><span class="p">]</span> <span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>


			</div>
		</div>

		
		<div class="col-md-3 col-md-pull-9 pull-off hidden-xs hidden-sm" lang="en">
			<aside class="sidebar">
				<div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cakephp-overview.html">CakePHP Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries.html">Core Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../console-and-shells.html">Shells, Tasks &amp; Console Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="helpers.html">Shell Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="cron-jobs.html">Running Shells as cronjobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="completion-shell.html">Completion Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="code-generation-with-bake.html">Code Generation with Bake</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Schema management and migrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n-shell.html">I18N shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="acl-shell.html">ACL Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="testsuite-shell.html">Test shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade-shell.html">Upgrade shell</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Appendices</a></li>
</ul>

</div>

				</div>
			</aside>
			<aside class="sidebar">
				<div class="mb30 row">
				</div>
			</aside>
		</div>
	</div>
</div>

<section id="socials" class="back-3">
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-4  social text-center">
				<div class="col-sm-3 col-xs-3">
					<div id="fb-root"></div>
						<script>(function(d, s, id) {
						  var js, fjs = d.getElementsByTagName(s)[0];
						  if (d.getElementById(id)) return;
						  js = d.createElement(s); js.id = id;
						  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
						  fjs.parentNode.insertBefore(js, fjs);
						}(document, 'script', 'facebook-jssdk'));
						</script>
						<div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
				</div>

				<div class="col-sm-3 col-xs-3">
					<a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
					<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
				</div>
			</div>

			<div class="col-xs-12 col-sm-12 col-md-8 social-footer text-center ">
				<a href="#">发现翻译错误? 请在下面留言</a>
				<a href="https://github.com/blackpuppy/docs/wiki" target="_blank">我要加入翻译</a>
				<a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
				<a href="http://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
				<a href="http://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
				<a href="http://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
				<a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
				<a href="http://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
				<a href="http://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
				<a href="http://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
			</div>
		</div>
	</div>
</section>

<footer id="footer" class="footer-wrapper">
	<div class="container">

		<div class="row col-p30">
			<div class="col-sm-12 col-md-3">
				<div class="footer-widget t-footer">
					<div class="col-md-12">
						<a href="https://www.openhub.net/p/cakephp">
							<img src="../_static/open-hub.png">
						</a>
						<div class="mt10">
							<a href="https://www.rackspace.com/">
								<img src="../_static/rackspace.png">
							</a>
						</div>
					</div>
				</div>
			</div>

			<div class="col-sm-12 col-md-9">
				<div class="col-md-3 col-sm-6 business-solution">
					<ul class="footer-menu">
						<li class="menu-title">
	<a href="http://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
	<a href="http://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="http://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>CookBook</a></li>
<li><a href="http://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="http://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="http://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="http://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="http://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="http://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="http://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="http://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="http://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="http://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="http://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
					</ul>
				</div>

				<div class="col-md-3 col-sm-6">
					<ul class="footer-menu">
						
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="http://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="http://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="http://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="http://cakedc.com"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 text-center mt30">
				<p class="copyright">
							&copy; Copyright 2016, Cake Software Foundation, Inc.
						Last updated on Aug 04, 2016.
						Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
				</p>
			</div>
		</div>
	</div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-743287-3']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>

<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F201cbc61deaf9f7ffb521fb23e83db40' type='text/javascript'%3E%3C/script%3E"));
</script>

<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"cakephpchina"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
  </body>
</html>